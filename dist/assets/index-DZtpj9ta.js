var ps=Object.defineProperty;var ms=(et,_e,tt)=>_e in et?ps(et,_e,{enumerable:!0,configurable:!0,writable:!0,value:tt}):et[_e]=tt;var Qt=(et,_e,tt)=>ms(et,typeof _e!="symbol"?_e+"":_e,tt);function _mergeNamespaces(et,_e){for(var tt=0;tt<_e.length;tt++){const nt=_e[tt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const st in nt)if(st!=="default"&&!(st in et)){const ot=Object.getOwnPropertyDescriptor(nt,st);ot&&Object.defineProperty(et,st,ot.get?ot:{enumerable:!0,get:()=>nt[st]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const st of document.querySelectorAll('link[rel="modulepreload"]'))nt(st);new MutationObserver(st=>{for(const ot of st)if(ot.type==="childList")for(const at of ot.addedNodes)at.tagName==="LINK"&&at.rel==="modulepreload"&&nt(at)}).observe(document,{childList:!0,subtree:!0});function tt(st){const ot={};return st.integrity&&(ot.integrity=st.integrity),st.referrerPolicy&&(ot.referrerPolicy=st.referrerPolicy),st.crossOrigin==="use-credentials"?ot.credentials="include":st.crossOrigin==="anonymous"?ot.credentials="omit":ot.credentials="same-origin",ot}function nt(st){if(st.ep)return;st.ep=!0;const ot=tt(st);fetch(st.href,ot)}})();function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}function getAugmentedNamespace(et){if(et.__esModule)return et;var _e=et.default;if(typeof _e=="function"){var tt=function nt(){return this instanceof nt?Reflect.construct(_e,arguments,this.constructor):_e.apply(this,arguments)};tt.prototype=_e.prototype}else tt={};return Object.defineProperty(tt,"__esModule",{value:!0}),Object.keys(et).forEach(function(nt){var st=Object.getOwnPropertyDescriptor(et,nt);Object.defineProperty(tt,nt,st.get?st:{enumerable:!0,get:function(){return et[nt]}})}),tt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(et){return et===null||typeof et!="object"?null:(et=z$1&&et[z$1]||et["@@iterator"],typeof et=="function"?et:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$1(et,_e,tt){this.props=et,this.context=_e,this.refs=D$2,this.updater=tt||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(et,_e){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,_e,"setState")};E$1.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(et,_e,tt){this.props=et,this.context=_e,this.refs=D$2,this.updater=tt||B$1}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,_e,tt){var nt,st={},ot=null,at=null;if(_e!=null)for(nt in _e.ref!==void 0&&(at=_e.ref),_e.key!==void 0&&(ot=""+_e.key),_e)J$1.call(_e,nt)&&!L$1.hasOwnProperty(nt)&&(st[nt]=_e[nt]);var dt=arguments.length-2;if(dt===1)st.children=tt;else if(1<dt){for(var ft=Array(dt),ht=0;ht<dt;ht++)ft[ht]=arguments[ht+2];st.children=ft}if(et&&et.defaultProps)for(nt in dt=et.defaultProps,dt)st[nt]===void 0&&(st[nt]=dt[nt]);return{$$typeof:l$2,type:et,key:ot,ref:at,props:st,_owner:K$1.current}}function N$1(et,_e){return{$$typeof:l$2,type:et.type,key:_e,ref:et.ref,props:et.props,_owner:et._owner}}function O$2(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$2}function escape$1(et){var _e={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(tt){return _e[tt]})}var P$2=/\/+/g;function Q$2(et,_e){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):_e.toString(36)}function R$1(et,_e,tt,nt,st){var ot=typeof et;(ot==="undefined"||ot==="boolean")&&(et=null);var at=!1;if(et===null)at=!0;else switch(ot){case"string":case"number":at=!0;break;case"object":switch(et.$$typeof){case l$2:case n$3:at=!0}}if(at)return at=et,st=st(at),et=nt===""?"."+Q$2(at,0):nt,I$2(st)?(tt="",et!=null&&(tt=et.replace(P$2,"$&/")+"/"),R$1(st,_e,tt,"",function(ht){return ht})):st!=null&&(O$2(st)&&(st=N$1(st,tt+(!st.key||at&&at.key===st.key?"":(""+st.key).replace(P$2,"$&/")+"/")+et)),_e.push(st)),1;if(at=0,nt=nt===""?".":nt+":",I$2(et))for(var dt=0;dt<et.length;dt++){ot=et[dt];var ft=nt+Q$2(ot,dt);at+=R$1(ot,_e,tt,ft,st)}else if(ft=A$2(et),typeof ft=="function")for(et=ft.call(et),dt=0;!(ot=et.next()).done;)ot=ot.value,ft=nt+Q$2(ot,dt++),at+=R$1(ot,_e,tt,ft,st);else if(ot==="object")throw _e=String(et),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return at}function S$2(et,_e,tt){if(et==null)return et;var nt=[],st=0;return R$1(et,nt,"","",function(ot){return _e.call(tt,ot,st++)}),nt}function T$2(et){if(et._status===-1){var _e=et._result;_e=_e(),_e.then(function(tt){(et._status===0||et._status===-1)&&(et._status=1,et._result=tt)},function(tt){(et._status===0||et._status===-1)&&(et._status=2,et._result=tt)}),et._status===-1&&(et._status=0,et._result=_e)}if(et._status===1)return et._result.default;throw et._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(et,_e,tt){S$2(et,function(){_e.apply(this,arguments)},tt)},count:function(et){var _e=0;return S$2(et,function(){_e++}),_e},toArray:function(et){return S$2(et,function(_e){return _e})||[]},only:function(et){if(!O$2(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(et,_e,tt){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var nt=C$1({},et.props),st=et.key,ot=et.ref,at=et._owner;if(_e!=null){if(_e.ref!==void 0&&(ot=_e.ref,at=K$1.current),_e.key!==void 0&&(st=""+_e.key),et.type&&et.type.defaultProps)var dt=et.type.defaultProps;for(ft in _e)J$1.call(_e,ft)&&!L$1.hasOwnProperty(ft)&&(nt[ft]=_e[ft]===void 0&&dt!==void 0?dt[ft]:_e[ft])}var ft=arguments.length-2;if(ft===1)nt.children=tt;else if(1<ft){dt=Array(ft);for(var ht=0;ht<ft;ht++)dt[ht]=arguments[ht+2];nt.children=dt}return{$$typeof:l$2,type:et.type,key:st,ref:ot,props:nt,_owner:at}};react_production_min.createContext=function(et){return et={$$typeof:u$2,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$1,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var _e=M$2.bind(null,et);return _e.type=et,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$2,render:et}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(et){return{$$typeof:y,_payload:{_status:-1,_result:et},_init:T$2}};react_production_min.memo=function(et,_e){return{$$typeof:x,type:et,compare:_e===void 0?null:_e}};react_production_min.startTransition=function(et){var _e=V$2.transition;V$2.transition={};try{et()}finally{V$2.transition=_e}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(et,_e){return U$2.current.useCallback(et,_e)};react_production_min.useContext=function(et){return U$2.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$2.current.useDeferredValue(et)};react_production_min.useEffect=function(et,_e){return U$2.current.useEffect(et,_e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(et,_e,tt){return U$2.current.useImperativeHandle(et,_e,tt)};react_production_min.useInsertionEffect=function(et,_e){return U$2.current.useInsertionEffect(et,_e)};react_production_min.useLayoutEffect=function(et,_e){return U$2.current.useLayoutEffect(et,_e)};react_production_min.useMemo=function(et,_e){return U$2.current.useMemo(et,_e)};react_production_min.useReducer=function(et,_e,tt){return U$2.current.useReducer(et,_e,tt)};react_production_min.useRef=function(et){return U$2.current.useRef(et)};react_production_min.useState=function(et){return U$2.current.useState(et)};react_production_min.useSyncExternalStore=function(et,_e,tt){return U$2.current.useSyncExternalStore(et,_e,tt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(et,_e,tt){var nt,st={},ot=null,at=null;tt!==void 0&&(ot=""+tt),_e.key!==void 0&&(ot=""+_e.key),_e.ref!==void 0&&(at=_e.ref);for(nt in _e)m$2.call(_e,nt)&&!p$2.hasOwnProperty(nt)&&(st[nt]=_e[nt]);if(et&&et.defaultProps)for(nt in _e=et.defaultProps,_e)st[nt]===void 0&&(st[nt]=_e[nt]);return{$$typeof:k,type:et,key:ot,ref:at,props:st,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _e(Vt,zt){var Xt=Vt.length;Vt.push(zt);e:for(;0<Xt;){var Jt=Xt-1>>>1,nn=Vt[Jt];if(0<st(nn,zt))Vt[Jt]=zt,Vt[Xt]=nn,Xt=Jt;else break e}}function tt(Vt){return Vt.length===0?null:Vt[0]}function nt(Vt){if(Vt.length===0)return null;var zt=Vt[0],Xt=Vt.pop();if(Xt!==zt){Vt[0]=Xt;e:for(var Jt=0,nn=Vt.length,xn=nn>>>1;Jt<xn;){var dn=2*(Jt+1)-1,on=Vt[dn],hn=dn+1,fn=Vt[hn];if(0>st(on,Xt))hn<nn&&0>st(fn,on)?(Vt[Jt]=fn,Vt[hn]=Xt,Jt=hn):(Vt[Jt]=on,Vt[dn]=Xt,Jt=dn);else if(hn<nn&&0>st(fn,Xt))Vt[Jt]=fn,Vt[hn]=Xt,Jt=hn;else break e}}return zt}function st(Vt,zt){var Xt=Vt.sortIndex-zt.sortIndex;return Xt!==0?Xt:Vt.id-zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ot=performance;et.unstable_now=function(){return ot.now()}}else{var at=Date,dt=at.now();et.unstable_now=function(){return at.now()-dt}}var ft=[],ht=[],ct=1,it=null,rt=3,lt=!1,ut=!1,pt=!1,gt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bt(Vt){for(var zt=tt(ht);zt!==null;){if(zt.callback===null)nt(ht);else if(zt.startTime<=Vt)nt(ht),zt.sortIndex=zt.expirationTime,_e(ft,zt);else break;zt=tt(ht)}}function wt(Vt){if(pt=!1,bt(Vt),!ut)if(tt(ft)!==null)ut=!0,Ot(xt);else{var zt=tt(ht);zt!==null&&Ft(wt,zt.startTime-Vt)}}function xt(Vt,zt){ut=!1,pt&&(pt=!1,mt(Pt),Pt=-1),lt=!0;var Xt=rt;try{for(bt(zt),it=tt(ft);it!==null&&(!(it.expirationTime>zt)||Vt&&!It());){var Jt=it.callback;if(typeof Jt=="function"){it.callback=null,rt=it.priorityLevel;var nn=Jt(it.expirationTime<=zt);zt=et.unstable_now(),typeof nn=="function"?it.callback=nn:it===tt(ft)&&nt(ft),bt(zt)}else nt(ft);it=tt(ft)}if(it!==null)var xn=!0;else{var dn=tt(ht);dn!==null&&Ft(wt,dn.startTime-zt),xn=!1}return xn}finally{it=null,rt=Xt,lt=!1}}var Tt=!1,St=null,Pt=-1,vt=5,At=-1;function It(){return!(et.unstable_now()-At<vt)}function jt(){if(St!==null){var Vt=et.unstable_now();At=Vt;var zt=!0;try{zt=St(!0,Vt)}finally{zt?Lt():(Tt=!1,St=null)}}else Tt=!1}var Lt;if(typeof yt=="function")Lt=function(){yt(jt)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,$t=Rt.port2;Rt.port1.onmessage=jt,Lt=function(){$t.postMessage(null)}}else Lt=function(){gt(jt,0)};function Ot(Vt){St=Vt,Tt||(Tt=!0,Lt())}function Ft(Vt,zt){Pt=gt(function(){Vt(et.unstable_now())},zt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(Vt){Vt.callback=null},et.unstable_continueExecution=function(){ut||lt||(ut=!0,Ot(xt))},et.unstable_forceFrameRate=function(Vt){0>Vt||125<Vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):vt=0<Vt?Math.floor(1e3/Vt):5},et.unstable_getCurrentPriorityLevel=function(){return rt},et.unstable_getFirstCallbackNode=function(){return tt(ft)},et.unstable_next=function(Vt){switch(rt){case 1:case 2:case 3:var zt=3;break;default:zt=rt}var Xt=rt;rt=zt;try{return Vt()}finally{rt=Xt}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(Vt,zt){switch(Vt){case 1:case 2:case 3:case 4:case 5:break;default:Vt=3}var Xt=rt;rt=Vt;try{return zt()}finally{rt=Xt}},et.unstable_scheduleCallback=function(Vt,zt,Xt){var Jt=et.unstable_now();switch(typeof Xt=="object"&&Xt!==null?(Xt=Xt.delay,Xt=typeof Xt=="number"&&0<Xt?Jt+Xt:Jt):Xt=Jt,Vt){case 1:var nn=-1;break;case 2:nn=250;break;case 5:nn=1073741823;break;case 4:nn=1e4;break;default:nn=5e3}return nn=Xt+nn,Vt={id:ct++,callback:zt,priorityLevel:Vt,startTime:Xt,expirationTime:nn,sortIndex:-1},Xt>Jt?(Vt.sortIndex=Xt,_e(ht,Vt),tt(ft)===null&&Vt===tt(ht)&&(pt?(mt(Pt),Pt=-1):pt=!0,Ft(wt,Xt-Jt))):(Vt.sortIndex=nn,_e(ft,Vt),ut||lt||(ut=!0,Ot(xt))),Vt},et.unstable_shouldYield=It,et.unstable_wrapCallback=function(Vt){var zt=rt;return function(){var Xt=rt;rt=zt;try{return Vt.apply(this,arguments)}finally{rt=Xt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(et){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+et,tt=1;tt<arguments.length;tt++)_e+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+et+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,_e){ha(et,_e),ha(et+"Capture",_e)}function ha(et,_e){for(ea[et]=_e,et=0;et<_e.length;et++)da.add(_e[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,_e,tt,nt){if(tt!==null&&tt.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return nt?!1:tt!==null?!tt.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,_e,tt,nt){if(_e===null||typeof _e>"u"||pa(et,_e,tt,nt))return!0;if(nt)return!1;if(tt!==null)switch(tt.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$1(et,_e,tt,nt,st,ot,at){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=nt,this.attributeNamespace=st,this.mustUseProperty=tt,this.propertyName=et,this.type=_e,this.sanitizeURL=ot,this.removeEmptyString=at}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z[et]=new v$1(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var _e=et[0];z[_e]=new v$1(_e,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z[et]=new v$1(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z[et]=new v$1(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z[et]=new v$1(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z[et]=new v$1(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z[et]=new v$1(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z[et]=new v$1(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z[et]=new v$1(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var _e=et.replace(ra,sa);z[_e]=new v$1(_e,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z[et]=new v$1(et,1,!1,et.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z[et]=new v$1(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,_e,tt,nt){var st=z.hasOwnProperty(_e)?z[_e]:null;(st!==null?st.type!==0:nt||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,tt,st,nt)&&(tt=null),nt||st===null?oa(_e)&&(tt===null?et.removeAttribute(_e):et.setAttribute(_e,""+tt)):st.mustUseProperty?et[st.propertyName]=tt===null?st.type===3?!1:"":tt:(_e=st.attributeName,nt=st.attributeNamespace,tt===null?et.removeAttribute(_e):(st=st.type,tt=st===3||st===4&&tt===!0?"":""+tt,nt?et.setAttributeNS(nt,_e,tt):et.setAttribute(_e,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$1=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(tt){var _e=tt.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+et}var Na=!1;function Oa(et,_e){if(!et||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ht){var nt=ht}Reflect.construct(et,[],_e)}else{try{_e.call()}catch(ht){nt=ht}et.call(_e.prototype)}else{try{throw Error()}catch(ht){nt=ht}et()}}catch(ht){if(ht&&nt&&typeof ht.stack=="string"){for(var st=ht.stack.split(`
`),ot=nt.stack.split(`
`),at=st.length-1,dt=ot.length-1;1<=at&&0<=dt&&st[at]!==ot[dt];)dt--;for(;1<=at&&0<=dt;at--,dt--)if(st[at]!==ot[dt]){if(at!==1||dt!==1)do if(at--,dt--,0>dt||st[at]!==ot[dt]){var ft=`
`+st[at].replace(" at new "," at ");return et.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",et.displayName)),ft}while(1<=at&&0<=dt);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var _e=et.render;return et=et.displayName,et||(et=_e.displayName||_e.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return _e=et.displayName||null,_e!==null?_e:Qa(et.type)||"Memo";case Ha:_e=et._payload,et=et._init;try{return Qa(et(_e))}catch{}}return null}function Ra(et){var _e=et.type;switch(et.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=_e.render,et=et.displayName||et.name||"",_e.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var _e=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(et){var _e=Ta(et)?"checked":"value",tt=Object.getOwnPropertyDescriptor(et.constructor.prototype,_e),nt=""+et[_e];if(!et.hasOwnProperty(_e)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var st=tt.get,ot=tt.set;return Object.defineProperty(et,_e,{configurable:!0,get:function(){return st.call(this)},set:function(at){nt=""+at,ot.call(this,at)}}),Object.defineProperty(et,_e,{enumerable:tt.enumerable}),{getValue:function(){return nt},setValue:function(at){nt=""+at},stopTracking:function(){et._valueTracker=null,delete et[_e]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var _e=et._valueTracker;if(!_e)return!0;var tt=_e.getValue(),nt="";return et&&(nt=Ta(et)?et.checked?"true":"false":et.value),et=nt,et!==tt?(_e.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,_e){var tt=_e.checked;return A$1({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??et._wrapperState.initialChecked})}function Za(et,_e){var tt=_e.defaultValue==null?"":_e.defaultValue,nt=_e.checked!=null?_e.checked:_e.defaultChecked;tt=Sa(_e.value!=null?_e.value:tt),et._wrapperState={initialChecked:nt,initialValue:tt,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab(et,_e){_e=_e.checked,_e!=null&&ta(et,"checked",_e,!1)}function bb(et,_e){ab(et,_e);var tt=Sa(_e.value),nt=_e.type;if(tt!=null)nt==="number"?(tt===0&&et.value===""||et.value!=tt)&&(et.value=""+tt):et.value!==""+tt&&(et.value=""+tt);else if(nt==="submit"||nt==="reset"){et.removeAttribute("value");return}_e.hasOwnProperty("value")?cb(et,_e.type,tt):_e.hasOwnProperty("defaultValue")&&cb(et,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(et.defaultChecked=!!_e.defaultChecked)}function db(et,_e,tt){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var nt=_e.type;if(!(nt!=="submit"&&nt!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+et._wrapperState.initialValue,tt||_e===et.value||(et.value=_e),et.defaultValue=_e}tt=et.name,tt!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,tt!==""&&(et.name=tt)}function cb(et,_e,tt){(_e!=="number"||Xa(et.ownerDocument)!==et)&&(tt==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+tt&&(et.defaultValue=""+tt))}var eb=Array.isArray;function fb(et,_e,tt,nt){if(et=et.options,_e){_e={};for(var st=0;st<tt.length;st++)_e["$"+tt[st]]=!0;for(tt=0;tt<et.length;tt++)st=_e.hasOwnProperty("$"+et[tt].value),et[tt].selected!==st&&(et[tt].selected=st),st&&nt&&(et[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),_e=null,st=0;st<et.length;st++){if(et[st].value===tt){et[st].selected=!0,nt&&(et[st].defaultSelected=!0);return}_e!==null||et[st].disabled||(_e=et[st])}_e!==null&&(_e.selected=!0)}}function gb(et,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},_e,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,_e){var tt=_e.value;if(tt==null){if(tt=_e.children,_e=_e.defaultValue,tt!=null){if(_e!=null)throw Error(p$1(92));if(eb(tt)){if(1<tt.length)throw Error(p$1(93));tt=tt[0]}_e=tt}_e==null&&(_e=""),tt=_e}et._wrapperState={initialValue:Sa(tt)}}function ib(et,_e){var tt=Sa(_e.value),nt=Sa(_e.defaultValue);tt!=null&&(tt=""+tt,tt!==et.value&&(et.value=tt),_e.defaultValue==null&&et.defaultValue!==tt&&(et.defaultValue=tt)),nt!=null&&(et.defaultValue=""+nt)}function jb(et){var _e=et.textContent;_e===et._wrapperState.initialValue&&_e!==""&&_e!==null&&(et.value=_e)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,_e){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(_e):et==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,tt,nt,st){MSApp.execUnsafeLocalFunction(function(){return et(_e,tt,nt,st)})}:et}(function(et,_e){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;_e.firstChild;)et.appendChild(_e.firstChild)}});function ob(et,_e){if(_e){var tt=et.firstChild;if(tt&&tt===et.lastChild&&tt.nodeType===3){tt.nodeValue=_e;return}}et.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(_e){_e=_e+et.charAt(0).toUpperCase()+et.substring(1),pb[_e]=pb[et]})});function rb(et,_e,tt){return _e==null||typeof _e=="boolean"||_e===""?"":tt||typeof _e!="number"||_e===0||pb.hasOwnProperty(et)&&pb[et]?(""+_e).trim():_e+"px"}function sb(et,_e){et=et.style;for(var tt in _e)if(_e.hasOwnProperty(tt)){var nt=tt.indexOf("--")===0,st=rb(tt,_e[tt],nt);tt==="float"&&(tt="cssFloat"),nt?et.setProperty(tt,st):et[tt]=st}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,_e){if(_e){if(tb[et]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,et));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$1(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$1(62))}}function vb(et,_e){if(et.indexOf("-")===-1)return typeof _e.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$1(280));var _e=et.stateNode;_e&&(_e=Db(_e),yb(et.stateNode,et.type,_e))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,_e=Ab;if(Ab=zb=null,Bb(et),_e)for(et=0;et<_e.length;et++)Bb(_e[et])}}function Gb(et,_e){return et(_e)}function Hb(){}var Ib=!1;function Jb(et,_e,tt){if(Ib)return et(_e,tt);Ib=!0;try{return Gb(et,_e,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,_e){var tt=et.stateNode;if(tt===null)return null;var nt=Db(tt);if(nt===null)return null;tt=nt[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(et=et.type,nt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!nt;break e;default:et=!1}if(et)return null;if(tt&&typeof tt!="function")throw Error(p$1(231,_e,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,_e,tt,nt,st,ot,at,dt,ft){var ht=Array.prototype.slice.call(arguments,3);try{_e.apply(tt,ht)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,_e,tt,nt,st,ot,at,dt,ft){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,_e,tt,nt,st,ot,at,dt,ft){if(Tb.apply(this,arguments),Ob){if(Ob){var ht=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=ht)}}function Vb(et){var _e=et,tt=et;if(et.alternate)for(;_e.return;)_e=_e.return;else{et=_e;do _e=et,_e.flags&4098&&(tt=_e.return),et=_e.return;while(et)}return _e.tag===3?tt:null}function Wb(et){if(et.tag===13){var _e=et.memoizedState;if(_e===null&&(et=et.alternate,et!==null&&(_e=et.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$1(188))}function Yb(et){var _e=et.alternate;if(!_e){if(_e=Vb(et),_e===null)throw Error(p$1(188));return _e!==et?null:et}for(var tt=et,nt=_e;;){var st=tt.return;if(st===null)break;var ot=st.alternate;if(ot===null){if(nt=st.return,nt!==null){tt=nt;continue}break}if(st.child===ot.child){for(ot=st.child;ot;){if(ot===tt)return Xb(st),et;if(ot===nt)return Xb(st),_e;ot=ot.sibling}throw Error(p$1(188))}if(tt.return!==nt.return)tt=st,nt=ot;else{for(var at=!1,dt=st.child;dt;){if(dt===tt){at=!0,tt=st,nt=ot;break}if(dt===nt){at=!0,nt=st,tt=ot;break}dt=dt.sibling}if(!at){for(dt=ot.child;dt;){if(dt===tt){at=!0,tt=ot,nt=st;break}if(dt===nt){at=!0,nt=ot,tt=st;break}dt=dt.sibling}if(!at)throw Error(p$1(189))}}if(tt.alternate!==nt)throw Error(p$1(190))}if(tt.tag!==3)throw Error(p$1(188));return tt.stateNode.current===tt?et:_e}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var _e=$b(et);if(_e!==null)return _e;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,_e){var tt=et.pendingLanes;if(tt===0)return 0;var nt=0,st=et.suspendedLanes,ot=et.pingedLanes,at=tt&268435455;if(at!==0){var dt=at&~st;dt!==0?nt=tc(dt):(ot&=at,ot!==0&&(nt=tc(ot)))}else at=tt&~st,at!==0?nt=tc(at):ot!==0&&(nt=tc(ot));if(nt===0)return 0;if(_e!==0&&_e!==nt&&!(_e&st)&&(st=nt&-nt,ot=_e&-_e,st>=ot||st===16&&(ot&4194240)!==0))return _e;if(nt&4&&(nt|=tt&16),_e=et.entangledLanes,_e!==0)for(et=et.entanglements,_e&=nt;0<_e;)tt=31-oc(_e),st=1<<tt,nt|=et[tt],_e&=~st;return nt}function vc(et,_e){switch(et){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,_e){for(var tt=et.suspendedLanes,nt=et.pingedLanes,st=et.expirationTimes,ot=et.pendingLanes;0<ot;){var at=31-oc(ot),dt=1<<at,ft=st[at];ft===-1?(!(dt&tt)||dt&nt)&&(st[at]=vc(dt,_e)):ft<=_e&&(et.expiredLanes|=dt),ot&=~dt}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var _e=[],tt=0;31>tt;tt++)_e.push(et);return _e}function Ac(et,_e,tt){et.pendingLanes|=_e,_e!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,_e=31-oc(_e),et[_e]=tt}function Bc(et,_e){var tt=et.pendingLanes&~_e;et.pendingLanes=_e,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=_e,et.mutableReadLanes&=_e,et.entangledLanes&=_e,_e=et.entanglements;var nt=et.eventTimes;for(et=et.expirationTimes;0<tt;){var st=31-oc(tt),ot=1<<st;_e[st]=0,nt[st]=-1,et[st]=-1,tt&=~ot}}function Cc(et,_e){var tt=et.entangledLanes|=_e;for(et=et.entanglements;tt;){var nt=31-oc(tt),st=1<<nt;st&_e|et[nt]&_e&&(et[nt]|=_e),tt&=~st}}var C=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,_e){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc(et,_e,tt,nt,st,ot){return et===null||et.nativeEvent!==ot?(et={blockedOn:_e,domEventName:tt,eventSystemFlags:nt,nativeEvent:ot,targetContainers:[st]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),et):(et.eventSystemFlags|=nt,_e=et.targetContainers,st!==null&&_e.indexOf(st)===-1&&_e.push(st),et)}function Uc(et,_e,tt,nt,st){switch(_e){case"focusin":return Lc=Tc(Lc,et,_e,tt,nt,st),!0;case"dragenter":return Mc=Tc(Mc,et,_e,tt,nt,st),!0;case"mouseover":return Nc=Tc(Nc,et,_e,tt,nt,st),!0;case"pointerover":var ot=st.pointerId;return Oc.set(ot,Tc(Oc.get(ot)||null,et,_e,tt,nt,st)),!0;case"gotpointercapture":return ot=st.pointerId,Pc.set(ot,Tc(Pc.get(ot)||null,et,_e,tt,nt,st)),!0}return!1}function Vc(et){var _e=Wc(et.target);if(_e!==null){var tt=Vb(_e);if(tt!==null){if(_e=tt.tag,_e===13){if(_e=Wb(tt),_e!==null){et.blockedOn=_e,Ic(et.priority,function(){Gc(tt)});return}}else if(_e===3&&tt.stateNode.current.memoizedState.isDehydrated){et.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var _e=et.targetContainers;0<_e.length;){var tt=Yc(et.domEventName,et.eventSystemFlags,_e[0],et.nativeEvent);if(tt===null){tt=et.nativeEvent;var nt=new tt.constructor(tt.type,tt);wb=nt,tt.target.dispatchEvent(nt),wb=null}else return _e=Cb(tt),_e!==null&&Fc(_e),et.blockedOn=tt,!1;_e.shift()}return!0}function Zc(et,_e,tt){Xc(et)&&tt.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,_e){et.blockedOn===_e&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function _e(st){return ad(st,et)}if(0<Kc.length){ad(Kc[0],et);for(var tt=1;tt<Kc.length;tt++){var nt=Kc[tt];nt.blockedOn===et&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(_e),Pc.forEach(_e),tt=0;tt<Qc.length;tt++)nt=Qc[tt],nt.blockedOn===et&&(nt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,_e,tt,nt){var st=C,ot=cd.transition;cd.transition=null;try{C=1,fd(et,_e,tt,nt)}finally{C=st,cd.transition=ot}}function gd(et,_e,tt,nt){var st=C,ot=cd.transition;cd.transition=null;try{C=4,fd(et,_e,tt,nt)}finally{C=st,cd.transition=ot}}function fd(et,_e,tt,nt){if(dd){var st=Yc(et,_e,tt,nt);if(st===null)hd(et,_e,nt,id,tt),Sc(et,nt);else if(Uc(st,et,_e,tt,nt))nt.stopPropagation();else if(Sc(et,nt),_e&4&&-1<Rc.indexOf(et)){for(;st!==null;){var ot=Cb(st);if(ot!==null&&Ec(ot),ot=Yc(et,_e,tt,nt),ot===null&&hd(et,_e,nt,id,tt),ot===st)break;st=ot}st!==null&&nt.stopPropagation()}else hd(et,_e,nt,null,tt)}}var id=null;function Yc(et,_e,tt,nt){if(id=null,et=xb(nt),et=Wc(et),et!==null)if(_e=Vb(et),_e===null)et=null;else if(tt=_e.tag,tt===13){if(et=Wb(_e),et!==null)return et;et=null}else if(tt===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;et=null}else _e!==et&&(et=null);return id=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,_e=ld,tt=_e.length,nt,st="value"in kd?kd.value:kd.textContent,ot=st.length;for(et=0;et<tt&&_e[et]===st[et];et++);var at=tt-et;for(nt=1;nt<=at&&_e[tt-nt]===st[ot-nt];nt++);return md=st.slice(et,1<nt?1-nt:void 0)}function od(et){var _e=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&_e===13&&(et=13)):et=_e,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function _e(tt,nt,st,ot,at){this._reactName=tt,this._targetInst=st,this.type=nt,this.nativeEvent=ot,this.target=at,this.currentTarget=null;for(var dt in et)et.hasOwnProperty(dt)&&(tt=et[dt],this[dt]=tt?tt(ot):ot[dt]);return this.isDefaultPrevented=(ot.defaultPrevented!=null?ot.defaultPrevented:ot.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(et):(et=Od[et])?!!_e[et]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(et){if(et.key){var _e=Md[et.key]||et.key;if(_e!=="Unidentified")return _e}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(et,_e){switch(et){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie=!1;function je(et,_e){switch(et){case"compositionend":return he$1(_e);case"keypress":return _e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return et=_e.data,et===ee$1&&fe$1?null:et;default:return null}}function ke(et,_e){if(ie)return et==="compositionend"||!ae&&ge$1(et,_e)?(et=nd(),md=ld=kd=null,ie=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de$1&&_e.locale!=="ko"?null:_e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e==="input"?!!le$1[et.type]:_e==="textarea"}function ne$1(et,_e,tt,nt){Eb(nt),_e=oe$1(_e,"onChange"),0<_e.length&&(tt=new td("onChange","change",null,tt,nt),et.push({event:tt,listeners:_e}))}var pe$1=null,qe=null;function re$1(et){se$1(et,0)}function te(et){var _e=ue$1(et);if(Wa(_e))return et}function ve$1(et,_e){if(et==="change")return _e}var we=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(et){if(et.propertyName==="value"&&te(qe)){var _e=[];ne$1(_e,qe,et,xb(et)),Jb(re$1,_e)}}function Ce(et,_e,tt){et==="focusin"?(Ae$1(),pe$1=_e,qe=tt,pe$1.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae$1()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te(qe)}function Ee$1(et,_e){if(et==="click")return te(_e)}function Fe(et,_e){if(et==="input"||et==="change")return te(_e)}function Ge(et,_e){return et===_e&&(et!==0||1/et===1/_e)||et!==et&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(et,_e){if(He(et,_e))return!0;if(typeof et!="object"||et===null||typeof _e!="object"||_e===null)return!1;var tt=Object.keys(et),nt=Object.keys(_e);if(tt.length!==nt.length)return!1;for(nt=0;nt<tt.length;nt++){var st=tt[nt];if(!ja.call(_e,st)||!He(et[st],_e[st]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,_e){var tt=Je(et);et=0;for(var nt;tt;){if(tt.nodeType===3){if(nt=et+tt.textContent.length,et<=_e&&nt>=_e)return{node:tt,offset:_e-et};et=nt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(et,_e){return et&&_e?et===_e?!0:et&&et.nodeType===3?!1:_e&&_e.nodeType===3?Le(et,_e.parentNode):"contains"in et?et.contains(_e):et.compareDocumentPosition?!!(et.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var et=window,_e=Xa();_e instanceof et.HTMLIFrameElement;){try{var tt=typeof _e.contentWindow.location.href=="string"}catch{tt=!1}if(tt)et=_e.contentWindow;else break;_e=Xa(et.document)}return _e}function Ne(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e&&(_e==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||_e==="textarea"||et.contentEditable==="true")}function Oe(et){var _e=Me(),tt=et.focusedElem,nt=et.selectionRange;if(_e!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(nt!==null&&Ne(tt)){if(_e=nt.start,et=nt.end,et===void 0&&(et=_e),"selectionStart"in tt)tt.selectionStart=_e,tt.selectionEnd=Math.min(et,tt.value.length);else if(et=(_e=tt.ownerDocument||document)&&_e.defaultView||window,et.getSelection){et=et.getSelection();var st=tt.textContent.length,ot=Math.min(nt.start,st);nt=nt.end===void 0?ot:Math.min(nt.end,st),!et.extend&&ot>nt&&(st=nt,nt=ot,ot=st),st=Ke(tt,ot);var at=Ke(tt,nt);st&&at&&(et.rangeCount!==1||et.anchorNode!==st.node||et.anchorOffset!==st.offset||et.focusNode!==at.node||et.focusOffset!==at.offset)&&(_e=_e.createRange(),_e.setStart(st.node,st.offset),et.removeAllRanges(),ot>nt?(et.addRange(_e),et.extend(at.node,at.offset)):(_e.setEnd(at.node,at.offset),et.addRange(_e)))}}for(_e=[],et=tt;et=et.parentNode;)et.nodeType===1&&_e.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<_e.length;tt++)et=_e[tt],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se$1=null,Te$1=!1;function Ue(et,_e,tt){var nt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te$1||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se$1&&Ie$1(Se$1,nt)||(Se$1=nt,nt=oe$1(Re$1,"onSelect"),0<nt.length&&(_e=new td("onSelect","select",null,_e,tt),et.push({event:_e,listeners:nt}),_e.target=Qe)))}function Ve(et,_e){var tt={};return tt[et.toLowerCase()]=_e.toLowerCase(),tt["Webkit"+et]="webkit"+_e,tt["Moz"+et]="moz"+_e,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var _e=We[et],tt;for(tt in _e)if(_e.hasOwnProperty(tt)&&tt in Ye)return Xe[et]=_e[tt];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,_e){df.set(et,_e),fa(_e,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,_e,tt){var nt=et.type||"unknown-event";et.currentTarget=tt,Ub(nt,_e,void 0,et),et.currentTarget=null}function se$1(et,_e){_e=(_e&4)!==0;for(var tt=0;tt<et.length;tt++){var nt=et[tt],st=nt.event;nt=nt.listeners;e:{var ot=void 0;if(_e)for(var at=nt.length-1;0<=at;at--){var dt=nt[at],ft=dt.instance,ht=dt.currentTarget;if(dt=dt.listener,ft!==ot&&st.isPropagationStopped())break e;nf(st,dt,ht),ot=ft}else for(at=0;at<nt.length;at++){if(dt=nt[at],ft=dt.instance,ht=dt.currentTarget,dt=dt.listener,ft!==ot&&st.isPropagationStopped())break e;nf(st,dt,ht),ot=ft}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$1(et,_e){var tt=_e[of];tt===void 0&&(tt=_e[of]=new Set);var nt=et+"__bubble";tt.has(nt)||(pf(_e,et,2,!1),tt.add(nt))}function qf(et,_e,tt){var nt=0;_e&&(nt|=4),pf(tt,et,nt,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,et),qf(tt,!0,et))});var _e=et.nodeType===9?et:et.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf(et,_e,tt,nt){switch(jd(_e)){case 1:var st=ed;break;case 4:st=gd;break;default:st=fd}tt=st.bind(null,_e,tt,et),st=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(st=!0),nt?st!==void 0?et.addEventListener(_e,tt,{capture:!0,passive:st}):et.addEventListener(_e,tt,!0):st!==void 0?et.addEventListener(_e,tt,{passive:st}):et.addEventListener(_e,tt,!1)}function hd(et,_e,tt,nt,st){var ot=nt;if(!(_e&1)&&!(_e&2)&&nt!==null)e:for(;;){if(nt===null)return;var at=nt.tag;if(at===3||at===4){var dt=nt.stateNode.containerInfo;if(dt===st||dt.nodeType===8&&dt.parentNode===st)break;if(at===4)for(at=nt.return;at!==null;){var ft=at.tag;if((ft===3||ft===4)&&(ft=at.stateNode.containerInfo,ft===st||ft.nodeType===8&&ft.parentNode===st))return;at=at.return}for(;dt!==null;){if(at=Wc(dt),at===null)return;if(ft=at.tag,ft===5||ft===6){nt=ot=at;continue e}dt=dt.parentNode}}nt=nt.return}Jb(function(){var ht=ot,ct=xb(tt),it=[];e:{var rt=df.get(et);if(rt!==void 0){var lt=td,ut=et;switch(et){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":lt=Rd;break;case"focusin":ut="focus",lt=Fd;break;case"focusout":ut="blur",lt=Fd;break;case"beforeblur":case"afterblur":lt=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Vd;break;case $e:case af:case bf:lt=Hd;break;case cf:lt=Xd;break;case"scroll":lt=vd;break;case"wheel":lt=Zd;break;case"copy":case"cut":case"paste":lt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Td}var pt=(_e&4)!==0,gt=!pt&&et==="scroll",mt=pt?rt!==null?rt+"Capture":null:rt;pt=[];for(var yt=ht,bt;yt!==null;){bt=yt;var wt=bt.stateNode;if(bt.tag===5&&wt!==null&&(bt=wt,mt!==null&&(wt=Kb(yt,mt),wt!=null&&pt.push(tf(yt,wt,bt)))),gt)break;yt=yt.return}0<pt.length&&(rt=new lt(rt,ut,null,tt,ct),it.push({event:rt,listeners:pt}))}}if(!(_e&7)){e:{if(rt=et==="mouseover"||et==="pointerover",lt=et==="mouseout"||et==="pointerout",rt&&tt!==wb&&(ut=tt.relatedTarget||tt.fromElement)&&(Wc(ut)||ut[uf]))break e;if((lt||rt)&&(rt=ct.window===ct?ct:(rt=ct.ownerDocument)?rt.defaultView||rt.parentWindow:window,lt?(ut=tt.relatedTarget||tt.toElement,lt=ht,ut=ut?Wc(ut):null,ut!==null&&(gt=Vb(ut),ut!==gt||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(lt=null,ut=ht),lt!==ut)){if(pt=Bd,wt="onMouseLeave",mt="onMouseEnter",yt="mouse",(et==="pointerout"||et==="pointerover")&&(pt=Td,wt="onPointerLeave",mt="onPointerEnter",yt="pointer"),gt=lt==null?rt:ue$1(lt),bt=ut==null?rt:ue$1(ut),rt=new pt(wt,yt+"leave",lt,tt,ct),rt.target=gt,rt.relatedTarget=bt,wt=null,Wc(ct)===ht&&(pt=new pt(mt,yt+"enter",ut,tt,ct),pt.target=bt,pt.relatedTarget=gt,wt=pt),gt=wt,lt&&ut)t:{for(pt=lt,mt=ut,yt=0,bt=pt;bt;bt=vf(bt))yt++;for(bt=0,wt=mt;wt;wt=vf(wt))bt++;for(;0<yt-bt;)pt=vf(pt),yt--;for(;0<bt-yt;)mt=vf(mt),bt--;for(;yt--;){if(pt===mt||mt!==null&&pt===mt.alternate)break t;pt=vf(pt),mt=vf(mt)}pt=null}else pt=null;lt!==null&&wf(it,rt,lt,pt,!1),ut!==null&&gt!==null&&wf(it,gt,ut,pt,!0)}}e:{if(rt=ht?ue$1(ht):window,lt=rt.nodeName&&rt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&rt.type==="file")var xt=ve$1;else if(me(rt))if(we)xt=Fe;else{xt=De;var Tt=Ce}else(lt=rt.nodeName)&&lt.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(xt=Ee$1);if(xt&&(xt=xt(et,ht))){ne$1(it,xt,tt,ct);break e}Tt&&Tt(et,rt,ht),et==="focusout"&&(Tt=rt._wrapperState)&&Tt.controlled&&rt.type==="number"&&cb(rt,"number",rt.value)}switch(Tt=ht?ue$1(ht):window,et){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re$1=ht,Se$1=null);break;case"focusout":Se$1=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(it,tt,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(it,tt,ct)}var St;if(ae)e:{switch(et){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ie?ge$1(et,tt)&&(Pt="onCompositionEnd"):et==="keydown"&&tt.keyCode===229&&(Pt="onCompositionStart");Pt&&(de$1&&tt.locale!=="ko"&&(ie||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ie&&(St=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe$1(ht,Pt),0<Tt.length&&(Pt=new Ld(Pt,et,null,tt,ct),it.push({event:Pt,listeners:Tt}),St?Pt.data=St:(St=he$1(tt),St!==null&&(Pt.data=St)))),(St=ce?je(et,tt):ke(et,tt))&&(ht=oe$1(ht,"onBeforeInput"),0<ht.length&&(ct=new Ld("onBeforeInput","beforeinput",null,tt,ct),it.push({event:ct,listeners:ht}),ct.data=St))}se$1(it,_e)})}function tf(et,_e,tt){return{instance:et,listener:_e,currentTarget:tt}}function oe$1(et,_e){for(var tt=_e+"Capture",nt=[];et!==null;){var st=et,ot=st.stateNode;st.tag===5&&ot!==null&&(st=ot,ot=Kb(et,tt),ot!=null&&nt.unshift(tf(et,ot,st)),ot=Kb(et,_e),ot!=null&&nt.push(tf(et,ot,st))),et=et.return}return nt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,_e,tt,nt,st){for(var ot=_e._reactName,at=[];tt!==null&&tt!==nt;){var dt=tt,ft=dt.alternate,ht=dt.stateNode;if(ft!==null&&ft===nt)break;dt.tag===5&&ht!==null&&(dt=ht,st?(ft=Kb(tt,ot),ft!=null&&at.unshift(tf(tt,ft,dt))):st||(ft=Kb(tt,ot),ft!=null&&at.push(tf(tt,ft,dt)))),tt=tt.return}at.length!==0&&et.push({event:_e,listeners:at})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,_e,tt){if(_e=zf(_e),zf(et)!==_e&&tt)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,_e){return et==="textarea"||et==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If$1)}:Ff;function If$1(et){setTimeout(function(){throw et})}function Kf(et,_e){var tt=_e,nt=0;do{var st=tt.nextSibling;if(et.removeChild(tt),st&&st.nodeType===8)if(tt=st.data,tt==="/$"){if(nt===0){et.removeChild(st),bd(_e);return}nt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||nt++;tt=st}while(tt);bd(_e)}function Lf(et){for(;et!=null;et=et.nextSibling){var _e=et.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=et.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var _e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(_e===0)return et;_e--}else tt==="/$"&&_e++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var _e=et[Of];if(_e)return _e;for(var tt=et.parentNode;tt;){if(_e=tt[uf]||tt[Of]){if(tt=_e.alternate,_e.child!==null||tt!==null&&tt.child!==null)for(et=Mf(et);et!==null;){if(tt=et[Of])return tt;et=Mf(et)}return _e}et=tt,tt=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue$1(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$1(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(et,_e){Tf++,Sf[Tf]=et.current,et.current=_e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,_e){var tt=et.type.contextTypes;if(!tt)return Vf;var nt=et.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===_e)return nt.__reactInternalMemoizedMaskedChildContext;var st={},ot;for(ot in tt)st[ot]=_e[ot];return nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=_e,et.__reactInternalMemoizedMaskedChildContext=st),st}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E(Wf),E(H)}function ag(et,_e,tt){if(H.current!==Vf)throw Error(p$1(168));G$1(H,_e),G$1(Wf,tt)}function bg(et,_e,tt){var nt=et.stateNode;if(_e=_e.childContextTypes,typeof nt.getChildContext!="function")return tt;nt=nt.getChildContext();for(var st in nt)if(!(st in _e))throw Error(p$1(108,Ra(et)||"Unknown",st));return A$1({},tt,nt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,et),G$1(Wf,Wf.current),!0}function dg(et,_e,tt){var nt=et.stateNode;if(!nt)throw Error(p$1(169));tt?(et=bg(et,_e,Xf),nt.__reactInternalMemoizedMergedChildContext=et,E(Wf),E(H),G$1(H,et)):E(Wf),G$1(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,_e=C;try{var tt=eg;for(C=1;et<tt.length;et++){var nt=tt[et];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(st){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),st}finally{C=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,_e){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=_e}function ug(et,_e,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var nt=rg;et=sg;var st=32-oc(nt)-1;nt&=~(1<<st),tt+=1;var ot=32-oc(_e)+st;if(30<ot){var at=st-st%5;ot=(nt&(1<<at)-1).toString(32),nt>>=at,st-=at,rg=1<<32-oc(_e)+st|tt<<st|nt,sg=ot+et}else rg=1<<ot|tt<<st|nt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(et,_e){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=_e,tt.return=et,_e=et.deletions,_e===null?(et.deletions=[tt],et.flags|=16):_e.push(tt)}function Cg(et,_e){switch(et.tag){case 5:var tt=et.type;return _e=_e.nodeType!==1||tt.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=et.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:_e,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=_e,tt.return=et,et.child=tt,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$1){var _e=yg;if(_e){var tt=_e;if(!Cg(et,_e)){if(Dg(et))throw Error(p$1(418));_e=Lf(tt.nextSibling);var nt=xg;_e&&Cg(et,_e)?Ag(nt,tt):(et.flags=et.flags&-4097|2,I$1=!1,xg=et)}}else{if(Dg(et))throw Error(p$1(418));et.flags=et.flags&-4097|2,I$1=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$1)return Fg(et),I$1=!0,!1;var _e;if((_e=et.tag!==3)&&!(_e=et.tag!==5)&&(_e=et.type,_e=_e!=="head"&&_e!=="body"&&!Ef(et.type,et.memoizedProps)),_e&&(_e=yg)){if(Dg(et))throw Hg(),Error(p$1(418));for(;_e;)Ag(et,_e),_e=Lf(_e.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$1(317));e:{for(et=et.nextSibling,_e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="/$"){if(_e===0){yg=Lf(et.nextSibling);break e}_e--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||_e++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,_e,tt){if(et=tt.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$1(309));var nt=tt.stateNode}if(!nt)throw Error(p$1(147,et));var st=nt,ot=""+et;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===ot?_e.ref:(_e=function(at){var dt=st.refs;at===null?delete dt[ot]:dt[ot]=at},_e._stringRef=ot,_e)}if(typeof et!="string")throw Error(p$1(284));if(!tt._owner)throw Error(p$1(290,et))}return et}function Mg(et,_e){throw et=Object.prototype.toString.call(_e),Error(p$1(31,et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et))}function Ng(et){var _e=et._init;return _e(et._payload)}function Og(et){function _e(mt,yt){if(et){var bt=mt.deletions;bt===null?(mt.deletions=[yt],mt.flags|=16):bt.push(yt)}}function tt(mt,yt){if(!et)return null;for(;yt!==null;)_e(mt,yt),yt=yt.sibling;return null}function nt(mt,yt){for(mt=new Map;yt!==null;)yt.key!==null?mt.set(yt.key,yt):mt.set(yt.index,yt),yt=yt.sibling;return mt}function st(mt,yt){return mt=Pg(mt,yt),mt.index=0,mt.sibling=null,mt}function ot(mt,yt,bt){return mt.index=bt,et?(bt=mt.alternate,bt!==null?(bt=bt.index,bt<yt?(mt.flags|=2,yt):bt):(mt.flags|=2,yt)):(mt.flags|=1048576,yt)}function at(mt){return et&&mt.alternate===null&&(mt.flags|=2),mt}function dt(mt,yt,bt,wt){return yt===null||yt.tag!==6?(yt=Qg(bt,mt.mode,wt),yt.return=mt,yt):(yt=st(yt,bt),yt.return=mt,yt)}function ft(mt,yt,bt,wt){var xt=bt.type;return xt===ya?ct(mt,yt,bt.props.children,wt,bt.key):yt!==null&&(yt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===yt.type)?(wt=st(yt,bt.props),wt.ref=Lg(mt,yt,bt),wt.return=mt,wt):(wt=Rg(bt.type,bt.key,bt.props,null,mt.mode,wt),wt.ref=Lg(mt,yt,bt),wt.return=mt,wt)}function ht(mt,yt,bt,wt){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==bt.containerInfo||yt.stateNode.implementation!==bt.implementation?(yt=Sg(bt,mt.mode,wt),yt.return=mt,yt):(yt=st(yt,bt.children||[]),yt.return=mt,yt)}function ct(mt,yt,bt,wt,xt){return yt===null||yt.tag!==7?(yt=Tg(bt,mt.mode,wt,xt),yt.return=mt,yt):(yt=st(yt,bt),yt.return=mt,yt)}function it(mt,yt,bt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yt=Qg(""+yt,mt.mode,bt),yt.return=mt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return bt=Rg(yt.type,yt.key,yt.props,null,mt.mode,bt),bt.ref=Lg(mt,null,yt),bt.return=mt,bt;case wa:return yt=Sg(yt,mt.mode,bt),yt.return=mt,yt;case Ha:var wt=yt._init;return it(mt,wt(yt._payload),bt)}if(eb(yt)||Ka(yt))return yt=Tg(yt,mt.mode,bt,null),yt.return=mt,yt;Mg(mt,yt)}return null}function rt(mt,yt,bt,wt){var xt=yt!==null?yt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return xt!==null?null:dt(mt,yt,""+bt,wt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return bt.key===xt?ft(mt,yt,bt,wt):null;case wa:return bt.key===xt?ht(mt,yt,bt,wt):null;case Ha:return xt=bt._init,rt(mt,yt,xt(bt._payload),wt)}if(eb(bt)||Ka(bt))return xt!==null?null:ct(mt,yt,bt,wt,null);Mg(mt,bt)}return null}function lt(mt,yt,bt,wt,xt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return mt=mt.get(bt)||null,dt(yt,mt,""+wt,xt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va:return mt=mt.get(wt.key===null?bt:wt.key)||null,ft(yt,mt,wt,xt);case wa:return mt=mt.get(wt.key===null?bt:wt.key)||null,ht(yt,mt,wt,xt);case Ha:var Tt=wt._init;return lt(mt,yt,bt,Tt(wt._payload),xt)}if(eb(wt)||Ka(wt))return mt=mt.get(bt)||null,ct(yt,mt,wt,xt,null);Mg(yt,wt)}return null}function ut(mt,yt,bt,wt){for(var xt=null,Tt=null,St=yt,Pt=yt=0,vt=null;St!==null&&Pt<bt.length;Pt++){St.index>Pt?(vt=St,St=null):vt=St.sibling;var At=rt(mt,St,bt[Pt],wt);if(At===null){St===null&&(St=vt);break}et&&St&&At.alternate===null&&_e(mt,St),yt=ot(At,yt,Pt),Tt===null?xt=At:Tt.sibling=At,Tt=At,St=vt}if(Pt===bt.length)return tt(mt,St),I$1&&tg(mt,Pt),xt;if(St===null){for(;Pt<bt.length;Pt++)St=it(mt,bt[Pt],wt),St!==null&&(yt=ot(St,yt,Pt),Tt===null?xt=St:Tt.sibling=St,Tt=St);return I$1&&tg(mt,Pt),xt}for(St=nt(mt,St);Pt<bt.length;Pt++)vt=lt(St,mt,Pt,bt[Pt],wt),vt!==null&&(et&&vt.alternate!==null&&St.delete(vt.key===null?Pt:vt.key),yt=ot(vt,yt,Pt),Tt===null?xt=vt:Tt.sibling=vt,Tt=vt);return et&&St.forEach(function(It){return _e(mt,It)}),I$1&&tg(mt,Pt),xt}function pt(mt,yt,bt,wt){var xt=Ka(bt);if(typeof xt!="function")throw Error(p$1(150));if(bt=xt.call(bt),bt==null)throw Error(p$1(151));for(var Tt=xt=null,St=yt,Pt=yt=0,vt=null,At=bt.next();St!==null&&!At.done;Pt++,At=bt.next()){St.index>Pt?(vt=St,St=null):vt=St.sibling;var It=rt(mt,St,At.value,wt);if(It===null){St===null&&(St=vt);break}et&&St&&It.alternate===null&&_e(mt,St),yt=ot(It,yt,Pt),Tt===null?xt=It:Tt.sibling=It,Tt=It,St=vt}if(At.done)return tt(mt,St),I$1&&tg(mt,Pt),xt;if(St===null){for(;!At.done;Pt++,At=bt.next())At=it(mt,At.value,wt),At!==null&&(yt=ot(At,yt,Pt),Tt===null?xt=At:Tt.sibling=At,Tt=At);return I$1&&tg(mt,Pt),xt}for(St=nt(mt,St);!At.done;Pt++,At=bt.next())At=lt(St,mt,Pt,At.value,wt),At!==null&&(et&&At.alternate!==null&&St.delete(At.key===null?Pt:At.key),yt=ot(At,yt,Pt),Tt===null?xt=At:Tt.sibling=At,Tt=At);return et&&St.forEach(function(jt){return _e(mt,jt)}),I$1&&tg(mt,Pt),xt}function gt(mt,yt,bt,wt){if(typeof bt=="object"&&bt!==null&&bt.type===ya&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:e:{for(var xt=bt.key,Tt=yt;Tt!==null;){if(Tt.key===xt){if(xt=bt.type,xt===ya){if(Tt.tag===7){tt(mt,Tt.sibling),yt=st(Tt,bt.props.children),yt.return=mt,mt=yt;break e}}else if(Tt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===Tt.type){tt(mt,Tt.sibling),yt=st(Tt,bt.props),yt.ref=Lg(mt,Tt,bt),yt.return=mt,mt=yt;break e}tt(mt,Tt);break}else _e(mt,Tt);Tt=Tt.sibling}bt.type===ya?(yt=Tg(bt.props.children,mt.mode,wt,bt.key),yt.return=mt,mt=yt):(wt=Rg(bt.type,bt.key,bt.props,null,mt.mode,wt),wt.ref=Lg(mt,yt,bt),wt.return=mt,mt=wt)}return at(mt);case wa:e:{for(Tt=bt.key;yt!==null;){if(yt.key===Tt)if(yt.tag===4&&yt.stateNode.containerInfo===bt.containerInfo&&yt.stateNode.implementation===bt.implementation){tt(mt,yt.sibling),yt=st(yt,bt.children||[]),yt.return=mt,mt=yt;break e}else{tt(mt,yt);break}else _e(mt,yt);yt=yt.sibling}yt=Sg(bt,mt.mode,wt),yt.return=mt,mt=yt}return at(mt);case Ha:return Tt=bt._init,gt(mt,yt,Tt(bt._payload),wt)}if(eb(bt))return ut(mt,yt,bt,wt);if(Ka(bt))return pt(mt,yt,bt,wt);Mg(mt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,yt!==null&&yt.tag===6?(tt(mt,yt.sibling),yt=st(yt,bt),yt.return=mt,mt=yt):(tt(mt,yt),yt=Qg(bt,mt.mode,wt),yt.return=mt,mt=yt),at(mt)):tt(mt,yt)}return gt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(et){var _e=Wg.current;E(Wg),et._currentValue=_e}function bh(et,_e,tt){for(;et!==null;){var nt=et.alternate;if((et.childLanes&_e)!==_e?(et.childLanes|=_e,nt!==null&&(nt.childLanes|=_e)):nt!==null&&(nt.childLanes&_e)!==_e&&(nt.childLanes|=_e),et===tt)break;et=et.return}}function ch(et,_e){Xg=et,Zg=Yg=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&_e&&(dh=!0),et.firstContext=null)}function eh(et){var _e=et._currentValue;if(Zg!==et)if(et={context:et,memoizedValue:_e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=et,Xg.dependencies={lanes:0,firstContext:et}}else Yg=Yg.next=et;return _e}var fh=null;function gh(et){fh===null?fh=[et]:fh.push(et)}function hh(et,_e,tt,nt){var st=_e.interleaved;return st===null?(tt.next=tt,gh(_e)):(tt.next=st.next,st.next=tt),_e.interleaved=tt,ih(et,nt)}function ih(et,_e){et.lanes|=_e;var tt=et.alternate;for(tt!==null&&(tt.lanes|=_e),tt=et,et=et.return;et!==null;)et.childLanes|=_e,tt=et.alternate,tt!==null&&(tt.childLanes|=_e),tt=et,et=et.return;return tt.tag===3?tt.stateNode:null}var jh=!1;function kh(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(et,_e){et=et.updateQueue,_e.updateQueue===et&&(_e.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function mh(et,_e){return{eventTime:et,lane:_e,tag:0,payload:null,callback:null,next:null}}function nh(et,_e,tt){var nt=et.updateQueue;if(nt===null)return null;if(nt=nt.shared,K&2){var st=nt.pending;return st===null?_e.next=_e:(_e.next=st.next,st.next=_e),nt.pending=_e,ih(et,tt)}return st=nt.interleaved,st===null?(_e.next=_e,gh(nt)):(_e.next=st.next,st.next=_e),nt.interleaved=_e,ih(et,tt)}function oh(et,_e,tt){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(tt&4194240)!==0)){var nt=_e.lanes;nt&=et.pendingLanes,tt|=nt,_e.lanes=tt,Cc(et,tt)}}function ph(et,_e){var tt=et.updateQueue,nt=et.alternate;if(nt!==null&&(nt=nt.updateQueue,tt===nt)){var st=null,ot=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var at={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};ot===null?st=ot=at:ot=ot.next=at,tt=tt.next}while(tt!==null);ot===null?st=ot=_e:ot=ot.next=_e}else st=ot=_e;tt={baseState:nt.baseState,firstBaseUpdate:st,lastBaseUpdate:ot,shared:nt.shared,effects:nt.effects},et.updateQueue=tt;return}et=tt.lastBaseUpdate,et===null?tt.firstBaseUpdate=_e:et.next=_e,tt.lastBaseUpdate=_e}function qh(et,_e,tt,nt){var st=et.updateQueue;jh=!1;var ot=st.firstBaseUpdate,at=st.lastBaseUpdate,dt=st.shared.pending;if(dt!==null){st.shared.pending=null;var ft=dt,ht=ft.next;ft.next=null,at===null?ot=ht:at.next=ht,at=ft;var ct=et.alternate;ct!==null&&(ct=ct.updateQueue,dt=ct.lastBaseUpdate,dt!==at&&(dt===null?ct.firstBaseUpdate=ht:dt.next=ht,ct.lastBaseUpdate=ft))}if(ot!==null){var it=st.baseState;at=0,ct=ht=ft=null,dt=ot;do{var rt=dt.lane,lt=dt.eventTime;if((nt&rt)===rt){ct!==null&&(ct=ct.next={eventTime:lt,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var ut=et,pt=dt;switch(rt=_e,lt=tt,pt.tag){case 1:if(ut=pt.payload,typeof ut=="function"){it=ut.call(lt,it,rt);break e}it=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=pt.payload,rt=typeof ut=="function"?ut.call(lt,it,rt):ut,rt==null)break e;it=A$1({},it,rt);break e;case 2:jh=!0}}dt.callback!==null&&dt.lane!==0&&(et.flags|=64,rt=st.effects,rt===null?st.effects=[dt]:rt.push(dt))}else lt={eventTime:lt,lane:rt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},ct===null?(ht=ct=lt,ft=it):ct=ct.next=lt,at|=rt;if(dt=dt.next,dt===null){if(dt=st.shared.pending,dt===null)break;rt=dt,dt=rt.next,rt.next=null,st.lastBaseUpdate=rt,st.shared.pending=null}}while(!0);if(ct===null&&(ft=it),st.baseState=ft,st.firstBaseUpdate=ht,st.lastBaseUpdate=ct,_e=st.shared.interleaved,_e!==null){st=_e;do at|=st.lane,st=st.next;while(st!==_e)}else ot===null&&(st.shared.lanes=0);rh|=at,et.lanes=at,et.memoizedState=it}}function sh(et,_e,tt){if(et=_e.effects,_e.effects=null,et!==null)for(_e=0;_e<et.length;_e++){var nt=et[_e],st=nt.callback;if(st!==null){if(nt.callback=null,nt=tt,typeof st!="function")throw Error(p$1(191,st));st.call(nt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(et){if(et===th)throw Error(p$1(174));return et}function yh(et,_e){switch(G$1(wh,_e),G$1(vh,et),G$1(uh,th),et=_e.nodeType,et){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:et=et===8?_e.parentNode:_e,_e=et.namespaceURI||null,et=et.tagName,_e=lb(_e,et)}E(uh),G$1(uh,_e)}function zh(){E(uh),E(vh),E(wh)}function Ah(et){xh(wh.current);var _e=xh(uh.current),tt=lb(_e,et.type);_e!==tt&&(G$1(vh,et),G$1(uh,tt))}function Bh(et){vh.current===et&&(E(uh),E(vh))}var L=Uf(0);function Ch(et){for(var _e=et;_e!==null;){if(_e.tag===13){var tt=_e.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Dh=[];function Eh(){for(var et=0;et<Dh.length;et++)Dh[et]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(et,_e){if(_e===null)return!1;for(var tt=0;tt<_e.length&&tt<et.length;tt++)if(!He(et[tt],_e[tt]))return!1;return!0}function Nh(et,_e,tt,nt,st,ot){if(Hh=ot,M$1=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Fh.current=et===null||et.memoizedState===null?Oh:Ph,et=tt(nt,st),Jh){ot=0;do{if(Jh=!1,Kh=0,25<=ot)throw Error(p$1(301));ot+=1,O$1=N=null,_e.updateQueue=null,Fh.current=Qh,et=tt(nt,st)}while(Jh)}if(Fh.current=Rh,_e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,_e)throw Error(p$1(300));return et}function Sh(){var et=Kh!==0;return Kh=0,et}function Th(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=et:O$1=O$1.next=et,O$1}function Uh(){if(N===null){var et=M$1.alternate;et=et!==null?et.memoizedState:null}else et=N.next;var _e=O$1===null?M$1.memoizedState:O$1.next;if(_e!==null)O$1=_e,N=et;else{if(et===null)throw Error(p$1(310));N=et,et={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=et:O$1=O$1.next=et}return O$1}function Vh(et,_e){return typeof _e=="function"?_e(et):_e}function Wh(et){var _e=Uh(),tt=_e.queue;if(tt===null)throw Error(p$1(311));tt.lastRenderedReducer=et;var nt=N,st=nt.baseQueue,ot=tt.pending;if(ot!==null){if(st!==null){var at=st.next;st.next=ot.next,ot.next=at}nt.baseQueue=st=ot,tt.pending=null}if(st!==null){ot=st.next,nt=nt.baseState;var dt=at=null,ft=null,ht=ot;do{var ct=ht.lane;if((Hh&ct)===ct)ft!==null&&(ft=ft.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),nt=ht.hasEagerState?ht.eagerState:et(nt,ht.action);else{var it={lane:ct,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};ft===null?(dt=ft=it,at=nt):ft=ft.next=it,M$1.lanes|=ct,rh|=ct}ht=ht.next}while(ht!==null&&ht!==ot);ft===null?at=nt:ft.next=dt,He(nt,_e.memoizedState)||(dh=!0),_e.memoizedState=nt,_e.baseState=at,_e.baseQueue=ft,tt.lastRenderedState=nt}if(et=tt.interleaved,et!==null){st=et;do ot=st.lane,M$1.lanes|=ot,rh|=ot,st=st.next;while(st!==et)}else st===null&&(tt.lanes=0);return[_e.memoizedState,tt.dispatch]}function Xh(et){var _e=Uh(),tt=_e.queue;if(tt===null)throw Error(p$1(311));tt.lastRenderedReducer=et;var nt=tt.dispatch,st=tt.pending,ot=_e.memoizedState;if(st!==null){tt.pending=null;var at=st=st.next;do ot=et(ot,at.action),at=at.next;while(at!==st);He(ot,_e.memoizedState)||(dh=!0),_e.memoizedState=ot,_e.baseQueue===null&&(_e.baseState=ot),tt.lastRenderedState=ot}return[ot,nt]}function Yh(){}function Zh(et,_e){var tt=M$1,nt=Uh(),st=_e(),ot=!He(nt.memoizedState,st);if(ot&&(nt.memoizedState=st,dh=!0),nt=nt.queue,$h(ai.bind(null,tt,nt,et),[et]),nt.getSnapshot!==_e||ot||O$1!==null&&O$1.memoizedState.tag&1){if(tt.flags|=2048,bi(9,ci.bind(null,tt,nt,st,_e),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(tt,_e,st)}return st}function di(et,_e,tt){et.flags|=16384,et={getSnapshot:_e,value:tt},_e=M$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$1.updateQueue=_e,_e.stores=[et]):(tt=_e.stores,tt===null?_e.stores=[et]:tt.push(et))}function ci(et,_e,tt,nt){_e.value=tt,_e.getSnapshot=nt,ei(_e)&&fi(et)}function ai(et,_e,tt){return tt(function(){ei(_e)&&fi(et)})}function ei(et){var _e=et.getSnapshot;et=et.value;try{var tt=_e();return!He(et,tt)}catch{return!0}}function fi(et){var _e=ih(et,1);_e!==null&&gi(_e,et,1,-1)}function hi(et){var _e=Th();return typeof et=="function"&&(et=et()),_e.memoizedState=_e.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:et},_e.queue=et,et=et.dispatch=ii.bind(null,M$1,et),[_e.memoizedState,et]}function bi(et,_e,tt,nt){return et={tag:et,create:_e,destroy:tt,deps:nt,next:null},_e=M$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$1.updateQueue=_e,_e.lastEffect=et.next=et):(tt=_e.lastEffect,tt===null?_e.lastEffect=et.next=et:(nt=tt.next,tt.next=et,et.next=nt,_e.lastEffect=et)),et}function ji(){return Uh().memoizedState}function ki(et,_e,tt,nt){var st=Th();M$1.flags|=et,st.memoizedState=bi(1|_e,tt,void 0,nt===void 0?null:nt)}function li(et,_e,tt,nt){var st=Uh();nt=nt===void 0?null:nt;var ot=void 0;if(N!==null){var at=N.memoizedState;if(ot=at.destroy,nt!==null&&Mh(nt,at.deps)){st.memoizedState=bi(_e,tt,ot,nt);return}}M$1.flags|=et,st.memoizedState=bi(1|_e,tt,ot,nt)}function mi(et,_e){return ki(8390656,8,et,_e)}function $h(et,_e){return li(2048,8,et,_e)}function ni(et,_e){return li(4,2,et,_e)}function oi(et,_e){return li(4,4,et,_e)}function pi(et,_e){if(typeof _e=="function")return et=et(),_e(et),function(){_e(null)};if(_e!=null)return et=et(),_e.current=et,function(){_e.current=null}}function qi(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,li(4,4,pi.bind(null,_e,et),tt)}function ri(){}function si(et,_e){var tt=Uh();_e=_e===void 0?null:_e;var nt=tt.memoizedState;return nt!==null&&_e!==null&&Mh(_e,nt[1])?nt[0]:(tt.memoizedState=[et,_e],et)}function ti(et,_e){var tt=Uh();_e=_e===void 0?null:_e;var nt=tt.memoizedState;return nt!==null&&_e!==null&&Mh(_e,nt[1])?nt[0]:(et=et(),tt.memoizedState=[et,_e],et)}function ui(et,_e,tt){return Hh&21?(He(tt,_e)||(tt=yc(),M$1.lanes|=tt,rh|=tt,et.baseState=!0),_e):(et.baseState&&(et.baseState=!1,dh=!0),et.memoizedState=tt)}function vi(et,_e){var tt=C;C=tt!==0&&4>tt?tt:4,et(!0);var nt=Gh.transition;Gh.transition={};try{et(!1),_e()}finally{C=tt,Gh.transition=nt}}function wi(){return Uh().memoizedState}function xi(et,_e,tt){var nt=yi(et);if(tt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null},zi(et))Ai(_e,tt);else if(tt=hh(et,_e,tt,nt),tt!==null){var st=R();gi(tt,et,nt,st),Bi(tt,_e,nt)}}function ii(et,_e,tt){var nt=yi(et),st={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(zi(et))Ai(_e,st);else{var ot=et.alternate;if(et.lanes===0&&(ot===null||ot.lanes===0)&&(ot=_e.lastRenderedReducer,ot!==null))try{var at=_e.lastRenderedState,dt=ot(at,tt);if(st.hasEagerState=!0,st.eagerState=dt,He(dt,at)){var ft=_e.interleaved;ft===null?(st.next=st,gh(_e)):(st.next=ft.next,ft.next=st),_e.interleaved=st;return}}catch{}finally{}tt=hh(et,_e,st,nt),tt!==null&&(st=R(),gi(tt,et,nt,st),Bi(tt,_e,nt))}}function zi(et){var _e=et.alternate;return et===M$1||_e!==null&&_e===M$1}function Ai(et,_e){Jh=Ih=!0;var tt=et.pending;tt===null?_e.next=_e:(_e.next=tt.next,tt.next=_e),et.pending=_e}function Bi(et,_e,tt){if(tt&4194240){var nt=_e.lanes;nt&=et.pendingLanes,tt|=nt,_e.lanes=tt,Cc(et,tt)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(et,_e){return Th().memoizedState=[et,_e===void 0?null:_e],et},useContext:eh,useEffect:mi,useImperativeHandle:function(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,ki(4194308,4,pi.bind(null,_e,et),tt)},useLayoutEffect:function(et,_e){return ki(4194308,4,et,_e)},useInsertionEffect:function(et,_e){return ki(4,2,et,_e)},useMemo:function(et,_e){var tt=Th();return _e=_e===void 0?null:_e,et=et(),tt.memoizedState=[et,_e],et},useReducer:function(et,_e,tt){var nt=Th();return _e=tt!==void 0?tt(_e):_e,nt.memoizedState=nt.baseState=_e,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:_e},nt.queue=et,et=et.dispatch=xi.bind(null,M$1,et),[nt.memoizedState,et]},useRef:function(et){var _e=Th();return et={current:et},_e.memoizedState=et},useState:hi,useDebugValue:ri,useDeferredValue:function(et){return Th().memoizedState=et},useTransition:function(){var et=hi(!1),_e=et[0];return et=vi.bind(null,et[1]),Th().memoizedState=et,[_e,et]},useMutableSource:function(){},useSyncExternalStore:function(et,_e,tt){var nt=M$1,st=Th();if(I$1){if(tt===void 0)throw Error(p$1(407));tt=tt()}else{if(tt=_e(),Q$1===null)throw Error(p$1(349));Hh&30||di(nt,_e,tt)}st.memoizedState=tt;var ot={value:tt,getSnapshot:_e};return st.queue=ot,mi(ai.bind(null,nt,ot,et),[et]),nt.flags|=2048,bi(9,ci.bind(null,nt,ot,tt,_e),void 0,null),tt},useId:function(){var et=Th(),_e=Q$1.identifierPrefix;if(I$1){var tt=sg,nt=rg;tt=(nt&~(1<<32-oc(nt)-1)).toString(32)+tt,_e=":"+_e+"R"+tt,tt=Kh++,0<tt&&(_e+="H"+tt.toString(32)),_e+=":"}else tt=Lh++,_e=":"+_e+"r"+tt.toString(32)+":";return et.memoizedState=_e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var _e=Uh();return ui(_e,N.memoizedState,et)},useTransition:function(){var et=Wh(Vh)[0],_e=Uh().memoizedState;return[et,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var _e=Uh();return N===null?_e.memoizedState=et:ui(_e,N.memoizedState,et)},useTransition:function(){var et=Xh(Vh)[0],_e=Uh().memoizedState;return[et,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(et,_e){if(et&&et.defaultProps){_e=A$1({},_e),et=et.defaultProps;for(var tt in et)_e[tt]===void 0&&(_e[tt]=et[tt]);return _e}return _e}function Di(et,_e,tt,nt){_e=et.memoizedState,tt=tt(nt,_e),tt=tt==null?_e:A$1({},_e,tt),et.memoizedState=tt,et.lanes===0&&(et.updateQueue.baseState=tt)}var Ei={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,_e,tt){et=et._reactInternals;var nt=R(),st=yi(et),ot=mh(nt,st);ot.payload=_e,tt!=null&&(ot.callback=tt),_e=nh(et,ot,st),_e!==null&&(gi(_e,et,st,nt),oh(_e,et,st))},enqueueReplaceState:function(et,_e,tt){et=et._reactInternals;var nt=R(),st=yi(et),ot=mh(nt,st);ot.tag=1,ot.payload=_e,tt!=null&&(ot.callback=tt),_e=nh(et,ot,st),_e!==null&&(gi(_e,et,st,nt),oh(_e,et,st))},enqueueForceUpdate:function(et,_e){et=et._reactInternals;var tt=R(),nt=yi(et),st=mh(tt,nt);st.tag=2,_e!=null&&(st.callback=_e),_e=nh(et,st,nt),_e!==null&&(gi(_e,et,nt,tt),oh(_e,et,nt))}};function Fi(et,_e,tt,nt,st,ot,at){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(nt,ot,at):_e.prototype&&_e.prototype.isPureReactComponent?!Ie$1(tt,nt)||!Ie$1(st,ot):!0}function Gi(et,_e,tt){var nt=!1,st=Vf,ot=_e.contextType;return typeof ot=="object"&&ot!==null?ot=eh(ot):(st=Zf(_e)?Xf:H.current,nt=_e.contextTypes,ot=(nt=nt!=null)?Yf(et,st):Vf),_e=new _e(tt,ot),et.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=Ei,et.stateNode=_e,_e._reactInternals=et,nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=st,et.__reactInternalMemoizedMaskedChildContext=ot),_e}function Hi(et,_e,tt,nt){et=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(tt,nt),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(tt,nt),_e.state!==et&&Ei.enqueueReplaceState(_e,_e.state,null)}function Ii(et,_e,tt,nt){var st=et.stateNode;st.props=tt,st.state=et.memoizedState,st.refs={},kh(et);var ot=_e.contextType;typeof ot=="object"&&ot!==null?st.context=eh(ot):(ot=Zf(_e)?Xf:H.current,st.context=Yf(et,ot)),st.state=et.memoizedState,ot=_e.getDerivedStateFromProps,typeof ot=="function"&&(Di(et,_e,ot,tt),st.state=et.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof st.getSnapshotBeforeUpdate=="function"||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(_e=st.state,typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount(),_e!==st.state&&Ei.enqueueReplaceState(st,st.state,null),qh(et,tt,st,nt),st.state=et.memoizedState),typeof st.componentDidMount=="function"&&(et.flags|=4194308)}function Ji(et,_e){try{var tt="",nt=_e;do tt+=Pa(nt),nt=nt.return;while(nt);var st=tt}catch(ot){st=`
Error generating stack: `+ot.message+`
`+ot.stack}return{value:et,source:_e,stack:st,digest:null}}function Ki(et,_e,tt){return{value:et,source:null,stack:tt??null,digest:_e??null}}function Li(et,_e){try{console.error(_e.value)}catch(tt){setTimeout(function(){throw tt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(et,_e,tt){tt=mh(-1,tt),tt.tag=3,tt.payload={element:null};var nt=_e.value;return tt.callback=function(){Oi||(Oi=!0,Pi=nt),Li(et,_e)},tt}function Qi(et,_e,tt){tt=mh(-1,tt),tt.tag=3;var nt=et.type.getDerivedStateFromError;if(typeof nt=="function"){var st=_e.value;tt.payload=function(){return nt(st)},tt.callback=function(){Li(et,_e)}}var ot=et.stateNode;return ot!==null&&typeof ot.componentDidCatch=="function"&&(tt.callback=function(){Li(et,_e),typeof nt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var at=_e.stack;this.componentDidCatch(_e.value,{componentStack:at!==null?at:""})}),tt}function Si(et,_e,tt){var nt=et.pingCache;if(nt===null){nt=et.pingCache=new Mi;var st=new Set;nt.set(_e,st)}else st=nt.get(_e),st===void 0&&(st=new Set,nt.set(_e,st));st.has(tt)||(st.add(tt),et=Ti.bind(null,et,_e,tt),_e.then(et,et))}function Ui(et){do{var _e;if((_e=et.tag===13)&&(_e=et.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return et;et=et.return}while(et!==null);return null}function Vi(et,_e,tt,nt,st){return et.mode&1?(et.flags|=65536,et.lanes=st,et):(et===_e?et.flags|=65536:(et.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(_e=mh(-1,1),_e.tag=2,nh(tt,_e,1))),tt.lanes|=1),et)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(et,_e,tt,nt){_e.child=et===null?Vg(_e,null,tt,nt):Ug(_e,et.child,tt,nt)}function Yi(et,_e,tt,nt,st){tt=tt.render;var ot=_e.ref;return ch(_e,st),nt=Nh(et,_e,tt,nt,ot,st),tt=Sh(),et!==null&&!dh?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~st,Zi(et,_e,st)):(I$1&&tt&&vg(_e),_e.flags|=1,Xi(et,_e,nt,st),_e.child)}function $i(et,_e,tt,nt,st){if(et===null){var ot=tt.type;return typeof ot=="function"&&!aj(ot)&&ot.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(_e.tag=15,_e.type=ot,bj(et,_e,ot,nt,st)):(et=Rg(tt.type,null,nt,_e,_e.mode,st),et.ref=_e.ref,et.return=_e,_e.child=et)}if(ot=et.child,!(et.lanes&st)){var at=ot.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie$1,tt(at,nt)&&et.ref===_e.ref)return Zi(et,_e,st)}return _e.flags|=1,et=Pg(ot,nt),et.ref=_e.ref,et.return=_e,_e.child=et}function bj(et,_e,tt,nt,st){if(et!==null){var ot=et.memoizedProps;if(Ie$1(ot,nt)&&et.ref===_e.ref)if(dh=!1,_e.pendingProps=nt=ot,(et.lanes&st)!==0)et.flags&131072&&(dh=!0);else return _e.lanes=et.lanes,Zi(et,_e,st)}return cj(et,_e,tt,nt,st)}function dj(et,_e,tt){var nt=_e.pendingProps,st=nt.children,ot=et!==null?et.memoizedState:null;if(nt.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=tt;else{if(!(tt&1073741824))return et=ot!==null?ot.baseLanes|tt:tt,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:et,cachePool:null,transitions:null},_e.updateQueue=null,G$1(ej,fj),fj|=et,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=ot!==null?ot.baseLanes:tt,G$1(ej,fj),fj|=nt}else ot!==null?(nt=ot.baseLanes|tt,_e.memoizedState=null):nt=tt,G$1(ej,fj),fj|=nt;return Xi(et,_e,st,tt),_e.child}function gj(et,_e){var tt=_e.ref;(et===null&&tt!==null||et!==null&&et.ref!==tt)&&(_e.flags|=512,_e.flags|=2097152)}function cj(et,_e,tt,nt,st){var ot=Zf(tt)?Xf:H.current;return ot=Yf(_e,ot),ch(_e,st),tt=Nh(et,_e,tt,nt,ot,st),nt=Sh(),et!==null&&!dh?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~st,Zi(et,_e,st)):(I$1&&nt&&vg(_e),_e.flags|=1,Xi(et,_e,tt,st),_e.child)}function hj(et,_e,tt,nt,st){if(Zf(tt)){var ot=!0;cg(_e)}else ot=!1;if(ch(_e,st),_e.stateNode===null)ij(et,_e),Gi(_e,tt,nt),Ii(_e,tt,nt,st),nt=!0;else if(et===null){var at=_e.stateNode,dt=_e.memoizedProps;at.props=dt;var ft=at.context,ht=tt.contextType;typeof ht=="object"&&ht!==null?ht=eh(ht):(ht=Zf(tt)?Xf:H.current,ht=Yf(_e,ht));var ct=tt.getDerivedStateFromProps,it=typeof ct=="function"||typeof at.getSnapshotBeforeUpdate=="function";it||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(dt!==nt||ft!==ht)&&Hi(_e,at,nt,ht),jh=!1;var rt=_e.memoizedState;at.state=rt,qh(_e,nt,at,st),ft=_e.memoizedState,dt!==nt||rt!==ft||Wf.current||jh?(typeof ct=="function"&&(Di(_e,tt,ct,nt),ft=_e.memoizedState),(dt=jh||Fi(_e,tt,dt,nt,rt,ft,ht))?(it||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount()),typeof at.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof at.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=nt,_e.memoizedState=ft),at.props=nt,at.state=ft,at.context=ht,nt=dt):(typeof at.componentDidMount=="function"&&(_e.flags|=4194308),nt=!1)}else{at=_e.stateNode,lh(et,_e),dt=_e.memoizedProps,ht=_e.type===_e.elementType?dt:Ci(_e.type,dt),at.props=ht,it=_e.pendingProps,rt=at.context,ft=tt.contextType,typeof ft=="object"&&ft!==null?ft=eh(ft):(ft=Zf(tt)?Xf:H.current,ft=Yf(_e,ft));var lt=tt.getDerivedStateFromProps;(ct=typeof lt=="function"||typeof at.getSnapshotBeforeUpdate=="function")||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(dt!==it||rt!==ft)&&Hi(_e,at,nt,ft),jh=!1,rt=_e.memoizedState,at.state=rt,qh(_e,nt,at,st);var ut=_e.memoizedState;dt!==it||rt!==ut||Wf.current||jh?(typeof lt=="function"&&(Di(_e,tt,lt,nt),ut=_e.memoizedState),(ht=jh||Fi(_e,tt,ht,nt,rt,ut,ft)||!1)?(ct||typeof at.UNSAFE_componentWillUpdate!="function"&&typeof at.componentWillUpdate!="function"||(typeof at.componentWillUpdate=="function"&&at.componentWillUpdate(nt,ut,ft),typeof at.UNSAFE_componentWillUpdate=="function"&&at.UNSAFE_componentWillUpdate(nt,ut,ft)),typeof at.componentDidUpdate=="function"&&(_e.flags|=4),typeof at.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof at.componentDidUpdate!="function"||dt===et.memoizedProps&&rt===et.memoizedState||(_e.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||dt===et.memoizedProps&&rt===et.memoizedState||(_e.flags|=1024),_e.memoizedProps=nt,_e.memoizedState=ut),at.props=nt,at.state=ut,at.context=ft,nt=ht):(typeof at.componentDidUpdate!="function"||dt===et.memoizedProps&&rt===et.memoizedState||(_e.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||dt===et.memoizedProps&&rt===et.memoizedState||(_e.flags|=1024),nt=!1)}return jj(et,_e,tt,nt,ot,st)}function jj(et,_e,tt,nt,st,ot){gj(et,_e);var at=(_e.flags&128)!==0;if(!nt&&!at)return st&&dg(_e,tt,!1),Zi(et,_e,ot);nt=_e.stateNode,Wi.current=_e;var dt=at&&typeof tt.getDerivedStateFromError!="function"?null:nt.render();return _e.flags|=1,et!==null&&at?(_e.child=Ug(_e,et.child,null,ot),_e.child=Ug(_e,null,dt,ot)):Xi(et,_e,dt,ot),_e.memoizedState=nt.state,st&&dg(_e,tt,!0),_e.child}function kj(et){var _e=et.stateNode;_e.pendingContext?ag(et,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag(et,_e.context,!1),yh(et,_e.containerInfo)}function lj(et,_e,tt,nt,st){return Ig(),Jg(st),_e.flags|=256,Xi(et,_e,tt,nt),_e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(et){return{baseLanes:et,cachePool:null,transitions:null}}function oj(et,_e,tt){var nt=_e.pendingProps,st=L.current,ot=!1,at=(_e.flags&128)!==0,dt;if((dt=at)||(dt=et!==null&&et.memoizedState===null?!1:(st&2)!==0),dt?(ot=!0,_e.flags&=-129):(et===null||et.memoizedState!==null)&&(st|=1),G$1(L,st&1),et===null)return Eg(_e),et=_e.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(_e.mode&1?et.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(at=nt.children,et=nt.fallback,ot?(nt=_e.mode,ot=_e.child,at={mode:"hidden",children:at},!(nt&1)&&ot!==null?(ot.childLanes=0,ot.pendingProps=at):ot=pj(at,nt,0,null),et=Tg(et,nt,tt,null),ot.return=_e,et.return=_e,ot.sibling=et,_e.child=ot,_e.child.memoizedState=nj(tt),_e.memoizedState=mj,et):qj(_e,at));if(st=et.memoizedState,st!==null&&(dt=st.dehydrated,dt!==null))return rj(et,_e,at,nt,dt,st,tt);if(ot){ot=nt.fallback,at=_e.mode,st=et.child,dt=st.sibling;var ft={mode:"hidden",children:nt.children};return!(at&1)&&_e.child!==st?(nt=_e.child,nt.childLanes=0,nt.pendingProps=ft,_e.deletions=null):(nt=Pg(st,ft),nt.subtreeFlags=st.subtreeFlags&14680064),dt!==null?ot=Pg(dt,ot):(ot=Tg(ot,at,tt,null),ot.flags|=2),ot.return=_e,nt.return=_e,nt.sibling=ot,_e.child=nt,nt=ot,ot=_e.child,at=et.child.memoizedState,at=at===null?nj(tt):{baseLanes:at.baseLanes|tt,cachePool:null,transitions:at.transitions},ot.memoizedState=at,ot.childLanes=et.childLanes&~tt,_e.memoizedState=mj,nt}return ot=et.child,et=ot.sibling,nt=Pg(ot,{mode:"visible",children:nt.children}),!(_e.mode&1)&&(nt.lanes=tt),nt.return=_e,nt.sibling=null,et!==null&&(tt=_e.deletions,tt===null?(_e.deletions=[et],_e.flags|=16):tt.push(et)),_e.child=nt,_e.memoizedState=null,nt}function qj(et,_e){return _e=pj({mode:"visible",children:_e},et.mode,0,null),_e.return=et,et.child=_e}function sj(et,_e,tt,nt){return nt!==null&&Jg(nt),Ug(_e,et.child,null,tt),et=qj(_e,_e.pendingProps.children),et.flags|=2,_e.memoizedState=null,et}function rj(et,_e,tt,nt,st,ot,at){if(tt)return _e.flags&256?(_e.flags&=-257,nt=Ki(Error(p$1(422))),sj(et,_e,at,nt)):_e.memoizedState!==null?(_e.child=et.child,_e.flags|=128,null):(ot=nt.fallback,st=_e.mode,nt=pj({mode:"visible",children:nt.children},st,0,null),ot=Tg(ot,st,at,null),ot.flags|=2,nt.return=_e,ot.return=_e,nt.sibling=ot,_e.child=nt,_e.mode&1&&Ug(_e,et.child,null,at),_e.child.memoizedState=nj(at),_e.memoizedState=mj,ot);if(!(_e.mode&1))return sj(et,_e,at,null);if(st.data==="$!"){if(nt=st.nextSibling&&st.nextSibling.dataset,nt)var dt=nt.dgst;return nt=dt,ot=Error(p$1(419)),nt=Ki(ot,nt,void 0),sj(et,_e,at,nt)}if(dt=(at&et.childLanes)!==0,dh||dt){if(nt=Q$1,nt!==null){switch(at&-at){case 4:st=2;break;case 16:st=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:st=32;break;case 536870912:st=268435456;break;default:st=0}st=st&(nt.suspendedLanes|at)?0:st,st!==0&&st!==ot.retryLane&&(ot.retryLane=st,ih(et,st),gi(nt,et,st,-1))}return tj(),nt=Ki(Error(p$1(421))),sj(et,_e,at,nt)}return st.data==="$?"?(_e.flags|=128,_e.child=et.child,_e=uj.bind(null,et),st._reactRetry=_e,null):(et=ot.treeContext,yg=Lf(st.nextSibling),xg=_e,I$1=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=_e),_e=qj(_e,nt.children),_e.flags|=4096,_e)}function vj(et,_e,tt){et.lanes|=_e;var nt=et.alternate;nt!==null&&(nt.lanes|=_e),bh(et.return,_e,tt)}function wj(et,_e,tt,nt,st){var ot=et.memoizedState;ot===null?et.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:nt,tail:tt,tailMode:st}:(ot.isBackwards=_e,ot.rendering=null,ot.renderingStartTime=0,ot.last=nt,ot.tail=tt,ot.tailMode=st)}function xj(et,_e,tt){var nt=_e.pendingProps,st=nt.revealOrder,ot=nt.tail;if(Xi(et,_e,nt.children,tt),nt=L.current,nt&2)nt=nt&1|2,_e.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=_e.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&vj(et,tt,_e);else if(et.tag===19)vj(et,tt,_e);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break e;for(;et.sibling===null;){if(et.return===null||et.return===_e)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}nt&=1}if(G$1(L,nt),!(_e.mode&1))_e.memoizedState=null;else switch(st){case"forwards":for(tt=_e.child,st=null;tt!==null;)et=tt.alternate,et!==null&&Ch(et)===null&&(st=tt),tt=tt.sibling;tt=st,tt===null?(st=_e.child,_e.child=null):(st=tt.sibling,tt.sibling=null),wj(_e,!1,st,tt,ot);break;case"backwards":for(tt=null,st=_e.child,_e.child=null;st!==null;){if(et=st.alternate,et!==null&&Ch(et)===null){_e.child=st;break}et=st.sibling,st.sibling=tt,tt=st,st=et}wj(_e,!0,tt,null,ot);break;case"together":wj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function ij(et,_e){!(_e.mode&1)&&et!==null&&(et.alternate=null,_e.alternate=null,_e.flags|=2)}function Zi(et,_e,tt){if(et!==null&&(_e.dependencies=et.dependencies),rh|=_e.lanes,!(tt&_e.childLanes))return null;if(et!==null&&_e.child!==et.child)throw Error(p$1(153));if(_e.child!==null){for(et=_e.child,tt=Pg(et,et.pendingProps),_e.child=tt,tt.return=_e;et.sibling!==null;)et=et.sibling,tt=tt.sibling=Pg(et,et.pendingProps),tt.return=_e;tt.sibling=null}return _e.child}function yj(et,_e,tt){switch(_e.tag){case 3:kj(_e),Ig();break;case 5:Ah(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:yh(_e,_e.stateNode.containerInfo);break;case 10:var nt=_e.type._context,st=_e.memoizedProps.value;G$1(Wg,nt._currentValue),nt._currentValue=st;break;case 13:if(nt=_e.memoizedState,nt!==null)return nt.dehydrated!==null?(G$1(L,L.current&1),_e.flags|=128,null):tt&_e.child.childLanes?oj(et,_e,tt):(G$1(L,L.current&1),et=Zi(et,_e,tt),et!==null?et.sibling:null);G$1(L,L.current&1);break;case 19:if(nt=(tt&_e.childLanes)!==0,et.flags&128){if(nt)return xj(et,_e,tt);_e.flags|=128}if(st=_e.memoizedState,st!==null&&(st.rendering=null,st.tail=null,st.lastEffect=null),G$1(L,L.current),nt)break;return null;case 22:case 23:return _e.lanes=0,dj(et,_e,tt)}return Zi(et,_e,tt)}var zj,Aj,Bj,Cj;zj=function(et,_e){for(var tt=_e.child;tt!==null;){if(tt.tag===5||tt.tag===6)et.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_e)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===_e)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Aj=function(){};Bj=function(et,_e,tt,nt){var st=et.memoizedProps;if(st!==nt){et=_e.stateNode,xh(uh.current);var ot=null;switch(tt){case"input":st=Ya(et,st),nt=Ya(et,nt),ot=[];break;case"select":st=A$1({},st,{value:void 0}),nt=A$1({},nt,{value:void 0}),ot=[];break;case"textarea":st=gb(et,st),nt=gb(et,nt),ot=[];break;default:typeof st.onClick!="function"&&typeof nt.onClick=="function"&&(et.onclick=Bf)}ub(tt,nt);var at;tt=null;for(ht in st)if(!nt.hasOwnProperty(ht)&&st.hasOwnProperty(ht)&&st[ht]!=null)if(ht==="style"){var dt=st[ht];for(at in dt)dt.hasOwnProperty(at)&&(tt||(tt={}),tt[at]="")}else ht!=="dangerouslySetInnerHTML"&&ht!=="children"&&ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&ht!=="autoFocus"&&(ea.hasOwnProperty(ht)?ot||(ot=[]):(ot=ot||[]).push(ht,null));for(ht in nt){var ft=nt[ht];if(dt=st!=null?st[ht]:void 0,nt.hasOwnProperty(ht)&&ft!==dt&&(ft!=null||dt!=null))if(ht==="style")if(dt){for(at in dt)!dt.hasOwnProperty(at)||ft&&ft.hasOwnProperty(at)||(tt||(tt={}),tt[at]="");for(at in ft)ft.hasOwnProperty(at)&&dt[at]!==ft[at]&&(tt||(tt={}),tt[at]=ft[at])}else tt||(ot||(ot=[]),ot.push(ht,tt)),tt=ft;else ht==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,dt=dt?dt.__html:void 0,ft!=null&&dt!==ft&&(ot=ot||[]).push(ht,ft)):ht==="children"?typeof ft!="string"&&typeof ft!="number"||(ot=ot||[]).push(ht,""+ft):ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ht)?(ft!=null&&ht==="onScroll"&&D$1("scroll",et),ot||dt===ft||(ot=[])):(ot=ot||[]).push(ht,ft))}tt&&(ot=ot||[]).push("style",tt);var ht=ot;(_e.updateQueue=ht)&&(_e.flags|=4)}};Cj=function(et,_e,tt,nt){tt!==nt&&(_e.flags|=4)};function Dj(et,_e){if(!I$1)switch(et.tailMode){case"hidden":_e=et.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?et.tail=null:tt.sibling=null;break;case"collapsed":tt=et.tail;for(var nt=null;tt!==null;)tt.alternate!==null&&(nt=tt),tt=tt.sibling;nt===null?_e||et.tail===null?et.tail=null:et.tail.sibling=null:nt.sibling=null}}function S$1(et){var _e=et.alternate!==null&&et.alternate.child===et.child,tt=0,nt=0;if(_e)for(var st=et.child;st!==null;)tt|=st.lanes|st.childLanes,nt|=st.subtreeFlags&14680064,nt|=st.flags&14680064,st.return=et,st=st.sibling;else for(st=et.child;st!==null;)tt|=st.lanes|st.childLanes,nt|=st.subtreeFlags,nt|=st.flags,st.return=et,st=st.sibling;return et.subtreeFlags|=nt,et.childLanes=tt,_e}function Ej(et,_e,tt){var nt=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return nt=_e.stateNode,zh(),E(Wf),E(H),Eh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(et===null||et.child===null)&&(Gg(_e)?_e.flags|=4:et===null||et.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(et,_e),S$1(_e),null;case 5:Bh(_e);var st=xh(wh.current);if(tt=_e.type,et!==null&&_e.stateNode!=null)Bj(et,_e,tt,nt,st),et.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!nt){if(_e.stateNode===null)throw Error(p$1(166));return S$1(_e),null}if(et=xh(uh.current),Gg(_e)){nt=_e.stateNode,tt=_e.type;var ot=_e.memoizedProps;switch(nt[Of]=_e,nt[Pf]=ot,et=(_e.mode&1)!==0,tt){case"dialog":D$1("cancel",nt),D$1("close",nt);break;case"iframe":case"object":case"embed":D$1("load",nt);break;case"video":case"audio":for(st=0;st<lf.length;st++)D$1(lf[st],nt);break;case"source":D$1("error",nt);break;case"img":case"image":case"link":D$1("error",nt),D$1("load",nt);break;case"details":D$1("toggle",nt);break;case"input":Za(nt,ot),D$1("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!ot.multiple},D$1("invalid",nt);break;case"textarea":hb(nt,ot),D$1("invalid",nt)}ub(tt,ot),st=null;for(var at in ot)if(ot.hasOwnProperty(at)){var dt=ot[at];at==="children"?typeof dt=="string"?nt.textContent!==dt&&(ot.suppressHydrationWarning!==!0&&Af(nt.textContent,dt,et),st=["children",dt]):typeof dt=="number"&&nt.textContent!==""+dt&&(ot.suppressHydrationWarning!==!0&&Af(nt.textContent,dt,et),st=["children",""+dt]):ea.hasOwnProperty(at)&&dt!=null&&at==="onScroll"&&D$1("scroll",nt)}switch(tt){case"input":Va(nt),db(nt,ot,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof ot.onClick=="function"&&(nt.onclick=Bf)}nt=st,_e.updateQueue=nt,nt!==null&&(_e.flags|=4)}else{at=st.nodeType===9?st:st.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(tt)),et==="http://www.w3.org/1999/xhtml"?tt==="script"?(et=at.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof nt.is=="string"?et=at.createElement(tt,{is:nt.is}):(et=at.createElement(tt),tt==="select"&&(at=et,nt.multiple?at.multiple=!0:nt.size&&(at.size=nt.size))):et=at.createElementNS(et,tt),et[Of]=_e,et[Pf]=nt,zj(et,_e,!1,!1),_e.stateNode=et;e:{switch(at=vb(tt,nt),tt){case"dialog":D$1("cancel",et),D$1("close",et),st=nt;break;case"iframe":case"object":case"embed":D$1("load",et),st=nt;break;case"video":case"audio":for(st=0;st<lf.length;st++)D$1(lf[st],et);st=nt;break;case"source":D$1("error",et),st=nt;break;case"img":case"image":case"link":D$1("error",et),D$1("load",et),st=nt;break;case"details":D$1("toggle",et),st=nt;break;case"input":Za(et,nt),st=Ya(et,nt),D$1("invalid",et);break;case"option":st=nt;break;case"select":et._wrapperState={wasMultiple:!!nt.multiple},st=A$1({},nt,{value:void 0}),D$1("invalid",et);break;case"textarea":hb(et,nt),st=gb(et,nt),D$1("invalid",et);break;default:st=nt}ub(tt,st),dt=st;for(ot in dt)if(dt.hasOwnProperty(ot)){var ft=dt[ot];ot==="style"?sb(et,ft):ot==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,ft!=null&&nb(et,ft)):ot==="children"?typeof ft=="string"?(tt!=="textarea"||ft!=="")&&ob(et,ft):typeof ft=="number"&&ob(et,""+ft):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(ea.hasOwnProperty(ot)?ft!=null&&ot==="onScroll"&&D$1("scroll",et):ft!=null&&ta(et,ot,ft,at))}switch(tt){case"input":Va(et),db(et,nt,!1);break;case"textarea":Va(et),jb(et);break;case"option":nt.value!=null&&et.setAttribute("value",""+Sa(nt.value));break;case"select":et.multiple=!!nt.multiple,ot=nt.value,ot!=null?fb(et,!!nt.multiple,ot,!1):nt.defaultValue!=null&&fb(et,!!nt.multiple,nt.defaultValue,!0);break;default:typeof st.onClick=="function"&&(et.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if(et&&_e.stateNode!=null)Cj(et,_e,et.memoizedProps,nt);else{if(typeof nt!="string"&&_e.stateNode===null)throw Error(p$1(166));if(tt=xh(wh.current),xh(uh.current),Gg(_e)){if(nt=_e.stateNode,tt=_e.memoizedProps,nt[Of]=_e,(ot=nt.nodeValue!==tt)&&(et=xg,et!==null))switch(et.tag){case 3:Af(nt.nodeValue,tt,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,tt,(et.mode&1)!==0)}ot&&(_e.flags|=4)}else nt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(nt),nt[Of]=_e,_e.stateNode=nt}return S$1(_e),null;case 13:if(E(L),nt=_e.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,ot=!1;else if(ot=Gg(_e),nt!==null&&nt.dehydrated!==null){if(et===null){if(!ot)throw Error(p$1(318));if(ot=_e.memoizedState,ot=ot!==null?ot.dehydrated:null,!ot)throw Error(p$1(317));ot[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),ot=!1}else zg!==null&&(Fj(zg),zg=null),ot=!0;if(!ot)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=tt,_e):(nt=nt!==null,nt!==(et!==null&&et.memoizedState!==null)&&nt&&(_e.child.flags|=8192,_e.mode&1&&(et===null||L.current&1?T$1===0&&(T$1=3):tj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return zh(),Aj(et,_e),et===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return ah(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E(L),ot=_e.memoizedState,ot===null)return S$1(_e),null;if(nt=(_e.flags&128)!==0,at=ot.rendering,at===null)if(nt)Dj(ot,!1);else{if(T$1!==0||et!==null&&et.flags&128)for(et=_e.child;et!==null;){if(at=Ch(et),at!==null){for(_e.flags|=128,Dj(ot,!1),nt=at.updateQueue,nt!==null&&(_e.updateQueue=nt,_e.flags|=4),_e.subtreeFlags=0,nt=tt,tt=_e.child;tt!==null;)ot=tt,et=nt,ot.flags&=14680066,at=ot.alternate,at===null?(ot.childLanes=0,ot.lanes=et,ot.child=null,ot.subtreeFlags=0,ot.memoizedProps=null,ot.memoizedState=null,ot.updateQueue=null,ot.dependencies=null,ot.stateNode=null):(ot.childLanes=at.childLanes,ot.lanes=at.lanes,ot.child=at.child,ot.subtreeFlags=0,ot.deletions=null,ot.memoizedProps=at.memoizedProps,ot.memoizedState=at.memoizedState,ot.updateQueue=at.updateQueue,ot.type=at.type,et=at.dependencies,ot.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),tt=tt.sibling;return G$1(L,L.current&1|2),_e.child}et=et.sibling}ot.tail!==null&&B()>Gj&&(_e.flags|=128,nt=!0,Dj(ot,!1),_e.lanes=4194304)}else{if(!nt)if(et=Ch(at),et!==null){if(_e.flags|=128,nt=!0,tt=et.updateQueue,tt!==null&&(_e.updateQueue=tt,_e.flags|=4),Dj(ot,!0),ot.tail===null&&ot.tailMode==="hidden"&&!at.alternate&&!I$1)return S$1(_e),null}else 2*B()-ot.renderingStartTime>Gj&&tt!==1073741824&&(_e.flags|=128,nt=!0,Dj(ot,!1),_e.lanes=4194304);ot.isBackwards?(at.sibling=_e.child,_e.child=at):(tt=ot.last,tt!==null?tt.sibling=at:_e.child=at,ot.last=at)}return ot.tail!==null?(_e=ot.tail,ot.rendering=_e,ot.tail=_e.sibling,ot.renderingStartTime=B(),_e.sibling=null,tt=L.current,G$1(L,nt?tt&1|2:tt&1),_e):(S$1(_e),null);case 22:case 23:return Hj(),nt=_e.memoizedState!==null,et!==null&&et.memoizedState!==null!==nt&&(_e.flags|=8192),nt&&_e.mode&1?fj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$1(156,_e.tag))}function Ij(et,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 3:return zh(),E(Wf),E(H),Eh(),et=_e.flags,et&65536&&!(et&128)?(_e.flags=et&-65537|128,_e):null;case 5:return Bh(_e),null;case 13:if(E(L),et=_e.memoizedState,et!==null&&et.dehydrated!==null){if(_e.alternate===null)throw Error(p$1(340));Ig()}return et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(_e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(et,_e){var tt=et.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(nt){W$1(et,_e,nt)}else tt.current=null}function Mj(et,_e,tt){try{tt()}catch(nt){W$1(et,_e,nt)}}var Nj=!1;function Oj(et,_e){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var tt={start:et.selectionStart,end:et.selectionEnd};else e:{tt=(tt=et.ownerDocument)&&tt.defaultView||window;var nt=tt.getSelection&&tt.getSelection();if(nt&&nt.rangeCount!==0){tt=nt.anchorNode;var st=nt.anchorOffset,ot=nt.focusNode;nt=nt.focusOffset;try{tt.nodeType,ot.nodeType}catch{tt=null;break e}var at=0,dt=-1,ft=-1,ht=0,ct=0,it=et,rt=null;t:for(;;){for(var lt;it!==tt||st!==0&&it.nodeType!==3||(dt=at+st),it!==ot||nt!==0&&it.nodeType!==3||(ft=at+nt),it.nodeType===3&&(at+=it.nodeValue.length),(lt=it.firstChild)!==null;)rt=it,it=lt;for(;;){if(it===et)break t;if(rt===tt&&++ht===st&&(dt=at),rt===ot&&++ct===nt&&(ft=at),(lt=it.nextSibling)!==null)break;it=rt,rt=it.parentNode}it=lt}tt=dt===-1||ft===-1?null:{start:dt,end:ft}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:et,selectionRange:tt},dd=!1,V$1=_e;V$1!==null;)if(_e=V$1,et=_e.child,(_e.subtreeFlags&1028)!==0&&et!==null)et.return=_e,V$1=et;else for(;V$1!==null;){_e=V$1;try{var ut=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var pt=ut.memoizedProps,gt=ut.memoizedState,mt=_e.stateNode,yt=mt.getSnapshotBeforeUpdate(_e.elementType===_e.type?pt:Ci(_e.type,pt),gt);mt.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var bt=_e.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(wt){W$1(_e,_e.return,wt)}if(et=_e.sibling,et!==null){et.return=_e.return,V$1=et;break}V$1=_e.return}return ut=Nj,Nj=!1,ut}function Pj(et,_e,tt){var nt=_e.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var st=nt=nt.next;do{if((st.tag&et)===et){var ot=st.destroy;st.destroy=void 0,ot!==void 0&&Mj(_e,tt,ot)}st=st.next}while(st!==nt)}}function Qj(et,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var tt=_e=_e.next;do{if((tt.tag&et)===et){var nt=tt.create;tt.destroy=nt()}tt=tt.next}while(tt!==_e)}}function Rj(et){var _e=et.ref;if(_e!==null){var tt=et.stateNode;switch(et.tag){case 5:et=tt;break;default:et=tt}typeof _e=="function"?_e(et):_e.current=et}}function Sj(et){var _e=et.alternate;_e!==null&&(et.alternate=null,Sj(_e)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(_e=et.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Tj(et){return et.tag===5||et.tag===3||et.tag===4}function Uj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Tj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Vj(et,_e,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,_e?tt.nodeType===8?tt.parentNode.insertBefore(et,_e):tt.insertBefore(et,_e):(tt.nodeType===8?(_e=tt.parentNode,_e.insertBefore(et,tt)):(_e=tt,_e.appendChild(et)),tt=tt._reactRootContainer,tt!=null||_e.onclick!==null||(_e.onclick=Bf));else if(nt!==4&&(et=et.child,et!==null))for(Vj(et,_e,tt),et=et.sibling;et!==null;)Vj(et,_e,tt),et=et.sibling}function Wj(et,_e,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,_e?tt.insertBefore(et,_e):tt.appendChild(et);else if(nt!==4&&(et=et.child,et!==null))for(Wj(et,_e,tt),et=et.sibling;et!==null;)Wj(et,_e,tt),et=et.sibling}var X$2=null,Xj=!1;function Yj(et,_e,tt){for(tt=tt.child;tt!==null;)Zj(et,_e,tt),tt=tt.sibling}function Zj(et,_e,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$1||Lj(tt,_e);case 6:var nt=X$2,st=Xj;X$2=null,Yj(et,_e,tt),X$2=nt,Xj=st,X$2!==null&&(Xj?(et=X$2,tt=tt.stateNode,et.nodeType===8?et.parentNode.removeChild(tt):et.removeChild(tt)):X$2.removeChild(tt.stateNode));break;case 18:X$2!==null&&(Xj?(et=X$2,tt=tt.stateNode,et.nodeType===8?Kf(et.parentNode,tt):et.nodeType===1&&Kf(et,tt),bd(et)):Kf(X$2,tt.stateNode));break;case 4:nt=X$2,st=Xj,X$2=tt.stateNode.containerInfo,Xj=!0,Yj(et,_e,tt),X$2=nt,Xj=st;break;case 0:case 11:case 14:case 15:if(!U$1&&(nt=tt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){st=nt=nt.next;do{var ot=st,at=ot.destroy;ot=ot.tag,at!==void 0&&(ot&2||ot&4)&&Mj(tt,_e,at),st=st.next}while(st!==nt)}Yj(et,_e,tt);break;case 1:if(!U$1&&(Lj(tt,_e),nt=tt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=tt.memoizedProps,nt.state=tt.memoizedState,nt.componentWillUnmount()}catch(dt){W$1(tt,_e,dt)}Yj(et,_e,tt);break;case 21:Yj(et,_e,tt);break;case 22:tt.mode&1?(U$1=(nt=U$1)||tt.memoizedState!==null,Yj(et,_e,tt),U$1=nt):Yj(et,_e,tt);break;default:Yj(et,_e,tt)}}function ak(et){var _e=et.updateQueue;if(_e!==null){et.updateQueue=null;var tt=et.stateNode;tt===null&&(tt=et.stateNode=new Kj),_e.forEach(function(nt){var st=bk.bind(null,et,nt);tt.has(nt)||(tt.add(nt),nt.then(st,st))})}}function ck(et,_e){var tt=_e.deletions;if(tt!==null)for(var nt=0;nt<tt.length;nt++){var st=tt[nt];try{var ot=et,at=_e,dt=at;e:for(;dt!==null;){switch(dt.tag){case 5:X$2=dt.stateNode,Xj=!1;break e;case 3:X$2=dt.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=dt.stateNode.containerInfo,Xj=!0;break e}dt=dt.return}if(X$2===null)throw Error(p$1(160));Zj(ot,at,st),X$2=null,Xj=!1;var ft=st.alternate;ft!==null&&(ft.return=null),st.return=null}catch(ht){W$1(st,_e,ht)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)dk(_e,et),_e=_e.sibling}function dk(et,_e){var tt=et.alternate,nt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(ck(_e,et),ek(et),nt&4){try{Pj(3,et,et.return),Qj(3,et)}catch(pt){W$1(et,et.return,pt)}try{Pj(5,et,et.return)}catch(pt){W$1(et,et.return,pt)}}break;case 1:ck(_e,et),ek(et),nt&512&&tt!==null&&Lj(tt,tt.return);break;case 5:if(ck(_e,et),ek(et),nt&512&&tt!==null&&Lj(tt,tt.return),et.flags&32){var st=et.stateNode;try{ob(st,"")}catch(pt){W$1(et,et.return,pt)}}if(nt&4&&(st=et.stateNode,st!=null)){var ot=et.memoizedProps,at=tt!==null?tt.memoizedProps:ot,dt=et.type,ft=et.updateQueue;if(et.updateQueue=null,ft!==null)try{dt==="input"&&ot.type==="radio"&&ot.name!=null&&ab(st,ot),vb(dt,at);var ht=vb(dt,ot);for(at=0;at<ft.length;at+=2){var ct=ft[at],it=ft[at+1];ct==="style"?sb(st,it):ct==="dangerouslySetInnerHTML"?nb(st,it):ct==="children"?ob(st,it):ta(st,ct,it,ht)}switch(dt){case"input":bb(st,ot);break;case"textarea":ib(st,ot);break;case"select":var rt=st._wrapperState.wasMultiple;st._wrapperState.wasMultiple=!!ot.multiple;var lt=ot.value;lt!=null?fb(st,!!ot.multiple,lt,!1):rt!==!!ot.multiple&&(ot.defaultValue!=null?fb(st,!!ot.multiple,ot.defaultValue,!0):fb(st,!!ot.multiple,ot.multiple?[]:"",!1))}st[Pf]=ot}catch(pt){W$1(et,et.return,pt)}}break;case 6:if(ck(_e,et),ek(et),nt&4){if(et.stateNode===null)throw Error(p$1(162));st=et.stateNode,ot=et.memoizedProps;try{st.nodeValue=ot}catch(pt){W$1(et,et.return,pt)}}break;case 3:if(ck(_e,et),ek(et),nt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(pt){W$1(et,et.return,pt)}break;case 4:ck(_e,et),ek(et);break;case 13:ck(_e,et),ek(et),st=et.child,st.flags&8192&&(ot=st.memoizedState!==null,st.stateNode.isHidden=ot,!ot||st.alternate!==null&&st.alternate.memoizedState!==null||(fk=B())),nt&4&&ak(et);break;case 22:if(ct=tt!==null&&tt.memoizedState!==null,et.mode&1?(U$1=(ht=U$1)||ct,ck(_e,et),U$1=ht):ck(_e,et),ek(et),nt&8192){if(ht=et.memoizedState!==null,(et.stateNode.isHidden=ht)&&!ct&&et.mode&1)for(V$1=et,ct=et.child;ct!==null;){for(it=V$1=ct;V$1!==null;){switch(rt=V$1,lt=rt.child,rt.tag){case 0:case 11:case 14:case 15:Pj(4,rt,rt.return);break;case 1:Lj(rt,rt.return);var ut=rt.stateNode;if(typeof ut.componentWillUnmount=="function"){nt=rt,tt=rt.return;try{_e=nt,ut.props=_e.memoizedProps,ut.state=_e.memoizedState,ut.componentWillUnmount()}catch(pt){W$1(nt,tt,pt)}}break;case 5:Lj(rt,rt.return);break;case 22:if(rt.memoizedState!==null){gk(it);continue}}lt!==null?(lt.return=rt,V$1=lt):gk(it)}ct=ct.sibling}e:for(ct=null,it=et;;){if(it.tag===5){if(ct===null){ct=it;try{st=it.stateNode,ht?(ot=st.style,typeof ot.setProperty=="function"?ot.setProperty("display","none","important"):ot.display="none"):(dt=it.stateNode,ft=it.memoizedProps.style,at=ft!=null&&ft.hasOwnProperty("display")?ft.display:null,dt.style.display=rb("display",at))}catch(pt){W$1(et,et.return,pt)}}}else if(it.tag===6){if(ct===null)try{it.stateNode.nodeValue=ht?"":it.memoizedProps}catch(pt){W$1(et,et.return,pt)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===et)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===et)break e;for(;it.sibling===null;){if(it.return===null||it.return===et)break e;ct===it&&(ct=null),it=it.return}ct===it&&(ct=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:ck(_e,et),ek(et),nt&4&&ak(et);break;case 21:break;default:ck(_e,et),ek(et)}}function ek(et){var _e=et.flags;if(_e&2){try{e:{for(var tt=et.return;tt!==null;){if(Tj(tt)){var nt=tt;break e}tt=tt.return}throw Error(p$1(160))}switch(nt.tag){case 5:var st=nt.stateNode;nt.flags&32&&(ob(st,""),nt.flags&=-33);var ot=Uj(et);Wj(et,ot,st);break;case 3:case 4:var at=nt.stateNode.containerInfo,dt=Uj(et);Vj(et,dt,at);break;default:throw Error(p$1(161))}}catch(ft){W$1(et,et.return,ft)}et.flags&=-3}_e&4096&&(et.flags&=-4097)}function hk(et,_e,tt){V$1=et,ik(et)}function ik(et,_e,tt){for(var nt=(et.mode&1)!==0;V$1!==null;){var st=V$1,ot=st.child;if(st.tag===22&&nt){var at=st.memoizedState!==null||Jj;if(!at){var dt=st.alternate,ft=dt!==null&&dt.memoizedState!==null||U$1;dt=Jj;var ht=U$1;if(Jj=at,(U$1=ft)&&!ht)for(V$1=st;V$1!==null;)at=V$1,ft=at.child,at.tag===22&&at.memoizedState!==null?jk(st):ft!==null?(ft.return=at,V$1=ft):jk(st);for(;ot!==null;)V$1=ot,ik(ot),ot=ot.sibling;V$1=st,Jj=dt,U$1=ht}kk(et)}else st.subtreeFlags&8772&&ot!==null?(ot.return=st,V$1=ot):kk(et)}}function kk(et){for(;V$1!==null;){var _e=V$1;if(_e.flags&8772){var tt=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$1||Qj(5,_e);break;case 1:var nt=_e.stateNode;if(_e.flags&4&&!U$1)if(tt===null)nt.componentDidMount();else{var st=_e.elementType===_e.type?tt.memoizedProps:Ci(_e.type,tt.memoizedProps);nt.componentDidUpdate(st,tt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var ot=_e.updateQueue;ot!==null&&sh(_e,ot,nt);break;case 3:var at=_e.updateQueue;if(at!==null){if(tt=null,_e.child!==null)switch(_e.child.tag){case 5:tt=_e.child.stateNode;break;case 1:tt=_e.child.stateNode}sh(_e,at,tt)}break;case 5:var dt=_e.stateNode;if(tt===null&&_e.flags&4){tt=dt;var ft=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":ft.autoFocus&&tt.focus();break;case"img":ft.src&&(tt.src=ft.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var ht=_e.alternate;if(ht!==null){var ct=ht.memoizedState;if(ct!==null){var it=ct.dehydrated;it!==null&&bd(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||_e.flags&512&&Rj(_e)}catch(rt){W$1(_e,_e.return,rt)}}if(_e===et){V$1=null;break}if(tt=_e.sibling,tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function gk(et){for(;V$1!==null;){var _e=V$1;if(_e===et){V$1=null;break}var tt=_e.sibling;if(tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function jk(et){for(;V$1!==null;){var _e=V$1;try{switch(_e.tag){case 0:case 11:case 15:var tt=_e.return;try{Qj(4,_e)}catch(ft){W$1(_e,tt,ft)}break;case 1:var nt=_e.stateNode;if(typeof nt.componentDidMount=="function"){var st=_e.return;try{nt.componentDidMount()}catch(ft){W$1(_e,st,ft)}}var ot=_e.return;try{Rj(_e)}catch(ft){W$1(_e,ot,ft)}break;case 5:var at=_e.return;try{Rj(_e)}catch(ft){W$1(_e,at,ft)}}}catch(ft){W$1(_e,_e.return,ft)}if(_e===et){V$1=null;break}var dt=_e.sibling;if(dt!==null){dt.return=_e.return,V$1=dt;break}V$1=_e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(et){return et.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(et=C,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function gi(et,_e,tt,nt){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(et,tt,nt),(!(K&2)||et!==Q$1)&&(et===Q$1&&(!(K&2)&&(qk|=tt),T$1===4&&Ck(et,Z$1)),Dk(et,nt),tt===1&&K===0&&!(_e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(et,_e){var tt=et.callbackNode;wc(et,_e);var nt=uc(et,et===Q$1?Z$1:0);if(nt===0)tt!==null&&bc(tt),et.callbackNode=null,et.callbackPriority=0;else if(_e=nt&-nt,et.callbackPriority!==_e){if(tt!=null&&bc(tt),_e===1)et.tag===0?ig(Ek.bind(null,et)):hg(Ek.bind(null,et)),Jf(function(){!(K&6)&&jg()}),tt=null;else{switch(Dc(nt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Fk(tt,Gk.bind(null,et))}et.callbackPriority=_e,et.callbackNode=tt}}function Gk(et,_e){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var tt=et.callbackNode;if(Hk()&&et.callbackNode!==tt)return null;var nt=uc(et,et===Q$1?Z$1:0);if(nt===0)return null;if(nt&30||nt&et.expiredLanes||_e)_e=Ik(et,nt);else{_e=nt;var st=K;K|=2;var ot=Jk();(Q$1!==et||Z$1!==_e)&&(uk=null,Gj=B()+500,Kk(et,_e));do try{Lk();break}catch(dt){Mk(et,dt)}while(!0);$g(),mk.current=ot,K=st,Y$1!==null?_e=0:(Q$1=null,Z$1=0,_e=T$1)}if(_e!==0){if(_e===2&&(st=xc(et),st!==0&&(nt=st,_e=Nk(et,st))),_e===1)throw tt=pk,Kk(et,0),Ck(et,nt),Dk(et,B()),tt;if(_e===6)Ck(et,nt);else{if(st=et.current.alternate,!(nt&30)&&!Ok(st)&&(_e=Ik(et,nt),_e===2&&(ot=xc(et),ot!==0&&(nt=ot,_e=Nk(et,ot))),_e===1))throw tt=pk,Kk(et,0),Ck(et,nt),Dk(et,B()),tt;switch(et.finishedWork=st,et.finishedLanes=nt,_e){case 0:case 1:throw Error(p$1(345));case 2:Pk(et,tk,uk);break;case 3:if(Ck(et,nt),(nt&130023424)===nt&&(_e=fk+500-B(),10<_e)){if(uc(et,0)!==0)break;if(st=et.suspendedLanes,(st&nt)!==nt){R(),et.pingedLanes|=et.suspendedLanes&st;break}et.timeoutHandle=Ff(Pk.bind(null,et,tk,uk),_e);break}Pk(et,tk,uk);break;case 4:if(Ck(et,nt),(nt&4194240)===nt)break;for(_e=et.eventTimes,st=-1;0<nt;){var at=31-oc(nt);ot=1<<at,at=_e[at],at>st&&(st=at),nt&=~ot}if(nt=st,nt=B()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*lk(nt/1960))-nt,10<nt){et.timeoutHandle=Ff(Pk.bind(null,et,tk,uk),nt);break}Pk(et,tk,uk);break;case 5:Pk(et,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(et,B()),et.callbackNode===tt?Gk.bind(null,et):null}function Nk(et,_e){var tt=sk;return et.current.memoizedState.isDehydrated&&(Kk(et,_e).flags|=256),et=Ik(et,_e),et!==2&&(_e=tk,tk=tt,_e!==null&&Fj(_e)),et}function Fj(et){tk===null?tk=et:tk.push.apply(tk,et)}function Ok(et){for(var _e=et;;){if(_e.flags&16384){var tt=_e.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var nt=0;nt<tt.length;nt++){var st=tt[nt],ot=st.getSnapshot;st=st.value;try{if(!He(ot(),st))return!1}catch{return!1}}}if(tt=_e.child,_e.subtreeFlags&16384&&tt!==null)tt.return=_e,_e=tt;else{if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Ck(et,_e){for(_e&=~rk,_e&=~qk,et.suspendedLanes|=_e,et.pingedLanes&=~_e,et=et.expirationTimes;0<_e;){var tt=31-oc(_e),nt=1<<tt;et[tt]=-1,_e&=~nt}}function Ek(et){if(K&6)throw Error(p$1(327));Hk();var _e=uc(et,0);if(!(_e&1))return Dk(et,B()),null;var tt=Ik(et,_e);if(et.tag!==0&&tt===2){var nt=xc(et);nt!==0&&(_e=nt,tt=Nk(et,nt))}if(tt===1)throw tt=pk,Kk(et,0),Ck(et,_e),Dk(et,B()),tt;if(tt===6)throw Error(p$1(345));return et.finishedWork=et.current.alternate,et.finishedLanes=_e,Pk(et,tk,uk),Dk(et,B()),null}function Qk(et,_e){var tt=K;K|=1;try{return et(_e)}finally{K=tt,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(et){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _e=K;K|=1;var tt=ok.transition,nt=C;try{if(ok.transition=null,C=1,et)return et()}finally{C=nt,ok.transition=tt,K=_e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(et,_e){et.finishedWork=null,et.finishedLanes=0;var tt=et.timeoutHandle;if(tt!==-1&&(et.timeoutHandle=-1,Gf(tt)),Y$1!==null)for(tt=Y$1.return;tt!==null;){var nt=tt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(nt);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(nt.type._context);break;case 22:case 23:Hj()}tt=tt.return}if(Q$1=et,Y$1=et=Pg(et.current,null),Z$1=fj=_e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_e=0;_e<fh.length;_e++)if(tt=fh[_e],nt=tt.interleaved,nt!==null){tt.interleaved=null;var st=nt.next,ot=tt.pending;if(ot!==null){var at=ot.next;ot.next=st,nt.next=at}tt.pending=nt}fh=null}return et}function Mk(et,_e){do{var tt=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var nt=M$1.memoizedState;nt!==null;){var st=nt.queue;st!==null&&(st.pending=null),nt=nt.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,tt===null||tt.return===null){T$1=1,pk=_e,Y$1=null;break}e:{var ot=et,at=tt.return,dt=tt,ft=_e;if(_e=Z$1,dt.flags|=32768,ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var ht=ft,ct=dt,it=ct.tag;if(!(ct.mode&1)&&(it===0||it===11||it===15)){var rt=ct.alternate;rt?(ct.updateQueue=rt.updateQueue,ct.memoizedState=rt.memoizedState,ct.lanes=rt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var lt=Ui(at);if(lt!==null){lt.flags&=-257,Vi(lt,at,dt,ot,_e),lt.mode&1&&Si(ot,ht,_e),_e=lt,ft=ht;var ut=_e.updateQueue;if(ut===null){var pt=new Set;pt.add(ft),_e.updateQueue=pt}else ut.add(ft);break e}else{if(!(_e&1)){Si(ot,ht,_e),tj();break e}ft=Error(p$1(426))}}else if(I$1&&dt.mode&1){var gt=Ui(at);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Vi(gt,at,dt,ot,_e),Jg(Ji(ft,dt));break e}}ot=ft=Ji(ft,dt),T$1!==4&&(T$1=2),sk===null?sk=[ot]:sk.push(ot),ot=at;do{switch(ot.tag){case 3:ot.flags|=65536,_e&=-_e,ot.lanes|=_e;var mt=Ni(ot,ft,_e);ph(ot,mt);break e;case 1:dt=ft;var yt=ot.type,bt=ot.stateNode;if(!(ot.flags&128)&&(typeof yt.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Ri===null||!Ri.has(bt)))){ot.flags|=65536,_e&=-_e,ot.lanes|=_e;var wt=Qi(ot,dt,_e);ph(ot,wt);break e}}ot=ot.return}while(ot!==null)}Sk(tt)}catch(xt){_e=xt,Y$1===tt&&tt!==null&&(Y$1=tt=tt.return);continue}break}while(!0)}function Jk(){var et=mk.current;return mk.current=Rh,et===null?Rh:et}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(et,_e){var tt=K;K|=2;var nt=Jk();(Q$1!==et||Z$1!==_e)&&(uk=null,Kk(et,_e));do try{Tk();break}catch(st){Mk(et,st)}while(!0);if($g(),K=tt,mk.current=nt,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(et){var _e=Vk(et.alternate,et,fj);et.memoizedProps=et.pendingProps,_e===null?Sk(et):Y$1=_e,nk.current=null}function Sk(et){var _e=et;do{var tt=_e.alternate;if(et=_e.return,_e.flags&32768){if(tt=Ij(tt,_e),tt!==null){tt.flags&=32767,Y$1=tt;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$1=6,Y$1=null;return}}else if(tt=Ej(tt,_e,fj),tt!==null){Y$1=tt;return}if(_e=_e.sibling,_e!==null){Y$1=_e;return}Y$1=_e=et}while(_e!==null);T$1===0&&(T$1=5)}function Pk(et,_e,tt){var nt=C,st=ok.transition;try{ok.transition=null,C=1,Wk(et,_e,tt,nt)}finally{ok.transition=st,C=nt}return null}function Wk(et,_e,tt,nt){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));tt=et.finishedWork;var st=et.finishedLanes;if(tt===null)return null;if(et.finishedWork=null,et.finishedLanes=0,tt===et.current)throw Error(p$1(177));et.callbackNode=null,et.callbackPriority=0;var ot=tt.lanes|tt.childLanes;if(Bc(et,ot),et===Q$1&&(Y$1=Q$1=null,Z$1=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ot=(tt.flags&15990)!==0,tt.subtreeFlags&15990||ot){ot=ok.transition,ok.transition=null;var at=C;C=1;var dt=K;K|=4,nk.current=null,Oj(et,tt),dk(tt,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=tt,hk(tt),dc(),K=dt,C=at,ok.transition=ot}else et.current=tt;if(vk&&(vk=!1,wk=et,xk=st),ot=et.pendingLanes,ot===0&&(Ri=null),mc(tt.stateNode),Dk(et,B()),_e!==null)for(nt=et.onRecoverableError,tt=0;tt<_e.length;tt++)st=_e[tt],nt(st.value,{componentStack:st.stack,digest:st.digest});if(Oi)throw Oi=!1,et=Pi,Pi=null,et;return xk&1&&et.tag!==0&&Hk(),ot=et.pendingLanes,ot&1?et===zk?yk++:(yk=0,zk=et):yk=0,jg(),null}function Hk(){if(wk!==null){var et=Dc(xk),_e=ok.transition,tt=C;try{if(ok.transition=null,C=16>et?16:et,wk===null)var nt=!1;else{if(et=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var st=K;for(K|=4,V$1=et.current;V$1!==null;){var ot=V$1,at=ot.child;if(V$1.flags&16){var dt=ot.deletions;if(dt!==null){for(var ft=0;ft<dt.length;ft++){var ht=dt[ft];for(V$1=ht;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,ot)}var it=ct.child;if(it!==null)it.return=ct,V$1=it;else for(;V$1!==null;){ct=V$1;var rt=ct.sibling,lt=ct.return;if(Sj(ct),ct===ht){V$1=null;break}if(rt!==null){rt.return=lt,V$1=rt;break}V$1=lt}}}var ut=ot.alternate;if(ut!==null){var pt=ut.child;if(pt!==null){ut.child=null;do{var gt=pt.sibling;pt.sibling=null,pt=gt}while(pt!==null)}}V$1=ot}}if(ot.subtreeFlags&2064&&at!==null)at.return=ot,V$1=at;else e:for(;V$1!==null;){if(ot=V$1,ot.flags&2048)switch(ot.tag){case 0:case 11:case 15:Pj(9,ot,ot.return)}var mt=ot.sibling;if(mt!==null){mt.return=ot.return,V$1=mt;break e}V$1=ot.return}}var yt=et.current;for(V$1=yt;V$1!==null;){at=V$1;var bt=at.child;if(at.subtreeFlags&2064&&bt!==null)bt.return=at,V$1=bt;else e:for(at=yt;V$1!==null;){if(dt=V$1,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Qj(9,dt)}}catch(xt){W$1(dt,dt.return,xt)}if(dt===at){V$1=null;break e}var wt=dt.sibling;if(wt!==null){wt.return=dt.return,V$1=wt;break e}V$1=dt.return}}if(K=st,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}nt=!0}return nt}finally{C=tt,ok.transition=_e}}return!1}function Xk(et,_e,tt){_e=Ji(tt,_e),_e=Ni(et,_e,1),et=nh(et,_e,1),_e=R(),et!==null&&(Ac(et,1,_e),Dk(et,_e))}function W$1(et,_e,tt){if(et.tag===3)Xk(et,et,tt);else for(;_e!==null;){if(_e.tag===3){Xk(_e,et,tt);break}else if(_e.tag===1){var nt=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Ri===null||!Ri.has(nt))){et=Ji(tt,et),et=Qi(_e,et,1),_e=nh(_e,et,1),et=R(),_e!==null&&(Ac(_e,1,et),Dk(_e,et));break}}_e=_e.return}}function Ti(et,_e,tt){var nt=et.pingCache;nt!==null&&nt.delete(_e),_e=R(),et.pingedLanes|=et.suspendedLanes&tt,Q$1===et&&(Z$1&tt)===tt&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(et,0):rk|=tt),Dk(et,_e)}function Yk(et,_e){_e===0&&(et.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var tt=R();et=ih(et,_e),et!==null&&(Ac(et,_e,tt),Dk(et,tt))}function uj(et){var _e=et.memoizedState,tt=0;_e!==null&&(tt=_e.retryLane),Yk(et,tt)}function bk(et,_e){var tt=0;switch(et.tag){case 13:var nt=et.stateNode,st=et.memoizedState;st!==null&&(tt=st.retryLane);break;case 19:nt=et.stateNode;break;default:throw Error(p$1(314))}nt!==null&&nt.delete(_e),Yk(et,tt)}var Vk;Vk=function(et,_e,tt){if(et!==null)if(et.memoizedProps!==_e.pendingProps||Wf.current)dh=!0;else{if(!(et.lanes&tt)&&!(_e.flags&128))return dh=!1,yj(et,_e,tt);dh=!!(et.flags&131072)}else dh=!1,I$1&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var nt=_e.type;ij(et,_e),et=_e.pendingProps;var st=Yf(_e,H.current);ch(_e,tt),st=Nh(null,_e,nt,et,st,tt);var ot=Sh();return _e.flags|=1,typeof st=="object"&&st!==null&&typeof st.render=="function"&&st.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(nt)?(ot=!0,cg(_e)):ot=!1,_e.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,kh(_e),st.updater=Ei,_e.stateNode=st,st._reactInternals=_e,Ii(_e,nt,et,tt),_e=jj(null,_e,nt,!0,ot,tt)):(_e.tag=0,I$1&&ot&&vg(_e),Xi(null,_e,st,tt),_e=_e.child),_e;case 16:nt=_e.elementType;e:{switch(ij(et,_e),et=_e.pendingProps,st=nt._init,nt=st(nt._payload),_e.type=nt,st=_e.tag=Zk(nt),et=Ci(nt,et),st){case 0:_e=cj(null,_e,nt,et,tt);break e;case 1:_e=hj(null,_e,nt,et,tt);break e;case 11:_e=Yi(null,_e,nt,et,tt);break e;case 14:_e=$i(null,_e,nt,Ci(nt.type,et),tt);break e}throw Error(p$1(306,nt,""))}return _e;case 0:return nt=_e.type,st=_e.pendingProps,st=_e.elementType===nt?st:Ci(nt,st),cj(et,_e,nt,st,tt);case 1:return nt=_e.type,st=_e.pendingProps,st=_e.elementType===nt?st:Ci(nt,st),hj(et,_e,nt,st,tt);case 3:e:{if(kj(_e),et===null)throw Error(p$1(387));nt=_e.pendingProps,ot=_e.memoizedState,st=ot.element,lh(et,_e),qh(_e,nt,null,tt);var at=_e.memoizedState;if(nt=at.element,ot.isDehydrated)if(ot={element:nt,isDehydrated:!1,cache:at.cache,pendingSuspenseBoundaries:at.pendingSuspenseBoundaries,transitions:at.transitions},_e.updateQueue.baseState=ot,_e.memoizedState=ot,_e.flags&256){st=Ji(Error(p$1(423)),_e),_e=lj(et,_e,nt,tt,st);break e}else if(nt!==st){st=Ji(Error(p$1(424)),_e),_e=lj(et,_e,nt,tt,st);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$1=!0,zg=null,tt=Vg(_e,null,nt,tt),_e.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),nt===st){_e=Zi(et,_e,tt);break e}Xi(et,_e,nt,tt)}_e=_e.child}return _e;case 5:return Ah(_e),et===null&&Eg(_e),nt=_e.type,st=_e.pendingProps,ot=et!==null?et.memoizedProps:null,at=st.children,Ef(nt,st)?at=null:ot!==null&&Ef(nt,ot)&&(_e.flags|=32),gj(et,_e),Xi(et,_e,at,tt),_e.child;case 6:return et===null&&Eg(_e),null;case 13:return oj(et,_e,tt);case 4:return yh(_e,_e.stateNode.containerInfo),nt=_e.pendingProps,et===null?_e.child=Ug(_e,null,nt,tt):Xi(et,_e,nt,tt),_e.child;case 11:return nt=_e.type,st=_e.pendingProps,st=_e.elementType===nt?st:Ci(nt,st),Yi(et,_e,nt,st,tt);case 7:return Xi(et,_e,_e.pendingProps,tt),_e.child;case 8:return Xi(et,_e,_e.pendingProps.children,tt),_e.child;case 12:return Xi(et,_e,_e.pendingProps.children,tt),_e.child;case 10:e:{if(nt=_e.type._context,st=_e.pendingProps,ot=_e.memoizedProps,at=st.value,G$1(Wg,nt._currentValue),nt._currentValue=at,ot!==null)if(He(ot.value,at)){if(ot.children===st.children&&!Wf.current){_e=Zi(et,_e,tt);break e}}else for(ot=_e.child,ot!==null&&(ot.return=_e);ot!==null;){var dt=ot.dependencies;if(dt!==null){at=ot.child;for(var ft=dt.firstContext;ft!==null;){if(ft.context===nt){if(ot.tag===1){ft=mh(-1,tt&-tt),ft.tag=2;var ht=ot.updateQueue;if(ht!==null){ht=ht.shared;var ct=ht.pending;ct===null?ft.next=ft:(ft.next=ct.next,ct.next=ft),ht.pending=ft}}ot.lanes|=tt,ft=ot.alternate,ft!==null&&(ft.lanes|=tt),bh(ot.return,tt,_e),dt.lanes|=tt;break}ft=ft.next}}else if(ot.tag===10)at=ot.type===_e.type?null:ot.child;else if(ot.tag===18){if(at=ot.return,at===null)throw Error(p$1(341));at.lanes|=tt,dt=at.alternate,dt!==null&&(dt.lanes|=tt),bh(at,tt,_e),at=ot.sibling}else at=ot.child;if(at!==null)at.return=ot;else for(at=ot;at!==null;){if(at===_e){at=null;break}if(ot=at.sibling,ot!==null){ot.return=at.return,at=ot;break}at=at.return}ot=at}Xi(et,_e,st.children,tt),_e=_e.child}return _e;case 9:return st=_e.type,nt=_e.pendingProps.children,ch(_e,tt),st=eh(st),nt=nt(st),_e.flags|=1,Xi(et,_e,nt,tt),_e.child;case 14:return nt=_e.type,st=Ci(nt,_e.pendingProps),st=Ci(nt.type,st),$i(et,_e,nt,st,tt);case 15:return bj(et,_e,_e.type,_e.pendingProps,tt);case 17:return nt=_e.type,st=_e.pendingProps,st=_e.elementType===nt?st:Ci(nt,st),ij(et,_e),_e.tag=1,Zf(nt)?(et=!0,cg(_e)):et=!1,ch(_e,tt),Gi(_e,nt,st),Ii(_e,nt,st,tt),jj(null,_e,nt,!0,et,tt);case 19:return xj(et,_e,tt);case 22:return dj(et,_e,tt)}throw Error(p$1(156,_e.tag))};function Fk(et,_e){return ac(et,_e)}function $k(et,_e,tt,nt){this.tag=et,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,_e,tt,nt){return new $k(et,_e,tt,nt)}function aj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function Zk(et){if(typeof et=="function")return aj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function Pg(et,_e){var tt=et.alternate;return tt===null?(tt=Bg(et.tag,_e,et.key,et.mode),tt.elementType=et.elementType,tt.type=et.type,tt.stateNode=et.stateNode,tt.alternate=et,et.alternate=tt):(tt.pendingProps=_e,tt.type=et.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=et.flags&14680064,tt.childLanes=et.childLanes,tt.lanes=et.lanes,tt.child=et.child,tt.memoizedProps=et.memoizedProps,tt.memoizedState=et.memoizedState,tt.updateQueue=et.updateQueue,_e=et.dependencies,tt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},tt.sibling=et.sibling,tt.index=et.index,tt.ref=et.ref,tt}function Rg(et,_e,tt,nt,st,ot){var at=2;if(nt=et,typeof et=="function")aj(et)&&(at=1);else if(typeof et=="string")at=5;else e:switch(et){case ya:return Tg(tt.children,st,ot,_e);case za:at=8,st|=8;break;case Aa:return et=Bg(12,tt,_e,st|2),et.elementType=Aa,et.lanes=ot,et;case Ea:return et=Bg(13,tt,_e,st),et.elementType=Ea,et.lanes=ot,et;case Fa:return et=Bg(19,tt,_e,st),et.elementType=Fa,et.lanes=ot,et;case Ia:return pj(tt,st,ot,_e);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:at=10;break e;case Ca:at=9;break e;case Da:at=11;break e;case Ga:at=14;break e;case Ha:at=16,nt=null;break e}throw Error(p$1(130,et==null?et:typeof et,""))}return _e=Bg(at,tt,_e,st),_e.elementType=et,_e.type=nt,_e.lanes=ot,_e}function Tg(et,_e,tt,nt){return et=Bg(7,et,nt,_e),et.lanes=tt,et}function pj(et,_e,tt,nt){return et=Bg(22,et,nt,_e),et.elementType=Ia,et.lanes=tt,et.stateNode={isHidden:!1},et}function Qg(et,_e,tt){return et=Bg(6,et,null,_e),et.lanes=tt,et}function Sg(et,_e,tt){return _e=Bg(4,et.children!==null?et.children:[],et.key,_e),_e.lanes=tt,_e.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},_e}function al(et,_e,tt,nt,st){this.tag=_e,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=st,this.mutableSourceEagerHydrationData=null}function bl(et,_e,tt,nt,st,ot,at,dt,ft){return et=new al(et,_e,tt,dt,ft),_e===1?(_e=1,ot===!0&&(_e|=8)):_e=0,ot=Bg(3,null,null,_e),et.current=ot,ot.stateNode=et,ot.memoizedState={element:nt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ot),et}function cl(et,_e,tt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:et,containerInfo:_e,implementation:tt}}function dl(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$1(170));var _e=et;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$1(171))}if(et.tag===1){var tt=et.type;if(Zf(tt))return bg(et,tt,_e)}return _e}function el(et,_e,tt,nt,st,ot,at,dt,ft){return et=bl(tt,nt,!0,et,st,ot,at,dt,ft),et.context=dl(null),tt=et.current,nt=R(),st=yi(tt),ot=mh(nt,st),ot.callback=_e??null,nh(tt,ot,st),et.current.lanes=st,Ac(et,st,nt),Dk(et,nt),et}function fl(et,_e,tt,nt){var st=_e.current,ot=R(),at=yi(st);return tt=dl(tt),_e.context===null?_e.context=tt:_e.pendingContext=tt,_e=mh(ot,at),_e.payload={element:et},nt=nt===void 0?null:nt,nt!==null&&(_e.callback=nt),et=nh(st,_e,at),et!==null&&(gi(et,st,at,ot),oh(et,st,at)),at}function gl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function hl(et,_e){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var tt=et.retryLane;et.retryLane=tt!==0&&tt<_e?tt:_e}}function il(et,_e){hl(et,_e),(et=et.alternate)&&hl(et,_e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(et){console.error(et)};function ll(et){this._internalRoot=et}ml.prototype.render=ll.prototype.render=function(et){var _e=this._internalRoot;if(_e===null)throw Error(p$1(409));fl(et,_e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var _e=et.containerInfo;Rk(function(){fl(null,et,null,null)}),_e[uf]=null}};function ml(et){this._internalRoot=et}ml.prototype.unstable_scheduleHydration=function(et){if(et){var _e=Hc();et={blockedOn:null,target:et,priority:_e};for(var tt=0;tt<Qc.length&&_e!==0&&_e<Qc[tt].priority;tt++);Qc.splice(tt,0,et),tt===0&&Vc(et)}};function nl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(et,_e,tt,nt,st){if(st){if(typeof nt=="function"){var ot=nt;nt=function(){var ht=gl(at);ot.call(ht)}}var at=el(_e,nt,et,0,null,!1,!1,"",pl);return et._reactRootContainer=at,et[uf]=at.current,sf(et.nodeType===8?et.parentNode:et),Rk(),at}for(;st=et.lastChild;)et.removeChild(st);if(typeof nt=="function"){var dt=nt;nt=function(){var ht=gl(ft);dt.call(ht)}}var ft=bl(et,0,!1,null,null,!1,!1,"",pl);return et._reactRootContainer=ft,et[uf]=ft.current,sf(et.nodeType===8?et.parentNode:et),Rk(function(){fl(_e,ft,tt,nt)}),ft}function rl(et,_e,tt,nt,st){var ot=tt._reactRootContainer;if(ot){var at=ot;if(typeof st=="function"){var dt=st;st=function(){var ft=gl(at);dt.call(ft)}}fl(_e,at,et,st)}else at=ql(tt,_e,et,st,nt);return gl(at)}Ec=function(et){switch(et.tag){case 3:var _e=et.stateNode;if(_e.current.memoizedState.isDehydrated){var tt=tc(_e.pendingLanes);tt!==0&&(Cc(_e,tt|1),Dk(_e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var nt=ih(et,1);if(nt!==null){var st=R();gi(nt,et,1,st)}}),il(et,1)}};Fc=function(et){if(et.tag===13){var _e=ih(et,134217728);if(_e!==null){var tt=R();gi(_e,et,134217728,tt)}il(et,134217728)}};Gc=function(et){if(et.tag===13){var _e=yi(et),tt=ih(et,_e);if(tt!==null){var nt=R();gi(tt,et,_e,nt)}il(et,_e)}};Hc=function(){return C};Ic=function(et,_e){var tt=C;try{return C=et,_e()}finally{C=tt}};yb=function(et,_e,tt){switch(_e){case"input":if(bb(et,tt),_e=tt.name,tt.type==="radio"&&_e!=null){for(tt=et;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<tt.length;_e++){var nt=tt[_e];if(nt!==et&&nt.form===et.form){var st=Db(nt);if(!st)throw Error(p$1(90));Wa(nt),bb(nt,st)}}}break;case"textarea":ib(et,tt);break;case"select":_e=tt.value,_e!=null&&fb(et,!!tt.multiple,_e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(et,_e){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_e))throw Error(p$1(200));return cl(et,_e,null,tt)};reactDom_production_min.createRoot=function(et,_e){if(!nl(et))throw Error(p$1(299));var tt=!1,nt="",st=kl;return _e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(nt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(st=_e.onRecoverableError)),_e=bl(et,1,!1,null,null,tt,!1,nt,st),et[uf]=_e.current,sf(et.nodeType===8?et.parentNode:et),new ll(_e)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var _e=et._reactInternals;if(_e===void 0)throw typeof et.render=="function"?Error(p$1(188)):(et=Object.keys(et).join(","),Error(p$1(268,et)));return et=Zb(_e),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Rk(et)};reactDom_production_min.hydrate=function(et,_e,tt){if(!ol(_e))throw Error(p$1(200));return rl(null,et,_e,!0,tt)};reactDom_production_min.hydrateRoot=function(et,_e,tt){if(!nl(et))throw Error(p$1(405));var nt=tt!=null&&tt.hydratedSources||null,st=!1,ot="",at=kl;if(tt!=null&&(tt.unstable_strictMode===!0&&(st=!0),tt.identifierPrefix!==void 0&&(ot=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(at=tt.onRecoverableError)),_e=el(_e,null,et,1,tt??null,st,!1,ot,at),et[uf]=_e.current,sf(et),nt)for(et=0;et<nt.length;et++)tt=nt[et],st=tt._getVersion,st=st(tt._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[tt,st]:_e.mutableSourceEagerHydrationData.push(tt,st);return new ml(_e)};reactDom_production_min.render=function(et,_e,tt){if(!ol(_e))throw Error(p$1(200));return rl(null,et,_e,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(et){if(!ol(et))throw Error(p$1(40));return et._reactRootContainer?(Rk(function(){rl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,_e,tt,nt){if(!ol(tt))throw Error(p$1(200));if(et==null||et._reactInternals===void 0)throw Error(p$1(38));return rl(et,_e,tt,!1,nt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=et=>et.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(et,_e)=>{const tt=reactExports.forwardRef(({color:nt="currentColor",size:st=24,strokeWidth:ot=2,absoluteStrokeWidth:at,className:dt="",children:ft,...ht},ct)=>reactExports.createElement("svg",{ref:ct,...defaultAttributes,width:st,height:st,stroke:nt,strokeWidth:at?Number(ot)*24/Number(st):ot,className:["lucide",`lucide-${toKebabCase(et)}`,dt].join(" "),...ht},[..._e.map(([it,rt])=>reactExports.createElement(it,rt)),...Array.isArray(ft)?ft:[ft]]));return tt.displayName=`${et}`,tt};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Award=createLucideIcon("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookText=createLucideIcon("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bot=createLucideIcon("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Briefcase=createLucideIcon("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cloud=createLucideIcon("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Code=createLucideIcon("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpu=createLucideIcon("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Github=createLucideIcon("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GraduationCap=createLucideIcon("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lightbulb=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Linkedin=createLucideIcon("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MapPin=createLucideIcon("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageSquare=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Monitor=createLucideIcon("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moon=createLucideIcon("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Move=createLucideIcon("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelsTopLeft=createLucideIcon("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Smartphone=createLucideIcon("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Stethoscope=createLucideIcon("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Terminal=createLucideIcon("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomIn=createLucideIcon("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomOut=createLucideIcon("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ThemeContext=reactExports.createContext({theme:"light",toggleTheme:()=>{}}),ThemeProvider=({children:et})=>{const[_e,tt]=reactExports.useState(()=>localStorage.getItem("theme")||"light");reactExports.useEffect(()=>{localStorage.setItem("theme",_e),_e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[_e]);const nt=()=>{tt(st=>st==="light"?"dark":"light")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:_e,toggleTheme:nt},children:et})},useTheme=()=>reactExports.useContext(ThemeContext);function ThemeToggle(){const{theme:et,toggleTheme:_e}=useTheme();return jsxRuntimeExports.jsx("button",{onClick:_e,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:et==="light"?jsxRuntimeExports.jsx(Moon,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5 text-gray-400"})})}function Navbar(){const[et,_e]=reactExports.useState(!1),[tt,nt]=reactExports.useState(!1),st=()=>{window.open("/assets/docs/raktim_cv.pdf","_blank")},ot=[{href:"#education",text:"Education"},{href:"#experience",text:"Experience"},{href:"#skills",text:"Skills"},{href:"#research",text:"Research"},{href:"#publications",text:"Publications"},{href:"#awards",text:"Awards"}],at=()=>{_e(!1)},dt=ft=>{ft.preventDefault(),nt(!0);const ht=document.getElementById("about");ht&&ht.scrollIntoView({behavior:"smooth"}),requestAnimationFrame(()=>{nt(!1)}),_e(!1)};return jsxRuntimeExports.jsxs("nav",{className:"fixed w-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 shadow-sm transition-all duration-200",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-8 w-8 text-[#94c973]"}),jsxRuntimeExports.jsxs("a",{href:"#about",className:`ml-2 text-xl text-gray-900 dark:text-white hover:text-[#94c973] dark:hover:text-[#94c973] transition-colors ${tt?"text-[#94c973] dark:text-[#94c973]":""}`,onClick:dt,children:["Raktim ",jsxRuntimeExports.jsx("strong",{children:"Mondol"})]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[ot.map(ft=>jsxRuntimeExports.jsx("a",{href:ft.href,className:"text-gray-700 dark:text-gray-300 hover:text-[#94c973] dark:hover:text-[#94c973] transition",onClick:at,children:ft.text},ft.href)),jsxRuntimeExports.jsx(ThemeToggle,{}),jsxRuntimeExports.jsx("button",{onClick:st,className:"bg-[#94c973] text-white px-4 py-2 rounded-md hover:bg-[#7fb95e] transition",children:"Download CV"})]}),jsxRuntimeExports.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[jsxRuntimeExports.jsx(ThemeToggle,{}),jsxRuntimeExports.jsx("button",{onClick:()=>_e(!et),className:"text-gray-700 dark:text-gray-300 hover:text-[#94c973] transition-colors",children:et?jsxRuntimeExports.jsx(X$1,{className:"h-6 w-6"}):jsxRuntimeExports.jsx(Menu,{className:"h-6 w-6"})})]})]})}),et&&jsxRuntimeExports.jsx("div",{className:"md:hidden absolute w-full bg-white dark:bg-gray-900 shadow-lg",children:jsxRuntimeExports.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[ot.map(ft=>jsxRuntimeExports.jsx("a",{href:ft.href,className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-[#94c973] dark:hover:text-[#94c973] transition-colors",onClick:at,children:ft.text},ft.href)),jsxRuntimeExports.jsx("button",{onClick:()=>{st(),at()},className:"block w-full text-left px-3 py-2 text-[#94c973] font-medium hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Download CV"})]})})]})}function Hero(){const[et,_e]=reactExports.useState(0),tt=["Researcher","Data Scientist","Bioinformatician","LLM Engineer","Father","Biostatistician"];return reactExports.useEffect(()=>{const nt=setInterval(()=>{_e(st=>(st+1)%tt.length)},3e3);return()=>clearInterval(nt)},[]),jsxRuntimeExports.jsx("div",{id:"about",className:"relative bg-white dark:bg-gray-900 overflow-hidden py-12",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{className:"h-48 w-48 rounded-full object-cover shadow-lg",src:"/assets/images/profile.jpg",alt:"Raktim Mondol"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 flex justify-center bg-white dark:bg-gray-800 px-4 py-2 rounded-full shadow-md",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/rmondol/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#94c973] transition-colors",children:jsxRuntimeExports.jsx(Linkedin,{className:"h-5 w-5"})})})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl text-center sm:text-left",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl tracking-tight font-bold text-gray-900 dark:text-white sm:text-5xl",children:[jsxRuntimeExports.jsxs("span",{className:"block",children:["Raktim ",jsxRuntimeExports.jsx("strong",{children:"Mondol"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:justify-start mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl sm:text-3xl dark:text-gray-200",children:"I'm"}),jsxRuntimeExports.jsx("div",{className:"words-wrapper mt-2 sm:mt-0",children:tt.map((nt,st)=>jsxRuntimeExports.jsx("span",{className:`word ${st===et?"active":""} ${st===(et-1+tt.length)%tt.length?"exit":""}`,children:nt},nt))})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:jsxRuntimeExports.jsx("a",{href:"#contact",className:"inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-[#94c973] hover:bg-[#7fb95e] transition-colors",children:"Contact Me"})})]})]})})})}const AudioContext$1=reactExports.createContext({currentlyPlaying:null,setCurrentlyPlaying:()=>{}}),AudioProvider=({children:et})=>{const[_e,tt]=reactExports.useState(null);return jsxRuntimeExports.jsx(AudioContext$1.Provider,{value:{currentlyPlaying:_e,setCurrentlyPlaying:tt},children:et})},useAudioContext=()=>reactExports.useContext(AudioContext$1);function AudioPlayer({src:et,title:_e}){const[tt,nt]=reactExports.useState(!1),[st,ot]=reactExports.useState(0),[at,dt]=reactExports.useState(0),[ft,ht]=reactExports.useState(0),[ct,it]=reactExports.useState(null),rt=reactExports.useRef(null),lt=reactExports.useRef(null),{currentlyPlaying:ut,setCurrentlyPlaying:pt}=useAudioContext();reactExports.useEffect(()=>{nt(!1),ot(0),ht(0),it(null)},[et]),reactExports.useEffect(()=>{var vt;ut&&ut!==et&&tt&&((vt=rt.current)==null||vt.pause(),nt(!1))},[ut,et,tt]);const gt=async()=>{if(rt.current)try{await rt.current.play(),pt(et),nt(!0)}catch(vt){console.error("Playback error:",vt),it("Failed to play audio. Please try again."),nt(!1)}},mt=()=>{rt.current&&(rt.current.pause(),pt(null),nt(!1))},yt=async()=>{if(tt)mt();else{if(ut&&ut!==et){const vt=new CustomEvent("stopAllAudio",{detail:{except:et}});window.dispatchEvent(vt)}await gt()}};reactExports.useEffect(()=>{const vt=At=>{At.detail.except!==et&&tt&&mt()};return window.addEventListener("stopAllAudio",vt),()=>{window.removeEventListener("stopAllAudio",vt)}},[et,tt]);const bt=()=>{if(rt.current){const vt=rt.current.currentTime,At=rt.current.duration;ot(vt/At*100),ht(vt)}},wt=()=>{rt.current&&(dt(rt.current.duration),it(null))},xt=()=>{it("Failed to load audio file"),nt(!1),pt(null)},Tt=()=>{nt(!1),pt(null)},St=vt=>{if(lt.current&&rt.current){const At=lt.current.getBoundingClientRect(),jt=(vt.clientX-At.left)/At.width*100,Lt=jt/100*rt.current.duration;rt.current.currentTime=Lt,ot(jt)}},Pt=vt=>{const At=Math.floor(vt/60),It=Math.floor(vt%60);return`${At}:${It.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:yt,disabled:!!ct,className:"p-2 rounded-full bg-[#94c973] hover:bg-[#7fb95e] text-white transition-colors flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":tt?"Pause":"Play",children:tt?jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("span",{className:"text-xs text-[#94c973] font-medium truncate flex-shrink-0",children:_e}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto flex-shrink-0",children:[Pt(ft)," / ",Pt(at)]})]}),ct?jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:ct}):jsxRuntimeExports.jsx("div",{ref:lt,className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full cursor-pointer relative overflow-hidden",onClick:St,children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full bg-[#94c973] rounded-full transition-all duration-100",style:{width:`${st}%`}})}),jsxRuntimeExports.jsx("audio",{ref:rt,src:et,onTimeUpdate:bt,onLoadedMetadata:wt,onError:xt,onEnded:Tt})]})}const education=[{degree:"PhD in Computer Science & Engineering",institution:"UNSW Sydney",year:"2021-2025 (Expected)",thesis:"Deep Learning Based Prognosis and Explainability for Breast Cancer",audioSummary:"/assets/audio/phd_podcast.mp3",thesisMindMap:"/assets/images/full_thesis_mind_map_.png",logo:{light:"/assets/images/unsw-logo.png",dark:"/assets/images/unsw-logo-dm.png"}},{degree:"MS by Research in Computer Science & Bioinformatics",institution:"RMIT University",year:"2017-2019",thesis:"Deep learning in classifying cancer subtypes, extracting relevant genes and identifying novel mutations",description:"Graduated with High Distinction",certUrl:"https://www.myequals.net/sharelink/78e7c7d7-5a73-4e7c-9711-f163f5dd1604/af0d807a-8392-45be-9104-d26b95f5aa7a",thesisUrl:"https://research-repository.rmit.edu.au/articles/thesis/Deep_learning_in_classifying_cancer_subtypes_extracting_relevant_genes_and_identifying_novel_mutations/27589272",audioSummary:"/assets/audio/masters-thesis-summary.mp3",logo:{light:"/assets/images/rmit-logo.png",dark:"/assets/images/rmit-logo-dm.png"}}];function Education(){const{theme:et}=useTheme(),[_e,tt]=reactExports.useState(!1),[nt,st]=reactExports.useState(!1),[ot,at]=reactExports.useState(1),[dt,ft]=reactExports.useState({x:0,y:0}),[ht,ct]=reactExports.useState(!1),[it,rt]=reactExports.useState({x:0,y:0}),[lt,ut]=reactExports.useState(!1),[pt,gt]=reactExports.useState(!1),mt=reactExports.useRef(null),yt=reactExports.useRef(null);reactExports.useEffect(()=>{const Rt=()=>{const $t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Ot=window.innerWidth<1024;gt($t||Ot)};return Rt(),window.addEventListener("resize",Rt),()=>window.removeEventListener("resize",Rt)},[]);const bt=()=>{if(pt){st(!0);return}tt(!0),at(1),ft({x:0,y:0}),ut(!1)},wt=()=>{tt(!1)},xt=()=>{st(!1)},Tt=()=>{at(Rt=>Math.min(Rt*1.2,5))},St=()=>{at(Rt=>Math.max(Rt/1.2,.1))},Pt=()=>{if(mt.current&&yt.current){const Rt=yt.current,$t=mt.current,Ot=Rt.clientWidth,Ft=Rt.clientHeight,Vt=$t.naturalWidth,zt=$t.naturalHeight,Xt=Ot/Vt,Jt=Ft/zt,nn=Math.min(Xt,Jt,1);at(nn),ft({x:0,y:0})}},vt=reactExports.useCallback(Rt=>{lt&&(ct(!0),rt({x:Rt.clientX-dt.x,y:Rt.clientY-dt.y}))},[lt,dt]),At=reactExports.useCallback(Rt=>{ht&&lt&&ft({x:Rt.clientX-it.x,y:Rt.clientY-it.y})},[ht,lt,it]),It=reactExports.useCallback(()=>{ct(!1)},[]),jt=reactExports.useCallback(Rt=>{Rt.preventDefault();const $t=Rt.deltaY>0?.9:1.1;at(Ot=>Math.min(Math.max(Ot*$t,.1),5))},[]),Lt=Rt=>{Rt.target===Rt.currentTarget&&wt()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("section",{id:"education",className:"py-20 bg-gray-50 dark:bg-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Education"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Academic journey"})]}),jsxRuntimeExports.jsx("div",{className:"mt-12 space-y-8",children:education.map((Rt,$t)=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-md hover:shadow-lg transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-8 h-8",children:jsxRuntimeExports.jsx(GraduationCap,{className:"w-full h-full text-[#94c973]"})}),jsxRuntimeExports.jsx("h3",{className:"ml-4 text-2xl font-bold text-gray-900 dark:text-white",children:Rt.degree})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-32 h-16 flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:et==="dark"?Rt.logo.dark:Rt.logo.light,alt:`${Rt.institution} logo`,className:"max-w-full max-h-full object-contain"})})]}),jsxRuntimeExports.jsxs("div",{className:"ml-12",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:Rt.institution}),jsxRuntimeExports.jsx("p",{className:"text-[#94c973]",children:Rt.year}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-[#94c973]"}),jsxRuntimeExports.jsx("h4",{className:"ml-2 text-lg font-semibold dark:text-white",children:$t===0?jsxRuntimeExports.jsxs("button",{onClick:bt,className:"text-[#94c973] hover:text-[#7fb95e] transition-colors underline cursor-pointer flex items-center",children:["Thesis",pt&&jsxRuntimeExports.jsx(Smartphone,{className:"h-4 w-4 ml-1 text-orange-500"})]}):"Thesis"})]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-700 dark:text-gray-300",children:Rt.thesis}),Rt.thesisUrl&&jsxRuntimeExports.jsxs("a",{href:Rt.thesisUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-2 text-[#94c973] hover:text-[#7fb95e] transition-colors",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4 mr-1"}),"View Full Thesis"]}),Rt.audioSummary&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(AudioPlayer,{src:Rt.audioSummary,title:"Thesis Summary"})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[Rt.certUrl&&jsxRuntimeExports.jsx("a",{href:Rt.certUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[#94c973] hover:text-[#7fb95e] transition-colors",children:"View Certification"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400 italic",children:Rt.description})]})]})]},$t))})]})}),nt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-md w-full p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Monitor,{className:"h-16 w-16 text-[#94c973]"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-2 -right-2 bg-red-500 rounded-full p-1",children:jsxRuntimeExports.jsx(Smartphone,{className:"h-4 w-4 text-white"})})]})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Desktop Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"The thesis mind map is a high-resolution image that is only available on desktop computers for the best viewing experience."}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:jsxRuntimeExports.jsx("strong",{children:"To view the mind map:"})}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2 space-y-1 text-left",children:[jsxRuntimeExports.jsx("li",{children:"• Use a desktop or laptop computer"}),jsxRuntimeExports.jsx("li",{children:"• Open this website in a desktop browser"}),jsxRuntimeExports.jsx("li",{children:"• The mind map will open in full resolution"})]})]}),jsxRuntimeExports.jsx("button",{onClick:xt,className:"w-full px-4 py-2 bg-[#94c973] text-white rounded-lg hover:bg-[#7fb95e] transition-colors",children:"Got it"})]})})}),_e&&!pt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",onClick:Lt,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-[90vw] h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"PhD Thesis Mind Map"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:St,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-[60px] text-center",children:[Math.round(ot*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:Tt,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),jsxRuntimeExports.jsx("button",{onClick:Pt,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Fit to Screen",children:jsxRuntimeExports.jsx(Maximize2,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(!lt),className:`p-2 rounded-lg transition-colors ${lt?"bg-[#94c973] text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,title:"Hand Tool",children:jsxRuntimeExports.jsx(Move,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("button",{onClick:wt,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Close",children:jsxRuntimeExports.jsx(X$1,{className:"h-6 w-6 text-gray-500 dark:text-gray-400"})})]})]}),jsxRuntimeExports.jsx("div",{ref:yt,className:"flex-1 overflow-hidden relative bg-gray-100 dark:bg-gray-800",onMouseDown:vt,onMouseMove:At,onMouseUp:It,onMouseLeave:It,onWheel:jt,style:{cursor:lt?ht?"grabbing":"grab":"default"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{transform:`translate(${dt.x}px, ${dt.y}px) scale(${ot})`,transformOrigin:"center center",transition:ht?"none":"transform 0.1s ease-out"},children:jsxRuntimeExports.jsx("img",{ref:mt,src:"/assets/images/full_thesis_mind_map_.png",alt:"PhD Thesis Mind Map",className:"max-w-none select-none",draggable:!1,onLoad:Pt})})})]})})]})}const experiences=[{title:"Casual Academic",company:"UNSW",period:"July 2021 - Present",location:"Sydney, NSW",description:"Teaching and mentoring students in computer science and engineering courses.",achievements:["Conduct Laboratory and Tutorial Classes","Provide guidance and support to students in practical sessions","Assist in course material development and assessment"]},{title:"Teaching Assistant",company:"RMIT University",period:"July 2017 - Oct 2019",location:"Melbourne, VIC",description:"Supported undergraduate students in computer science courses while pursuing research.",achievements:["Conducted Laboratory and Tutorial Classes","Assisted students with programming concepts and practical applications","Contributed to course material improvements"]},{title:"Lecturer",company:"World University of Bangladesh",period:"Sep 2013 - Dec 2016",location:"Dhaka, BD",description:"Full-time faculty position teaching computer science courses and supervising student projects.",achievements:["Conducted Lectures and Laboratory Works","Supervised Students for Projects and Thesis","Managed course examinations and assessments"]}];function Experience(){return jsxRuntimeExports.jsx("section",{id:"experience",className:"py-20 bg-white dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Professional Experience"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Building expertise through academic roles"})]}),jsxRuntimeExports.jsx("div",{className:"mt-12 space-y-8",children:experiences.map((et,_e)=>jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"p-3 bg-[#94c973]/10 rounded-lg",children:jsxRuntimeExports.jsx(Briefcase,{className:"h-6 w-6 text-[#94c973]"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white truncate",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-[#94c973] flex-shrink-0",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-sm whitespace-nowrap",children:et.period})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center gap-2 text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:et.company}),jsxRuntimeExports.jsx("span",{className:"hidden sm:block",children:"•"}),jsxRuntimeExports.jsx("span",{children:et.location})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-gray-700 dark:text-gray-300",children:et.description}),jsxRuntimeExports.jsx("ul",{className:"mt-4 space-y-2",children:et.achievements.map((tt,nt)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"mr-2 text-[#94c973]",children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:tt})]},nt))})]})]})},_e))})]})})}const skillCategories=[{title:"Generative AI & LLM Toolkits",icon:Bot,skills:["Hugging Face Transformers","LoRA / QLoRA (PEFT)","LangChain","OpenAI API / Gemini Pro","GPTQ / GGUF","Prompt Engineering","Agent Development Kit","RAG Pipelines"]},{title:"Vector Search & Retrieval",icon:Search,skills:["FAISS","BM25 / Elasticsearch","ChromaDB / Weaviate","Milvus"]},{title:"Multimodal & CV + NLP",icon:Camera,skills:["CLIP / BLIP / LLaVA","Segment Anything (SAM)","Visual Question Answering","Multimodal Transformers"]},{title:"Programming Languages",icon:Code,skills:["R","Python","SQL","LaTeX"]},{title:"Deep Learning Frameworks",icon:Brain,skills:["PyTorch","TensorFlow"]},{title:"Distributed & Cloud Computing",icon:Cloud,skills:["AWS","GCP","Galaxy"]},{title:"Development Environments",icon:PanelsTopLeft,skills:["Spyder","Jupyter Notebook","RStudio"]},{title:"Statistical Analysis",icon:Database,skills:["Stata","SPSS","SAS","NCSS"]},{title:"Development Tools",icon:Terminal,skills:["Git","Version Control","Command Line"]}];function Skills(){return jsxRuntimeExports.jsx("section",{id:"skills",className:"py-20 bg-gray-50 dark:bg-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Technical Skills"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Expertise across AI, computational biology, and data science"})]}),jsxRuntimeExports.jsx("div",{className:"mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:skillCategories.map((et,_e)=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[jsxRuntimeExports.jsx("span",{className:"p-2 bg-[#94c973]/10 rounded-lg",children:jsxRuntimeExports.jsx(et.icon,{className:"h-6 w-6 text-[#94c973]"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:et.title})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:et.skills.map((tt,nt)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-[#94c973]/10 text-[#94c973] rounded-full text-sm font-medium",children:tt},nt))})]},_e))})]})})}const researchAreas=[{icon:Brain,title:"Large Language Models (LLMs)",description:"Research on training, fine-tuning, and evaluating LLMs using parameter-efficient techniques (e.g., LoRA, QLoRA), with applications in retrieval-augmented generation, summarisation, multi-hop reasoning, and task-specific adaptation."},{icon:Users,title:"Agentic AI & Multi-Agent Systems",description:"Design and development of autonomous, tool-using agents capable of reasoning, planning, and collaborating across complex tasks using frameworks like the Agent Development Kit (ADK). Applications include document QA, decision-making, and pipeline orchestration."},{icon:Search,title:"Retrieval-Augmented Generation (RAG)",description:"Building hybrid search and generation pipelines integrating semantic and keyword-based retrieval (e.g., FAISS, BM25), designed for grounded language understanding, document synthesis, and knowledge-intensive tasks."},{icon:Cpu,title:"Bioinformatics",description:"Applying computational methods to analyze biological data and solve complex biological problems."},{icon:Lightbulb,title:"Explainable AI",description:"Creating transparent and interpretable AI systems that provide clear explanations for their decisions and predictions."},{icon:Database,title:"Multimodal Analysis",description:"Integrating multiple data modalities (images, genomics, clinical data) for comprehensive biomedical insights."},{icon:Eye,title:"Computer Vision",description:"Research in image processing, object detection, and visual understanding using deep learning approaches."},{icon:MessageSquare,title:"Natural Language Processing",description:"Working on language models, text analysis, and human-computer interaction through natural language."},{icon:Stethoscope,title:"Treatment Recommendation Systems",description:"AI-powered personalized treatment plans and clinical decision support systems for improved patient care."}];function Research(){return jsxRuntimeExports.jsx("section",{id:"research",className:"py-20 bg-white dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Research Areas"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Exploring the frontiers of AI and computational biology"})]}),jsxRuntimeExports.jsx("div",{className:"mt-16 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:researchAreas.map((et,_e)=>jsxRuntimeExports.jsxs("div",{className:"relative group bg-white dark:bg-gray-800 p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-[#94c973] rounded-lg shadow-md hover:shadow-lg transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 rounded-lg inline-flex p-3 bg-[#94c973]/10 text-[#94c973] ring-4 ring-white dark:ring-gray-800",children:jsxRuntimeExports.jsx(et.icon,{className:"h-6 w-6","aria-hidden":"true"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:et.title})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:et.description})]},_e))})]})})}const publications=[{title:"BioFusionNet: Deep Learning-Based Survival Risk Stratification in ER+ Breast Cancer Through Multifeature and Multimodal Data Fusion",journal:"IEEE Journal of Biomedical and Health Informatics",year:2024,authors:"Mondol, R.K.; Millar, E.K.A.; Sowmya, A.; Meijering, E.",paperUrl:"https://ieeexplore.ieee.org/document/10568932",codeUrl:"https://github.com/raktim-mondol/BioFusionNet",audioSummary:"/assets/audio/biofusionnet-summary.mp3"},{title:"hist2RNA: An Efficient Deep Learning Architecture to Predict Gene Expression from Breast Cancer Histopathology Images",journal:"Cancers",year:2023,authors:"Mondol, R.K.; Millar, E.K.A.; Graham, P.H.; Browne, L.; Sowmya, A.; Meijering, E.",paperUrl:"https://www.mdpi.com/2072-6694/15/9/2569",codeUrl:"https://github.com/raktim-mondol/hist2RNA",audioSummary:"/assets/audio/hist2rna-summary.mp3"},{title:"AFExNet: An Adversarial Autoencoder for Differentiating Breast Cancer Sub-types and Extracting Biologically Relevant Genes",journal:"IEEE/ACM Transactions on Computational Biology and Bioinformatics",year:2021,authors:"Mondol, R.K., N. D. Truong, M. Reza, S. Ippolito, E. Ebrahimie, and O. Kavehei",paperUrl:"https://ieeexplore.ieee.org/document/9378938",codeUrl:"https://github.com/NeuroSyd/breast-cancer-sub-types",audioSummary:"/assets/audio/afexnet-summary.mp3"}];function Publications(){return jsxRuntimeExports.jsx("section",{id:"publications",className:"py-20 bg-gray-50 dark:bg-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Publications"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Selected peer-reviewed research papers"})]}),jsxRuntimeExports.jsx("div",{className:"mt-12 space-y-8",children:publications.map((et,_e)=>jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md hover:shadow-lg transition",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx(BookText,{className:"h-6 w-6 text-[#94c973] mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:et.title}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:et.authors}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:[et.journal," (",et.year,")"]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("a",{href:et.paperUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#94c973] hover:text-[#7fb95e] transition-colors",children:[jsxRuntimeExports.jsx("span",{children:"Read Paper"}),jsxRuntimeExports.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),jsxRuntimeExports.jsxs("a",{href:et.codeUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 border-2 border-gray-900 dark:border-gray-300 text-gray-900 dark:text-gray-300 rounded-lg hover:bg-gray-900 hover:text-white dark:hover:bg-gray-300 dark:hover:text-gray-900 transition-colors group",children:[jsxRuntimeExports.jsx(Github,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"View Code"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(AudioPlayer,{src:et.audioSummary,title:"Paper Summary"})})]})]})},_e))}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-center",children:jsxRuntimeExports.jsx("a",{href:"https://scholar.google.com/citations?user=UaGa0S4AAAAJ&hl=en",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-[#94c973] hover:bg-[#7fb95e] transition-colors",children:"View More Publications on Google Scholar"})})]})})}const awards=[{title:"Doctoral Research Scholarship",organization:"UNSW Sydney",year:"2021",description:"Awarded scholarship for pursuing doctoral research studies in Computer Science & Engineering.",icon:Award},{title:"Masters by Research with High Distinction",organization:"RMIT University",year:"2019",description:"Completed Masters degree with outstanding academic performance in Computer Science & Bioinformatics.",icon:GraduationCap},{title:"RMIT Research Scholarships",organization:"RMIT University",year:"2017",description:"Awarded both Research Stipend Scholarship and International Tuition Fee Scholarship.",icon:Award},{title:"B.Sc. with High Distinction",organization:"BRAC University",year:"2013",description:"Graduated with High Distinction in Electrical and Electronic Engineering.",icon:GraduationCap},{title:"Vice Chancellor Award",organization:"BRAC University",year:"2013",description:"Recognized for outstanding academic performance in Spring 2013.",icon:Award},{title:"Dean Awards",organization:"BRAC University",year:"2010-2011",description:"Received Dean's Award for academic excellence in Fall 2010 and Fall 2011.",icon:Award}];function Awards(){return jsxRuntimeExports.jsx("section",{id:"awards",className:"py-20 bg-white dark:bg-[#0f172a]",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Awards & Honors"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Recognition for academic excellence and research achievements"})]}),jsxRuntimeExports.jsx("div",{className:"mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:awards.map((et,_e)=>jsxRuntimeExports.jsxs("div",{className:"relative group bg-white dark:bg-[#1e293b] p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-[#94c973] rounded-lg shadow-md hover:shadow-lg transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 rounded-lg inline-flex p-3 bg-[#94c973]/10 text-[#94c973] ring-4 ring-white dark:ring-[#1e293b]",children:jsxRuntimeExports.jsx(et.icon,{className:"h-6 w-6"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:et.title})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-[#94c973]",children:et.organization}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:et.year})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:et.description})]})]},_e))})]})})}class EmailJSResponseStatus{constructor(_e=0,tt="Network Error"){this.status=_e,this.text=tt}}const createWebStorage=()=>{if(!(typeof localStorage>"u"))return{get:et=>Promise.resolve(localStorage.getItem(et)),set:(et,_e)=>Promise.resolve(localStorage.setItem(et,_e)),remove:et=>Promise.resolve(localStorage.removeItem(et))}},store={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:createWebStorage()},buildOptions=et=>et?typeof et=="string"?{publicKey:et}:et.toString()==="[object Object]"?et:{}:{},init$1=(et,_e="https://api.emailjs.com")=>{if(!et)return;const tt=buildOptions(et);store.publicKey=tt.publicKey,store.blockHeadless=tt.blockHeadless,store.storageProvider=tt.storageProvider,store.blockList=tt.blockList,store.limitRate=tt.limitRate,store.origin=tt.origin||_e},sendPost=async(et,_e,tt={})=>{const nt=await fetch(store.origin+et,{method:"POST",headers:tt,body:_e}),st=await nt.text(),ot=new EmailJSResponseStatus(nt.status,st);if(nt.ok)return ot;throw ot},validateParams=(et,_e,tt)=>{if(!et||typeof et!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!_e||typeof _e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!tt||typeof tt!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},validateTemplateParams=et=>{if(et&&et.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},isHeadless=et=>et.webdriver||!et.languages||et.languages.length===0,headlessError=()=>new EmailJSResponseStatus(451,"Unavailable For Headless Browser"),validateBlockListParams=(et,_e)=>{if(!Array.isArray(et))throw"The BlockList list has to be an array";if(typeof _e!="string")throw"The BlockList watchVariable has to be a string"},isBlockListDisabled=et=>{var _e;return!((_e=et.list)!=null&&_e.length)||!et.watchVariable},getValue=(et,_e)=>et instanceof FormData?et.get(_e):et[_e],isBlockedValueInParams=(et,_e)=>{if(isBlockListDisabled(et))return!1;validateBlockListParams(et.list,et.watchVariable);const tt=getValue(_e,et.watchVariable);return typeof tt!="string"?!1:et.list.includes(tt)},blockedEmailError=()=>new EmailJSResponseStatus(403,"Forbidden"),validateLimitRateParams=(et,_e)=>{if(typeof et!="number"||et<0)throw"The LimitRate throttle has to be a positive number";if(_e&&typeof _e!="string")throw"The LimitRate ID has to be a non-empty string"},getLeftTime=async(et,_e,tt)=>{const nt=Number(await tt.get(et)||0);return _e-Date.now()+nt},isLimitRateHit=async(et,_e,tt)=>{if(!_e.throttle||!tt)return!1;validateLimitRateParams(_e.throttle,_e.id);const nt=_e.id||et;return await getLeftTime(nt,_e.throttle,tt)>0?!0:(await tt.set(nt,Date.now().toString()),!1)},limitRateError=()=>new EmailJSResponseStatus(429,"Too Many Requests"),send=async(et,_e,tt,nt)=>{const st=buildOptions(nt),ot=st.publicKey||store.publicKey,at=st.blockHeadless||store.blockHeadless,dt=st.storageProvider||store.storageProvider,ft={...store.blockList,...st.blockList},ht={...store.limitRate,...st.limitRate};return at&&isHeadless(navigator)?Promise.reject(headlessError()):(validateParams(ot,et,_e),validateTemplateParams(tt),tt&&isBlockedValueInParams(ft,tt)?Promise.reject(blockedEmailError()):await isLimitRateHit(location.pathname,ht,dt)?Promise.reject(limitRateError()):sendPost("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:ot,service_id:et,template_id:_e,template_params:tt}),{"Content-type":"application/json"}))},validateForm=et=>{if(!et||et.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},findHTMLForm=et=>typeof et=="string"?document.querySelector(et):et,sendForm=async(et,_e,tt,nt)=>{const st=buildOptions(nt),ot=st.publicKey||store.publicKey,at=st.blockHeadless||store.blockHeadless,dt=store.storageProvider||st.storageProvider,ft={...store.blockList,...st.blockList},ht={...store.limitRate,...st.limitRate};if(at&&isHeadless(navigator))return Promise.reject(headlessError());const ct=findHTMLForm(tt);validateParams(ot,et,_e),validateForm(ct);const it=new FormData(ct);return isBlockedValueInParams(ft,it)?Promise.reject(blockedEmailError()):await isLimitRateHit(location.pathname,ht,dt)?Promise.reject(limitRateError()):(it.append("lib_version","4.4.1"),it.append("service_id",et),it.append("template_id",_e),it.append("user_id",ot),sendPost("/api/v1.0/email/send-form",it))},emailjs={init:init$1,send,sendForm,EmailJSResponseStatus};let e={data:""},t=et=>typeof window=="object"?((et?et.querySelector("#_goober"):window._goober)||Object.assign((et||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:et||e,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a=/\/\*[^]*?\*\/|  +/g,n$1=/\n+/g,o=(et,_e)=>{let tt="",nt="",st="";for(let ot in et){let at=et[ot];ot[0]=="@"?ot[1]=="i"?tt=ot+" "+at+";":nt+=ot[1]=="f"?o(at,ot):ot+"{"+o(at,ot[1]=="k"?"":_e)+"}":typeof at=="object"?nt+=o(at,_e?_e.replace(/([^,])+/g,dt=>ot.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,ft=>/&/.test(ft)?ft.replace(/&/g,dt):dt?dt+" "+ft:ft)):ot):at!=null&&(ot=/^--/.test(ot)?ot:ot.replace(/[A-Z]/g,"-$&").toLowerCase(),st+=o.p?o.p(ot,at):ot+":"+at+";")}return tt+(_e&&st?_e+"{"+st+"}":st)+nt},c={},s=et=>{if(typeof et=="object"){let _e="";for(let tt in et)_e+=tt+s(et[tt]);return _e}return et},i=(et,_e,tt,nt,st)=>{let ot=s(et),at=c[ot]||(c[ot]=(ft=>{let ht=0,ct=11;for(;ht<ft.length;)ct=101*ct+ft.charCodeAt(ht++)>>>0;return"go"+ct})(ot));if(!c[at]){let ft=ot!==et?et:(ht=>{let ct,it,rt=[{}];for(;ct=l.exec(ht.replace(a,""));)ct[4]?rt.shift():ct[3]?(it=ct[3].replace(n$1," ").trim(),rt.unshift(rt[0][it]=rt[0][it]||{})):rt[0][ct[1]]=ct[2].replace(n$1," ").trim();return rt[0]})(et);c[at]=o(st?{["@keyframes "+at]:ft}:ft,tt?"":"."+at)}let dt=tt&&c.g?c.g:null;return tt&&(c.g=c[at]),((ft,ht,ct,it)=>{it?ht.data=ht.data.replace(it,ft):ht.data.indexOf(ft)===-1&&(ht.data=ct?ft+ht.data:ht.data+ft)})(c[at],_e,nt,dt),at},p=(et,_e,tt)=>et.reduce((nt,st,ot)=>{let at=_e[ot];if(at&&at.call){let dt=at(tt),ft=dt&&dt.props&&dt.props.className||/^go/.test(dt)&&dt;at=ft?"."+ft:dt&&typeof dt=="object"?dt.props?"":o(dt,""):dt===!1?"":dt}return nt+st+(at??"")},"");function u$1(et){let _e=this||{},tt=et.call?et(_e.p):et;return i(tt.unshift?tt.raw?p(tt,[].slice.call(arguments,1),_e.p):tt.reduce((nt,st)=>Object.assign(nt,st&&st.call?st(_e.p):st),{}):tt,t(_e.target),_e.g,_e.o,_e.k)}let d,f,g;u$1.bind({g:1});let h$1=u$1.bind({k:1});function m(et,_e,tt,nt){o.p=_e,d=et,f=tt,g=nt}function j(et,_e){let tt=this||{};return function(){let nt=arguments;function st(ot,at){let dt=Object.assign({},ot),ft=dt.className||st.className;tt.p=Object.assign({theme:f&&f()},dt),tt.o=/ *go\d+/.test(ft),dt.className=u$1.apply(tt,nt)+(ft?" "+ft:"");let ht=et;return et[0]&&(ht=dt.as||et,delete dt.as),g&&ht[0]&&g(dt),d(ht,dt)}return st}}var W=et=>typeof et=="function",T=(et,_e)=>W(et)?et(_e):et,U=(()=>{let et=0;return()=>(++et).toString()})(),b=(()=>{let et;return()=>{if(et===void 0&&typeof window<"u"){let _e=matchMedia("(prefers-reduced-motion: reduce)");et=!_e||_e.matches}return et}})(),Q=20,S=new Map,X=1e3,$=et=>{if(S.has(et))return;let _e=setTimeout(()=>{S.delete(et),u({type:4,toastId:et})},X);S.set(et,_e)},J=et=>{let _e=S.get(et);_e&&clearTimeout(_e)},v=(et,_e)=>{switch(_e.type){case 0:return{...et,toasts:[_e.toast,...et.toasts].slice(0,Q)};case 1:return _e.toast.id&&J(_e.toast.id),{...et,toasts:et.toasts.map(ot=>ot.id===_e.toast.id?{...ot,..._e.toast}:ot)};case 2:let{toast:tt}=_e;return et.toasts.find(ot=>ot.id===tt.id)?v(et,{type:1,toast:tt}):v(et,{type:0,toast:tt});case 3:let{toastId:nt}=_e;return nt?$(nt):et.toasts.forEach(ot=>{$(ot.id)}),{...et,toasts:et.toasts.map(ot=>ot.id===nt||nt===void 0?{...ot,visible:!1}:ot)};case 4:return _e.toastId===void 0?{...et,toasts:[]}:{...et,toasts:et.toasts.filter(ot=>ot.id!==_e.toastId)};case 5:return{...et,pausedAt:_e.time};case 6:let st=_e.time-(et.pausedAt||0);return{...et,pausedAt:void 0,toasts:et.toasts.map(ot=>({...ot,pauseDuration:ot.pauseDuration+st}))}}},A=[],P={toasts:[],pausedAt:void 0},u=et=>{P=v(P,et),A.forEach(_e=>{_e(P)})},Y={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I=(et={})=>{let[_e,tt]=reactExports.useState(P);reactExports.useEffect(()=>(A.push(tt),()=>{let st=A.indexOf(tt);st>-1&&A.splice(st,1)}),[_e]);let nt=_e.toasts.map(st=>{var ot,at;return{...et,...et[st.type],...st,duration:st.duration||((ot=et[st.type])==null?void 0:ot.duration)||(et==null?void 0:et.duration)||Y[st.type],style:{...et.style,...(at=et[st.type])==null?void 0:at.style,...st.style}}});return{..._e,toasts:nt}},G=(et,_e="blank",tt)=>({createdAt:Date.now(),visible:!0,type:_e,ariaProps:{role:"status","aria-live":"polite"},message:et,pauseDuration:0,...tt,id:(tt==null?void 0:tt.id)||U()}),h=et=>(_e,tt)=>{let nt=G(_e,et,tt);return u({type:2,toast:nt}),nt.id},n=(et,_e)=>h("blank")(et,_e);n.error=h("error");n.success=h("success");n.loading=h("loading");n.custom=h("custom");n.dismiss=et=>{u({type:3,toastId:et})};n.remove=et=>u({type:4,toastId:et});n.promise=(et,_e,tt)=>{let nt=n.loading(_e.loading,{...tt,...tt==null?void 0:tt.loading});return et.then(st=>(n.success(T(_e.success,st),{id:nt,...tt,...tt==null?void 0:tt.success}),st)).catch(st=>{n.error(T(_e.error,st),{id:nt,...tt,...tt==null?void 0:tt.error})}),et};var Z=(et,_e)=>{u({type:1,toast:{id:et,height:_e}})},ee=()=>{u({type:5,time:Date.now()})},D=et=>{let{toasts:_e,pausedAt:tt}=I(et);reactExports.useEffect(()=>{if(tt)return;let ot=Date.now(),at=_e.map(dt=>{if(dt.duration===1/0)return;let ft=(dt.duration||0)+dt.pauseDuration-(ot-dt.createdAt);if(ft<0){dt.visible&&n.dismiss(dt.id);return}return setTimeout(()=>n.dismiss(dt.id),ft)});return()=>{at.forEach(dt=>dt&&clearTimeout(dt))}},[_e,tt]);let nt=reactExports.useCallback(()=>{tt&&u({type:6,time:Date.now()})},[tt]),st=reactExports.useCallback((ot,at)=>{let{reverseOrder:dt=!1,gutter:ft=8,defaultPosition:ht}=at||{},ct=_e.filter(lt=>(lt.position||ht)===(ot.position||ht)&&lt.height),it=ct.findIndex(lt=>lt.id===ot.id),rt=ct.filter((lt,ut)=>ut<it&&lt.visible).length;return ct.filter(lt=>lt.visible).slice(...dt?[rt+1]:[0,rt]).reduce((lt,ut)=>lt+(ut.height||0)+ft,0)},[_e]);return{toasts:_e,handlers:{updateHeight:Z,startPause:ee,endPause:nt,calculateOffset:st}}},oe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,re=h$1`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=h$1`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${et=>et.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${re} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${et=>et.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ne=h$1`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=j("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${et=>et.secondary||"#e0e0e0"};
  border-right-color: ${et=>et.primary||"#616161"};
  animation: ${ne} 1s linear infinite;
`,pe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,de=h$1`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${et=>et.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${de} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${et=>et.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ue=j("div")`
  position: absolute;
`,le=j("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Te=h$1`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fe=j("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M=({toast:et})=>{let{icon:_e,type:tt,iconTheme:nt}=et;return _e!==void 0?typeof _e=="string"?reactExports.createElement(fe,null,_e):_e:tt==="blank"?null:reactExports.createElement(le,null,reactExports.createElement(V,{...nt}),tt!=="loading"&&reactExports.createElement(ue,null,tt==="error"?reactExports.createElement(_,{...nt}):reactExports.createElement(w,{...nt})))},ye=et=>`
0% {transform: translate3d(0,${et*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ge=et=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${et*-150}%,-1px) scale(.6); opacity:0;}
`,he="0%{opacity:0;} 100%{opacity:1;}",xe="0%{opacity:1;} 100%{opacity:0;}",be=j("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Se=j("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ae=(et,_e)=>{let tt=et.includes("top")?1:-1,[nt,st]=b()?[he,xe]:[ye(tt),ge(tt)];return{animation:_e?`${h$1(nt)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h$1(st)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F=reactExports.memo(({toast:et,position:_e,style:tt,children:nt})=>{let st=et.height?Ae(et.position||_e||"top-center",et.visible):{opacity:0},ot=reactExports.createElement(M,{toast:et}),at=reactExports.createElement(Se,{...et.ariaProps},T(et.message,et));return reactExports.createElement(be,{className:et.className,style:{...st,...tt,...et.style}},typeof nt=="function"?nt({icon:ot,message:at}):reactExports.createElement(reactExports.Fragment,null,ot,at))});m(reactExports.createElement);var Ee=({id:et,className:_e,style:tt,onHeightUpdate:nt,children:st})=>{let ot=reactExports.useCallback(at=>{if(at){let dt=()=>{let ft=at.getBoundingClientRect().height;nt(et,ft)};dt(),new MutationObserver(dt).observe(at,{subtree:!0,childList:!0,characterData:!0})}},[et,nt]);return reactExports.createElement("div",{ref:ot,className:_e,style:tt},st)},Re=(et,_e)=>{let tt=et.includes("top"),nt=tt?{top:0}:{bottom:0},st=et.includes("center")?{justifyContent:"center"}:et.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:b()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${_e*(tt?1:-1)}px)`,...nt,...st}},ve=u$1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,O=16,Ie=({reverseOrder:et,position:_e="top-center",toastOptions:tt,gutter:nt,children:st,containerStyle:ot,containerClassName:at})=>{let{toasts:dt,handlers:ft}=D(tt);return reactExports.createElement("div",{style:{position:"fixed",zIndex:9999,top:O,left:O,right:O,bottom:O,pointerEvents:"none",...ot},className:at,onMouseEnter:ft.startPause,onMouseLeave:ft.endPause},dt.map(ht=>{let ct=ht.position||_e,it=ft.calculateOffset(ht,{reverseOrder:et,gutter:nt,defaultPosition:_e}),rt=Re(ct,it);return reactExports.createElement(Ee,{id:ht.id,key:ht.id,onHeightUpdate:ft.updateHeight,className:ht.visible?ve:"",style:rt},ht.type==="custom"?T(ht.message,ht):st?st(ht):reactExports.createElement(F,{toast:ht,position:ct}))}))},_t=n;const SERVICE_ID="service_pf60vvq",TEMPLATE_ID="template_khtz52h",PUBLIC_KEY="YNARHMC0iqRPaRFIf";function Contact(){const[et,_e]=reactExports.useState(!1),tt=reactExports.useRef(null),[nt,st]=reactExports.useState({to_name:"Raktim",from_name:"",from_email:"",message:""}),ot=ft=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ft))return{isValid:!1,message:"Please enter a valid email address (e.g., name@example.com)"};const[ct]=ft.split("@");return ct.length<1?{isValid:!1,message:"Email username cannot be empty"}:/[._%+-]{2,}/.test(ct)?{isValid:!1,message:"Email cannot contain consecutive special characters"}:{isValid:!0,message:""}},at=ft=>{const{name:ht,value:ct}=ft.target;st(it=>({...it,[ht==="user_name"?"from_name":ht==="user_email"?"from_email":ht]:ct}))},dt=async ft=>{ft.preventDefault();const ht=ot(nt.from_email);if(!ht.isValid){_t.error(ht.message);return}if(!window.confirm("Are you sure you want to send this message?"))return;_e(!0);const ct=_t.loading("Sending message...");try{if((await emailjs.sendForm(SERVICE_ID,TEMPLATE_ID,tt.current,PUBLIC_KEY)).text==="OK")_t.dismiss(ct),_t.success("Email sent successfully! I will get back to you soon."),st({to_name:"Raktim",from_name:"",from_email:"",message:""});else throw new Error("Failed to send message")}catch(it){_t.dismiss(ct),_t.error("Failed to send message. Please try again."),console.error("Email error:",it)}finally{_e(!1)}};return jsxRuntimeExports.jsxs("section",{id:"contact",className:"py-20 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white sm:text-4xl",children:"Get in Touch"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Interested in collaboration? Let's discuss your research ideas."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-16 grid grid-cols-1 gap-8 lg:grid-cols-2",children:[jsxRuntimeExports.jsx("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-md p-8",children:jsxRuntimeExports.jsxs("form",{ref:tt,onSubmit:dt,className:"space-y-6",children:[jsxRuntimeExports.jsx("input",{type:"hidden",name:"to_name",value:nt.to_name}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"from_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Name"}),jsxRuntimeExports.jsx("input",{type:"text",name:"from_name",id:"from_name",value:nt.from_name,onChange:at,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#94c973] focus:border-[#94c973] dark:text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"from_email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",name:"from_email",id:"from_email",value:nt.from_email,onChange:at,required:!0,pattern:"[^\\s@]+@[^\\s@]+\\.[^\\s@]+",title:"Please enter a valid email address (e.g., name@example.com)",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#94c973] focus:border-[#94c973] dark:text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message"}),jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:4,value:nt.message,onChange:at,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#94c973] focus:border-[#94c973] resize-none dark:text-white"})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#94c973] hover:bg-[#7fb95e] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#94c973] disabled:opacity-50 disabled:cursor-not-allowed",children:et?"Sending...":"Send Message"})})]})}),jsxRuntimeExports.jsx("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-md p-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-6 w-6 text-[#94c973]"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Location"}),jsxRuntimeExports.jsxs("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:["School of Computer Science and Engineering",jsxRuntimeExports.jsx("br",{}),"Building K17",jsxRuntimeExports.jsx("br",{}),"UNSW Sydney, NSW 2052"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx(Mail,{className:"h-6 w-6 text-[#94c973]"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Email"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"r.mondol@unsw.edu.au"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx(Phone,{className:"h-6 w-6 text-[#94c973]"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Phone"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"+61 412 936 237"})]})]})]})})]})]}),jsxRuntimeExports.jsx(Ie,{position:"bottom-right"})]})}function ScrollProgress(){const[et,_e]=reactExports.useState(0);return reactExports.useEffect(()=>{const tt=()=>{const nt=document.documentElement.scrollTop,st=document.documentElement.scrollHeight-document.documentElement.clientHeight;_e(nt/st*100)};return window.addEventListener("scroll",tt),tt(),()=>{window.removeEventListener("scroll",tt)}},[]),jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 w-full h-1.5 bg-gray-200 dark:bg-gray-700 z-[9999]",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-[#94c973] transition-all duration-100 ease-out",style:{width:`${et}%`}})})}const default_format="RFC3986",formatters={RFC1738:et=>String(et).replace(/%20/g,"+"),RFC3986:et=>String(et)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const et=[];for(let _e=0;_e<256;++_e)et.push("%"+((_e<16?"0":"")+_e.toString(16)).toUpperCase());return et})(),limit=1024,encode=(et,_e,tt,nt,st)=>{if(et.length===0)return et;let ot=et;if(typeof et=="symbol"?ot=Symbol.prototype.toString.call(et):typeof et!="string"&&(ot=String(et)),tt==="iso-8859-1")return escape(ot).replace(/%u[0-9a-f]{4}/gi,function(dt){return"%26%23"+parseInt(dt.slice(2),16)+"%3B"});let at="";for(let dt=0;dt<ot.length;dt+=limit){const ft=ot.length>=limit?ot.slice(dt,dt+limit):ot,ht=[];for(let ct=0;ct<ft.length;++ct){let it=ft.charCodeAt(ct);if(it===45||it===46||it===95||it===126||it>=48&&it<=57||it>=65&&it<=90||it>=97&&it<=122||st===RFC1738&&(it===40||it===41)){ht[ht.length]=ft.charAt(ct);continue}if(it<128){ht[ht.length]=hex_table[it];continue}if(it<2048){ht[ht.length]=hex_table[192|it>>6]+hex_table[128|it&63];continue}if(it<55296||it>=57344){ht[ht.length]=hex_table[224|it>>12]+hex_table[128|it>>6&63]+hex_table[128|it&63];continue}ct+=1,it=65536+((it&1023)<<10|ft.charCodeAt(ct)&1023),ht[ht.length]=hex_table[240|it>>18]+hex_table[128|it>>12&63]+hex_table[128|it>>6&63]+hex_table[128|it&63]}at+=ht.join("")}return at};function is_buffer(et){return!et||typeof et!="object"?!1:!!(et.constructor&&et.constructor.isBuffer&&et.constructor.isBuffer(et))}function maybe_map(et,_e){if(is_array$1(et)){const tt=[];for(let nt=0;nt<et.length;nt+=1)tt.push(_e(et[nt]));return tt}return _e(et)}const has=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(et){return String(et)+"[]"},comma:"comma",indices(et,_e){return String(et)+"["+_e+"]"},repeat(et){return String(et)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(et,_e){push.apply(et,is_array(_e)?_e:[_e])},to_ISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(et){return to_ISO.call(et)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(et){return typeof et=="string"||typeof et=="number"||typeof et=="boolean"||typeof et=="symbol"||typeof et=="bigint"}const sentinel={};function inner_stringify(et,_e,tt,nt,st,ot,at,dt,ft,ht,ct,it,rt,lt,ut,pt,gt,mt){let yt=et,bt=mt,wt=0,xt=!1;for(;(bt=bt.get(sentinel))!==void 0&&!xt;){const At=bt.get(et);if(wt+=1,typeof At<"u"){if(At===wt)throw new RangeError("Cyclic object value");xt=!0}typeof bt.get(sentinel)>"u"&&(wt=0)}if(typeof ht=="function"?yt=ht(_e,yt):yt instanceof Date?yt=rt==null?void 0:rt(yt):tt==="comma"&&is_array(yt)&&(yt=maybe_map(yt,function(At){return At instanceof Date?rt==null?void 0:rt(At):At})),yt===null){if(ot)return ft&&!pt?ft(_e,defaults.encoder,gt,"key",lt):_e;yt=""}if(is_non_nullish_primitive(yt)||is_buffer(yt)){if(ft){const At=pt?_e:ft(_e,defaults.encoder,gt,"key",lt);return[(ut==null?void 0:ut(At))+"="+(ut==null?void 0:ut(ft(yt,defaults.encoder,gt,"value",lt)))]}return[(ut==null?void 0:ut(_e))+"="+(ut==null?void 0:ut(String(yt)))]}const Tt=[];if(typeof yt>"u")return Tt;let St;if(tt==="comma"&&is_array(yt))pt&&ft&&(yt=maybe_map(yt,ft)),St=[{value:yt.length>0?yt.join(",")||null:void 0}];else if(is_array(ht))St=ht;else{const At=Object.keys(yt);St=ct?At.sort(ct):At}const Pt=dt?String(_e).replace(/\./g,"%2E"):String(_e),vt=nt&&is_array(yt)&&yt.length===1?Pt+"[]":Pt;if(st&&is_array(yt)&&yt.length===0)return vt+"[]";for(let At=0;At<St.length;++At){const It=St[At],jt=typeof It=="object"&&typeof It.value<"u"?It.value:yt[It];if(at&&jt===null)continue;const Lt=it&&dt?It.replace(/\./g,"%2E"):It,Rt=is_array(yt)?typeof tt=="function"?tt(vt,Lt):vt:vt+(it?"."+Lt:"["+Lt+"]");mt.set(et,wt);const $t=new WeakMap;$t.set(sentinel,mt),push_to_array(Tt,inner_stringify(jt,Rt,tt,nt,st,ot,at,dt,tt==="comma"&&pt&&is_array(yt)?null:ft,ht,ct,it,rt,lt,ut,pt,gt,$t))}return Tt}function normalize_stringify_options(et=defaults){if(typeof et.allowEmptyArrays<"u"&&typeof et.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof et.encodeDotInKeys<"u"&&typeof et.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(et.encoder!==null&&typeof et.encoder<"u"&&typeof et.encoder!="function")throw new TypeError("Encoder has to be a function.");const _e=et.charset||defaults.charset;if(typeof et.charset<"u"&&et.charset!=="utf-8"&&et.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let tt=default_format;if(typeof et.format<"u"){if(!has.call(formatters,et.format))throw new TypeError("Unknown format option provided.");tt=et.format}const nt=formatters[tt];let st=defaults.filter;(typeof et.filter=="function"||is_array(et.filter))&&(st=et.filter);let ot;if(et.arrayFormat&&et.arrayFormat in array_prefix_generators?ot=et.arrayFormat:"indices"in et?ot=et.indices?"indices":"repeat":ot=defaults.arrayFormat,"commaRoundTrip"in et&&typeof et.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const at=typeof et.allowDots>"u"?et.encodeDotInKeys?!0:defaults.allowDots:!!et.allowDots;return{addQueryPrefix:typeof et.addQueryPrefix=="boolean"?et.addQueryPrefix:defaults.addQueryPrefix,allowDots:at,allowEmptyArrays:typeof et.allowEmptyArrays=="boolean"?!!et.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:ot,charset:_e,charsetSentinel:typeof et.charsetSentinel=="boolean"?et.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!et.commaRoundTrip,delimiter:typeof et.delimiter>"u"?defaults.delimiter:et.delimiter,encode:typeof et.encode=="boolean"?et.encode:defaults.encode,encodeDotInKeys:typeof et.encodeDotInKeys=="boolean"?et.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof et.encoder=="function"?et.encoder:defaults.encoder,encodeValuesOnly:typeof et.encodeValuesOnly=="boolean"?et.encodeValuesOnly:defaults.encodeValuesOnly,filter:st,format:tt,formatter:nt,serializeDate:typeof et.serializeDate=="function"?et.serializeDate:defaults.serializeDate,skipNulls:typeof et.skipNulls=="boolean"?et.skipNulls:defaults.skipNulls,sort:typeof et.sort=="function"?et.sort:null,strictNullHandling:typeof et.strictNullHandling=="boolean"?et.strictNullHandling:defaults.strictNullHandling}}function stringify(et,_e={}){let tt=et;const nt=normalize_stringify_options(_e);let st,ot;typeof nt.filter=="function"?(ot=nt.filter,tt=ot("",tt)):is_array(nt.filter)&&(ot=nt.filter,st=ot);const at=[];if(typeof tt!="object"||tt===null)return"";const dt=array_prefix_generators[nt.arrayFormat],ft=dt==="comma"&&nt.commaRoundTrip;st||(st=Object.keys(tt)),nt.sort&&st.sort(nt.sort);const ht=new WeakMap;for(let rt=0;rt<st.length;++rt){const lt=st[rt];nt.skipNulls&&tt[lt]===null||push_to_array(at,inner_stringify(tt[lt],lt,dt,ft,nt.allowEmptyArrays,nt.strictNullHandling,nt.skipNulls,nt.encodeDotInKeys,nt.encode?nt.encoder:null,nt.filter,nt.sort,nt.allowDots,nt.serializeDate,nt.format,nt.formatter,nt.encodeValuesOnly,nt.charset,ht))}const ct=at.join(nt.delimiter);let it=nt.addQueryPrefix===!0?"?":"";return nt.charsetSentinel&&(nt.charset==="iso-8859-1"?it+="utf8=%26%2310003%3B&":it+="utf8=%E2%9C%93&"),ct.length>0?it+ct:""}const VERSION$1="4.104.0";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(et,_e={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${et.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${et.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=_e.auto,kind=et.kind,fetch$1=et.fetch,FormData$1=et.FormData,File$1=et.File,ReadableStream$1=et.ReadableStream,getMultipartRequestOptions=et.getMultipartRequestOptions,getDefaultAgent=et.getDefaultAgent,fileFromPath=et.fileFromPath,isFsReadStream=et.isFsReadStream}class MultipartBody{constructor(_e){this.body=_e}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:et}={}){const _e=et?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let tt,nt,st,ot;try{tt=fetch,nt=Request,st=Response,ot=Headers}catch(at){throw new Error(`this environment is missing the following Web Fetch API type: ${at.message}. ${_e}`)}return{kind:"web",fetch:tt,Request:nt,Response:st,Headers:ot,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${_e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${_e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${_e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${_e}`)}},getMultipartRequestOptions:async(at,dt)=>({...dt,body:new MultipartBody(at)}),getDefaultAgent:at=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:at=>!1}}const init=()=>{kind||setShims(getRuntime(),{auto:!0})};init();class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(_e,tt,nt,st){super(`${APIError.makeMessage(_e,tt,nt)}`),this.status=_e,this.headers=st,this.request_id=st==null?void 0:st["x-request-id"],this.error=tt;const ot=tt;this.code=ot==null?void 0:ot.code,this.param=ot==null?void 0:ot.param,this.type=ot==null?void 0:ot.type}static makeMessage(_e,tt,nt){const st=tt!=null&&tt.message?typeof tt.message=="string"?tt.message:JSON.stringify(tt.message):tt?JSON.stringify(tt):nt;return _e&&st?`${_e} ${st}`:_e?`${_e} status code (no body)`:st||"(no status code or body)"}static generate(_e,tt,nt,st){if(!_e||!st)return new APIConnectionError({message:nt,cause:castToError(tt)});const ot=tt==null?void 0:tt.error;return _e===400?new BadRequestError(_e,ot,nt,st):_e===401?new AuthenticationError(_e,ot,nt,st):_e===403?new PermissionDeniedError(_e,ot,nt,st):_e===404?new NotFoundError(_e,ot,nt,st):_e===409?new ConflictError(_e,ot,nt,st):_e===422?new UnprocessableEntityError(_e,ot,nt,st):_e===429?new RateLimitError(_e,ot,nt,st):_e>=500?new InternalServerError(_e,ot,nt,st):new APIError(_e,ot,nt,st)}}class APIUserAbortError extends APIError{constructor({message:_e}={}){super(void 0,void 0,_e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:_e,cause:tt}){super(void 0,void 0,_e||"Connection error.",void 0),tt&&(this.cause=tt)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:_e}={}){super({message:_e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var __classPrivateFieldSet$5=function(et,_e,tt,nt,st){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!st)throw new TypeError("Private accessor was defined without a setter");if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?st.call(et,tt):st?st.value=tt:_e.set(et,tt),tt},__classPrivateFieldGet$6=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_carriageReturnIndex.set(this,void 0),this.buffer=new Uint8Array,__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}decode(_e){if(_e==null)return[];const tt=_e instanceof ArrayBuffer?new Uint8Array(_e):typeof _e=="string"?new TextEncoder().encode(_e):_e;let nt=new Uint8Array(this.buffer.length+tt.length);nt.set(this.buffer),nt.set(tt,this.buffer.length),this.buffer=nt;const st=[];let ot;for(;(ot=findNewlineIndex(this.buffer,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(ot.carriage&&__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,ot.index,"f");continue}if(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(ot.index!==__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")+1||ot.carriage)){st.push(this.decodeText(this.buffer.slice(0,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")-1))),this.buffer=this.buffer.slice(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f");continue}const at=__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!==null?ot.preceding-1:ot.preceding,dt=this.decodeText(this.buffer.slice(0,at));st.push(dt),this.buffer=this.buffer.slice(ot.index),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}return st}decodeText(_e){if(_e==null)return"";if(typeof _e=="string")return _e;if(typeof Buffer<"u"){if(_e instanceof Buffer)return _e.toString();if(_e instanceof Uint8Array)return Buffer.from(_e).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${_e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(_e instanceof Uint8Array||_e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(_e);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${_e.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_LineDecoder_carriageReturnIndex=new WeakMap;LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(et,_e){for(let st=_e??0;st<et.length;st++){if(et[st]===10)return{preceding:st,index:st+1,carriage:!1};if(et[st]===13)return{preceding:st,index:st+1,carriage:!0}}return null}function findDoubleNewlineIndex(et){for(let nt=0;nt<et.length-1;nt++){if(et[nt]===10&&et[nt+1]===10||et[nt]===13&&et[nt+1]===13)return nt+2;if(et[nt]===13&&et[nt+1]===10&&nt+3<et.length&&et[nt+2]===13&&et[nt+3]===10)return nt+4}return-1}function ReadableStreamToAsyncIterable(et){if(et[Symbol.asyncIterator])return et;const _e=et.getReader();return{async next(){try{const tt=await _e.read();return tt!=null&&tt.done&&_e.releaseLock(),tt}catch(tt){throw _e.releaseLock(),tt}},async return(){const tt=_e.cancel();return _e.releaseLock(),await tt,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Stream{constructor(_e,tt){this.iterator=_e,this.controller=tt}static fromSSEResponse(_e,tt){let nt=!1;async function*st(){if(nt)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");nt=!0;let ot=!1;try{for await(const at of _iterSSEMessages(_e,tt))if(!ot){if(at.data.startsWith("[DONE]")){ot=!0;continue}if(at.event===null||at.event.startsWith("response.")||at.event.startsWith("transcript.")){let dt;try{dt=JSON.parse(at.data)}catch(ft){throw console.error("Could not parse message into JSON:",at.data),console.error("From chunk:",at.raw),ft}if(dt&&dt.error)throw new APIError(void 0,dt.error,void 0,createResponseHeaders(_e.headers));yield dt}else{let dt;try{dt=JSON.parse(at.data)}catch(ft){throw console.error("Could not parse message into JSON:",at.data),console.error("From chunk:",at.raw),ft}if(at.event=="error")throw new APIError(void 0,dt.error,dt.message,void 0);yield{event:at.event,data:dt}}}ot=!0}catch(at){if(at instanceof Error&&at.name==="AbortError")return;throw at}finally{ot||tt.abort()}}return new Stream(st,tt)}static fromReadableStream(_e,tt){let nt=!1;async function*st(){const at=new LineDecoder,dt=ReadableStreamToAsyncIterable(_e);for await(const ft of dt)for(const ht of at.decode(ft))yield ht;for(const ft of at.flush())yield ft}async function*ot(){if(nt)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");nt=!0;let at=!1;try{for await(const dt of st())at||dt&&(yield JSON.parse(dt));at=!0}catch(dt){if(dt instanceof Error&&dt.name==="AbortError")return;throw dt}finally{at||tt.abort()}}return new Stream(ot,tt)}[Symbol.asyncIterator](){return this.iterator()}tee(){const _e=[],tt=[],nt=this.iterator(),st=ot=>({next:()=>{if(ot.length===0){const at=nt.next();_e.push(at),tt.push(at)}return ot.shift()}});return[new Stream(()=>st(_e),this.controller),new Stream(()=>st(tt),this.controller)]}toReadableStream(){const _e=this;let tt;const nt=new TextEncoder;return new ReadableStream$1({async start(){tt=_e[Symbol.asyncIterator]()},async pull(st){try{const{value:ot,done:at}=await tt.next();if(at)return st.close();const dt=nt.encode(JSON.stringify(ot)+`
`);st.enqueue(dt)}catch(ot){st.error(ot)}},async cancel(){var st;await((st=tt.return)==null?void 0:st.call(tt))}})}}async function*_iterSSEMessages(et,_e){if(!et.body)throw _e.abort(),new OpenAIError("Attempted to iterate over a response with no body");const tt=new SSEDecoder,nt=new LineDecoder,st=ReadableStreamToAsyncIterable(et.body);for await(const ot of iterSSEChunks(st))for(const at of nt.decode(ot)){const dt=tt.decode(at);dt&&(yield dt)}for(const ot of nt.flush()){const at=tt.decode(ot);at&&(yield at)}}async function*iterSSEChunks(et){let _e=new Uint8Array;for await(const tt of et){if(tt==null)continue;const nt=tt instanceof ArrayBuffer?new Uint8Array(tt):typeof tt=="string"?new TextEncoder().encode(tt):tt;let st=new Uint8Array(_e.length+nt.length);st.set(_e),st.set(nt,_e.length),_e=st;let ot;for(;(ot=findDoubleNewlineIndex(_e))!==-1;)yield _e.slice(0,ot),_e=_e.slice(ot)}_e.length>0&&(yield _e)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(_e){if(_e.endsWith("\r")&&(_e=_e.substring(0,_e.length-1)),!_e){if(!this.event&&!this.data.length)return null;const ot={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],ot}if(this.chunks.push(_e),_e.startsWith(":"))return null;let[tt,nt,st]=partition(_e,":");return st.startsWith(" ")&&(st=st.substring(1)),tt==="event"?this.event=st:tt==="data"&&this.data.push(st),null}}function partition(et,_e){const tt=et.indexOf(_e);return tt!==-1?[et.substring(0,tt),_e,et.substring(tt+_e.length)]:[et,"",""]}const isResponseLike=et=>et!=null&&typeof et=="object"&&typeof et.url=="string"&&typeof et.blob=="function",isFileLike=et=>et!=null&&typeof et=="object"&&typeof et.name=="string"&&typeof et.lastModified=="number"&&isBlobLike(et),isBlobLike=et=>et!=null&&typeof et=="object"&&typeof et.size=="number"&&typeof et.type=="string"&&typeof et.text=="function"&&typeof et.slice=="function"&&typeof et.arrayBuffer=="function",isUploadable=et=>isFileLike(et)||isResponseLike(et)||isFsReadStream(et);async function toFile(et,_e,tt){var st;if(et=await et,isFileLike(et))return et;if(isResponseLike(et)){const ot=await et.blob();_e||(_e=new URL(et.url).pathname.split(/[\\/]/).pop()??"unknown_file");const at=isBlobLike(ot)?[await ot.arrayBuffer()]:[ot];return new File$1(at,_e,tt)}const nt=await getBytes(et);if(_e||(_e=getName(et)??"unknown_file"),!(tt!=null&&tt.type)){const ot=(st=nt[0])==null?void 0:st.type;typeof ot=="string"&&(tt={...tt,type:ot})}return new File$1(nt,_e,tt)}async function getBytes(et){var tt;let _e=[];if(typeof et=="string"||ArrayBuffer.isView(et)||et instanceof ArrayBuffer)_e.push(et);else if(isBlobLike(et))_e.push(await et.arrayBuffer());else if(isAsyncIterableIterator(et))for await(const nt of et)_e.push(nt);else throw new Error(`Unexpected data type: ${typeof et}; constructor: ${(tt=et==null?void 0:et.constructor)==null?void 0:tt.name}; props: ${propsForError(et)}`);return _e}function propsForError(et){return`[${Object.getOwnPropertyNames(et).map(tt=>`"${tt}"`).join(", ")}]`}function getName(et){var _e;return getStringFromMaybeBuffer(et.name)||getStringFromMaybeBuffer(et.filename)||((_e=getStringFromMaybeBuffer(et.path))==null?void 0:_e.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=et=>{if(typeof et=="string")return et;if(typeof Buffer<"u"&&et instanceof Buffer)return String(et)},isAsyncIterableIterator=et=>et!=null&&typeof et=="object"&&typeof et[Symbol.asyncIterator]=="function",isMultipartBody=et=>et&&typeof et=="object"&&et.body&&et[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async et=>{const _e=await createForm(et.body);return getMultipartRequestOptions(_e,et)},createForm=async et=>{const _e=new FormData$1;return await Promise.all(Object.entries(et||{}).map(([tt,nt])=>addFormValue(_e,tt,nt))),_e},addFormValue=async(et,_e,tt)=>{if(tt!==void 0){if(tt==null)throw new TypeError(`Received null for "${_e}"; to pass null in FormData, you must use the string 'null'`);if(typeof tt=="string"||typeof tt=="number"||typeof tt=="boolean")et.append(_e,String(tt));else if(isUploadable(tt)){const nt=await toFile(tt);et.append(_e,nt)}else if(Array.isArray(tt))await Promise.all(tt.map(nt=>addFormValue(et,_e+"[]",nt)));else if(typeof tt=="object")await Promise.all(Object.entries(tt).map(([nt,st])=>addFormValue(et,`${_e}[${nt}]`,st)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${tt} instead`)}};var define_process_env_default$1={},__classPrivateFieldSet$4=function(et,_e,tt,nt,st){if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _e.set(et,tt),tt},__classPrivateFieldGet$5=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_AbstractPage_client;init();async function defaultParseResponse(et){var at;const{response:_e}=et;if(et.options.stream)return debug("response",_e.status,_e.url,_e.headers,_e.body),et.options.__streamClass?et.options.__streamClass.fromSSEResponse(_e,et.controller):Stream.fromSSEResponse(_e,et.controller);if(_e.status===204)return null;if(et.options.__binaryResponse)return _e;const tt=_e.headers.get("content-type"),nt=(at=tt==null?void 0:tt.split(";")[0])==null?void 0:at.trim();if((nt==null?void 0:nt.includes("application/json"))||(nt==null?void 0:nt.endsWith("+json"))){const dt=await _e.json();return debug("response",_e.status,_e.url,_e.headers,dt),_addRequestID(dt,_e)}const ot=await _e.text();return debug("response",_e.status,_e.url,_e.headers,ot),ot}function _addRequestID(et,_e){return!et||typeof et!="object"||Array.isArray(et)?et:Object.defineProperty(et,"_request_id",{value:_e.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(_e,tt=defaultParseResponse){super(nt=>{nt(null)}),this.responsePromise=_e,this.parseResponse=tt}_thenUnwrap(_e){return new APIPromise(this.responsePromise,async tt=>_addRequestID(_e(await this.parseResponse(tt),tt),tt.response))}asResponse(){return this.responsePromise.then(_e=>_e.response)}async withResponse(){const[_e,tt]=await Promise.all([this.parse(),this.asResponse()]);return{data:_e,response:tt,request_id:tt.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(_e,tt){return this.parse().then(_e,tt)}catch(_e){return this.parse().catch(_e)}finally(_e){return this.parse().finally(_e)}}class APIClient{constructor({baseURL:_e,maxRetries:tt=2,timeout:nt=6e5,httpAgent:st,fetch:ot}){this.baseURL=_e,this.maxRetries=validatePositiveInteger("maxRetries",tt),this.timeout=validatePositiveInteger("timeout",nt),this.httpAgent=st,this.fetch=ot??fetch$1}authHeaders(_e){return{}}defaultHeaders(_e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(_e)}}validateHeaders(_e,tt){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(_e,tt){return this.methodRequest("get",_e,tt)}post(_e,tt){return this.methodRequest("post",_e,tt)}patch(_e,tt){return this.methodRequest("patch",_e,tt)}put(_e,tt){return this.methodRequest("put",_e,tt)}delete(_e,tt){return this.methodRequest("delete",_e,tt)}methodRequest(_e,tt,nt){return this.request(Promise.resolve(nt).then(async st=>{const ot=st&&isBlobLike(st==null?void 0:st.body)?new DataView(await st.body.arrayBuffer()):(st==null?void 0:st.body)instanceof DataView?st.body:(st==null?void 0:st.body)instanceof ArrayBuffer?new DataView(st.body):st&&ArrayBuffer.isView(st==null?void 0:st.body)?new DataView(st.body.buffer):st==null?void 0:st.body;return{method:_e,path:tt,...st,body:ot}}))}getAPIList(_e,tt,nt){return this.requestAPIList(tt,{method:"get",path:_e,...nt})}calculateContentLength(_e){if(typeof _e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(_e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(_e).length.toString()}else if(ArrayBuffer.isView(_e))return _e.byteLength.toString();return null}buildRequest(_e,{retryCount:tt=0}={}){var pt;const nt={..._e},{method:st,path:ot,query:at,headers:dt={}}=nt,ft=ArrayBuffer.isView(nt.body)||nt.__binaryRequest&&typeof nt.body=="string"?nt.body:isMultipartBody(nt.body)?nt.body.body:nt.body?JSON.stringify(nt.body,null,2):null,ht=this.calculateContentLength(ft),ct=this.buildURL(ot,at);"timeout"in nt&&validatePositiveInteger("timeout",nt.timeout),nt.timeout=nt.timeout??this.timeout;const it=nt.httpAgent??this.httpAgent??getDefaultAgent(ct),rt=nt.timeout+1e3;typeof((pt=it==null?void 0:it.options)==null?void 0:pt.timeout)=="number"&&rt>(it.options.timeout??0)&&(it.options.timeout=rt),this.idempotencyHeader&&st!=="get"&&(_e.idempotencyKey||(_e.idempotencyKey=this.defaultIdempotencyKey()),dt[this.idempotencyHeader]=_e.idempotencyKey);const lt=this.buildHeaders({options:nt,headers:dt,contentLength:ht,retryCount:tt});return{req:{method:st,...ft&&{body:ft},headers:lt,...it&&{agent:it},signal:nt.signal??null},url:ct,timeout:nt.timeout}}buildHeaders({options:_e,headers:tt,contentLength:nt,retryCount:st}){const ot={};nt&&(ot["content-length"]=nt);const at=this.defaultHeaders(_e);return applyHeadersMut(ot,at),applyHeadersMut(ot,tt),isMultipartBody(_e.body)&&kind!=="node"&&delete ot["content-type"],getHeader(at,"x-stainless-retry-count")===void 0&&getHeader(tt,"x-stainless-retry-count")===void 0&&(ot["x-stainless-retry-count"]=String(st)),getHeader(at,"x-stainless-timeout")===void 0&&getHeader(tt,"x-stainless-timeout")===void 0&&_e.timeout&&(ot["x-stainless-timeout"]=String(Math.trunc(_e.timeout/1e3))),this.validateHeaders(ot,tt),ot}async prepareOptions(_e){}async prepareRequest(_e,{url:tt,options:nt}){}parseHeaders(_e){return _e?Symbol.iterator in _e?Object.fromEntries(Array.from(_e).map(tt=>[...tt])):{..._e}:{}}makeStatusError(_e,tt,nt,st){return APIError.generate(_e,tt,nt,st)}request(_e,tt=null){return new APIPromise(this.makeRequest(_e,tt))}async makeRequest(_e,tt){var it,rt;const nt=await _e,st=nt.maxRetries??this.maxRetries;tt==null&&(tt=st),await this.prepareOptions(nt);const{req:ot,url:at,timeout:dt}=this.buildRequest(nt,{retryCount:st-tt});if(await this.prepareRequest(ot,{url:at,options:nt}),debug("request",at,nt,ot.headers),(it=nt.signal)!=null&&it.aborted)throw new APIUserAbortError;const ft=new AbortController,ht=await this.fetchWithTimeout(at,ot,dt,ft).catch(castToError);if(ht instanceof Error){if((rt=nt.signal)!=null&&rt.aborted)throw new APIUserAbortError;if(tt)return this.retryRequest(nt,tt);throw ht.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:ht})}const ct=createResponseHeaders(ht.headers);if(!ht.ok){if(tt&&this.shouldRetry(ht)){const yt=`retrying, ${tt} attempts remaining`;return debug(`response (error; ${yt})`,ht.status,at,ct),this.retryRequest(nt,tt,ct)}const lt=await ht.text().catch(yt=>castToError(yt).message),ut=safeJSON(lt),pt=ut?void 0:lt;throw debug(`response (error; ${tt?"(error; no more retries left)":"(error; not retryable)"})`,ht.status,at,ct,pt),this.makeStatusError(ht.status,ut,pt,ct)}return{response:ht,options:nt,controller:ft}}requestAPIList(_e,tt){const nt=this.makeRequest(tt,null);return new PagePromise(this,nt,_e)}buildURL(_e,tt){const nt=isAbsoluteURL(_e)?new URL(_e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&_e.startsWith("/")?_e.slice(1):_e)),st=this.defaultQuery();return isEmptyObj(st)||(tt={...st,...tt}),typeof tt=="object"&&tt&&!Array.isArray(tt)&&(nt.search=this.stringifyQuery(tt)),nt.toString()}stringifyQuery(_e){return Object.entries(_e).filter(([tt,nt])=>typeof nt<"u").map(([tt,nt])=>{if(typeof nt=="string"||typeof nt=="number"||typeof nt=="boolean")return`${encodeURIComponent(tt)}=${encodeURIComponent(nt)}`;if(nt===null)return`${encodeURIComponent(tt)}=`;throw new OpenAIError(`Cannot stringify type ${typeof nt}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(_e,tt,nt,st){const{signal:ot,...at}=tt||{};ot&&ot.addEventListener("abort",()=>st.abort());const dt=setTimeout(()=>st.abort(),nt),ft={signal:st.signal,...at};return ft.method&&(ft.method=ft.method.toUpperCase()),this.fetch.call(void 0,_e,ft).finally(()=>{clearTimeout(dt)})}shouldRetry(_e){const tt=_e.headers.get("x-should-retry");return tt==="true"?!0:tt==="false"?!1:_e.status===408||_e.status===409||_e.status===429||_e.status>=500}async retryRequest(_e,tt,nt){let st;const ot=nt==null?void 0:nt["retry-after-ms"];if(ot){const dt=parseFloat(ot);Number.isNaN(dt)||(st=dt)}const at=nt==null?void 0:nt["retry-after"];if(at&&!st){const dt=parseFloat(at);Number.isNaN(dt)?st=Date.parse(at)-Date.now():st=dt*1e3}if(!(st&&0<=st&&st<60*1e3)){const dt=_e.maxRetries??this.maxRetries;st=this.calculateDefaultRetryTimeoutMillis(tt,dt)}return await sleep(st),this.makeRequest(_e,tt-1)}calculateDefaultRetryTimeoutMillis(_e,tt){const ot=tt-_e,at=Math.min(.5*Math.pow(2,ot),8),dt=1-Math.random()*.25;return at*dt*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION$1}`}}class AbstractPage{constructor(_e,tt,nt,st){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$4(this,_AbstractPage_client,_e),this.options=st,this.response=tt,this.body=nt}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const _e=this.nextPageInfo();if(!_e)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const tt={...this.options};if("params"in _e&&typeof tt.query=="object")tt.query={...tt.query,..._e.params};else if("url"in _e){const nt=[...Object.entries(tt.query||{}),..._e.url.searchParams.entries()];for(const[st,ot]of nt)_e.url.searchParams.set(st,ot);tt.query=void 0,tt.path=_e.url.toString()}return await __classPrivateFieldGet$5(this,_AbstractPage_client,"f").requestAPIList(this.constructor,tt)}async*iterPages(){let _e=this;for(yield _e;_e.hasNextPage();)_e=await _e.getNextPage(),yield _e}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const _e of this.iterPages())for(const tt of _e.getPaginatedItems())yield tt}}class PagePromise extends APIPromise{constructor(_e,tt,nt){super(tt,async st=>new nt(_e,st.response,await defaultParseResponse(st),st.options))}async*[Symbol.asyncIterator](){const _e=await this;for await(const tt of _e)yield tt}}const createResponseHeaders=et=>new Proxy(Object.fromEntries(et.entries()),{get(_e,tt){const nt=tt.toString();return _e[nt.toLowerCase()]||_e[nt]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=et=>typeof et=="object"&&et!==null&&!isEmptyObj(et)&&Object.keys(et).every(_e=>hasOwn(requestOptionsKeys,_e)),getPlatformProperties=()=>{var _e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION$1,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((_e=Deno.version)==null?void 0:_e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION$1,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION$1,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const et=getBrowserInfo();return et?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION$1,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${et.browser}`,"X-Stainless-Runtime-Version":et.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION$1,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const et=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:_e,pattern:tt}of et){const nt=tt.exec(navigator.userAgent);if(nt){const st=nt[1]||0,ot=nt[2]||0,at=nt[3]||0;return{browser:_e,version:`${st}.${ot}.${at}`}}}return null}const normalizeArch=et=>et==="x32"?"x32":et==="x86_64"||et==="x64"?"x64":et==="arm"?"arm":et==="aarch64"||et==="arm64"?"arm64":et?`other:${et}`:"unknown",normalizePlatform=et=>(et=et.toLowerCase(),et.includes("ios")?"iOS":et==="android"?"Android":et==="darwin"?"MacOS":et==="win32"?"Windows":et==="freebsd"?"FreeBSD":et==="openbsd"?"OpenBSD":et==="linux"?"Linux":et?`Other:${et}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=et=>{try{return JSON.parse(et)}catch{return}},startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=et=>startsWithSchemeRegexp.test(et),sleep=et=>new Promise(_e=>setTimeout(_e,et)),validatePositiveInteger=(et,_e)=>{if(typeof _e!="number"||!Number.isInteger(_e))throw new OpenAIError(`${et} must be an integer`);if(_e<0)throw new OpenAIError(`${et} must be a positive integer`);return _e},castToError=et=>{if(et instanceof Error)return et;if(typeof et=="object"&&et!==null)try{return new Error(JSON.stringify(et))}catch{}return new Error(et)},readEnv=et=>{var _e,tt,nt,st;if(typeof process<"u")return((_e=define_process_env_default$1==null?void 0:define_process_env_default$1[et])==null?void 0:_e.trim())??void 0;if(typeof Deno<"u")return(st=(nt=(tt=Deno.env)==null?void 0:tt.get)==null?void 0:nt.call(tt,et))==null?void 0:st.trim()};function isEmptyObj(et){if(!et)return!0;for(const _e in et)return!1;return!0}function hasOwn(et,_e){return Object.prototype.hasOwnProperty.call(et,_e)}function applyHeadersMut(et,_e){for(const tt in _e){if(!hasOwn(_e,tt))continue;const nt=tt.toLowerCase();if(!nt)continue;const st=_e[tt];st===null?delete et[nt]:st!==void 0&&(et[nt]=st)}}const SENSITIVE_HEADERS=new Set(["authorization","api-key"]);function debug(et,..._e){if(typeof process<"u"&&(define_process_env_default$1==null?void 0:define_process_env_default$1.DEBUG)==="true"){const tt=_e.map(nt=>{if(!nt)return nt;if(nt.headers){const ot={...nt,headers:{...nt.headers}};for(const at in nt.headers)SENSITIVE_HEADERS.has(at.toLowerCase())&&(ot.headers[at]="REDACTED");return ot}let st=null;for(const ot in nt)SENSITIVE_HEADERS.has(ot.toLowerCase())&&(st??(st={...nt}),st[ot]="REDACTED");return st??nt});console.log(`OpenAI:DEBUG:${et}`,...tt)}}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,et=>{const _e=Math.random()*16|0;return(et==="x"?_e:_e&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=et=>typeof(et==null?void 0:et.get)=="function",getHeader=(et,_e)=>{var nt;const tt=_e.toLowerCase();if(isHeadersProtocol(et)){const st=((nt=_e[0])==null?void 0:nt.toUpperCase())+_e.substring(1).replace(/([^\w])(\w)/g,(ot,at,dt)=>at+dt.toUpperCase());for(const ot of[_e,tt,_e.toUpperCase(),st]){const at=et.get(ot);if(at)return at}}for(const[st,ot]of Object.entries(et))if(st.toLowerCase()===tt)return Array.isArray(ot)?(ot.length<=1||console.warn(`Received ${ot.length} entries for the ${_e} header, using the first entry.`),ot[0]):ot},toFloat32Array=et=>{if(typeof Buffer<"u"){const _e=Buffer.from(et,"base64");return Array.from(new Float32Array(_e.buffer,_e.byteOffset,_e.length/Float32Array.BYTES_PER_ELEMENT))}else{const _e=atob(et),tt=_e.length,nt=new Uint8Array(tt);for(let st=0;st<tt;st++)nt[st]=_e.charCodeAt(st);return Array.from(new Float32Array(nt.buffer))}};function isObj(et){return et!=null&&typeof et=="object"&&!Array.isArray(et)}class Page extends AbstractPage{constructor(_e,tt,nt,st){super(_e,tt,nt,st),this.data=nt.data||[],this.object=nt.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class CursorPage extends AbstractPage{constructor(_e,tt,nt,st){super(_e,tt,nt,st),this.data=nt.data||[],this.has_more=nt.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const _e=this.nextPageInfo();if(!_e)return null;if("params"in _e)return _e.params;const tt=Object.fromEntries(_e.url.searchParams);return Object.keys(tt).length?tt:null}nextPageInfo(){var nt;const _e=this.getPaginatedItems();if(!_e.length)return null;const tt=(nt=_e[_e.length-1])==null?void 0:nt.id;return tt?{params:{after:tt}}:null}}class APIResource{constructor(_e){this._client=_e}}let Messages$1=class extends APIResource{list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/chat/completions/${_e}/messages`,ChatCompletionStoreMessagesPage,{query:tt,...nt})}},Completions$2=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(_e,tt){return this._client.post("/chat/completions",{body:_e,...tt,stream:_e.stream??!1})}retrieve(_e,tt){return this._client.get(`/chat/completions/${_e}`,tt)}update(_e,tt,nt){return this._client.post(`/chat/completions/${_e}`,{body:tt,...nt})}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/chat/completions",ChatCompletionsPage,{query:_e,...tt})}del(_e,tt){return this._client.delete(`/chat/completions/${_e}`,tt)}};class ChatCompletionsPage extends CursorPage{}class ChatCompletionStoreMessagesPage extends CursorPage{}Completions$2.ChatCompletionsPage=ChatCompletionsPage;Completions$2.Messages=Messages$1;let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};Chat$1.Completions=Completions$2;Chat$1.ChatCompletionsPage=ChatCompletionsPage;class Speech extends APIResource{create(_e,tt){return this._client.post("/audio/speech",{body:_e,...tt,headers:{Accept:"application/octet-stream",...tt==null?void 0:tt.headers},__binaryResponse:!0})}}class Transcriptions extends APIResource{create(_e,tt){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:_e,...tt,stream:_e.stream??!1,__metadata:{model:_e.model}}))}}class Translations extends APIResource{create(_e,tt){return this._client.post("/audio/translations",multipartFormRequestOptions({body:_e,...tt,__metadata:{model:_e.model}}))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions;Audio.Translations=Translations;Audio.Speech=Speech;class Batches extends APIResource{create(_e,tt){return this._client.post("/batches",{body:_e,...tt})}retrieve(_e,tt){return this._client.get(`/batches/${_e}`,tt)}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/batches",BatchesPage,{query:_e,...tt})}cancel(_e,tt){return this._client.post(`/batches/${_e}/cancel`,tt)}}class BatchesPage extends CursorPage{}Batches.BatchesPage=BatchesPage;var __classPrivateFieldSet$3=function(et,_e,tt,nt,st){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!st)throw new TypeError("Private accessor was defined without a setter");if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?st.call(et,tt):st?st.value=tt:_e.set(et,tt),tt},__classPrivateFieldGet$4=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$3(this,_EventStream_connectedPromise,new Promise((_e,tt)=>{__classPrivateFieldSet$3(this,_EventStream_resolveConnectedPromise,_e,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectConnectedPromise,tt,"f")}),"f"),__classPrivateFieldSet$3(this,_EventStream_endPromise,new Promise((_e,tt)=>{__classPrivateFieldSet$3(this,_EventStream_resolveEndPromise,_e,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectEndPromise,tt,"f")}),"f"),__classPrivateFieldGet$4(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$4(this,_EventStream_endPromise,"f").catch(()=>{})}_run(_e){setTimeout(()=>{_e().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$4(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$4(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$4(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$4(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$4(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(_e,tt){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e]=[])).push({listener:tt}),this}off(_e,tt){const nt=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e];if(!nt)return this;const st=nt.findIndex(ot=>ot.listener===tt);return st>=0&&nt.splice(st,1),this}once(_e,tt){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e]=[])).push({listener:tt,once:!0}),this}emitted(_e){return new Promise((tt,nt)=>{__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),_e!=="error"&&this.once("error",nt),this.once(_e,tt)})}async done(){__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$4(this,_EventStream_endPromise,"f")}_emit(_e,...tt){if(__classPrivateFieldGet$4(this,_EventStream_ended,"f"))return;_e==="end"&&(__classPrivateFieldSet$3(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$4(this,_EventStream_resolveEndPromise,"f").call(this));const nt=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e];if(nt&&(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[_e]=nt.filter(st=>!st.once),nt.forEach(({listener:st})=>st(...tt))),_e==="abort"){const st=tt[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(nt!=null&&nt.length)&&Promise.reject(st),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,st),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,st),this._emit("end");return}if(_e==="error"){const st=tt[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(nt!=null&&nt.length)&&Promise.reject(st),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,st),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,st),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function(_e){if(__classPrivateFieldSet$3(this,_EventStream_errored,!0,"f"),_e instanceof Error&&_e.name==="AbortError"&&(_e=new APIUserAbortError),_e instanceof APIUserAbortError)return __classPrivateFieldSet$3(this,_EventStream_aborted,!0,"f"),this._emit("abort",_e);if(_e instanceof OpenAIError)return this._emit("error",_e);if(_e instanceof Error){const tt=new OpenAIError(_e.message);return tt.cause=_e,this._emit("error",tt)}return this._emit("error",new OpenAIError(String(_e)))};var __classPrivateFieldGet$3=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},__classPrivateFieldSet$2=function(et,_e,tt,nt,st){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!st)throw new TypeError("Private accessor was defined without a setter");if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?st.call(et,tt):st?st.value=tt:_e.set(et,tt),tt},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const _e=[],tt=[];let nt=!1;return this.on("event",st=>{const ot=tt.shift();ot?ot.resolve(st):_e.push(st)}),this.on("end",()=>{nt=!0;for(const st of tt)st.resolve(void 0);tt.length=0}),this.on("abort",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),this.on("error",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),{next:async()=>_e.length?{value:_e.shift(),done:!1}:nt?{value:void 0,done:!0}:new Promise((ot,at)=>tt.push({resolve:ot,reject:at})).then(ot=>ot?{value:ot,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(_e){const tt=new AssistantStream;return tt._run(()=>tt._fromReadableStream(_e)),tt}async _fromReadableStream(_e,tt){var ot;const nt=tt==null?void 0:tt.signal;nt&&(nt.aborted&&this.controller.abort(),nt.addEventListener("abort",()=>this.controller.abort())),this._connected();const st=Stream.fromReadableStream(_e,this.controller);for await(const at of st)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,at);if((ot=st.controller.signal)!=null&&ot.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(_e,tt,nt,st,ot){const at=new AssistantStream;return at._run(()=>at._runToolAssistantStream(_e,tt,nt,st,{...ot,headers:{...ot==null?void 0:ot.headers,"X-Stainless-Helper-Method":"stream"}})),at}async _createToolAssistantStream(_e,tt,nt,st,ot){var ht;const at=ot==null?void 0:ot.signal;at&&(at.aborted&&this.controller.abort(),at.addEventListener("abort",()=>this.controller.abort()));const dt={...st,stream:!0},ft=await _e.submitToolOutputs(tt,nt,dt,{...ot,signal:this.controller.signal});this._connected();for await(const ct of ft)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,ct);if((ht=ft.controller.signal)!=null&&ht.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(_e,tt,nt){const st=new AssistantStream;return st._run(()=>st._threadAssistantStream(_e,tt,{...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"stream"}})),st}static createAssistantStream(_e,tt,nt,st){const ot=new AssistantStream;return ot._run(()=>ot._runAssistantStream(_e,tt,nt,{...st,headers:{...st==null?void 0:st.headers,"X-Stainless-Helper-Method":"stream"}})),ot}currentEvent(){return __classPrivateFieldGet$3(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet$3(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet$3(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(_e,tt,nt){var dt;const st=nt==null?void 0:nt.signal;st&&(st.aborted&&this.controller.abort(),st.addEventListener("abort",()=>this.controller.abort()));const ot={...tt,stream:!0},at=await _e.createAndRun(ot,{...nt,signal:this.controller.signal});this._connected();for await(const ft of at)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,ft);if((dt=at.controller.signal)!=null&&dt.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(_e,tt,nt,st){var ft;const ot=st==null?void 0:st.signal;ot&&(ot.aborted&&this.controller.abort(),ot.addEventListener("abort",()=>this.controller.abort()));const at={...nt,stream:!0},dt=await _e.create(tt,at,{...st,signal:this.controller.signal});this._connected();for await(const ht of dt)__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,ht);if((ft=dt.controller.signal)!=null&&ft.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(_e,tt){for(const[nt,st]of Object.entries(tt)){if(!_e.hasOwnProperty(nt)){_e[nt]=st;continue}let ot=_e[nt];if(ot==null){_e[nt]=st;continue}if(nt==="index"||nt==="type"){_e[nt]=st;continue}if(typeof ot=="string"&&typeof st=="string")ot+=st;else if(typeof ot=="number"&&typeof st=="number")ot+=st;else if(isObj(ot)&&isObj(st))ot=this.accumulateDelta(ot,st);else if(Array.isArray(ot)&&Array.isArray(st)){if(ot.every(at=>typeof at=="string"||typeof at=="number")){ot.push(...st);continue}for(const at of st){if(!isObj(at))throw new Error(`Expected array delta entry to be an object but got: ${at}`);const dt=at.index;if(dt==null)throw console.error(at),new Error("Expected array delta entry to have an `index` property");if(typeof dt!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${dt}`);const ft=ot[dt];ft==null?ot.push(at):ot[dt]=this.accumulateDelta(ft,at)}continue}else throw Error(`Unhandled record type: ${nt}, deltaValue: ${st}, accValue: ${ot}`);_e[nt]=ot}return _e}_addRun(_e){return _e}async _threadAssistantStream(_e,tt,nt){return await this._createThreadAssistantStream(tt,_e,nt)}async _runAssistantStream(_e,tt,nt,st){return await this._createAssistantStream(tt,_e,nt,st)}async _runToolAssistantStream(_e,tt,nt,st,ot){return await this._createToolAssistantStream(nt,_e,tt,st,ot)}}_AssistantStream_addEvent=function(_e){if(!this.ended)switch(__classPrivateFieldSet$2(this,_AssistantStream_currentEvent,_e,"f"),__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,_e),_e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,_e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,_e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,_e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet$3(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function(_e){const[tt,nt]=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,_e,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet$2(this,_AssistantStream_messageSnapshot,tt,"f"),__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshots,"f")[tt.id]=tt;for(const st of nt){const ot=tt.content[st.index];(ot==null?void 0:ot.type)=="text"&&this._emit("textCreated",ot.text)}switch(_e.event){case"thread.message.created":this._emit("messageCreated",_e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",_e.data.delta,tt),_e.data.delta.content)for(const st of _e.data.delta.content){if(st.type=="text"&&st.text){let ot=st.text,at=tt.content[st.index];if(at&&at.type=="text")this._emit("textDelta",ot,at.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(st.index!=__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet$3(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet$2(this,_AssistantStream_currentContentIndex,st.index,"f")}__classPrivateFieldSet$2(this,_AssistantStream_currentContent,tt.content[st.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")!==void 0){const st=_e.data.content[__classPrivateFieldGet$3(this,_AssistantStream_currentContentIndex,"f")];if(st)switch(st.type){case"image_file":this._emit("imageFileDone",st.image_file,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",st.text,__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet$3(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",_e.data),__classPrivateFieldSet$2(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function(_e){const tt=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,_e);switch(__classPrivateFieldSet$2(this,_AssistantStream_currentRunStepSnapshot,tt,"f"),_e.event){case"thread.run.step.created":this._emit("runStepCreated",_e.data);break;case"thread.run.step.delta":const nt=_e.data.delta;if(nt.step_details&&nt.step_details.type=="tool_calls"&&nt.step_details.tool_calls&&tt.step_details.type=="tool_calls")for(const ot of nt.step_details.tool_calls)ot.index==__classPrivateFieldGet$3(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",ot,tt.step_details.tool_calls[ot.index]):(__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCallIndex,ot.index,"f"),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,tt.step_details.tool_calls[ot.index],"f"),__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",_e.data.delta,tt);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet$2(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),_e.data.step_details.type=="tool_calls"&&__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",_e.data,tt);break}},_AssistantStream_handleEvent=function(_e){__classPrivateFieldGet$3(this,_AssistantStream_events,"f").push(_e),this._emit("event",_e)},_AssistantStream_accumulateRunStep=function(_e){switch(_e.event){case"thread.run.step.created":return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id]=_e.data,_e.data;case"thread.run.step.delta":let tt=__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id];if(!tt)throw Error("Received a RunStepDelta before creation of a snapshot");let nt=_e.data;if(nt.delta){const st=AssistantStream.accumulateDelta(tt,nt.delta);__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id]=st}return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id]=_e.data;break}if(__classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id])return __classPrivateFieldGet$3(this,_AssistantStream_runStepSnapshots,"f")[_e.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function(_e,tt){let nt=[];switch(_e.event){case"thread.message.created":return[_e.data,nt];case"thread.message.delta":if(!tt)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let st=_e.data;if(st.delta.content)for(const ot of st.delta.content)if(ot.index in tt.content){let at=tt.content[ot.index];tt.content[ot.index]=__classPrivateFieldGet$3(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,ot,at)}else tt.content[ot.index]=ot,nt.push(ot);return[tt,nt];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(tt)return[tt,nt];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function(_e,tt){return AssistantStream.accumulateDelta(tt,_e)},_AssistantStream_handleRun=function(_e){switch(__classPrivateFieldSet$2(this,_AssistantStream_currentRunSnapshot,_e.data,"f"),_e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet$2(this,_AssistantStream_finalRun,_e.data,"f"),__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$3(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$2(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Assistants extends APIResource{create(_e,tt){return this._client.post("/assistants",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}retrieve(_e,tt){return this._client.get(`/assistants/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}update(_e,tt,nt){return this._client.post(`/assistants/${_e}`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/assistants",AssistantsPage,{query:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}del(_e,tt){return this._client.delete(`/assistants/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}}class AssistantsPage extends CursorPage{}Assistants.AssistantsPage=AssistantsPage;function isRunnableFunctionWithParse(et){return typeof et.parse=="function"}const isAssistantMessage=et=>(et==null?void 0:et.role)==="assistant",isFunctionMessage=et=>(et==null?void 0:et.role)==="function",isToolMessage=et=>(et==null?void 0:et.role)==="tool";function isAutoParsableResponseFormat(et){return(et==null?void 0:et.$brand)==="auto-parseable-response-format"}function isAutoParsableTool$1(et){return(et==null?void 0:et.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(et,_e){return!_e||!hasAutoParseableInput$1(_e)?{...et,choices:et.choices.map(tt=>({...tt,message:{...tt.message,parsed:null,...tt.message.tool_calls?{tool_calls:tt.message.tool_calls}:void 0}}))}:parseChatCompletion(et,_e)}function parseChatCompletion(et,_e){const tt=et.choices.map(nt=>{var st;if(nt.finish_reason==="length")throw new LengthFinishReasonError;if(nt.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...nt,message:{...nt.message,...nt.message.tool_calls?{tool_calls:((st=nt.message.tool_calls)==null?void 0:st.map(ot=>parseToolCall$1(_e,ot)))??void 0}:void 0,parsed:nt.message.content&&!nt.message.refusal?parseResponseFormat(_e,nt.message.content):null}}});return{...et,choices:tt}}function parseResponseFormat(et,_e){var tt,nt;return((tt=et.response_format)==null?void 0:tt.type)!=="json_schema"?null:((nt=et.response_format)==null?void 0:nt.type)==="json_schema"?"$parseRaw"in et.response_format?et.response_format.$parseRaw(_e):JSON.parse(_e):null}function parseToolCall$1(et,_e){var nt;const tt=(nt=et.tools)==null?void 0:nt.find(st=>{var ot;return((ot=st.function)==null?void 0:ot.name)===_e.function.name});return{..._e,function:{..._e.function,parsed_arguments:isAutoParsableTool$1(tt)?tt.$parseRaw(_e.function.arguments):tt!=null&&tt.function.strict?JSON.parse(_e.function.arguments):null}}}function shouldParseToolCall(et,_e){var nt;if(!et)return!1;const tt=(nt=et.tools)==null?void 0:nt.find(st=>{var ot;return((ot=st.function)==null?void 0:ot.name)===_e.function.name});return isAutoParsableTool$1(tt)||(tt==null?void 0:tt.function.strict)||!1}function hasAutoParseableInput$1(et){var _e;return isAutoParsableResponseFormat(et.response_format)?!0:((_e=et.tools)==null?void 0:_e.some(tt=>isAutoParsableTool$1(tt)||tt.type==="function"&&tt.function.strict===!0))??!1}function validateInputTools(et){for(const _e of et??[]){if(_e.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${_e.type}\``);if(_e.function.strict!==!0)throw new OpenAIError(`The \`${_e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$2=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(_e){var nt;this._chatCompletions.push(_e),this._emit("chatCompletion",_e);const tt=(nt=_e.choices[0])==null?void 0:nt.message;return tt&&this._addMessage(tt),_e}_addMessage(_e,tt=!0){if("content"in _e||(_e.content=null),this.messages.push(_e),tt){if(this._emit("message",_e),(isFunctionMessage(_e)||isToolMessage(_e))&&_e.content)this._emit("functionCallResult",_e.content);else if(isAssistantMessage(_e)&&_e.function_call)this._emit("functionCall",_e.function_call);else if(isAssistantMessage(_e)&&_e.tool_calls)for(const nt of _e.tool_calls)nt.type==="function"&&this._emit("functionCall",nt.function)}}async finalChatCompletion(){await this.done();const _e=this._chatCompletions[this._chatCompletions.length-1];if(!_e)throw new OpenAIError("stream ended without producing a ChatCompletion");return _e}async finalContent(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const _e=this._chatCompletions[this._chatCompletions.length-1];_e&&this._emit("finalChatCompletion",_e);const tt=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);tt&&this._emit("finalMessage",tt);const nt=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);nt&&this._emit("finalContent",nt);const st=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);st&&this._emit("finalFunctionCall",st);const ot=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);ot!=null&&this._emit("finalFunctionCallResult",ot),this._chatCompletions.some(at=>at.usage)&&this._emit("totalUsage",__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(_e,tt,nt){const st=nt==null?void 0:nt.signal;st&&(st.aborted&&this.controller.abort(),st.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,tt);const ot=await _e.chat.completions.create({...tt,stream:!1},{...nt,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(ot,tt))}async _runChatCompletion(_e,tt,nt){for(const st of tt.messages)this._addMessage(st,!1);return await this._createChatCompletion(_e,tt,nt)}async _runFunctions(_e,tt,nt){var rt;const st="function",{function_call:ot="auto",stream:at,...dt}=tt,ft=typeof ot!="string"&&(ot==null?void 0:ot.name),{maxChatCompletions:ht=DEFAULT_MAX_CHAT_COMPLETIONS}=nt||{},ct={};for(const lt of tt.functions)ct[lt.name||lt.function.name]=lt;const it=tt.functions.map(lt=>({name:lt.name||lt.function.name,parameters:lt.parameters,description:lt.description}));for(const lt of tt.messages)this._addMessage(lt,!1);for(let lt=0;lt<ht;++lt){const pt=(rt=(await this._createChatCompletion(_e,{...dt,function_call:ot,functions:it,messages:[...this.messages]},nt)).choices[0])==null?void 0:rt.message;if(!pt)throw new OpenAIError("missing message in ChatCompletion response");if(!pt.function_call)return;const{name:gt,arguments:mt}=pt.function_call,yt=ct[gt];if(yt){if(ft&&ft!==gt){const Tt=`Invalid function_call: ${JSON.stringify(gt)}. ${JSON.stringify(ft)} requested. Please try again`;this._addMessage({role:st,name:gt,content:Tt});continue}}else{const Tt=`Invalid function_call: ${JSON.stringify(gt)}. Available options are: ${it.map(St=>JSON.stringify(St.name)).join(", ")}. Please try again`;this._addMessage({role:st,name:gt,content:Tt});continue}let bt;try{bt=isRunnableFunctionWithParse(yt)?await yt.parse(mt):mt}catch(Tt){this._addMessage({role:st,name:gt,content:Tt instanceof Error?Tt.message:String(Tt)});continue}const wt=await yt.function(bt,this),xt=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,wt);if(this._addMessage({role:st,name:gt,content:xt}),ft)return}}async _runTools(_e,tt,nt){var lt,ut,pt;const st="tool",{tool_choice:ot="auto",stream:at,...dt}=tt,ft=typeof ot!="string"&&((lt=ot==null?void 0:ot.function)==null?void 0:lt.name),{maxChatCompletions:ht=DEFAULT_MAX_CHAT_COMPLETIONS}=nt||{},ct=tt.tools.map(gt=>{if(isAutoParsableTool$1(gt)){if(!gt.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:gt.$callback,name:gt.function.name,description:gt.function.description||"",parameters:gt.function.parameters,parse:gt.$parseRaw,strict:!0}}}return gt}),it={};for(const gt of ct)gt.type==="function"&&(it[gt.function.name||gt.function.function.name]=gt.function);const rt="tools"in tt?ct.map(gt=>gt.type==="function"?{type:"function",function:{name:gt.function.name||gt.function.function.name,parameters:gt.function.parameters,description:gt.function.description,strict:gt.function.strict}}:gt):void 0;for(const gt of tt.messages)this._addMessage(gt,!1);for(let gt=0;gt<ht;++gt){const yt=(ut=(await this._createChatCompletion(_e,{...dt,tool_choice:ot,tools:rt,messages:[...this.messages]},nt)).choices[0])==null?void 0:ut.message;if(!yt)throw new OpenAIError("missing message in ChatCompletion response");if(!((pt=yt.tool_calls)!=null&&pt.length))return;for(const bt of yt.tool_calls){if(bt.type!=="function")continue;const wt=bt.id,{name:xt,arguments:Tt}=bt.function,St=it[xt];if(St){if(ft&&ft!==xt){const It=`Invalid tool_call: ${JSON.stringify(xt)}. ${JSON.stringify(ft)} requested. Please try again`;this._addMessage({role:st,tool_call_id:wt,content:It});continue}}else{const It=`Invalid tool_call: ${JSON.stringify(xt)}. Available options are: ${Object.keys(it).map(jt=>JSON.stringify(jt)).join(", ")}. Please try again`;this._addMessage({role:st,tool_call_id:wt,content:It});continue}let Pt;try{Pt=isRunnableFunctionWithParse(St)?await St.parse(Tt):Tt}catch(It){const jt=It instanceof Error?It.message:String(It);this._addMessage({role:st,tool_call_id:wt,content:jt});continue}const vt=await St.function(Pt,this),At=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,vt);if(this._addMessage({role:st,tool_call_id:wt,content:At}),ft)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function(){return __classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function(){let _e=this.messages.length;for(;_e-- >0;){const tt=this.messages[_e];if(isAssistantMessage(tt)){const{function_call:nt,...st}=tt,ot={...st,content:tt.content??null,refusal:tt.refusal??null};return nt&&(ot.function_call=nt),ot}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function(){var _e,tt;for(let nt=this.messages.length-1;nt>=0;nt--){const st=this.messages[nt];if(isAssistantMessage(st)&&(st!=null&&st.function_call))return st.function_call;if(isAssistantMessage(st)&&((_e=st==null?void 0:st.tool_calls)!=null&&_e.length))return(tt=st.tool_calls.at(-1))==null?void 0:tt.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function(){for(let _e=this.messages.length-1;_e>=0;_e--){const tt=this.messages[_e];if(isFunctionMessage(tt)&&tt.content!=null||isToolMessage(tt)&&tt.content!=null&&typeof tt.content=="string"&&this.messages.some(nt=>{var st;return nt.role==="assistant"&&((st=nt.tool_calls)==null?void 0:st.some(ot=>ot.type==="function"&&ot.id===tt.tool_call_id))}))return tt.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function(){const _e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:tt}of this._chatCompletions)tt&&(_e.completion_tokens+=tt.completion_tokens,_e.prompt_tokens+=tt.prompt_tokens,_e.total_tokens+=tt.total_tokens);return _e},_AbstractChatCompletionRunner_validateParams=function(_e){if(_e.n!=null&&_e.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function(_e){return typeof _e=="string"?_e:_e===void 0?"undefined":JSON.stringify(_e)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(_e,tt,nt){const st=new ChatCompletionRunner,ot={...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"runFunctions"}};return st._run(()=>st._runFunctions(_e,tt,ot)),st}static runTools(_e,tt,nt){const st=new ChatCompletionRunner,ot={...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"runTools"}};return st._run(()=>st._runTools(_e,tt,ot)),st}_addMessage(_e,tt=!0){super._addMessage(_e,tt),isAssistantMessage(_e)&&_e.content&&this._emit("content",_e.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(et,_e=Allow.ALL){if(typeof et!="string")throw new TypeError(`expecting str, got ${typeof et}`);if(!et.trim())throw new Error(`${et} is empty`);return _parseJSON(et.trim(),_e)}const _parseJSON=(et,_e)=>{const tt=et.length;let nt=0;const st=rt=>{throw new PartialJSON(`${rt} at position ${nt}`)},ot=rt=>{throw new MalformedJSON(`${rt} at position ${nt}`)},at=()=>(it(),nt>=tt&&st("Unexpected end of input"),et[nt]==='"'?dt():et[nt]==="{"?ft():et[nt]==="["?ht():et.substring(nt,nt+4)==="null"||Allow.NULL&_e&&tt-nt<4&&"null".startsWith(et.substring(nt))?(nt+=4,null):et.substring(nt,nt+4)==="true"||Allow.BOOL&_e&&tt-nt<4&&"true".startsWith(et.substring(nt))?(nt+=4,!0):et.substring(nt,nt+5)==="false"||Allow.BOOL&_e&&tt-nt<5&&"false".startsWith(et.substring(nt))?(nt+=5,!1):et.substring(nt,nt+8)==="Infinity"||Allow.INFINITY&_e&&tt-nt<8&&"Infinity".startsWith(et.substring(nt))?(nt+=8,1/0):et.substring(nt,nt+9)==="-Infinity"||Allow.MINUS_INFINITY&_e&&1<tt-nt&&tt-nt<9&&"-Infinity".startsWith(et.substring(nt))?(nt+=9,-1/0):et.substring(nt,nt+3)==="NaN"||Allow.NAN&_e&&tt-nt<3&&"NaN".startsWith(et.substring(nt))?(nt+=3,NaN):ct()),dt=()=>{const rt=nt;let lt=!1;for(nt++;nt<tt&&(et[nt]!=='"'||lt&&et[nt-1]==="\\");)lt=et[nt]==="\\"?!lt:!1,nt++;if(et.charAt(nt)=='"')try{return JSON.parse(et.substring(rt,++nt-Number(lt)))}catch(ut){ot(String(ut))}else if(Allow.STR&_e)try{return JSON.parse(et.substring(rt,nt-Number(lt))+'"')}catch{return JSON.parse(et.substring(rt,et.lastIndexOf("\\"))+'"')}st("Unterminated string literal")},ft=()=>{nt++,it();const rt={};try{for(;et[nt]!=="}";){if(it(),nt>=tt&&Allow.OBJ&_e)return rt;const lt=dt();it(),nt++;try{const ut=at();Object.defineProperty(rt,lt,{value:ut,writable:!0,enumerable:!0,configurable:!0})}catch(ut){if(Allow.OBJ&_e)return rt;throw ut}it(),et[nt]===","&&nt++}}catch{if(Allow.OBJ&_e)return rt;st("Expected '}' at end of object")}return nt++,rt},ht=()=>{nt++;const rt=[];try{for(;et[nt]!=="]";)rt.push(at()),it(),et[nt]===","&&nt++}catch{if(Allow.ARR&_e)return rt;st("Expected ']' at end of array")}return nt++,rt},ct=()=>{if(nt===0){et==="-"&&Allow.NUM&_e&&st("Not sure what '-' is");try{return JSON.parse(et)}catch(lt){if(Allow.NUM&_e)try{return et[et.length-1]==="."?JSON.parse(et.substring(0,et.lastIndexOf("."))):JSON.parse(et.substring(0,et.lastIndexOf("e")))}catch{}ot(String(lt))}}const rt=nt;for(et[nt]==="-"&&nt++;et[nt]&&!",]}".includes(et[nt]);)nt++;nt==tt&&!(Allow.NUM&_e)&&st("Unterminated number literal");try{return JSON.parse(et.substring(rt,nt))}catch{et.substring(rt,nt)==="-"&&Allow.NUM&_e&&st("Not sure what '-' is");try{return JSON.parse(et.substring(rt,et.lastIndexOf("e")))}catch(ut){ot(String(ut))}}},it=()=>{for(;nt<tt&&` 
\r	`.includes(et[nt]);)nt++};return at()},partialParse=et=>parseJSON(et,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$1=function(et,_e,tt,nt,st){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!st)throw new TypeError("Private accessor was defined without a setter");if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?st.call(et,tt):st?st.value=tt:_e.set(et,tt),tt},__classPrivateFieldGet$1=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(_e){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$1(this,_ChatCompletionStream_params,_e,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(_e){const tt=new ChatCompletionStream(null);return tt._run(()=>tt._fromReadableStream(_e)),tt}static createChatCompletion(_e,tt,nt){const st=new ChatCompletionStream(tt);return st._run(()=>st._runChatCompletion(_e,{...tt,stream:!0},{...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"stream"}})),st}async _createChatCompletion(_e,tt,nt){var at;super._createChatCompletion;const st=nt==null?void 0:nt.signal;st&&(st.aborted&&this.controller.abort(),st.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const ot=await _e.chat.completions.create({...tt,stream:!0},{...nt,signal:this.controller.signal});this._connected();for await(const dt of ot)__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,dt);if((at=ot.controller.signal)!=null&&at.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(_e,tt){var at;const nt=tt==null?void 0:tt.signal;nt&&(nt.aborted&&this.controller.abort(),nt.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const st=Stream.fromReadableStream(_e,this.controller);let ot;for await(const dt of st)ot&&ot!==dt.id&&this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,dt),ot=dt.id;if((at=st.controller.signal)!=null&&at.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(tt){let nt=__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[tt.index];return nt||(nt={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[tt.index]=nt,nt)},_ChatCompletionStream_addChunk=function(tt){var st,ot,at,dt,ft,ht,ct,it,rt,lt,ut,pt,gt,mt,yt;if(this.ended)return;const nt=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,tt);this._emit("chunk",tt,nt);for(const bt of tt.choices){const wt=nt.choices[bt.index];bt.delta.content!=null&&((st=wt.message)==null?void 0:st.role)==="assistant"&&((ot=wt.message)!=null&&ot.content)&&(this._emit("content",bt.delta.content,wt.message.content),this._emit("content.delta",{delta:bt.delta.content,snapshot:wt.message.content,parsed:wt.message.parsed})),bt.delta.refusal!=null&&((at=wt.message)==null?void 0:at.role)==="assistant"&&((dt=wt.message)!=null&&dt.refusal)&&this._emit("refusal.delta",{delta:bt.delta.refusal,snapshot:wt.message.refusal}),((ft=bt.logprobs)==null?void 0:ft.content)!=null&&((ht=wt.message)==null?void 0:ht.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(ct=bt.logprobs)==null?void 0:ct.content,snapshot:((it=wt.logprobs)==null?void 0:it.content)??[]}),((rt=bt.logprobs)==null?void 0:rt.refusal)!=null&&((lt=wt.message)==null?void 0:lt.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(ut=bt.logprobs)==null?void 0:ut.refusal,snapshot:((pt=wt.logprobs)==null?void 0:pt.refusal)??[]});const xt=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,wt);wt.finish_reason&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,wt),xt.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,wt,xt.current_tool_call_index));for(const Tt of bt.delta.tool_calls??[])xt.current_tool_call_index!==Tt.index&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,wt),xt.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,wt,xt.current_tool_call_index)),xt.current_tool_call_index=Tt.index;for(const Tt of bt.delta.tool_calls??[]){const St=(gt=wt.message.tool_calls)==null?void 0:gt[Tt.index];St!=null&&St.type&&((St==null?void 0:St.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(mt=St.function)==null?void 0:mt.name,index:Tt.index,arguments:St.function.arguments,parsed_arguments:St.function.parsed_arguments,arguments_delta:((yt=Tt.function)==null?void 0:yt.arguments)??""}):(St==null||St.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(tt,nt){var at,dt,ft;if(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,tt).done_tool_calls.has(nt))return;const ot=(at=tt.message.tool_calls)==null?void 0:at[nt];if(!ot)throw new Error("no tool call snapshot");if(!ot.type)throw new Error("tool call snapshot missing `type`");if(ot.type==="function"){const ht=(ft=(dt=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:dt.tools)==null?void 0:ft.find(ct=>ct.type==="function"&&ct.function.name===ot.function.name);this._emit("tool_calls.function.arguments.done",{name:ot.function.name,index:nt,arguments:ot.function.arguments,parsed_arguments:isAutoParsableTool$1(ht)?ht.$parseRaw(ot.function.arguments):ht!=null&&ht.function.strict?JSON.parse(ot.function.arguments):null})}else ot.type},_ChatCompletionStream_emitContentDoneEvents=function(tt){var st,ot;const nt=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,tt);if(tt.message.content&&!nt.content_done){nt.content_done=!0;const at=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:tt.message.content,parsed:at?at.$parseRaw(tt.message.content):null})}tt.message.refusal&&!nt.refusal_done&&(nt.refusal_done=!0,this._emit("refusal.done",{refusal:tt.message.refusal})),(st=tt.logprobs)!=null&&st.content&&!nt.logprobs_content_done&&(nt.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:tt.logprobs.content})),(ot=tt.logprobs)!=null&&ot.refusal&&!nt.logprobs_refusal_done&&(nt.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:tt.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const tt=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!tt)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(tt,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var nt;const tt=(nt=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:nt.response_format;return isAutoParsableResponseFormat(tt)?tt:null},_ChatCompletionStream_accumulateChatCompletion=function(tt){var nt,st,ot,at;let dt=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:ft,...ht}=tt;dt?Object.assign(dt,ht):dt=__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...ht,choices:[]},"f");for(const{delta:ct,finish_reason:it,index:rt,logprobs:lt=null,...ut}of tt.choices){let pt=dt.choices[rt];if(pt||(pt=dt.choices[rt]={finish_reason:it,index:rt,message:{},logprobs:lt,...ut}),lt)if(!pt.logprobs)pt.logprobs=Object.assign({},lt);else{const{content:Tt,refusal:St,...Pt}=lt;Object.assign(pt.logprobs,Pt),Tt&&((nt=pt.logprobs).content??(nt.content=[]),pt.logprobs.content.push(...Tt)),St&&((st=pt.logprobs).refusal??(st.refusal=[]),pt.logprobs.refusal.push(...St))}if(it&&(pt.finish_reason=it,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")))){if(it==="length")throw new LengthFinishReasonError;if(it==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(pt,ut),!ct)continue;const{content:gt,refusal:mt,function_call:yt,role:bt,tool_calls:wt,...xt}=ct;if(Object.assign(pt.message,xt),mt&&(pt.message.refusal=(pt.message.refusal||"")+mt),bt&&(pt.message.role=bt),yt&&(pt.message.function_call?(yt.name&&(pt.message.function_call.name=yt.name),yt.arguments&&((ot=pt.message.function_call).arguments??(ot.arguments=""),pt.message.function_call.arguments+=yt.arguments)):pt.message.function_call=yt),gt&&(pt.message.content=(pt.message.content||"")+gt,!pt.message.refusal&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(pt.message.parsed=partialParse(pt.message.content))),wt){pt.message.tool_calls||(pt.message.tool_calls=[]);for(const{index:Tt,id:St,type:Pt,function:vt,...At}of wt){const It=(at=pt.message.tool_calls)[Tt]??(at[Tt]={});Object.assign(It,At),St&&(It.id=St),Pt&&(It.type=Pt),vt&&(It.function??(It.function={name:vt.name??"",arguments:""})),vt!=null&&vt.name&&(It.function.name=vt.name),vt!=null&&vt.arguments&&(It.function.arguments+=vt.arguments,shouldParseToolCall(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"),It)&&(It.function.parsed_arguments=partialParse(It.function.arguments)))}}}return dt},Symbol.asyncIterator)](){const _e=[],tt=[];let nt=!1;return this.on("chunk",st=>{const ot=tt.shift();ot?ot.resolve(st):_e.push(st)}),this.on("end",()=>{nt=!0;for(const st of tt)st.resolve(void 0);tt.length=0}),this.on("abort",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),this.on("error",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),{next:async()=>_e.length?{value:_e.shift(),done:!1}:nt?{value:void 0,done:!0}:new Promise((ot,at)=>tt.push({resolve:ot,reject:at})).then(ot=>ot?{value:ot,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(et,_e){const{id:tt,choices:nt,created:st,model:ot,system_fingerprint:at,...dt}=et,ft={...dt,id:tt,choices:nt.map(({message:ht,finish_reason:ct,index:it,logprobs:rt,...lt})=>{if(!ct)throw new OpenAIError(`missing finish_reason for choice ${it}`);const{content:ut=null,function_call:pt,tool_calls:gt,...mt}=ht,yt=ht.role;if(!yt)throw new OpenAIError(`missing role for choice ${it}`);if(pt){const{arguments:bt,name:wt}=pt;if(bt==null)throw new OpenAIError(`missing function_call.arguments for choice ${it}`);if(!wt)throw new OpenAIError(`missing function_call.name for choice ${it}`);return{...lt,message:{content:ut,function_call:{arguments:bt,name:wt},role:yt,refusal:ht.refusal??null},finish_reason:ct,index:it,logprobs:rt}}return gt?{...lt,index:it,finish_reason:ct,logprobs:rt,message:{...mt,role:yt,content:ut,refusal:ht.refusal??null,tool_calls:gt.map((bt,wt)=>{const{function:xt,type:Tt,id:St,...Pt}=bt,{arguments:vt,name:At,...It}=xt||{};if(St==null)throw new OpenAIError(`missing choices[${it}].tool_calls[${wt}].id
${str(et)}`);if(Tt==null)throw new OpenAIError(`missing choices[${it}].tool_calls[${wt}].type
${str(et)}`);if(At==null)throw new OpenAIError(`missing choices[${it}].tool_calls[${wt}].function.name
${str(et)}`);if(vt==null)throw new OpenAIError(`missing choices[${it}].tool_calls[${wt}].function.arguments
${str(et)}`);return{...Pt,id:St,type:Tt,function:{...It,name:At,arguments:vt}}})}}:{...lt,message:{...mt,content:ut,role:yt,refusal:ht.refusal??null},finish_reason:ct,index:it,logprobs:rt}}),created:st,model:ot,object:"chat.completion",...at?{system_fingerprint:at}:{}};return maybeParseChatCompletion(ft,_e)}function str(et){return JSON.stringify(et)}function assertNever(et){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(_e){const tt=new ChatCompletionStreamingRunner(null);return tt._run(()=>tt._fromReadableStream(_e)),tt}static runFunctions(_e,tt,nt){const st=new ChatCompletionStreamingRunner(null),ot={...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"runFunctions"}};return st._run(()=>st._runFunctions(_e,tt,ot)),st}static runTools(_e,tt,nt){const st=new ChatCompletionStreamingRunner(tt),ot={...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"runTools"}};return st._run(()=>st._runTools(_e,tt,ot)),st}}let Completions$1=class extends APIResource{parse(_e,tt){return validateInputTools(_e.tools),this._client.chat.completions.create(_e,{...tt,headers:{...tt==null?void 0:tt.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(nt=>parseChatCompletion(nt,_e))}runFunctions(_e,tt){return _e.stream?ChatCompletionStreamingRunner.runFunctions(this._client,_e,tt):ChatCompletionRunner.runFunctions(this._client,_e,tt)}runTools(_e,tt){return _e.stream?ChatCompletionStreamingRunner.runTools(this._client,_e,tt):ChatCompletionRunner.runTools(this._client,_e,tt)}stream(_e,tt){return ChatCompletionStream.createChatCompletion(this._client,_e,tt)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(et){et.Completions=Completions$1})(Chat||(Chat={}));class Sessions extends APIResource{create(_e,tt){return this._client.post("/realtime/sessions",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}}class TranscriptionSessions extends APIResource{create(_e,tt){return this._client.post("/realtime/transcription_sessions",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions;Realtime.TranscriptionSessions=TranscriptionSessions;class Messages extends APIResource{create(_e,tt,nt){return this._client.post(`/threads/${_e}/messages`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}retrieve(_e,tt,nt){return this._client.get(`/threads/${_e}/messages/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}update(_e,tt,nt,st){return this._client.post(`/threads/${_e}/messages/${tt}`,{body:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers}})}list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/threads/${_e}/messages`,MessagesPage,{query:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}del(_e,tt,nt){return this._client.delete(`/threads/${_e}/messages/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}}class MessagesPage extends CursorPage{}Messages.MessagesPage=MessagesPage;class Steps extends APIResource{retrieve(_e,tt,nt,st={},ot){return isRequestOptions(st)?this.retrieve(_e,tt,nt,{},st):this._client.get(`/threads/${_e}/runs/${tt}/steps/${nt}`,{query:st,...ot,headers:{"OpenAI-Beta":"assistants=v2",...ot==null?void 0:ot.headers}})}list(_e,tt,nt={},st){return isRequestOptions(nt)?this.list(_e,tt,{},nt):this._client.getAPIList(`/threads/${_e}/runs/${tt}/steps`,RunStepsPage,{query:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers}})}}class RunStepsPage extends CursorPage{}Steps.RunStepsPage=RunStepsPage;let Runs$1=class extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(_e,tt,nt){const{include:st,...ot}=tt;return this._client.post(`/threads/${_e}/runs`,{query:{include:st},body:ot,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers},stream:tt.stream??!1})}retrieve(_e,tt,nt){return this._client.get(`/threads/${_e}/runs/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}update(_e,tt,nt,st){return this._client.post(`/threads/${_e}/runs/${tt}`,{body:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers}})}list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/threads/${_e}/runs`,RunsPage,{query:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}cancel(_e,tt,nt){return this._client.post(`/threads/${_e}/runs/${tt}/cancel`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}async createAndPoll(_e,tt,nt){const st=await this.create(_e,tt,nt);return await this.poll(_e,st.id,nt)}createAndStream(_e,tt,nt){return AssistantStream.createAssistantStream(_e,this._client.beta.threads.runs,tt,nt)}async poll(_e,tt,nt){const st={...nt==null?void 0:nt.headers,"X-Stainless-Poll-Helper":"true"};for(nt!=null&&nt.pollIntervalMs&&(st["X-Stainless-Custom-Poll-Interval"]=nt.pollIntervalMs.toString());;){const{data:ot,response:at}=await this.retrieve(_e,tt,{...nt,headers:{...nt==null?void 0:nt.headers,...st}}).withResponse();switch(ot.status){case"queued":case"in_progress":case"cancelling":let dt=5e3;if(nt!=null&&nt.pollIntervalMs)dt=nt.pollIntervalMs;else{const ft=at.headers.get("openai-poll-after-ms");if(ft){const ht=parseInt(ft);isNaN(ht)||(dt=ht)}}await sleep(dt);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return ot}}}stream(_e,tt,nt){return AssistantStream.createAssistantStream(_e,this._client.beta.threads.runs,tt,nt)}submitToolOutputs(_e,tt,nt,st){return this._client.post(`/threads/${_e}/runs/${tt}/submit_tool_outputs`,{body:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers},stream:nt.stream??!1})}async submitToolOutputsAndPoll(_e,tt,nt,st){const ot=await this.submitToolOutputs(_e,tt,nt,st);return await this.poll(_e,ot.id,st)}submitToolOutputsStream(_e,tt,nt,st){return AssistantStream.createToolAssistantStream(_e,tt,this._client.beta.threads.runs,nt,st)}};class RunsPage extends CursorPage{}Runs$1.RunsPage=RunsPage;Runs$1.Steps=Steps;Runs$1.RunStepsPage=RunStepsPage;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs$1(this._client),this.messages=new Messages(this._client)}create(_e={},tt){return isRequestOptions(_e)?this.create({},_e):this._client.post("/threads",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}retrieve(_e,tt){return this._client.get(`/threads/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}update(_e,tt,nt){return this._client.post(`/threads/${_e}`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}del(_e,tt){return this._client.delete(`/threads/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}createAndRun(_e,tt){return this._client.post("/threads/runs",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers},stream:_e.stream??!1})}async createAndRunPoll(_e,tt){const nt=await this.createAndRun(_e,tt);return await this.runs.poll(nt.thread_id,nt.id,tt)}createAndRunStream(_e,tt){return AssistantStream.createThreadAssistantStream(_e,this._client.beta.threads,tt)}}Threads.Runs=Runs$1;Threads.RunsPage=RunsPage;Threads.Messages=Messages;Threads.MessagesPage=MessagesPage;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime;Beta.Assistants=Assistants;Beta.AssistantsPage=AssistantsPage;Beta.Threads=Threads;class Completions extends APIResource{create(_e,tt){return this._client.post("/completions",{body:_e,...tt,stream:_e.stream??!1})}}class Content extends APIResource{retrieve(_e,tt,nt){return this._client.get(`/containers/${_e}/files/${tt}/content`,{...nt,headers:{Accept:"application/binary",...nt==null?void 0:nt.headers},__binaryResponse:!0})}}let Files$2=class extends APIResource{constructor(){super(...arguments),this.content=new Content(this._client)}create(_e,tt,nt){return this._client.post(`/containers/${_e}/files`,multipartFormRequestOptions({body:tt,...nt}))}retrieve(_e,tt,nt){return this._client.get(`/containers/${_e}/files/${tt}`,nt)}list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/containers/${_e}/files`,FileListResponsesPage,{query:tt,...nt})}del(_e,tt,nt){return this._client.delete(`/containers/${_e}/files/${tt}`,{...nt,headers:{Accept:"*/*",...nt==null?void 0:nt.headers}})}};class FileListResponsesPage extends CursorPage{}Files$2.FileListResponsesPage=FileListResponsesPage;Files$2.Content=Content;class Containers extends APIResource{constructor(){super(...arguments),this.files=new Files$2(this._client)}create(_e,tt){return this._client.post("/containers",{body:_e,...tt})}retrieve(_e,tt){return this._client.get(`/containers/${_e}`,tt)}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/containers",ContainerListResponsesPage,{query:_e,...tt})}del(_e,tt){return this._client.delete(`/containers/${_e}`,{...tt,headers:{Accept:"*/*",...tt==null?void 0:tt.headers}})}}class ContainerListResponsesPage extends CursorPage{}Containers.ContainerListResponsesPage=ContainerListResponsesPage;Containers.Files=Files$2;Containers.FileListResponsesPage=FileListResponsesPage;class Embeddings extends APIResource{create(_e,tt){const nt=!!_e.encoding_format;let st=nt?_e.encoding_format:"base64";nt&&debug("Request","User defined encoding_format:",_e.encoding_format);const ot=this._client.post("/embeddings",{body:{..._e,encoding_format:st},...tt});return nt?ot:(debug("response","Decoding base64 embeddings to float32 array"),ot._thenUnwrap(at=>(at&&at.data&&at.data.forEach(dt=>{const ft=dt.embedding;dt.embedding=toFloat32Array(ft)}),at)))}}class OutputItems extends APIResource{retrieve(_e,tt,nt,st){return this._client.get(`/evals/${_e}/runs/${tt}/output_items/${nt}`,st)}list(_e,tt,nt={},st){return isRequestOptions(nt)?this.list(_e,tt,{},nt):this._client.getAPIList(`/evals/${_e}/runs/${tt}/output_items`,OutputItemListResponsesPage,{query:nt,...st})}}class OutputItemListResponsesPage extends CursorPage{}OutputItems.OutputItemListResponsesPage=OutputItemListResponsesPage;class Runs extends APIResource{constructor(){super(...arguments),this.outputItems=new OutputItems(this._client)}create(_e,tt,nt){return this._client.post(`/evals/${_e}/runs`,{body:tt,...nt})}retrieve(_e,tt,nt){return this._client.get(`/evals/${_e}/runs/${tt}`,nt)}list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/evals/${_e}/runs`,RunListResponsesPage,{query:tt,...nt})}del(_e,tt,nt){return this._client.delete(`/evals/${_e}/runs/${tt}`,nt)}cancel(_e,tt,nt){return this._client.post(`/evals/${_e}/runs/${tt}`,nt)}}class RunListResponsesPage extends CursorPage{}Runs.RunListResponsesPage=RunListResponsesPage;Runs.OutputItems=OutputItems;Runs.OutputItemListResponsesPage=OutputItemListResponsesPage;class Evals extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client)}create(_e,tt){return this._client.post("/evals",{body:_e,...tt})}retrieve(_e,tt){return this._client.get(`/evals/${_e}`,tt)}update(_e,tt,nt){return this._client.post(`/evals/${_e}`,{body:tt,...nt})}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/evals",EvalListResponsesPage,{query:_e,...tt})}del(_e,tt){return this._client.delete(`/evals/${_e}`,tt)}}class EvalListResponsesPage extends CursorPage{}Evals.EvalListResponsesPage=EvalListResponsesPage;Evals.Runs=Runs;Evals.RunListResponsesPage=RunListResponsesPage;let Files$1=class extends APIResource{create(_e,tt){return this._client.post("/files",multipartFormRequestOptions({body:_e,...tt}))}retrieve(_e,tt){return this._client.get(`/files/${_e}`,tt)}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/files",FileObjectsPage,{query:_e,...tt})}del(_e,tt){return this._client.delete(`/files/${_e}`,tt)}content(_e,tt){return this._client.get(`/files/${_e}/content`,{...tt,headers:{Accept:"application/binary",...tt==null?void 0:tt.headers},__binaryResponse:!0})}retrieveContent(_e,tt){return this._client.get(`/files/${_e}/content`,tt)}async waitForProcessing(_e,{pollInterval:tt=5e3,maxWait:nt=30*60*1e3}={}){const st=new Set(["processed","error","deleted"]),ot=Date.now();let at=await this.retrieve(_e);for(;!at.status||!st.has(at.status);)if(await sleep(tt),at=await this.retrieve(_e),Date.now()-ot>nt)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${_e} to finish processing after ${nt} milliseconds.`});return at}};class FileObjectsPage extends CursorPage{}Files$1.FileObjectsPage=FileObjectsPage;class Methods extends APIResource{}let Graders$1=class extends APIResource{run(_e,tt){return this._client.post("/fine_tuning/alpha/graders/run",{body:_e,...tt})}validate(_e,tt){return this._client.post("/fine_tuning/alpha/graders/validate",{body:_e,...tt})}};class Alpha extends APIResource{constructor(){super(...arguments),this.graders=new Graders$1(this._client)}}Alpha.Graders=Graders$1;class Permissions extends APIResource{create(_e,tt,nt){return this._client.getAPIList(`/fine_tuning/checkpoints/${_e}/permissions`,PermissionCreateResponsesPage,{body:tt,method:"post",...nt})}retrieve(_e,tt={},nt){return isRequestOptions(tt)?this.retrieve(_e,{},tt):this._client.get(`/fine_tuning/checkpoints/${_e}/permissions`,{query:tt,...nt})}del(_e,tt,nt){return this._client.delete(`/fine_tuning/checkpoints/${_e}/permissions/${tt}`,nt)}}class PermissionCreateResponsesPage extends Page{}Permissions.PermissionCreateResponsesPage=PermissionCreateResponsesPage;let Checkpoints$1=class extends APIResource{constructor(){super(...arguments),this.permissions=new Permissions(this._client)}};Checkpoints$1.Permissions=Permissions;Checkpoints$1.PermissionCreateResponsesPage=PermissionCreateResponsesPage;class Checkpoints extends APIResource{list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/fine_tuning/jobs/${_e}/checkpoints`,FineTuningJobCheckpointsPage,{query:tt,...nt})}}class FineTuningJobCheckpointsPage extends CursorPage{}Checkpoints.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(_e,tt){return this._client.post("/fine_tuning/jobs",{body:_e,...tt})}retrieve(_e,tt){return this._client.get(`/fine_tuning/jobs/${_e}`,tt)}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:_e,...tt})}cancel(_e,tt){return this._client.post(`/fine_tuning/jobs/${_e}/cancel`,tt)}listEvents(_e,tt={},nt){return isRequestOptions(tt)?this.listEvents(_e,{},tt):this._client.getAPIList(`/fine_tuning/jobs/${_e}/events`,FineTuningJobEventsPage,{query:tt,...nt})}pause(_e,tt){return this._client.post(`/fine_tuning/jobs/${_e}/pause`,tt)}resume(_e,tt){return this._client.post(`/fine_tuning/jobs/${_e}/resume`,tt)}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}Jobs.FineTuningJobsPage=FineTuningJobsPage;Jobs.FineTuningJobEventsPage=FineTuningJobEventsPage;Jobs.Checkpoints=Checkpoints;Jobs.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class FineTuning extends APIResource{constructor(){super(...arguments),this.methods=new Methods(this._client),this.jobs=new Jobs(this._client),this.checkpoints=new Checkpoints$1(this._client),this.alpha=new Alpha(this._client)}}FineTuning.Methods=Methods;FineTuning.Jobs=Jobs;FineTuning.FineTuningJobsPage=FineTuningJobsPage;FineTuning.FineTuningJobEventsPage=FineTuningJobEventsPage;FineTuning.Checkpoints=Checkpoints$1;FineTuning.Alpha=Alpha;class GraderModels extends APIResource{}class Graders extends APIResource{constructor(){super(...arguments),this.graderModels=new GraderModels(this._client)}}Graders.GraderModels=GraderModels;class Images extends APIResource{createVariation(_e,tt){return this._client.post("/images/variations",multipartFormRequestOptions({body:_e,...tt}))}edit(_e,tt){return this._client.post("/images/edits",multipartFormRequestOptions({body:_e,...tt}))}generate(_e,tt){return this._client.post("/images/generations",{body:_e,...tt})}}class Models extends APIResource{retrieve(_e,tt){return this._client.get(`/models/${_e}`,tt)}list(_e){return this._client.getAPIList("/models",ModelsPage,_e)}del(_e,tt){return this._client.delete(`/models/${_e}`,tt)}}class ModelsPage extends Page{}Models.ModelsPage=ModelsPage;class Moderations extends APIResource{create(_e,tt){return this._client.post("/moderations",{body:_e,...tt})}}function maybeParseResponse(et,_e){return!_e||!hasAutoParseableInput(_e)?{...et,output_parsed:null,output:et.output.map(tt=>tt.type==="function_call"?{...tt,parsed_arguments:null}:tt.type==="message"?{...tt,content:tt.content.map(nt=>({...nt,parsed:null}))}:tt)}:parseResponse(et,_e)}function parseResponse(et,_e){const tt=et.output.map(st=>{if(st.type==="function_call")return{...st,parsed_arguments:parseToolCall(_e,st)};if(st.type==="message"){const ot=st.content.map(at=>at.type==="output_text"?{...at,parsed:parseTextFormat(_e,at.text)}:at);return{...st,content:ot}}return st}),nt=Object.assign({},et,{output:tt});return Object.getOwnPropertyDescriptor(et,"output_text")||addOutputText(nt),Object.defineProperty(nt,"output_parsed",{enumerable:!0,get(){for(const st of nt.output)if(st.type==="message"){for(const ot of st.content)if(ot.type==="output_text"&&ot.parsed!==null)return ot.parsed}return null}}),nt}function parseTextFormat(et,_e){var tt,nt,st,ot;return((nt=(tt=et.text)==null?void 0:tt.format)==null?void 0:nt.type)!=="json_schema"?null:"$parseRaw"in((st=et.text)==null?void 0:st.format)?((ot=et.text)==null?void 0:ot.format).$parseRaw(_e):JSON.parse(_e)}function hasAutoParseableInput(et){var _e;return!!isAutoParsableResponseFormat((_e=et.text)==null?void 0:_e.format)}function isAutoParsableTool(et){return(et==null?void 0:et.$brand)==="auto-parseable-tool"}function getInputToolByName(et,_e){return et.find(tt=>tt.type==="function"&&tt.name===_e)}function parseToolCall(et,_e){const tt=getInputToolByName(et.tools??[],_e.name);return{..._e,..._e,parsed_arguments:isAutoParsableTool(tt)?tt.$parseRaw(_e.arguments):tt!=null&&tt.strict?JSON.parse(_e.arguments):null}}function addOutputText(et){const _e=[];for(const tt of et.output)if(tt.type==="message")for(const nt of tt.content)nt.type==="output_text"&&_e.push(nt.text);et.output_text=_e.join("")}class InputItems extends APIResource{list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/responses/${_e}/input_items`,ResponseItemsPage,{query:tt,...nt})}}var __classPrivateFieldSet=function(et,_e,tt,nt,st){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!st)throw new TypeError("Private accessor was defined without a setter");if(typeof _e=="function"?et!==_e||!st:!_e.has(et))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?st.call(et,tt):st?st.value=tt:_e.set(et,tt),tt},__classPrivateFieldGet=function(et,_e,tt,nt){if(tt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof _e=="function"?et!==_e||!nt:!_e.has(et))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?nt:tt==="a"?nt.call(et):nt?nt.value:_e.get(et)},_ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(_e){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,_e,"f")}static createResponse(_e,tt,nt){const st=new ResponseStream(tt);return st._run(()=>st._createOrRetrieveResponse(_e,tt,{...nt,headers:{...nt==null?void 0:nt.headers,"X-Stainless-Helper-Method":"stream"}})),st}async _createOrRetrieveResponse(_e,tt,nt){var dt;const st=nt==null?void 0:nt.signal;st&&(st.aborted&&this.controller.abort(),st.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);let ot,at=null;"response_id"in tt?(ot=await _e.responses.retrieve(tt.response_id,{stream:!0},{...nt,signal:this.controller.signal,stream:!0}),at=tt.starting_after??null):ot=await _e.responses.create({...tt,stream:!0},{...nt,signal:this.controller.signal}),this._connected();for await(const ft of ot)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,ft,at);if((dt=ot.controller.signal)!=null&&dt.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f")},_ResponseStream_addEvent=function(tt,nt){if(this.ended)return;const st=(at,dt)=>{(nt==null||dt.sequence_number>nt)&&this._emit(at,dt)},ot=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,tt);switch(st("event",tt),tt.type){case"response.output_text.delta":{const at=ot.output[tt.output_index];if(!at)throw new OpenAIError(`missing output at index ${tt.output_index}`);if(at.type==="message"){const dt=at.content[tt.content_index];if(!dt)throw new OpenAIError(`missing content at index ${tt.content_index}`);if(dt.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${dt.type}`);st("response.output_text.delta",{...tt,snapshot:dt.text})}break}case"response.function_call_arguments.delta":{const at=ot.output[tt.output_index];if(!at)throw new OpenAIError(`missing output at index ${tt.output_index}`);at.type==="function_call"&&st("response.function_call_arguments.delta",{...tt,snapshot:at.arguments});break}default:st(tt.type,tt);break}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const tt=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!tt)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f");const nt=finalizeResponse(tt,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,nt,"f"),nt},_ResponseStream_accumulateResponse=function(tt){let nt=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!nt){if(tt.type!=="response.created")throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${tt.type}`);return nt=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,tt.response,"f"),nt}switch(tt.type){case"response.output_item.added":{nt.output.push(tt.item);break}case"response.content_part.added":{const st=nt.output[tt.output_index];if(!st)throw new OpenAIError(`missing output at index ${tt.output_index}`);st.type==="message"&&st.content.push(tt.part);break}case"response.output_text.delta":{const st=nt.output[tt.output_index];if(!st)throw new OpenAIError(`missing output at index ${tt.output_index}`);if(st.type==="message"){const ot=st.content[tt.content_index];if(!ot)throw new OpenAIError(`missing content at index ${tt.content_index}`);if(ot.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${ot.type}`);ot.text+=tt.delta}break}case"response.function_call_arguments.delta":{const st=nt.output[tt.output_index];if(!st)throw new OpenAIError(`missing output at index ${tt.output_index}`);st.type==="function_call"&&(st.arguments+=tt.delta);break}case"response.completed":{__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,tt.response,"f");break}}return nt},Symbol.asyncIterator)](){const _e=[],tt=[];let nt=!1;return this.on("event",st=>{const ot=tt.shift();ot?ot.resolve(st):_e.push(st)}),this.on("end",()=>{nt=!0;for(const st of tt)st.resolve(void 0);tt.length=0}),this.on("abort",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),this.on("error",st=>{nt=!0;for(const ot of tt)ot.reject(st);tt.length=0}),{next:async()=>_e.length?{value:_e.shift(),done:!1}:nt?{value:void 0,done:!0}:new Promise((ot,at)=>tt.push({resolve:ot,reject:at})).then(ot=>ot?{value:ot,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const _e=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!_e)throw new OpenAIError("stream ended without producing a ChatCompletion");return _e}}function finalizeResponse(et,_e){return maybeParseResponse(et,_e)}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(_e,tt){return this._client.post("/responses",{body:_e,...tt,stream:_e.stream??!1})._thenUnwrap(nt=>("object"in nt&&nt.object==="response"&&addOutputText(nt),nt))}retrieve(_e,tt={},nt){return this._client.get(`/responses/${_e}`,{query:tt,...nt,stream:(tt==null?void 0:tt.stream)??!1})}del(_e,tt){return this._client.delete(`/responses/${_e}`,{...tt,headers:{Accept:"*/*",...tt==null?void 0:tt.headers}})}parse(_e,tt){return this._client.responses.create(_e,tt)._thenUnwrap(nt=>parseResponse(nt,_e))}stream(_e,tt){return ResponseStream.createResponse(this._client,_e,tt)}cancel(_e,tt){return this._client.post(`/responses/${_e}/cancel`,{...tt,headers:{Accept:"*/*",...tt==null?void 0:tt.headers}})}}class ResponseItemsPage extends CursorPage{}Responses.InputItems=InputItems;class Parts extends APIResource{create(_e,tt,nt){return this._client.post(`/uploads/${_e}/parts`,multipartFormRequestOptions({body:tt,...nt}))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(_e,tt){return this._client.post("/uploads",{body:_e,...tt})}cancel(_e,tt){return this._client.post(`/uploads/${_e}/cancel`,tt)}complete(_e,tt,nt){return this._client.post(`/uploads/${_e}/complete`,{body:tt,...nt})}}Uploads.Parts=Parts;const allSettledWithThrow=async et=>{const _e=await Promise.allSettled(et),tt=_e.filter(st=>st.status==="rejected");if(tt.length){for(const st of tt)console.error(st.reason);throw new Error(`${tt.length} promise(s) failed - see the above errors`)}const nt=[];for(const st of _e)st.status==="fulfilled"&&nt.push(st.value);return nt};class Files extends APIResource{create(_e,tt,nt){return this._client.post(`/vector_stores/${_e}/files`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}retrieve(_e,tt,nt){return this._client.get(`/vector_stores/${_e}/files/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}update(_e,tt,nt,st){return this._client.post(`/vector_stores/${_e}/files/${tt}`,{body:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers}})}list(_e,tt={},nt){return isRequestOptions(tt)?this.list(_e,{},tt):this._client.getAPIList(`/vector_stores/${_e}/files`,VectorStoreFilesPage,{query:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}del(_e,tt,nt){return this._client.delete(`/vector_stores/${_e}/files/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}async createAndPoll(_e,tt,nt){const st=await this.create(_e,tt,nt);return await this.poll(_e,st.id,nt)}async poll(_e,tt,nt){const st={...nt==null?void 0:nt.headers,"X-Stainless-Poll-Helper":"true"};for(nt!=null&&nt.pollIntervalMs&&(st["X-Stainless-Custom-Poll-Interval"]=nt.pollIntervalMs.toString());;){const ot=await this.retrieve(_e,tt,{...nt,headers:st}).withResponse(),at=ot.data;switch(at.status){case"in_progress":let dt=5e3;if(nt!=null&&nt.pollIntervalMs)dt=nt.pollIntervalMs;else{const ft=ot.response.headers.get("openai-poll-after-ms");if(ft){const ht=parseInt(ft);isNaN(ht)||(dt=ht)}}await sleep(dt);break;case"failed":case"completed":return at}}}async upload(_e,tt,nt){const st=await this._client.files.create({file:tt,purpose:"assistants"},nt);return this.create(_e,{file_id:st.id},nt)}async uploadAndPoll(_e,tt,nt){const st=await this.upload(_e,tt,nt);return await this.poll(_e,st.id,nt)}content(_e,tt,nt){return this._client.getAPIList(`/vector_stores/${_e}/files/${tt}/content`,FileContentResponsesPage,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}}class VectorStoreFilesPage extends CursorPage{}class FileContentResponsesPage extends Page{}Files.VectorStoreFilesPage=VectorStoreFilesPage;Files.FileContentResponsesPage=FileContentResponsesPage;class FileBatches extends APIResource{create(_e,tt,nt){return this._client.post(`/vector_stores/${_e}/file_batches`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}retrieve(_e,tt,nt){return this._client.get(`/vector_stores/${_e}/file_batches/${tt}`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}cancel(_e,tt,nt){return this._client.post(`/vector_stores/${_e}/file_batches/${tt}/cancel`,{...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}async createAndPoll(_e,tt,nt){const st=await this.create(_e,tt);return await this.poll(_e,st.id,nt)}listFiles(_e,tt,nt={},st){return isRequestOptions(nt)?this.listFiles(_e,tt,{},nt):this._client.getAPIList(`/vector_stores/${_e}/file_batches/${tt}/files`,VectorStoreFilesPage,{query:nt,...st,headers:{"OpenAI-Beta":"assistants=v2",...st==null?void 0:st.headers}})}async poll(_e,tt,nt){const st={...nt==null?void 0:nt.headers,"X-Stainless-Poll-Helper":"true"};for(nt!=null&&nt.pollIntervalMs&&(st["X-Stainless-Custom-Poll-Interval"]=nt.pollIntervalMs.toString());;){const{data:ot,response:at}=await this.retrieve(_e,tt,{...nt,headers:st}).withResponse();switch(ot.status){case"in_progress":let dt=5e3;if(nt!=null&&nt.pollIntervalMs)dt=nt.pollIntervalMs;else{const ft=at.headers.get("openai-poll-after-ms");if(ft){const ht=parseInt(ft);isNaN(ht)||(dt=ht)}}await sleep(dt);break;case"failed":case"cancelled":case"completed":return ot}}}async uploadAndPoll(_e,{files:tt,fileIds:nt=[]},st){if(tt==null||tt.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const ot=(st==null?void 0:st.maxConcurrency)??5,at=Math.min(ot,tt.length),dt=this._client,ft=tt.values(),ht=[...nt];async function ct(rt){for(let lt of rt){const ut=await dt.files.create({file:lt,purpose:"assistants"},st);ht.push(ut.id)}}const it=Array(at).fill(ft).map(ct);return await allSettledWithThrow(it),await this.createAndPoll(_e,{file_ids:ht})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(_e,tt){return this._client.post("/vector_stores",{body:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}retrieve(_e,tt){return this._client.get(`/vector_stores/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}update(_e,tt,nt){return this._client.post(`/vector_stores/${_e}`,{body:tt,...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}list(_e={},tt){return isRequestOptions(_e)?this.list({},_e):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:_e,...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}del(_e,tt){return this._client.delete(`/vector_stores/${_e}`,{...tt,headers:{"OpenAI-Beta":"assistants=v2",...tt==null?void 0:tt.headers}})}search(_e,tt,nt){return this._client.getAPIList(`/vector_stores/${_e}/search`,VectorStoreSearchResponsesPage,{body:tt,method:"post",...nt,headers:{"OpenAI-Beta":"assistants=v2",...nt==null?void 0:nt.headers}})}}class VectorStoresPage extends CursorPage{}class VectorStoreSearchResponsesPage extends Page{}VectorStores.VectorStoresPage=VectorStoresPage;VectorStores.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;VectorStores.Files=Files;VectorStores.VectorStoreFilesPage=VectorStoreFilesPage;VectorStores.FileContentResponsesPage=FileContentResponsesPage;VectorStores.FileBatches=FileBatches;var _a;class OpenAI extends APIClient{constructor({baseURL:_e=readEnv("OPENAI_BASE_URL"),apiKey:tt=readEnv("OPENAI_API_KEY"),organization:nt=readEnv("OPENAI_ORG_ID")??null,project:st=readEnv("OPENAI_PROJECT_ID")??null,...ot}={}){if(tt===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const at={apiKey:tt,organization:nt,project:st,...ot,baseURL:_e||"https://api.openai.com/v1"};if(!at.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:at.baseURL,timeout:at.timeout??6e5,httpAgent:at.httpAgent,maxRetries:at.maxRetries,fetch:at.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.graders=new Graders(this),this.vectorStores=new VectorStores(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this.evals=new Evals(this),this.containers=new Containers(this),this._options=at,this.apiKey=tt,this.organization=nt,this.project=st}defaultQuery(){return this._options.defaultQuery}defaultHeaders(_e){return{...super.defaultHeaders(_e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(_e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(_e){return stringify(_e,{arrayFormat:"brackets"})}}_a=OpenAI;OpenAI.OpenAI=_a;OpenAI.DEFAULT_TIMEOUT=6e5;OpenAI.OpenAIError=OpenAIError;OpenAI.APIError=APIError;OpenAI.APIConnectionError=APIConnectionError;OpenAI.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI.APIUserAbortError=APIUserAbortError;OpenAI.NotFoundError=NotFoundError;OpenAI.ConflictError=ConflictError;OpenAI.RateLimitError=RateLimitError;OpenAI.BadRequestError=BadRequestError;OpenAI.AuthenticationError=AuthenticationError;OpenAI.InternalServerError=InternalServerError;OpenAI.PermissionDeniedError=PermissionDeniedError;OpenAI.UnprocessableEntityError=UnprocessableEntityError;OpenAI.toFile=toFile;OpenAI.fileFromPath=fileFromPath;OpenAI.Completions=Completions;OpenAI.Chat=Chat$1;OpenAI.ChatCompletionsPage=ChatCompletionsPage;OpenAI.Embeddings=Embeddings;OpenAI.Files=Files$1;OpenAI.FileObjectsPage=FileObjectsPage;OpenAI.Images=Images;OpenAI.Audio=Audio;OpenAI.Moderations=Moderations;OpenAI.Models=Models;OpenAI.ModelsPage=ModelsPage;OpenAI.FineTuning=FineTuning;OpenAI.Graders=Graders;OpenAI.VectorStores=VectorStores;OpenAI.VectorStoresPage=VectorStoresPage;OpenAI.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;OpenAI.Beta=Beta;OpenAI.Batches=Batches;OpenAI.BatchesPage=BatchesPage;OpenAI.Uploads=Uploads;OpenAI.Responses=Responses;OpenAI.Evals=Evals;OpenAI.EvalListResponsesPage=EvalListResponsesPage;OpenAI.Containers=Containers;OpenAI.ContainerListResponsesPage=ContainerListResponsesPage;function dispatchCallback(et,_e){et&&et(_e)}function reverseDictionary(et){return Object.fromEntries(Object.entries(et).map(([_e,tt])=>[tt,_e]))}function escapeRegExp(et){return et.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let et=function(..._e){return et._call(..._e)};return Object.setPrototypeOf(et,new.target.prototype)}_call(...et){throw Error("Must implement _call method in subclass")}};function isTypedArray(et){var _e,tt,nt;return((nt=(tt=(_e=et==null?void 0:et.prototype)==null?void 0:_e.__proto__)==null?void 0:tt.constructor)==null?void 0:nt.name)==="TypedArray"}function isIntegralNumber(et){return Number.isInteger(et)||typeof et=="bigint"}function exists(et){return et!=null}function calculateDimensions(et){const _e=[];let tt=et;for(;Array.isArray(tt);)_e.push(tt.length),tt=tt[0];return _e}function pop(et,_e,tt=void 0){const nt=et[_e];if(nt!==void 0)return delete et[_e],nt;if(tt===void 0)throw Error(`Key ${_e} does not exist in object.`);return tt}function mergeArrays(...et){return Array.prototype.concat.apply([],et)}function product(...et){return et.reduce((_e,tt)=>_e.flatMap(nt=>tt.map(st=>[nt,st])))}function calculateReflectOffset(et,_e){return Math.abs((et+_e)%(2*_e)-_e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(et,_e,tt)=>{if(_e&&typeof _e.init=="function"&&typeof _e.createSessionHandler=="function"){const nt=backends[et];if(nt===void 0)backends[et]={backend:_e,priority:tt};else{if(nt.priority>tt)return;if(nt.priority===tt&&nt.backend!==_e)throw new Error(`cannot register backend "${et}" using priority ${tt}`)}if(tt>=0){const st=backendsSortedByPriority.indexOf(et);st!==-1&&backendsSortedByPriority.splice(st,1);for(let ot=0;ot<backendsSortedByPriority.length;ot++)if(backends[backendsSortedByPriority[ot]].priority<=tt){backendsSortedByPriority.splice(ot,0,et);return}backendsSortedByPriority.push(et)}return}throw new TypeError("not a valid backend")},resolveBackend=async et=>{const _e=et.length===0?backendsSortedByPriority:et,tt=[];for(const nt of _e){const st=backends[nt];if(st){if(st.initialized)return st.backend;if(st.aborted)continue;const ot=!!st.initPromise;try{return ot||(st.initPromise=st.backend.init()),await st.initPromise,st.initialized=!0,st.backend}catch(at){ot||tt.push({name:nt,err:at}),st.aborted=!0}finally{delete st.initPromise}}}throw new Error(`no available backend found. ERR: ${tt.map(nt=>`[${nt.name}] ${nt.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(_e){if(_e!==void 0){if(typeof _e!="string"||["verbose","info","warning","error","fatal"].indexOf(_e)===-1)throw new Error(`Unsupported logging level: ${_e}`);this.logLevelInternal=_e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=et=>{let _e=1;for(let tt=0;tt<et.length;tt++){const nt=et[tt];if(typeof nt!="number"||!Number.isSafeInteger(nt))throw new TypeError(`dims[${tt}] must be an integer, got: ${nt}`);if(nt<0)throw new RangeError(`dims[${tt}] must be a non-negative integer, got: ${nt}`);_e*=nt}return _e};let Tensor$2=class lr{constructor(_e,tt,nt){let st,ot,at;if(typeof _e=="string")if(st=_e,at=nt,_e==="string"){if(!Array.isArray(tt))throw new TypeError("A string tensor's data must be a string array.");ot=tt}else{const ft=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(_e);if(ft===void 0)throw new TypeError(`Unsupported tensor type: ${_e}.`);if(Array.isArray(tt))ot=ft.from(tt);else if(tt instanceof ft)ot=tt;else throw new TypeError(`A ${st} tensor's data must be type of ${ft}`)}else if(at=tt,Array.isArray(_e)){if(_e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const ft=typeof _e[0];if(ft==="string")st="string",ot=_e;else if(ft==="boolean")st="bool",ot=Uint8Array.from(_e);else throw new TypeError(`Invalid element type of data array: ${ft}.`)}else{const ft=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(_e.constructor);if(ft===void 0)throw new TypeError(`Unsupported type for tensor data: ${_e.constructor}.`);st=ft,ot=_e}if(at===void 0)at=[ot.length];else if(!Array.isArray(at))throw new TypeError("A tensor's dims must be a number array");const dt=calculateSize(at);if(dt!==ot.length)throw new Error(`Tensor's size(${dt}) does not match data length(${ot.length}).`);this.dims=at,this.type=st,this.data=ot,this.size=dt}static bufferToTensor(_e,tt){if(_e===void 0)throw new Error("Image buffer must be defined");if(tt.height===void 0||tt.width===void 0)throw new Error("Image height and width must be defined");const{height:nt,width:st}=tt,ot=tt.norm;let at,dt;ot===void 0||ot.mean===void 0?at=255:at=ot.mean,ot===void 0||ot.bias===void 0?dt=0:dt=ot.bias;const ft=tt.bitmapFormat!==void 0?tt.bitmapFormat:"RGBA",ht=tt.tensorFormat!==void 0&&tt.tensorFormat!==void 0?tt.tensorFormat:"RGB",ct=nt*st,it=ht==="RGBA"?new Float32Array(ct*4):new Float32Array(ct*3);let rt=4,lt=0,ut=1,pt=2,gt=3,mt=0,yt=ct,bt=ct*2,wt=-1;ft==="RGB"&&(rt=3,lt=0,ut=1,pt=2,gt=-1),ht==="RGBA"?wt=ct*3:ht==="RBG"?(mt=0,bt=ct,yt=ct*2):ht==="BGR"&&(bt=0,yt=ct,mt=ct*2);for(let Tt=0;Tt<ct;Tt++,lt+=rt,pt+=rt,ut+=rt,gt+=rt)it[mt++]=(_e[lt]+dt)/at,it[yt++]=(_e[ut]+dt)/at,it[bt++]=(_e[pt]+dt)/at,wt!==-1&&gt!==-1&&(it[wt++]=(_e[gt]+dt)/at);return ht==="RGBA"?new lr("float32",it,[1,4,nt,st]):new lr("float32",it,[1,3,nt,st])}static async fromImage(_e,tt){const nt=typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement,st=typeof ImageData<"u"&&_e instanceof ImageData,ot=typeof ImageBitmap<"u"&&_e instanceof ImageBitmap,at=typeof String<"u"&&(_e instanceof String||typeof _e=="string");let dt,ft={};if(nt){const ht=document.createElement("canvas"),ct=ht.getContext("2d");if(ct!=null){let it=_e.naturalHeight,rt=_e.naturalWidth;if(tt!==void 0&&tt.resizedHeight!==void 0&&tt.resizedWidth!==void 0&&(it=tt.resizedHeight,rt=tt.resizedWidth),tt!==void 0){if(ft=tt,tt.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(ft.tensorFormat="RGBA",tt.height!==void 0&&tt.height!==it)throw new Error("Image input config height doesn't match HTMLImageElement height");if(ft.height=it,tt.width!==void 0&&tt.width!==rt)throw new Error("Image input config width doesn't match HTMLImageElement width");ft.width=rt}else ft.tensorFormat="RGBA",ft.height=it,ft.width=rt;ht.width=rt,ht.height=it,ct.drawImage(_e,0,0,rt,it),dt=ct.getImageData(0,0,rt,it).data}else throw new Error("Can not access image data")}else if(st){const ht="RGBA";let ct,it;if(tt!==void 0&&tt.resizedWidth!==void 0&&tt.resizedHeight!==void 0?(ct=tt.resizedHeight,it=tt.resizedWidth):(ct=_e.height,it=_e.width),tt!==void 0){if(ft=tt,tt.bitmapFormat!==void 0&&tt.bitmapFormat!==ht)throw new Error("Image input config format must be RGBA for ImageData");ft.bitmapFormat="RGBA"}else ft.bitmapFormat="RGBA";if(ft.height=ct,ft.width=it,tt!==void 0){const rt=document.createElement("canvas");rt.width=it,rt.height=ct;const lt=rt.getContext("2d");if(lt!=null)lt.putImageData(_e,0,0),dt=lt.getImageData(0,0,it,ct).data;else throw new Error("Can not access image data")}else dt=_e.data}else if(ot){if(tt===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(tt.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ht=document.createElement("canvas").getContext("2d");if(ht!=null){const ct=_e.height,it=_e.width;if(ht.drawImage(_e,0,0,it,ct),dt=ht.getImageData(0,0,it,ct).data,tt!==void 0){if(tt.height!==void 0&&tt.height!==ct)throw new Error("Image input config height doesn't match ImageBitmap height");if(ft.height=ct,tt.width!==void 0&&tt.width!==it)throw new Error("Image input config width doesn't match ImageBitmap width");ft.width=it}else ft.height=ct,ft.width=it;return lr.bufferToTensor(dt,ft)}else throw new Error("Can not access image data")}else{if(at)return new Promise((ht,ct)=>{const it=document.createElement("canvas"),rt=it.getContext("2d");if(!_e||!rt)return ct();const lt=new Image;lt.crossOrigin="Anonymous",lt.src=_e,lt.onload=()=>{it.width=lt.width,it.height=lt.height,rt.drawImage(lt,0,0,it.width,it.height);const ut=rt.getImageData(0,0,it.width,it.height);if(tt!==void 0){if(tt.height!==void 0&&tt.height!==it.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(ft.height=it.height,tt.width!==void 0&&tt.width!==it.width)throw new Error("Image input config width doesn't match ImageBitmap width");ft.width=it.width}else ft.height=it.height,ft.width=it.width;ht(lr.bufferToTensor(ut.data,ft))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(dt!==void 0)return lr.bufferToTensor(dt,ft);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(_e){var tt,nt;const st=document.createElement("canvas").getContext("2d");let ot;if(st!=null){const at=this.dims[3],dt=this.dims[2],ft=this.dims[1],ht=_e!==void 0&&_e.format!==void 0?_e.format:"RGB",ct=_e!==void 0&&((tt=_e.norm)===null||tt===void 0?void 0:tt.mean)!==void 0?_e.norm.mean:255,it=_e!==void 0&&((nt=_e.norm)===null||nt===void 0?void 0:nt.bias)!==void 0?_e.norm.bias:0,rt=dt*at;if(_e!==void 0){if(_e.height!==void 0&&_e.height!==dt)throw new Error("Image output config height doesn't match tensor height");if(_e.width!==void 0&&_e.width!==at)throw new Error("Image output config width doesn't match tensor width");if(_e.format!==void 0&&ft===4&&_e.format!=="RGBA"||ft===3&&_e.format!=="RGB"&&_e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const lt=4;let ut=0,pt=1,gt=2,mt=3,yt=0,bt=rt,wt=rt*2,xt=-1;ht==="RGBA"?(yt=0,bt=rt,wt=rt*2,xt=rt*3):ht==="RGB"?(yt=0,bt=rt,wt=rt*2):ht==="RBG"&&(yt=0,wt=rt,bt=rt*2),ot=st.createImageData(at,dt);for(let Tt=0;Tt<dt*at;ut+=lt,pt+=lt,gt+=lt,mt+=lt,Tt++)ot.data[ut]=(this.data[yt++]-it)*ct,ot.data[pt]=(this.data[bt++]-it)*ct,ot.data[gt]=(this.data[wt++]-it)*ct,ot.data[mt]=xt===-1?255:(this.data[xt++]-it)*ct}else throw new Error("Can not access image data");return ot}reshape(_e){return new lr(this.type,this.data,_e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class ds{constructor(_e){this.handler=_e}async run(_e,tt,nt){const st={};let ot={};if(typeof _e!="object"||_e===null||_e instanceof Tensor$1||Array.isArray(_e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let at=!0;if(typeof tt=="object"){if(tt===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(tt instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(tt)){if(tt.length===0)throw new TypeError("'fetches' cannot be an empty array.");at=!1;for(const ht of tt){if(typeof ht!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ht)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ht}.`);st[ht]=null}if(typeof nt=="object"&&nt!==null)ot=nt;else if(typeof nt<"u")throw new TypeError("'options' must be an object.")}else{let ht=!1;const ct=Object.getOwnPropertyNames(tt);for(const it of this.outputNames)if(ct.indexOf(it)!==-1){const rt=tt[it];(rt===null||rt instanceof Tensor$1)&&(ht=!0,at=!1,st[it]=rt)}if(ht){if(typeof nt=="object"&&nt!==null)ot=nt;else if(typeof nt<"u")throw new TypeError("'options' must be an object.")}else ot=tt}}else if(typeof tt<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ht of this.inputNames)if(typeof _e[ht]>"u")throw new Error(`input '${ht}' is missing in 'feeds'.`);if(at)for(const ht of this.outputNames)st[ht]=null;const dt=await this.handler.run(_e,st,ot),ft={};for(const ht in dt)Object.hasOwnProperty.call(dt,ht)&&(ft[ht]=new Tensor$1(dt[ht].type,dt[ht].data,dt[ht].dims));return ft}static async create(_e,tt,nt,st){let ot,at={};if(typeof _e=="string"){if(ot=_e,typeof tt=="object"&&tt!==null)at=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else if(_e instanceof Uint8Array){if(ot=_e,typeof tt=="object"&&tt!==null)at=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else if(_e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_e instanceof SharedArrayBuffer){const it=_e;let rt=0,lt=_e.byteLength;if(typeof tt=="object"&&tt!==null)at=tt;else if(typeof tt=="number"){if(rt=tt,!Number.isSafeInteger(rt))throw new RangeError("'byteOffset' must be an integer.");if(rt<0||rt>=it.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${it.byteLength}).`);if(lt=_e.byteLength-rt,typeof nt=="number"){if(lt=nt,!Number.isSafeInteger(lt))throw new RangeError("'byteLength' must be an integer.");if(lt<=0||rt+lt>it.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${it.byteLength-rt}].`);if(typeof st=="object"&&st!==null)at=st;else if(typeof st<"u")throw new TypeError("'options' must be an object.")}else if(typeof nt<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof tt<"u")throw new TypeError("'options' must be an object.");ot=new Uint8Array(it,rt,lt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const ft=(at.executionProviders||[]).map(it=>typeof it=="string"?it:it.name),ct=await(await resolveBackend(ft)).createSessionHandler(ot,at);return new ds(ct)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(et,_e){module.exports=_e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(et,_e,tt)=>{var nt,st=(nt=(nt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(ot){function at(){return zt.buffer!=Jt&&kn(zt.buffer),nn}function dt(){return zt.buffer!=Jt&&kn(zt.buffer),xn}function ft(){return zt.buffer!=Jt&&kn(zt.buffer),dn}function ht(){return zt.buffer!=Jt&&kn(zt.buffer),on}function ct(){return zt.buffer!=Jt&&kn(zt.buffer),hn}var it,rt,lt;ot=ot||{},it||(it=ot!==void 0?ot:{}),it.ready=new Promise(function(Et,kt){rt=Et,lt=kt});var ut,pt,gt,mt,yt,bt,wt=Object.assign({},it),xt="./this.program",Tt=(Et,kt)=>{throw kt},St=typeof window=="object",Pt=typeof importScripts=="function",vt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",At=it.ENVIRONMENT_IS_PTHREAD||!1,It="";function jt(Et){return it.locateFile?it.locateFile(Et,It):It+Et}if(vt){let Et;It=Pt?tt(908).dirname(It)+"/":"//",bt=()=>{yt||(mt=tt(1384),yt=tt(908))},ut=function(kt,Ct){return bt(),kt=yt.normalize(kt),mt.readFileSync(kt,Ct?void 0:"utf8")},gt=kt=>((kt=ut(kt,!0)).buffer||(kt=new Uint8Array(kt)),kt),pt=(kt,Ct,Dt)=>{bt(),kt=yt.normalize(kt),mt.readFile(kt,function(Gt,qt){Gt?Dt(Gt):Ct(qt.buffer)})},1<process.argv.length&&(xt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(kt){if(!(kt instanceof Zn))throw kt}),process.on("unhandledRejection",function(kt){throw kt}),Tt=(kt,Ct)=>{if(qn())throw process.exitCode=kt,Ct;Ct instanceof Zn||Ft("exiting due to exception: "+Ct),process.exit(kt)},it.inspect=function(){return"[Emscripten Module object]"};try{Et=tt(9925)}catch(kt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),kt}tt.g.Worker=Et.Worker}else(St||Pt)&&(Pt?It=self.location.href:typeof document<"u"&&document.currentScript&&(It=document.currentScript.src),nt&&(It=nt),It=It.indexOf("blob:")!==0?It.substr(0,It.replace(/[?#].*/,"").lastIndexOf("/")+1):"",vt||(ut=Et=>{var kt=new XMLHttpRequest;return kt.open("GET",Et,!1),kt.send(null),kt.responseText},Pt&&(gt=Et=>{var kt=new XMLHttpRequest;return kt.open("GET",Et,!1),kt.responseType="arraybuffer",kt.send(null),new Uint8Array(kt.response)}),pt=(Et,kt,Ct)=>{var Dt=new XMLHttpRequest;Dt.open("GET",Et,!0),Dt.responseType="arraybuffer",Dt.onload=()=>{Dt.status==200||Dt.status==0&&Dt.response?kt(Dt.response):Ct()},Dt.onerror=Ct,Dt.send(null)}));vt&&typeof performance>"u"&&(tt.g.performance=tt(6953).performance);var Lt=console.log.bind(console),Rt=console.warn.bind(console);vt&&(bt(),Lt=Et=>mt.writeSync(1,Et+`
`),Rt=Et=>mt.writeSync(2,Et+`
`));var $t,Ot=it.print||Lt,Ft=it.printErr||Rt;Object.assign(it,wt),wt=null,it.thisProgram&&(xt=it.thisProgram),it.quit&&(Tt=it.quit),it.wasmBinary&&($t=it.wasmBinary);var Vt=it.noExitRuntime||!1;typeof WebAssembly!="object"&&bn("no native wasm support detected");var zt,Xt,Jt,nn,xn,dn,on,hn,fn=!1,Cn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Dn(Et,kt,Ct){var Dt=(kt>>>=0)+Ct;for(Ct=kt;Et[Ct]&&!(Ct>=Dt);)++Ct;if(16<Ct-kt&&Et.buffer&&Cn)return Cn.decode(Et.buffer instanceof SharedArrayBuffer?Et.slice(kt,Ct):Et.subarray(kt,Ct));for(Dt="";kt<Ct;){var Gt=Et[kt++];if(128&Gt){var qt=63&Et[kt++];if((224&Gt)==192)Dt+=String.fromCharCode((31&Gt)<<6|qt);else{var en=63&Et[kt++];65536>(Gt=(240&Gt)==224?(15&Gt)<<12|qt<<6|en:(7&Gt)<<18|qt<<12|en<<6|63&Et[kt++])?Dt+=String.fromCharCode(Gt):(Gt-=65536,Dt+=String.fromCharCode(55296|Gt>>10,56320|1023&Gt))}}else Dt+=String.fromCharCode(Gt)}return Dt}function Pn(Et,kt){return(Et>>>=0)?Dn(dt(),Et,kt):""}function In(Et,kt,Ct,Dt){if(!(0<Dt))return 0;var Gt=Ct>>>=0;Dt=Ct+Dt-1;for(var qt=0;qt<Et.length;++qt){var en=Et.charCodeAt(qt);if(55296<=en&&57343>=en&&(en=65536+((1023&en)<<10)|1023&Et.charCodeAt(++qt)),127>=en){if(Ct>=Dt)break;kt[Ct++>>>0]=en}else{if(2047>=en){if(Ct+1>=Dt)break;kt[Ct++>>>0]=192|en>>6}else{if(65535>=en){if(Ct+2>=Dt)break;kt[Ct++>>>0]=224|en>>12}else{if(Ct+3>=Dt)break;kt[Ct++>>>0]=240|en>>18,kt[Ct++>>>0]=128|en>>12&63}kt[Ct++>>>0]=128|en>>6&63}kt[Ct++>>>0]=128|63&en}}return kt[Ct>>>0]=0,Ct-Gt}function $n(Et){for(var kt=0,Ct=0;Ct<Et.length;++Ct){var Dt=Et.charCodeAt(Ct);127>=Dt?kt++:2047>=Dt?kt+=2:55296<=Dt&&57343>=Dt?(kt+=4,++Ct):kt+=3}return kt}function kn(Et){Jt=Et,it.HEAP8=nn=new Int8Array(Et),it.HEAP16=new Int16Array(Et),it.HEAP32=dn=new Int32Array(Et),it.HEAPU8=xn=new Uint8Array(Et),it.HEAPU16=new Uint16Array(Et),it.HEAPU32=on=new Uint32Array(Et),it.HEAPF32=new Float32Array(Et),it.HEAPF64=hn=new Float64Array(Et)}At&&(Jt=it.buffer);var En=it.INITIAL_MEMORY||16777216;if(At)zt=it.wasmMemory,Jt=it.buffer;else if(it.wasmMemory)zt=it.wasmMemory;else if(!((zt=new WebAssembly.Memory({initial:En/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Ft("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),vt&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");zt&&(Jt=zt.buffer),En=Jt.byteLength,kn(Jt);var Bn,zn=[],Vn=[],Kn=[],Jn=[];function qn(){return Vt||!1}function Wn(){var Et=it.preRun.shift();zn.unshift(Et)}var On,Un=0,Xn=null;function bn(Et){throw At?postMessage({cmd:"onAbort",arg:Et}):it.onAbort&&it.onAbort(Et),Ft(Et="Aborted("+Et+")"),fn=!0,Et=new WebAssembly.RuntimeError(Et+". Build with -sASSERTIONS for more info."),lt(Et),Et}function fr(){return On.startsWith("data:application/octet-stream;base64,")}function ur(){var Et=On;try{if(Et==On&&$t)return new Uint8Array($t);if(gt)return gt(Et);throw"both async and sync fetching of the wasm failed"}catch(kt){bn(kt)}}On="ort-wasm-threaded.wasm",fr()||(On=jt(On));var kr={};function Zn(Et){this.name="ExitStatus",this.message="Program terminated with exit("+Et+")",this.status=Et}function cr(Et){(Et=an.Vb[Et])||bn(),an.mc(Et)}function dr(Et){var kt=an.Cc();if(!kt)return 6;an.ac.push(kt),an.Vb[Et.Ub]=kt,kt.Ub=Et.Ub;var Ct={cmd:"run",start_routine:Et.Ic,arg:Et.zc,pthread_ptr:Et.Ub};return kt.$b=()=>{Ct.time=performance.now(),kt.postMessage(Ct,Et.Nc)},kt.loaded&&(kt.$b(),delete kt.$b),0}function jn(Et){if(At)return tn(1,1,Et);qn()||(an.oc(),it.onExit&&it.onExit(Et),fn=!0),Tt(Et,new Zn(Et))}function sr(Et,kt){if(!kt&&At)throw Or(Et),"unwind";qn()||At||(qr(),rr(Kn),Wr(0),Nr[1].length&&Fr(1,10),Nr[2].length&&Fr(2,10),an.oc()),jn(Et)}var an={Yb:[],ac:[],qc:[],Vb:{},fc:function(){At&&an.Ec()},Pc:function(){},Ec:function(){an.receiveObjectTransfer=an.Gc,an.threadInitTLS=an.pc,an.setExitStatus=an.nc,Vt=!1},nc:function(){},oc:function(){for(var Et of Object.values(an.Vb))an.mc(Et);for(Et of an.Yb)Et.terminate();an.Yb=[]},mc:function(Et){var kt=Et.Ub;delete an.Vb[kt],an.Yb.push(Et),an.ac.splice(an.ac.indexOf(Et),1),Et.Ub=0,Lr(kt)},Gc:function(){},pc:function(){an.qc.forEach(Et=>Et())},Fc:function(Et,kt){Et.onmessage=Ct=>{var Dt=(Ct=Ct.data).cmd;if(Et.Ub&&(an.Bc=Et.Ub),Ct.targetThread&&Ct.targetThread!=Ir()){var Gt=an.Vb[Ct.Qc];Gt?Gt.postMessage(Ct,Ct.transferList):Ft('Internal error! Worker sent a message "'+Dt+'" to target pthread '+Ct.targetThread+", but that thread no longer exists!")}else Dt==="processProxyingQueue"?Bt(Ct.queue):Dt==="spawnThread"?dr(Ct):Dt==="cleanupThread"?cr(Ct.thread):Dt==="killThread"?(Ct=Ct.thread,Dt=an.Vb[Ct],delete an.Vb[Ct],Dt.terminate(),Lr(Ct),an.ac.splice(an.ac.indexOf(Dt),1),Dt.Ub=0):Dt==="cancelThread"?an.Vb[Ct.thread].postMessage({cmd:"cancel"}):Dt==="loaded"?(Et.loaded=!0,kt&&kt(Et),Et.$b&&(Et.$b(),delete Et.$b)):Dt==="print"?Ot("Thread "+Ct.threadId+": "+Ct.text):Dt==="printErr"?Ft("Thread "+Ct.threadId+": "+Ct.text):Dt==="alert"?alert("Thread "+Ct.threadId+": "+Ct.text):Ct.target==="setimmediate"?Et.postMessage(Ct):Dt==="onAbort"?it.onAbort&&it.onAbort(Ct.arg):Dt&&Ft("worker sent an unknown command "+Dt);an.Bc=void 0},Et.onerror=Ct=>{throw Ft("worker sent an error! "+Ct.filename+":"+Ct.lineno+": "+Ct.message),Ct},vt&&(Et.on("message",function(Ct){Et.onmessage({data:Ct})}),Et.on("error",function(Ct){Et.onerror(Ct)}),Et.on("detachedExit",function(){})),Et.postMessage({cmd:"load",urlOrBlob:it.mainScriptUrlOrBlob||nt,wasmMemory:zt,wasmModule:Xt})},yc:function(){var Et=jt("ort-wasm-threaded.worker.js");an.Yb.push(new Worker(Et))},Cc:function(){return an.Yb.length==0&&(an.yc(),an.Fc(an.Yb[0])),an.Yb.pop()}};function rr(Et){for(;0<Et.length;)Et.shift()(it)}function Mr(Et){var kt=gn();return Et=Et(),mn(kt),Et}function Or(Et){if(At)return tn(2,0,Et);try{sr(Et)}catch(kt){kt instanceof Zn||kt=="unwind"||Tt(1,kt)}}it.PThread=an,it.establishStackSpace=function(){var Et=Ir(),kt=ft()[Et+44>>2>>>0];Et=ft()[Et+48>>2>>>0],Qr(kt,kt-Et),mn(kt)};var er=[];function Sn(Et){var kt=er[Et];return kt||(Et>=er.length&&(er.length=Et+1),er[Et]=kt=Bn.get(Et)),kt}it.invokeEntryPoint=function(Et,kt){Et=Sn(Et)(kt),qn()?an.nc(Et):Xr(Et)};var ir,pr,or=[],cn=0,ln=0;function un(Et){this.Zb=Et,this.Sb=Et-24,this.xc=function(kt){ht()[this.Sb+4>>2>>>0]=kt},this.bc=function(){return ht()[this.Sb+4>>2>>>0]},this.wc=function(kt){ht()[this.Sb+8>>2>>>0]=kt},this.Dc=function(){return ht()[this.Sb+8>>2>>>0]},this.rc=function(){ft()[this.Sb>>2>>>0]=0},this.hc=function(kt){kt=kt?1:0,at()[this.Sb+12>>0>>>0]=kt},this.uc=function(){return at()[this.Sb+12>>0>>>0]!=0},this.ic=function(kt){kt=kt?1:0,at()[this.Sb+13>>0>>>0]=kt},this.kc=function(){return at()[this.Sb+13>>0>>>0]!=0},this.fc=function(kt,Ct){this.cc(0),this.xc(kt),this.wc(Ct),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(ft(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(ft(),this.Sb>>2,1)===1},this.cc=function(kt){ht()[this.Sb+16>>2>>>0]=kt},this.tc=function(){return ht()[this.Sb+16>>2>>>0]},this.vc=function(){if(Jr(this.bc()))return ht()[this.Zb>>2>>>0];var kt=this.tc();return kt!==0?kt:this.Zb}}function mr(Et){return Gr(new un(Et).Sb)}function ar(Et,kt,Ct,Dt){return At?tn(3,1,Et,kt,Ct,Dt):gr(Et,kt,Ct,Dt)}function gr(Et,kt,Ct,Dt){if(typeof SharedArrayBuffer>"u")return Ft("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Gt=[];return At&&Gt.length===0?ar(Et,kt,Ct,Dt):(Et={Ic:Ct,Ub:Et,zc:Dt,Nc:Gt},At?(Et.Oc="spawnThread",postMessage(Et,Gt),0):dr(Et))}function _r(Et,kt,Ct){return At?tn(4,1,Et,kt,Ct):0}function yr(Et,kt){if(At)return tn(5,1,Et,kt)}function br(Et,kt){if(At)return tn(6,1,Et,kt)}function wr(Et,kt,Ct){if(At)return tn(7,1,Et,kt,Ct)}function xr(Et,kt,Ct){return At?tn(8,1,Et,kt,Ct):0}function vr(Et,kt){if(At)return tn(9,1,Et,kt)}function Tr(Et,kt,Ct){if(At)return tn(10,1,Et,kt,Ct)}function Sr(Et,kt,Ct,Dt){if(At)return tn(11,1,Et,kt,Ct,Dt)}function Er(Et,kt,Ct,Dt){if(At)return tn(12,1,Et,kt,Ct,Dt)}function Pr(Et,kt,Ct,Dt){if(At)return tn(13,1,Et,kt,Ct,Dt)}function Ar(Et){if(At)return tn(14,1,Et)}function Mt(Et,kt){if(At)return tn(15,1,Et,kt)}function Nt(Et,kt,Ct){if(At)return tn(16,1,Et,kt,Ct)}function Bt(Et){Atomics.store(ft(),Et>>2,1),Ir()&&Kr(Et),Atomics.compareExchange(ft(),Et>>2,1,0)}function Ut(Et){return ht()[Et>>>2]+4294967296*ft()[Et+4>>>2]}function Wt(Et,kt,Ct,Dt,Gt,qt){return At?tn(17,1,Et,kt,Ct,Dt,Gt,qt):-52}function Kt(Et,kt,Ct,Dt,Gt,qt){if(At)return tn(18,1,Et,kt,Ct,Dt,Gt,qt)}function Zt(Et){var kt=$n(Et)+1,Ct=Dr(kt);return Ct&&In(Et,at(),Ct,kt),Ct}function rn(Et,kt,Ct){function Dt(wn){return(wn=wn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?wn[1]:"GMT"}if(At)return tn(19,1,Et,kt,Ct);var Gt=new Date().getFullYear(),qt=new Date(Gt,0,1),en=new Date(Gt,6,1);Gt=qt.getTimezoneOffset();var sn=en.getTimezoneOffset(),yn=Math.max(Gt,sn);ft()[Et>>2>>>0]=60*yn,ft()[kt>>2>>>0]=+(Gt!=sn),Et=Dt(qt),kt=Dt(en),Et=Zt(Et),kt=Zt(kt),sn<Gt?(ht()[Ct>>2>>>0]=Et,ht()[Ct+4>>2>>>0]=kt):(ht()[Ct>>2>>>0]=kt,ht()[Ct+4>>2>>>0]=Et)}function tn(Et,kt){var Ct=arguments.length-2,Dt=arguments;return Mr(()=>{for(var Gt=jr(8*Ct),qt=Gt>>3,en=0;en<Ct;en++){var sn=Dt[2+en];ct()[qt+en>>>0]=sn}return Yr(Et,Ct,Gt,kt)})}it.executeNotifiedProxyingQueue=Bt,pr=vt?()=>{var Et=process.hrtime();return 1e3*Et[0]+Et[1]/1e6}:At?()=>performance.now()-it.__performance_now_clock_drift:()=>performance.now();var pn,An=[],Ln={};function Fn(){if(!pn){var Et,kt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:xt||"./this.program"};for(Et in Ln)Ln[Et]===void 0?delete kt[Et]:kt[Et]=Ln[Et];var Ct=[];for(Et in kt)Ct.push(Et+"="+kt[Et]);pn=Ct}return pn}function Ht(Et,kt){if(At)return tn(20,1,Et,kt);var Ct=0;return Fn().forEach(function(Dt,Gt){var qt=kt+Ct;for(Gt=ht()[Et+4*Gt>>2>>>0]=qt,qt=0;qt<Dt.length;++qt)at()[Gt++>>0>>>0]=Dt.charCodeAt(qt);at()[Gt>>0>>>0]=0,Ct+=Dt.length+1}),0}function vn(Et,kt){if(At)return tn(21,1,Et,kt);var Ct=Fn();ht()[Et>>2>>>0]=Ct.length;var Dt=0;return Ct.forEach(function(Gt){Dt+=Gt.length+1}),ht()[kt>>2>>>0]=Dt,0}function Mn(Et){return At?tn(22,1,Et):52}function Hn(Et,kt,Ct,Dt){return At?tn(23,1,Et,kt,Ct,Dt):52}function tr(Et,kt,Ct,Dt,Gt){return At?tn(24,1,Et,kt,Ct,Dt,Gt):70}var Nr=[null,[],[]];function Fr(Et,kt){var Ct=Nr[Et];kt===0||kt===10?((Et===1?Ot:Ft)(Dn(Ct,0)),Ct.length=0):Ct.push(kt)}function Br(Et,kt,Ct,Dt){if(At)return tn(25,1,Et,kt,Ct,Dt);for(var Gt=0,qt=0;qt<Ct;qt++){var en=ht()[kt>>2>>>0],sn=ht()[kt+4>>2>>>0];kt+=8;for(var yn=0;yn<sn;yn++)Fr(Et,dt()[en+yn>>>0]);Gt+=sn}return ht()[Dt>>2>>>0]=Gt,0}var Gn=0;function Cr(Et){return Et%4==0&&(Et%100!=0||Et%400==0)}var zr=[31,29,31,30,31,30,31,31,30,31,30,31],Vr=[31,28,31,30,31,30,31,31,30,31,30,31];function Ur(Et,kt,Ct,Dt){function Gt(Yt,Tn,Rn){for(Yt=typeof Yt=="number"?Yt.toString():Yt||"";Yt.length<Tn;)Yt=Rn[0]+Yt;return Yt}function qt(Yt,Tn){return Gt(Yt,Tn,"0")}function en(Yt,Tn){function Rn(hr){return 0>hr?-1:0<hr?1:0}var nr;return(nr=Rn(Yt.getFullYear()-Tn.getFullYear()))===0&&(nr=Rn(Yt.getMonth()-Tn.getMonth()))===0&&(nr=Rn(Yt.getDate()-Tn.getDate())),nr}function sn(Yt){switch(Yt.getDay()){case 0:return new Date(Yt.getFullYear()-1,11,29);case 1:return Yt;case 2:return new Date(Yt.getFullYear(),0,3);case 3:return new Date(Yt.getFullYear(),0,2);case 4:return new Date(Yt.getFullYear(),0,1);case 5:return new Date(Yt.getFullYear()-1,11,31);case 6:return new Date(Yt.getFullYear()-1,11,30)}}function yn(Yt){var Tn=Yt.Wb;for(Yt=new Date(new Date(Yt.Xb+1900,0,1).getTime());0<Tn;){var Rn=Yt.getMonth(),nr=(Cr(Yt.getFullYear())?zr:Vr)[Rn];if(!(Tn>nr-Yt.getDate())){Yt.setDate(Yt.getDate()+Tn);break}Tn-=nr-Yt.getDate()+1,Yt.setDate(1),11>Rn?Yt.setMonth(Rn+1):(Yt.setMonth(0),Yt.setFullYear(Yt.getFullYear()+1))}return Rn=new Date(Yt.getFullYear()+1,0,4),Tn=sn(new Date(Yt.getFullYear(),0,4)),Rn=sn(Rn),0>=en(Tn,Yt)?0>=en(Rn,Yt)?Yt.getFullYear()+1:Yt.getFullYear():Yt.getFullYear()-1}var wn=ft()[Dt+40>>2>>>0];for(var Nn in Dt={Lc:ft()[Dt>>2>>>0],Kc:ft()[Dt+4>>2>>>0],dc:ft()[Dt+8>>2>>>0],jc:ft()[Dt+12>>2>>>0],ec:ft()[Dt+16>>2>>>0],Xb:ft()[Dt+20>>2>>>0],Tb:ft()[Dt+24>>2>>>0],Wb:ft()[Dt+28>>2>>>0],Rc:ft()[Dt+32>>2>>>0],Jc:ft()[Dt+36>>2>>>0],Mc:wn?Pn(wn):""},Ct=Pn(Ct),wn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ct=Ct.replace(new RegExp(Nn,"g"),wn[Nn]);var Qn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Yn="January February March April May June July August September October November December".split(" ");for(Nn in wn={"%a":function(Yt){return Qn[Yt.Tb].substring(0,3)},"%A":function(Yt){return Qn[Yt.Tb]},"%b":function(Yt){return Yn[Yt.ec].substring(0,3)},"%B":function(Yt){return Yn[Yt.ec]},"%C":function(Yt){return qt((Yt.Xb+1900)/100|0,2)},"%d":function(Yt){return qt(Yt.jc,2)},"%e":function(Yt){return Gt(Yt.jc,2," ")},"%g":function(Yt){return yn(Yt).toString().substring(2)},"%G":function(Yt){return yn(Yt)},"%H":function(Yt){return qt(Yt.dc,2)},"%I":function(Yt){return(Yt=Yt.dc)==0?Yt=12:12<Yt&&(Yt-=12),qt(Yt,2)},"%j":function(Yt){for(var Tn=0,Rn=0;Rn<=Yt.ec-1;Tn+=(Cr(Yt.Xb+1900)?zr:Vr)[Rn++]);return qt(Yt.jc+Tn,3)},"%m":function(Yt){return qt(Yt.ec+1,2)},"%M":function(Yt){return qt(Yt.Kc,2)},"%n":function(){return`
`},"%p":function(Yt){return 0<=Yt.dc&&12>Yt.dc?"AM":"PM"},"%S":function(Yt){return qt(Yt.Lc,2)},"%t":function(){return"	"},"%u":function(Yt){return Yt.Tb||7},"%U":function(Yt){return qt(Math.floor((Yt.Wb+7-Yt.Tb)/7),2)},"%V":function(Yt){var Tn=Math.floor((Yt.Wb+7-(Yt.Tb+6)%7)/7);if(2>=(Yt.Tb+371-Yt.Wb-2)%7&&Tn++,Tn)Tn==53&&((Rn=(Yt.Tb+371-Yt.Wb)%7)==4||Rn==3&&Cr(Yt.Xb)||(Tn=1));else{Tn=52;var Rn=(Yt.Tb+7-Yt.Wb-1)%7;(Rn==4||Rn==5&&Cr(Yt.Xb%400-1))&&Tn++}return qt(Tn,2)},"%w":function(Yt){return Yt.Tb},"%W":function(Yt){return qt(Math.floor((Yt.Wb+7-(Yt.Tb+6)%7)/7),2)},"%y":function(Yt){return(Yt.Xb+1900).toString().substring(2)},"%Y":function(Yt){return Yt.Xb+1900},"%z":function(Yt){var Tn=0<=(Yt=Yt.Jc);return Yt=Math.abs(Yt)/60,(Tn?"+":"-")+("0000"+(Yt/60*100+Yt%60)).slice(-4)},"%Z":function(Yt){return Yt.Mc},"%%":function(){return"%"}},Ct=Ct.replace(/%%/g,"\0\0"),wn)Ct.includes(Nn)&&(Ct=Ct.replace(new RegExp(Nn,"g"),wn[Nn](Dt)));return Nn=function(Yt){var Tn=Array($n(Yt)+1);return In(Yt,Tn,0,Tn.length),Tn}(Ct=Ct.replace(/\0\0/g,"%")),Nn.length>kt?0:(function(Yt,Tn){at().set(Yt,Tn>>>0)}(Nn,Et),Nn.length-1)}an.fc();var hs=[null,jn,Or,ar,_r,yr,br,wr,xr,vr,Tr,Sr,Er,Pr,Ar,Mt,Nt,Wt,Kt,rn,Ht,vn,Mn,Hn,tr,Br],fs={b:function(Et){return Dr(Et+24)+24},n:function(Et){return(Et=new un(Et)).uc()||(Et.hc(!0),cn--),Et.ic(!1),or.push(Et),Et.sc(),Et.vc()},ma:function(Et){throw Ft("Unexpected exception thrown, this is not properly supported - aborting"),fn=!0,Et},x:function(){_n(0);var Et=or.pop();if(Et.Hc()&&!Et.kc()){var kt=Et.Dc();kt&&Sn(kt)(Et.Zb),mr(Et.Zb)}ln=0},e:function(){var Et=ln;if(!Et)return Gn=0;var kt=new un(Et);kt.cc(Et);var Ct=kt.bc();if(!Ct)return Gn=0,Et;for(var Dt=Array.prototype.slice.call(arguments),Gt=0;Gt<Dt.length;Gt++){var qt=Dt[Gt];if(qt===0||qt===Ct)break;if($r(qt,Ct,kt.Sb+16))return Gn=qt,Et}return Gn=Ct,Et},l:function(){var Et=ln;if(!Et)return Gn=0;var kt=new un(Et);kt.cc(Et);var Ct=kt.bc();if(!Ct)return Gn=0,Et;for(var Dt=Array.prototype.slice.call(arguments),Gt=0;Gt<Dt.length;Gt++){var qt=Dt[Gt];if(qt===0||qt===Ct)break;if($r(qt,Ct,kt.Sb+16))return Gn=qt,Et}return Gn=Ct,Et},h:function(){var Et=ln;if(!Et)return Gn=0;var kt=new un(Et);kt.cc(Et);var Ct=kt.bc();if(!Ct)return Gn=0,Et;for(var Dt=Array.prototype.slice.call(arguments),Gt=0;Gt<Dt.length;Gt++){var qt=Dt[Gt];if(qt===0||qt===Ct)break;if($r(qt,Ct,kt.Sb+16))return Gn=qt,Et}return Gn=Ct,Et},t:mr,M:function(){var Et=or.pop();Et||bn("no exception to throw");var kt=Et.Zb;throw Et.kc()||(or.push(Et),Et.ic(!0),Et.hc(!1),cn++),ln=kt,kt},c:function(Et,kt,Ct){throw new un(Et).fc(kt,Ct),ln=Et,cn++,Et},pa:function(){return cn},Fa:function(Et){Hr(Et,!Pt,1,!St),an.pc()},T:function(Et){At?postMessage({cmd:"cleanupThread",thread:Et}):cr(Et)},xa:gr,j:function(Et){throw ln||(ln=Et),Et},H:_r,Ma:yr,ua:br,wa:wr,oa:xr,Ka:vr,Ca:Tr,Ja:Sr,V:Er,va:Pr,sa:Ar,La:Mt,ta:Nt,Ta:function(){},X:function(){bn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){bn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Et,kt,Ct,Dt){if(Et==kt)setTimeout(()=>Bt(Dt));else if(At)postMessage({targetThread:Et,cmd:"processProxyingQueue",queue:Dt});else{if(!(Et=an.Vb[Et]))return;Et.postMessage({cmd:"processProxyingQueue",queue:Dt})}return 1},Ea:function(){return-1},Pa:function(Et,kt){Et=new Date(1e3*Ut(Et)),ft()[kt>>2>>>0]=Et.getUTCSeconds(),ft()[kt+4>>2>>>0]=Et.getUTCMinutes(),ft()[kt+8>>2>>>0]=Et.getUTCHours(),ft()[kt+12>>2>>>0]=Et.getUTCDate(),ft()[kt+16>>2>>>0]=Et.getUTCMonth(),ft()[kt+20>>2>>>0]=Et.getUTCFullYear()-1900,ft()[kt+24>>2>>>0]=Et.getUTCDay(),Et=(Et.getTime()-Date.UTC(Et.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ft()[kt+28>>2>>>0]=Et},Qa:function(Et,kt){Et=new Date(1e3*Ut(Et)),ft()[kt>>2>>>0]=Et.getSeconds(),ft()[kt+4>>2>>>0]=Et.getMinutes(),ft()[kt+8>>2>>>0]=Et.getHours(),ft()[kt+12>>2>>>0]=Et.getDate(),ft()[kt+16>>2>>>0]=Et.getMonth(),ft()[kt+20>>2>>>0]=Et.getFullYear()-1900,ft()[kt+24>>2>>>0]=Et.getDay();var Ct=new Date(Et.getFullYear(),0,1),Dt=(Et.getTime()-Ct.getTime())/864e5|0;ft()[kt+28>>2>>>0]=Dt,ft()[kt+36>>2>>>0]=-60*Et.getTimezoneOffset(),Dt=new Date(Et.getFullYear(),6,1).getTimezoneOffset(),Et=0|(Dt!=(Ct=Ct.getTimezoneOffset())&&Et.getTimezoneOffset()==Math.min(Ct,Dt)),ft()[kt+32>>2>>>0]=Et},Ra:function(Et){var kt=new Date(ft()[Et+20>>2>>>0]+1900,ft()[Et+16>>2>>>0],ft()[Et+12>>2>>>0],ft()[Et+8>>2>>>0],ft()[Et+4>>2>>>0],ft()[Et>>2>>>0],0),Ct=ft()[Et+32>>2>>>0],Dt=kt.getTimezoneOffset(),Gt=new Date(kt.getFullYear(),0,1),qt=new Date(kt.getFullYear(),6,1).getTimezoneOffset(),en=Gt.getTimezoneOffset(),sn=Math.min(en,qt);return 0>Ct?ft()[Et+32>>2>>>0]=+(qt!=en&&sn==Dt):0<Ct!=(sn==Dt)&&(qt=Math.max(en,qt),kt.setTime(kt.getTime()+6e4*((0<Ct?sn:qt)-Dt))),ft()[Et+24>>2>>>0]=kt.getDay(),Ct=(kt.getTime()-Gt.getTime())/864e5|0,ft()[Et+28>>2>>>0]=Ct,ft()[Et>>2>>>0]=kt.getSeconds(),ft()[Et+4>>2>>>0]=kt.getMinutes(),ft()[Et+8>>2>>>0]=kt.getHours(),ft()[Et+12>>2>>>0]=kt.getDate(),ft()[Et+16>>2>>>0]=kt.getMonth(),kt.getTime()/1e3|0},Aa:Wt,Ba:Kt,Sa:function Et(kt,Ct,Dt){Et.Ac||(Et.Ac=!0,rn(kt,Ct,Dt))},y:function(){bn("")},U:function(){if(!vt&&!Pt){var Et="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ir||(ir={}),ir[Et]||(ir[Et]=1,vt&&(Et="warning: "+Et),Ft(Et))}},ra:function(){return 4294901760},B:pr,Ia:function(Et,kt,Ct){dt().copyWithin(Et>>>0,kt>>>0,kt+Ct>>>0)},F:function(){return vt?tt(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Et,kt,Ct){An.length=kt,Ct>>=3;for(var Dt=0;Dt<kt;Dt++)An[Dt]=ct()[Ct+Dt>>>0];return(0>Et?kr[-Et-1]:hs[Et]).apply(null,An)},qa:function(Et){var kt=dt().length;if((Et>>>=0)<=kt||4294901760<Et)return!1;for(var Ct=1;4>=Ct;Ct*=2){var Dt=kt*(1+.2/Ct);Dt=Math.min(Dt,Et+100663296);var Gt=Math;Dt=Math.max(Et,Dt),Gt=Gt.min.call(Gt,4294901760,Dt+(65536-Dt%65536)%65536);e:{try{zt.grow(Gt-Jt.byteLength+65535>>>16),kn(zt.buffer);var qt=1;break e}catch{}qt=void 0}if(qt)return!0}return!1},Na:function(){throw"unwind"},Ga:Ht,Ha:vn,J:sr,I:Mn,S:Hn,ga:tr,R:Br,d:function(){return Gn},na:function Et(kt,Ct){Et.lc||(Et.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Gt=new Uint8Array(1);return()=>(crypto.getRandomValues(Gt),Gt[0])}if(vt)try{var qt=tt(Object(function(){var en=new Error("Cannot find module 'crypto'");throw en.code="MODULE_NOT_FOUND",en}()));return()=>qt.randomBytes(1)[0]}catch{}return()=>bn("randomDevice")}());for(var Dt=0;Dt<Ct;Dt++)at()[kt+Dt>>0>>>0]=Et.lc();return 0},ia:function(Et,kt,Ct){var Dt=gn();try{return Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},ja:function(Et,kt,Ct){var Dt=gn();try{return Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},K:function(Et){var kt=gn();try{return Sn(Et)()}catch(Ct){if(mn(kt),Ct!==Ct+0)throw Ct;_n(1,0)}},f:function(Et,kt){var Ct=gn();try{return Sn(Et)(kt)}catch(Dt){if(mn(Ct),Dt!==Dt+0)throw Dt;_n(1,0)}},P:function(Et,kt,Ct){var Dt=gn();try{return Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},Q:function(Et,kt,Ct){var Dt=gn();try{return Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},k:function(Et,kt,Ct){var Dt=gn();try{return Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},p:function(Et,kt,Ct,Dt){var Gt=gn();try{return Sn(Et)(kt,Ct,Dt)}catch(qt){if(mn(Gt),qt!==qt+0)throw qt;_n(1,0)}},q:function(Et,kt,Ct,Dt,Gt){var qt=gn();try{return Sn(Et)(kt,Ct,Dt,Gt)}catch(en){if(mn(qt),en!==en+0)throw en;_n(1,0)}},N:function(Et,kt,Ct,Dt,Gt,qt){var en=gn();try{return Sn(Et)(kt,Ct,Dt,Gt,qt)}catch(sn){if(mn(en),sn!==sn+0)throw sn;_n(1,0)}},s:function(Et,kt,Ct,Dt,Gt,qt){var en=gn();try{return Sn(Et)(kt,Ct,Dt,Gt,qt)}catch(sn){if(mn(en),sn!==sn+0)throw sn;_n(1,0)}},w:function(Et,kt,Ct,Dt,Gt,qt,en){var sn=gn();try{return Sn(Et)(kt,Ct,Dt,Gt,qt,en)}catch(yn){if(mn(sn),yn!==yn+0)throw yn;_n(1,0)}},L:function(Et,kt,Ct,Dt,Gt,qt,en,sn){var yn=gn();try{return Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn)}catch(wn){if(mn(yn),wn!==wn+0)throw wn;_n(1,0)}},E:function(Et,kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn){var Yn=gn();try{return Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn)}catch(Yt){if(mn(Yn),Yt!==Yt+0)throw Yt;_n(1,0)}},aa:function(Et,kt,Ct,Dt,Gt,qt,en,sn){var yn=gn();try{return as(Et,kt,Ct,Dt,Gt,qt,en,sn)}catch(wn){if(mn(yn),wn!==wn+0)throw wn;_n(1,0)}},_:function(Et,kt,Ct,Dt,Gt,qt,en){var sn=gn();try{return es(Et,kt,Ct,Dt,Gt,qt,en)}catch(yn){if(mn(sn),yn!==yn+0)throw yn;_n(1,0)}},Z:function(Et,kt,Ct,Dt,Gt){var qt=gn();try{return ls(Et,kt,Ct,Dt,Gt)}catch(en){if(mn(qt),en!==en+0)throw en;_n(1,0)}},ca:function(Et,kt,Ct,Dt){var Gt=gn();try{return is(Et,kt,Ct,Dt)}catch(qt){if(mn(Gt),qt!==qt+0)throw qt;_n(1,0)}},$:function(Et){var kt=gn();try{return Zr(Et)}catch(Ct){if(mn(kt),Ct!==Ct+0)throw Ct;_n(1,0)}},ba:function(Et,kt){var Ct=gn();try{return os(Et,kt)}catch(Dt){if(mn(Ct),Dt!==Dt+0)throw Dt;_n(1,0)}},Y:function(Et,kt,Ct){var Dt=gn();try{return ts(Et,kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},g:function(Et){var kt=gn();try{Sn(Et)()}catch(Ct){if(mn(kt),Ct!==Ct+0)throw Ct;_n(1,0)}},r:function(Et,kt){var Ct=gn();try{Sn(Et)(kt)}catch(Dt){if(mn(Ct),Dt!==Dt+0)throw Dt;_n(1,0)}},i:function(Et,kt,Ct){var Dt=gn();try{Sn(Et)(kt,Ct)}catch(Gt){if(mn(Dt),Gt!==Gt+0)throw Gt;_n(1,0)}},ha:function(Et,kt,Ct,Dt){var Gt=gn();try{Sn(Et)(kt,Ct,Dt)}catch(qt){if(mn(Gt),qt!==qt+0)throw qt;_n(1,0)}},m:function(Et,kt,Ct,Dt){var Gt=gn();try{Sn(Et)(kt,Ct,Dt)}catch(qt){if(mn(Gt),qt!==qt+0)throw qt;_n(1,0)}},v:function(Et,kt,Ct,Dt,Gt){var qt=gn();try{Sn(Et)(kt,Ct,Dt,Gt)}catch(en){if(mn(qt),en!==en+0)throw en;_n(1,0)}},u:function(Et,kt,Ct,Dt,Gt,qt){var en=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt)}catch(sn){if(mn(en),sn!==sn+0)throw sn;_n(1,0)}},O:function(Et,kt,Ct,Dt,Gt,qt,en){var sn=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt,en)}catch(yn){if(mn(sn),yn!==yn+0)throw yn;_n(1,0)}},A:function(Et,kt,Ct,Dt,Gt,qt,en,sn){var yn=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn)}catch(wn){if(mn(yn),wn!==wn+0)throw wn;_n(1,0)}},ka:function(Et,kt,Ct,Dt,Gt,qt,en,sn,yn){var wn=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn,yn)}catch(Nn){if(mn(wn),Nn!==Nn+0)throw Nn;_n(1,0)}},C:function(Et,kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn){var Qn=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn)}catch(Yn){if(mn(Qn),Yn!==Yn+0)throw Yn;_n(1,0)}},D:function(Et,kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn,Yn,Yt,Tn,Rn){var nr=gn();try{Sn(Et)(kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn,Yn,Yt,Tn,Rn)}catch(hr){if(mn(nr),hr!==hr+0)throw hr;_n(1,0)}},fa:function(Et,kt,Ct,Dt,Gt,qt,en,sn){var yn=gn();try{ns(Et,kt,Ct,Dt,Gt,qt,en,sn)}catch(wn){if(mn(yn),wn!==wn+0)throw wn;_n(1,0)}},da:function(Et,kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn){var Yn=gn();try{ss(Et,kt,Ct,Dt,Gt,qt,en,sn,yn,wn,Nn,Qn)}catch(Yt){if(mn(Yn),Yt!==Yt+0)throw Yt;_n(1,0)}},ea:function(Et,kt,Ct,Dt,Gt,qt){var en=gn();try{rs(Et,kt,Ct,Dt,Gt,qt)}catch(sn){if(mn(en),sn!==sn+0)throw sn;_n(1,0)}},o:function(Et){return Et},a:zt||it.wasmMemory,G:function(Et){Gn=Et},la:Ur,z:function(Et,kt,Ct,Dt){return Ur(Et,kt,Ct,Dt)}};(function(){function Et(Gt,qt){it.asm=Gt.exports,an.qc.push(it.asm.sb),Bn=it.asm.ub,Vn.unshift(it.asm.Va),Xt=qt,At||(Un--,it.monitorRunDependencies&&it.monitorRunDependencies(Un),Un==0&&Xn&&(Gt=Xn,Xn=null,Gt()))}function kt(Gt){Et(Gt.instance,Gt.module)}function Ct(Gt){return function(){if(!$t&&(St||Pt)){if(typeof fetch=="function"&&!On.startsWith("file://"))return fetch(On,{credentials:"same-origin"}).then(function(qt){if(!qt.ok)throw"failed to load wasm binary file at '"+On+"'";return qt.arrayBuffer()}).catch(function(){return ur()});if(pt)return new Promise(function(qt,en){pt(On,function(sn){qt(new Uint8Array(sn))},en)})}return Promise.resolve().then(function(){return ur()})}().then(function(qt){return WebAssembly.instantiate(qt,Dt)}).then(function(qt){return qt}).then(Gt,function(qt){Ft("failed to asynchronously prepare wasm: "+qt),bn(qt)})}var Dt={a:fs};if(At||(Un++,it.monitorRunDependencies&&it.monitorRunDependencies(Un)),it.instantiateWasm)try{return it.instantiateWasm(Dt,Et)}catch(Gt){return Ft("Module.instantiateWasm callback failed with error: "+Gt),!1}($t||typeof WebAssembly.instantiateStreaming!="function"||fr()||On.startsWith("file://")||vt||typeof fetch!="function"?Ct(kt):fetch(On,{credentials:"same-origin"}).then(function(Gt){return WebAssembly.instantiateStreaming(Gt,Dt).then(kt,function(qt){return Ft("wasm streaming compile failed: "+qt),Ft("falling back to ArrayBuffer instantiation"),Ct(kt)})})).catch(lt)})(),it.___wasm_call_ctors=function(){return(it.___wasm_call_ctors=it.asm.Va).apply(null,arguments)},it._OrtInit=function(){return(it._OrtInit=it.asm.Wa).apply(null,arguments)},it._OrtCreateSessionOptions=function(){return(it._OrtCreateSessionOptions=it.asm.Xa).apply(null,arguments)},it._OrtAppendExecutionProvider=function(){return(it._OrtAppendExecutionProvider=it.asm.Ya).apply(null,arguments)},it._OrtAddSessionConfigEntry=function(){return(it._OrtAddSessionConfigEntry=it.asm.Za).apply(null,arguments)},it._OrtReleaseSessionOptions=function(){return(it._OrtReleaseSessionOptions=it.asm._a).apply(null,arguments)},it._OrtCreateSession=function(){return(it._OrtCreateSession=it.asm.$a).apply(null,arguments)},it._OrtReleaseSession=function(){return(it._OrtReleaseSession=it.asm.ab).apply(null,arguments)},it._OrtGetInputCount=function(){return(it._OrtGetInputCount=it.asm.bb).apply(null,arguments)},it._OrtGetOutputCount=function(){return(it._OrtGetOutputCount=it.asm.cb).apply(null,arguments)},it._OrtGetInputName=function(){return(it._OrtGetInputName=it.asm.db).apply(null,arguments)},it._OrtGetOutputName=function(){return(it._OrtGetOutputName=it.asm.eb).apply(null,arguments)},it._OrtFree=function(){return(it._OrtFree=it.asm.fb).apply(null,arguments)},it._OrtCreateTensor=function(){return(it._OrtCreateTensor=it.asm.gb).apply(null,arguments)},it._OrtGetTensorData=function(){return(it._OrtGetTensorData=it.asm.hb).apply(null,arguments)},it._OrtReleaseTensor=function(){return(it._OrtReleaseTensor=it.asm.ib).apply(null,arguments)},it._OrtCreateRunOptions=function(){return(it._OrtCreateRunOptions=it.asm.jb).apply(null,arguments)},it._OrtAddRunConfigEntry=function(){return(it._OrtAddRunConfigEntry=it.asm.kb).apply(null,arguments)},it._OrtReleaseRunOptions=function(){return(it._OrtReleaseRunOptions=it.asm.lb).apply(null,arguments)},it._OrtRun=function(){return(it._OrtRun=it.asm.mb).apply(null,arguments)},it._OrtEndProfiling=function(){return(it._OrtEndProfiling=it.asm.nb).apply(null,arguments)};var Ir=it._pthread_self=function(){return(Ir=it._pthread_self=it.asm.ob).apply(null,arguments)},Dr=it._malloc=function(){return(Dr=it._malloc=it.asm.pb).apply(null,arguments)},Gr=it._free=function(){return(Gr=it._free=it.asm.qb).apply(null,arguments)},Wr=it._fflush=function(){return(Wr=it._fflush=it.asm.rb).apply(null,arguments)};it.__emscripten_tls_init=function(){return(it.__emscripten_tls_init=it.asm.sb).apply(null,arguments)};var qr=it.___funcs_on_exit=function(){return(qr=it.___funcs_on_exit=it.asm.tb).apply(null,arguments)},Hr=it.__emscripten_thread_init=function(){return(Hr=it.__emscripten_thread_init=it.asm.vb).apply(null,arguments)};it.__emscripten_thread_crashed=function(){return(it.__emscripten_thread_crashed=it.asm.wb).apply(null,arguments)};var Rr,Yr=it._emscripten_run_in_main_runtime_thread_js=function(){return(Yr=it._emscripten_run_in_main_runtime_thread_js=it.asm.xb).apply(null,arguments)},Kr=it.__emscripten_proxy_execute_task_queue=function(){return(Kr=it.__emscripten_proxy_execute_task_queue=it.asm.yb).apply(null,arguments)},Lr=it.__emscripten_thread_free_data=function(){return(Lr=it.__emscripten_thread_free_data=it.asm.zb).apply(null,arguments)},Xr=it.__emscripten_thread_exit=function(){return(Xr=it.__emscripten_thread_exit=it.asm.Ab).apply(null,arguments)},_n=it._setThrew=function(){return(_n=it._setThrew=it.asm.Bb).apply(null,arguments)},Qr=it._emscripten_stack_set_limits=function(){return(Qr=it._emscripten_stack_set_limits=it.asm.Cb).apply(null,arguments)},gn=it.stackSave=function(){return(gn=it.stackSave=it.asm.Db).apply(null,arguments)},mn=it.stackRestore=function(){return(mn=it.stackRestore=it.asm.Eb).apply(null,arguments)},jr=it.stackAlloc=function(){return(jr=it.stackAlloc=it.asm.Fb).apply(null,arguments)},$r=it.___cxa_can_catch=function(){return($r=it.___cxa_can_catch=it.asm.Gb).apply(null,arguments)},Jr=it.___cxa_is_pointer_type=function(){return(Jr=it.___cxa_is_pointer_type=it.asm.Hb).apply(null,arguments)},Zr=it.dynCall_j=function(){return(Zr=it.dynCall_j=it.asm.Ib).apply(null,arguments)},es=it.dynCall_iiiiij=function(){return(es=it.dynCall_iiiiij=it.asm.Jb).apply(null,arguments)},ts=it.dynCall_jii=function(){return(ts=it.dynCall_jii=it.asm.Kb).apply(null,arguments)},ns=it.dynCall_viiiiij=function(){return(ns=it.dynCall_viiiiij=it.asm.Lb).apply(null,arguments)},rs=it.dynCall_vjji=function(){return(rs=it.dynCall_vjji=it.asm.Mb).apply(null,arguments)},ss=it.dynCall_viiijjjii=function(){return(ss=it.dynCall_viiijjjii=it.asm.Nb).apply(null,arguments)},is=it.dynCall_iij=function(){return(is=it.dynCall_iij=it.asm.Ob).apply(null,arguments)},os=it.dynCall_ji=function(){return(os=it.dynCall_ji=it.asm.Pb).apply(null,arguments)},as=it.dynCall_iiiiiij=function(){return(as=it.dynCall_iiiiiij=it.asm.Qb).apply(null,arguments)},ls=it.dynCall_iiij=function(){return(ls=it.dynCall_iiij=it.asm.Rb).apply(null,arguments)};function us(){function Et(){if(!Rr&&(Rr=!0,it.calledRun=!0,!fn)&&(At||rr(Vn),rt(it),it.onRuntimeInitialized&&it.onRuntimeInitialized(),!At)){if(it.postRun)for(typeof it.postRun=="function"&&(it.postRun=[it.postRun]);it.postRun.length;){var kt=it.postRun.shift();Jn.unshift(kt)}rr(Jn)}}if(!(0<Un))if(At)rt(it),At||rr(Vn),postMessage({cmd:"loaded"});else{if(it.preRun)for(typeof it.preRun=="function"&&(it.preRun=[it.preRun]);it.preRun.length;)Wn();rr(zn),0<Un||(it.setStatus?(it.setStatus("Running..."),setTimeout(function(){setTimeout(function(){it.setStatus("")},1),Et()},1)):Et())}}if(it.UTF8ToString=Pn,it.stringToUTF8=function(Et,kt,Ct){return In(Et,dt(),kt,Ct)},it.lengthBytesUTF8=$n,it.keepRuntimeAlive=qn,it.wasmMemory=zt,it.stackSave=gn,it.stackRestore=mn,it.stackAlloc=jr,it.ExitStatus=Zn,it.PThread=an,Xn=function Et(){Rr||us(),Rr||(Xn=Et)},it.preInit)for(typeof it.preInit=="function"&&(it.preInit=[it.preInit]);0<it.preInit.length;)it.preInit.pop()();return us(),ot.ready});et.exports=st},932:(et,_e,tt)=>{var nt,st=(nt=(nt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(ot){var at,dt,ft;ot=ot||{},at||(at=ot!==void 0?ot:{}),at.ready=new Promise(function(Mt,Nt){dt=Mt,ft=Nt});var ht,ct,it,rt,lt,ut,pt=Object.assign({},at),gt="./this.program",mt=(Mt,Nt)=>{throw Nt},yt=typeof window=="object",bt=typeof importScripts=="function",wt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",xt="";wt?(xt=bt?tt(908).dirname(xt)+"/":"//",ut=()=>{lt||(rt=tt(1384),lt=tt(908))},ht=function(Mt,Nt){return ut(),Mt=lt.normalize(Mt),rt.readFileSync(Mt,Nt?void 0:"utf8")},it=Mt=>((Mt=ht(Mt,!0)).buffer||(Mt=new Uint8Array(Mt)),Mt),ct=(Mt,Nt,Bt)=>{ut(),Mt=lt.normalize(Mt),rt.readFile(Mt,function(Ut,Wt){Ut?Bt(Ut):Nt(Wt.buffer)})},1<process.argv.length&&(gt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Mt){if(!(Mt instanceof Vn))throw Mt}),process.on("unhandledRejection",function(Mt){throw Mt}),mt=(Mt,Nt)=>{if(vt||0<Cn)throw process.exitCode=Mt,Nt;Nt instanceof Vn||Pt("exiting due to exception: "+Nt),process.exit(Mt)},at.inspect=function(){return"[Emscripten Module object]"}):(yt||bt)&&(bt?xt=self.location.href:typeof document<"u"&&document.currentScript&&(xt=document.currentScript.src),nt&&(xt=nt),xt=xt.indexOf("blob:")!==0?xt.substr(0,xt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ht=Mt=>{var Nt=new XMLHttpRequest;return Nt.open("GET",Mt,!1),Nt.send(null),Nt.responseText},bt&&(it=Mt=>{var Nt=new XMLHttpRequest;return Nt.open("GET",Mt,!1),Nt.responseType="arraybuffer",Nt.send(null),new Uint8Array(Nt.response)}),ct=(Mt,Nt,Bt)=>{var Ut=new XMLHttpRequest;Ut.open("GET",Mt,!0),Ut.responseType="arraybuffer",Ut.onload=()=>{Ut.status==200||Ut.status==0&&Ut.response?Nt(Ut.response):Bt()},Ut.onerror=Bt,Ut.send(null)});var Tt,St=at.print||console.log.bind(console),Pt=at.printErr||console.warn.bind(console);Object.assign(at,pt),pt=null,at.thisProgram&&(gt=at.thisProgram),at.quit&&(mt=at.quit),at.wasmBinary&&(Tt=at.wasmBinary);var vt=at.noExitRuntime||!1;typeof WebAssembly!="object"&&kn("no native wasm support detected");var At,It,jt,Lt,Rt,$t,Ot=!1,Ft=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Vt(Mt,Nt,Bt){var Ut=(Nt>>>=0)+Bt;for(Bt=Nt;Mt[Bt]&&!(Bt>=Ut);)++Bt;if(16<Bt-Nt&&Mt.buffer&&Ft)return Ft.decode(Mt.subarray(Nt,Bt));for(Ut="";Nt<Bt;){var Wt=Mt[Nt++];if(128&Wt){var Kt=63&Mt[Nt++];if((224&Wt)==192)Ut+=String.fromCharCode((31&Wt)<<6|Kt);else{var Zt=63&Mt[Nt++];65536>(Wt=(240&Wt)==224?(15&Wt)<<12|Kt<<6|Zt:(7&Wt)<<18|Kt<<12|Zt<<6|63&Mt[Nt++])?Ut+=String.fromCharCode(Wt):(Wt-=65536,Ut+=String.fromCharCode(55296|Wt>>10,56320|1023&Wt))}}else Ut+=String.fromCharCode(Wt)}return Ut}function zt(Mt,Nt){return(Mt>>>=0)?Vt(Lt,Mt,Nt):""}function Xt(Mt,Nt,Bt,Ut){if(!(0<Ut))return 0;var Wt=Bt>>>=0;Ut=Bt+Ut-1;for(var Kt=0;Kt<Mt.length;++Kt){var Zt=Mt.charCodeAt(Kt);if(55296<=Zt&&57343>=Zt&&(Zt=65536+((1023&Zt)<<10)|1023&Mt.charCodeAt(++Kt)),127>=Zt){if(Bt>=Ut)break;Nt[Bt++>>>0]=Zt}else{if(2047>=Zt){if(Bt+1>=Ut)break;Nt[Bt++>>>0]=192|Zt>>6}else{if(65535>=Zt){if(Bt+2>=Ut)break;Nt[Bt++>>>0]=224|Zt>>12}else{if(Bt+3>=Ut)break;Nt[Bt++>>>0]=240|Zt>>18,Nt[Bt++>>>0]=128|Zt>>12&63}Nt[Bt++>>>0]=128|Zt>>6&63}Nt[Bt++>>>0]=128|63&Zt}}return Nt[Bt>>>0]=0,Bt-Wt}function Jt(Mt){for(var Nt=0,Bt=0;Bt<Mt.length;++Bt){var Ut=Mt.charCodeAt(Bt);127>=Ut?Nt++:2047>=Ut?Nt+=2:55296<=Ut&&57343>=Ut?(Nt+=4,++Bt):Nt+=3}return Nt}function nn(){var Mt=At.buffer;It=Mt,at.HEAP8=jt=new Int8Array(Mt),at.HEAP16=new Int16Array(Mt),at.HEAP32=Rt=new Int32Array(Mt),at.HEAPU8=Lt=new Uint8Array(Mt),at.HEAPU16=new Uint16Array(Mt),at.HEAPU32=$t=new Uint32Array(Mt),at.HEAPF32=new Float32Array(Mt),at.HEAPF64=new Float64Array(Mt)}var xn,dn=[],on=[],hn=[],fn=[],Cn=0;function Dn(){var Mt=at.preRun.shift();dn.unshift(Mt)}var Pn,In=0,$n=null;function kn(Mt){throw at.onAbort&&at.onAbort(Mt),Pt(Mt="Aborted("+Mt+")"),Ot=!0,Mt=new WebAssembly.RuntimeError(Mt+". Build with -sASSERTIONS for more info."),ft(Mt),Mt}function En(){return Pn.startsWith("data:application/octet-stream;base64,")}if(Pn="ort-wasm.wasm",!En()){var Bn=Pn;Pn=at.locateFile?at.locateFile(Bn,xt):xt+Bn}function zn(){var Mt=Pn;try{if(Mt==Pn&&Tt)return new Uint8Array(Tt);if(it)return it(Mt);throw"both async and sync fetching of the wasm failed"}catch(Nt){kn(Nt)}}function Vn(Mt){this.name="ExitStatus",this.message="Program terminated with exit("+Mt+")",this.status=Mt}function Kn(Mt){for(;0<Mt.length;)Mt.shift()(at)}var Jn=[],qn=0,Wn=0;function On(Mt){this.Db=Mt,this.zb=Mt-24,this.Ub=function(Nt){$t[this.zb+4>>2>>>0]=Nt},this.Eb=function(){return $t[this.zb+4>>2>>>0]},this.Sb=function(Nt){$t[this.zb+8>>2>>>0]=Nt},this.Wb=function(){return $t[this.zb+8>>2>>>0]},this.Tb=function(){Rt[this.zb>>2>>>0]=0},this.Ib=function(Nt){jt[this.zb+12>>0>>>0]=Nt?1:0},this.Pb=function(){return jt[this.zb+12>>0>>>0]!=0},this.Jb=function(Nt){jt[this.zb+13>>0>>>0]=Nt?1:0},this.Lb=function(){return jt[this.zb+13>>0>>>0]!=0},this.Rb=function(Nt,Bt){this.Fb(0),this.Ub(Nt),this.Sb(Bt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Rt[this.zb>>2>>>0]+=1},this.Xb=function(){var Nt=Rt[this.zb>>2>>>0];return Rt[this.zb>>2>>>0]=Nt-1,Nt===1},this.Fb=function(Nt){$t[this.zb+16>>2>>>0]=Nt},this.Ob=function(){return $t[this.zb+16>>2>>>0]},this.Qb=function(){if(gr(this.Eb()))return $t[this.Db>>2>>>0];var Nt=this.Ob();return Nt!==0?Nt:this.Db}}function Un(Mt){return ir(new On(Mt).zb)}var Xn=[];function bn(Mt){var Nt=Xn[Mt];return Nt||(Mt>=Xn.length&&(Xn.length=Mt+1),Xn[Mt]=Nt=xn.get(Mt)),Nt}function fr(Mt){var Nt=Jt(Mt)+1,Bt=Sn(Nt);return Bt&&Xt(Mt,jt,Bt,Nt),Bt}var ur={};function kr(){if(!Zn){var Mt,Nt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:gt||"./this.program"};for(Mt in ur)ur[Mt]===void 0?delete Nt[Mt]:Nt[Mt]=ur[Mt];var Bt=[];for(Mt in Nt)Bt.push(Mt+"="+Nt[Mt]);Zn=Bt}return Zn}var Zn,cr=[null,[],[]];function dr(Mt,Nt){var Bt=cr[Mt];Nt===0||Nt===10?((Mt===1?St:Pt)(Vt(Bt,0)),Bt.length=0):Bt.push(Nt)}var jn=0;function sr(Mt){return Mt%4==0&&(Mt%100!=0||Mt%400==0)}var an=[31,29,31,30,31,30,31,31,30,31,30,31],rr=[31,28,31,30,31,30,31,31,30,31,30,31];function Mr(Mt,Nt,Bt,Ut){function Wt(Ht,vn,Mn){for(Ht=typeof Ht=="number"?Ht.toString():Ht||"";Ht.length<vn;)Ht=Mn[0]+Ht;return Ht}function Kt(Ht,vn){return Wt(Ht,vn,"0")}function Zt(Ht,vn){function Mn(tr){return 0>tr?-1:0<tr?1:0}var Hn;return(Hn=Mn(Ht.getFullYear()-vn.getFullYear()))===0&&(Hn=Mn(Ht.getMonth()-vn.getMonth()))===0&&(Hn=Mn(Ht.getDate()-vn.getDate())),Hn}function rn(Ht){switch(Ht.getDay()){case 0:return new Date(Ht.getFullYear()-1,11,29);case 1:return Ht;case 2:return new Date(Ht.getFullYear(),0,3);case 3:return new Date(Ht.getFullYear(),0,2);case 4:return new Date(Ht.getFullYear(),0,1);case 5:return new Date(Ht.getFullYear()-1,11,31);case 6:return new Date(Ht.getFullYear()-1,11,30)}}function tn(Ht){var vn=Ht.Bb;for(Ht=new Date(new Date(Ht.Cb+1900,0,1).getTime());0<vn;){var Mn=Ht.getMonth(),Hn=(sr(Ht.getFullYear())?an:rr)[Mn];if(!(vn>Hn-Ht.getDate())){Ht.setDate(Ht.getDate()+vn);break}vn-=Hn-Ht.getDate()+1,Ht.setDate(1),11>Mn?Ht.setMonth(Mn+1):(Ht.setMonth(0),Ht.setFullYear(Ht.getFullYear()+1))}return Mn=new Date(Ht.getFullYear()+1,0,4),vn=rn(new Date(Ht.getFullYear(),0,4)),Mn=rn(Mn),0>=Zt(vn,Ht)?0>=Zt(Mn,Ht)?Ht.getFullYear()+1:Ht.getFullYear():Ht.getFullYear()-1}var pn=Rt[Ut+40>>2>>>0];for(var An in Ut={$b:Rt[Ut>>2>>>0],Zb:Rt[Ut+4>>2>>>0],Gb:Rt[Ut+8>>2>>>0],Kb:Rt[Ut+12>>2>>>0],Hb:Rt[Ut+16>>2>>>0],Cb:Rt[Ut+20>>2>>>0],Ab:Rt[Ut+24>>2>>>0],Bb:Rt[Ut+28>>2>>>0],bc:Rt[Ut+32>>2>>>0],Yb:Rt[Ut+36>>2>>>0],ac:pn?zt(pn):""},Bt=zt(Bt),pn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Bt=Bt.replace(new RegExp(An,"g"),pn[An]);var Ln="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Fn="January February March April May June July August September October November December".split(" ");for(An in pn={"%a":function(Ht){return Ln[Ht.Ab].substring(0,3)},"%A":function(Ht){return Ln[Ht.Ab]},"%b":function(Ht){return Fn[Ht.Hb].substring(0,3)},"%B":function(Ht){return Fn[Ht.Hb]},"%C":function(Ht){return Kt((Ht.Cb+1900)/100|0,2)},"%d":function(Ht){return Kt(Ht.Kb,2)},"%e":function(Ht){return Wt(Ht.Kb,2," ")},"%g":function(Ht){return tn(Ht).toString().substring(2)},"%G":function(Ht){return tn(Ht)},"%H":function(Ht){return Kt(Ht.Gb,2)},"%I":function(Ht){return(Ht=Ht.Gb)==0?Ht=12:12<Ht&&(Ht-=12),Kt(Ht,2)},"%j":function(Ht){for(var vn=0,Mn=0;Mn<=Ht.Hb-1;vn+=(sr(Ht.Cb+1900)?an:rr)[Mn++]);return Kt(Ht.Kb+vn,3)},"%m":function(Ht){return Kt(Ht.Hb+1,2)},"%M":function(Ht){return Kt(Ht.Zb,2)},"%n":function(){return`
`},"%p":function(Ht){return 0<=Ht.Gb&&12>Ht.Gb?"AM":"PM"},"%S":function(Ht){return Kt(Ht.$b,2)},"%t":function(){return"	"},"%u":function(Ht){return Ht.Ab||7},"%U":function(Ht){return Kt(Math.floor((Ht.Bb+7-Ht.Ab)/7),2)},"%V":function(Ht){var vn=Math.floor((Ht.Bb+7-(Ht.Ab+6)%7)/7);if(2>=(Ht.Ab+371-Ht.Bb-2)%7&&vn++,vn)vn==53&&((Mn=(Ht.Ab+371-Ht.Bb)%7)==4||Mn==3&&sr(Ht.Cb)||(vn=1));else{vn=52;var Mn=(Ht.Ab+7-Ht.Bb-1)%7;(Mn==4||Mn==5&&sr(Ht.Cb%400-1))&&vn++}return Kt(vn,2)},"%w":function(Ht){return Ht.Ab},"%W":function(Ht){return Kt(Math.floor((Ht.Bb+7-(Ht.Ab+6)%7)/7),2)},"%y":function(Ht){return(Ht.Cb+1900).toString().substring(2)},"%Y":function(Ht){return Ht.Cb+1900},"%z":function(Ht){var vn=0<=(Ht=Ht.Yb);return Ht=Math.abs(Ht)/60,(vn?"+":"-")+("0000"+(Ht/60*100+Ht%60)).slice(-4)},"%Z":function(Ht){return Ht.ac},"%%":function(){return"%"}},Bt=Bt.replace(/%%/g,"\0\0"),pn)Bt.includes(An)&&(Bt=Bt.replace(new RegExp(An,"g"),pn[An](Ut)));return An=function(Ht){var vn=Array(Jt(Ht)+1);return Xt(Ht,vn,0,vn.length),vn}(Bt=Bt.replace(/\0\0/g,"%")),An.length>Nt?0:(jt.set(An,Mt>>>0),An.length-1)}var Or={a:function(Mt){return Sn(Mt+24)+24},m:function(Mt){return(Mt=new On(Mt)).Pb()||(Mt.Ib(!0),qn--),Mt.Jb(!1),Jn.push(Mt),Mt.Nb(),Mt.Qb()},ia:function(Mt){throw Pt("Unexpected exception thrown, this is not properly supported - aborting"),Ot=!0,Mt},w:function(){cn(0);var Mt=Jn.pop();if(Mt.Xb()&&!Mt.Lb()){var Nt=Mt.Wb();Nt&&bn(Nt)(Mt.Db),Un(Mt.Db)}Wn=0},d:function(){var Mt=Wn;if(!Mt)return jn=0;var Nt=new On(Mt);Nt.Fb(Mt);var Bt=Nt.Eb();if(!Bt)return jn=0,Mt;for(var Ut=Array.prototype.slice.call(arguments),Wt=0;Wt<Ut.length;Wt++){var Kt=Ut[Wt];if(Kt===0||Kt===Bt)break;if(ar(Kt,Bt,Nt.zb+16))return jn=Kt,Mt}return jn=Bt,Mt},k:function(){var Mt=Wn;if(!Mt)return jn=0;var Nt=new On(Mt);Nt.Fb(Mt);var Bt=Nt.Eb();if(!Bt)return jn=0,Mt;for(var Ut=Array.prototype.slice.call(arguments),Wt=0;Wt<Ut.length;Wt++){var Kt=Ut[Wt];if(Kt===0||Kt===Bt)break;if(ar(Kt,Bt,Nt.zb+16))return jn=Kt,Mt}return jn=Bt,Mt},g:function(){var Mt=Wn;if(!Mt)return jn=0;var Nt=new On(Mt);Nt.Fb(Mt);var Bt=Nt.Eb();if(!Bt)return jn=0,Mt;for(var Ut=Array.prototype.slice.call(arguments),Wt=0;Wt<Ut.length;Wt++){var Kt=Ut[Wt];if(Kt===0||Kt===Bt)break;if(ar(Kt,Bt,Nt.zb+16))return jn=Kt,Mt}return jn=Bt,Mt},s:Un,L:function(){var Mt=Jn.pop();Mt||kn("no exception to throw");var Nt=Mt.Db;throw Mt.Lb()||(Jn.push(Mt),Mt.Jb(!0),Mt.Ib(!1),qn++),Wn=Nt,Nt},b:function(Mt,Nt,Bt){throw new On(Mt).Rb(Nt,Bt),Wn=Mt,qn++,Mt},la:function(){return qn},i:function(Mt){throw Wn||(Wn=Mt),Mt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){kn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){kn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Mt,Nt){Mt=new Date(1e3*($t[Mt>>>2]+4294967296*Rt[Mt+4>>>2])),Rt[Nt>>2>>>0]=Mt.getUTCSeconds(),Rt[Nt+4>>2>>>0]=Mt.getUTCMinutes(),Rt[Nt+8>>2>>>0]=Mt.getUTCHours(),Rt[Nt+12>>2>>>0]=Mt.getUTCDate(),Rt[Nt+16>>2>>>0]=Mt.getUTCMonth(),Rt[Nt+20>>2>>>0]=Mt.getUTCFullYear()-1900,Rt[Nt+24>>2>>>0]=Mt.getUTCDay(),Rt[Nt+28>>2>>>0]=(Mt.getTime()-Date.UTC(Mt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Mt,Nt){Mt=new Date(1e3*($t[Mt>>>2]+4294967296*Rt[Mt+4>>>2])),Rt[Nt>>2>>>0]=Mt.getSeconds(),Rt[Nt+4>>2>>>0]=Mt.getMinutes(),Rt[Nt+8>>2>>>0]=Mt.getHours(),Rt[Nt+12>>2>>>0]=Mt.getDate(),Rt[Nt+16>>2>>>0]=Mt.getMonth(),Rt[Nt+20>>2>>>0]=Mt.getFullYear()-1900,Rt[Nt+24>>2>>>0]=Mt.getDay();var Bt=new Date(Mt.getFullYear(),0,1);Rt[Nt+28>>2>>>0]=(Mt.getTime()-Bt.getTime())/864e5|0,Rt[Nt+36>>2>>>0]=-60*Mt.getTimezoneOffset();var Ut=new Date(Mt.getFullYear(),6,1).getTimezoneOffset();Bt=Bt.getTimezoneOffset(),Rt[Nt+32>>2>>>0]=0|(Ut!=Bt&&Mt.getTimezoneOffset()==Math.min(Bt,Ut))},Fa:function(Mt){var Nt=new Date(Rt[Mt+20>>2>>>0]+1900,Rt[Mt+16>>2>>>0],Rt[Mt+12>>2>>>0],Rt[Mt+8>>2>>>0],Rt[Mt+4>>2>>>0],Rt[Mt>>2>>>0],0),Bt=Rt[Mt+32>>2>>>0],Ut=Nt.getTimezoneOffset(),Wt=new Date(Nt.getFullYear(),0,1),Kt=new Date(Nt.getFullYear(),6,1).getTimezoneOffset(),Zt=Wt.getTimezoneOffset(),rn=Math.min(Zt,Kt);return 0>Bt?Rt[Mt+32>>2>>>0]=+(Kt!=Zt&&rn==Ut):0<Bt!=(rn==Ut)&&(Kt=Math.max(Zt,Kt),Nt.setTime(Nt.getTime()+6e4*((0<Bt?rn:Kt)-Ut))),Rt[Mt+24>>2>>>0]=Nt.getDay(),Rt[Mt+28>>2>>>0]=(Nt.getTime()-Wt.getTime())/864e5|0,Rt[Mt>>2>>>0]=Nt.getSeconds(),Rt[Mt+4>>2>>>0]=Nt.getMinutes(),Rt[Mt+8>>2>>>0]=Nt.getHours(),Rt[Mt+12>>2>>>0]=Nt.getDate(),Rt[Mt+16>>2>>>0]=Nt.getMonth(),Nt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Mt(Nt,Bt,Ut){Mt.Vb||(Mt.Vb=!0,function(Wt,Kt,Zt){function rn(Fn){return(Fn=Fn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Fn[1]:"GMT"}var tn=new Date().getFullYear(),pn=new Date(tn,0,1),An=new Date(tn,6,1);tn=pn.getTimezoneOffset();var Ln=An.getTimezoneOffset();Rt[Wt>>2>>>0]=60*Math.max(tn,Ln),Rt[Kt>>2>>>0]=+(tn!=Ln),Wt=rn(pn),Kt=rn(An),Wt=fr(Wt),Kt=fr(Kt),Ln<tn?($t[Zt>>2>>>0]=Wt,$t[Zt+4>>2>>>0]=Kt):($t[Zt>>2>>>0]=Kt,$t[Zt+4>>2>>>0]=Wt)}(Nt,Bt,Ut))},B:function(){kn("")},ma:function(){return 4294901760},I:wt?()=>{var Mt=process.hrtime();return 1e3*Mt[0]+Mt[1]/1e6}:()=>performance.now(),xa:function(Mt,Nt,Bt){Lt.copyWithin(Mt>>>0,Nt>>>0,Nt+Bt>>>0)},G:function(Mt){var Nt=Lt.length;if(4294901760<(Mt>>>=0))return!1;for(var Bt=1;4>=Bt;Bt*=2){var Ut=Nt*(1+.2/Bt);Ut=Math.min(Ut,Mt+100663296);var Wt=Math;Ut=Math.max(Mt,Ut),Wt=Wt.min.call(Wt,4294901760,Ut+(65536-Ut%65536)%65536);e:{try{At.grow(Wt-It.byteLength+65535>>>16),nn();var Kt=1;break e}catch{}Kt=void 0}if(Kt)return!0}return!1},va:function(Mt,Nt){var Bt=0;return kr().forEach(function(Ut,Wt){var Kt=Nt+Bt;for(Wt=$t[Mt+4*Wt>>2>>>0]=Kt,Kt=0;Kt<Ut.length;++Kt)jt[Wt++>>0>>>0]=Ut.charCodeAt(Kt);jt[Wt>>0>>>0]=0,Bt+=Ut.length+1}),0},wa:function(Mt,Nt){var Bt=kr();$t[Mt>>2>>>0]=Bt.length;var Ut=0;return Bt.forEach(function(Wt){Ut+=Wt.length+1}),$t[Nt>>2>>>0]=Ut,0},ba:function(Mt){vt||0<Cn||(or(),Kn(hn),pr(0),cr[1].length&&dr(1,10),cr[2].length&&dr(2,10)),vt||0<Cn||(at.onExit&&at.onExit(Mt),Ot=!0),mt(Mt,new Vn(Mt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Mt,Nt,Bt,Ut){for(var Wt=0,Kt=0;Kt<Bt;Kt++){var Zt=$t[Nt>>2>>>0],rn=$t[Nt+4>>2>>>0];Nt+=8;for(var tn=0;tn<rn;tn++)dr(Mt,Lt[Zt+tn>>>0]);Wt+=rn}return $t[Ut>>2>>>0]=Wt,0},c:function(){return jn},ja:function Mt(Nt,Bt){Mt.Mb||(Mt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Wt=new Uint8Array(1);return()=>(crypto.getRandomValues(Wt),Wt[0])}if(wt)try{var Kt=tt(Object(function(){var Zt=new Error("Cannot find module 'crypto'");throw Zt.code="MODULE_NOT_FOUND",Zt}()));return()=>Kt.randomBytes(1)[0]}catch{}return()=>kn("randomDevice")}());for(var Ut=0;Ut<Bt;Ut++)jt[Nt+Ut>>0>>>0]=Mt.Mb();return 0},ea:function(Mt,Nt,Bt){var Ut=ln();try{return bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},fa:function(Mt,Nt,Bt){var Ut=ln();try{return bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},J:function(Mt){var Nt=ln();try{return bn(Mt)()}catch(Bt){if(un(Nt),Bt!==Bt+0)throw Bt;cn(1,0)}},e:function(Mt,Nt){var Bt=ln();try{return bn(Mt)(Nt)}catch(Ut){if(un(Bt),Ut!==Ut+0)throw Ut;cn(1,0)}},N:function(Mt,Nt,Bt){var Ut=ln();try{return bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},O:function(Mt,Nt,Bt){var Ut=ln();try{return bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},j:function(Mt,Nt,Bt){var Ut=ln();try{return bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},o:function(Mt,Nt,Bt,Ut){var Wt=ln();try{return bn(Mt)(Nt,Bt,Ut)}catch(Kt){if(un(Wt),Kt!==Kt+0)throw Kt;cn(1,0)}},p:function(Mt,Nt,Bt,Ut,Wt){var Kt=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt)}catch(Zt){if(un(Kt),Zt!==Zt+0)throw Zt;cn(1,0)}},M:function(Mt,Nt,Bt,Ut,Wt,Kt){var Zt=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt,Kt)}catch(rn){if(un(Zt),rn!==rn+0)throw rn;cn(1,0)}},r:function(Mt,Nt,Bt,Ut,Wt,Kt){var Zt=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt,Kt)}catch(rn){if(un(Zt),rn!==rn+0)throw rn;cn(1,0)}},v:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt){var rn=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt)}catch(tn){if(un(rn),tn!==tn+0)throw tn;cn(1,0)}},K:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn){var tn=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn)}catch(pn){if(un(tn),pn!==pn+0)throw pn;cn(1,0)}},D:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln){var Fn=ln();try{return bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln)}catch(Ht){if(un(Fn),Ht!==Ht+0)throw Ht;cn(1,0)}},X:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn){var tn=ln();try{return Er(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn)}catch(pn){if(un(tn),pn!==pn+0)throw pn;cn(1,0)}},V:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt){var rn=ln();try{return yr(Mt,Nt,Bt,Ut,Wt,Kt,Zt)}catch(tn){if(un(rn),tn!==tn+0)throw tn;cn(1,0)}},U:function(Mt,Nt,Bt,Ut,Wt){var Kt=ln();try{return Pr(Mt,Nt,Bt,Ut,Wt)}catch(Zt){if(un(Kt),Zt!==Zt+0)throw Zt;cn(1,0)}},Z:function(Mt,Nt,Bt,Ut){var Wt=ln();try{return Tr(Mt,Nt,Bt,Ut)}catch(Kt){if(un(Wt),Kt!==Kt+0)throw Kt;cn(1,0)}},W:function(Mt){var Nt=ln();try{return _r(Mt)}catch(Bt){if(un(Nt),Bt!==Bt+0)throw Bt;cn(1,0)}},Y:function(Mt,Nt){var Bt=ln();try{return Sr(Mt,Nt)}catch(Ut){if(un(Bt),Ut!==Ut+0)throw Ut;cn(1,0)}},T:function(Mt,Nt,Bt){var Ut=ln();try{return br(Mt,Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},f:function(Mt){var Nt=ln();try{bn(Mt)()}catch(Bt){if(un(Nt),Bt!==Bt+0)throw Bt;cn(1,0)}},q:function(Mt,Nt){var Bt=ln();try{bn(Mt)(Nt)}catch(Ut){if(un(Bt),Ut!==Ut+0)throw Ut;cn(1,0)}},h:function(Mt,Nt,Bt){var Ut=ln();try{bn(Mt)(Nt,Bt)}catch(Wt){if(un(Ut),Wt!==Wt+0)throw Wt;cn(1,0)}},da:function(Mt,Nt,Bt,Ut){var Wt=ln();try{bn(Mt)(Nt,Bt,Ut)}catch(Kt){if(un(Wt),Kt!==Kt+0)throw Kt;cn(1,0)}},l:function(Mt,Nt,Bt,Ut){var Wt=ln();try{bn(Mt)(Nt,Bt,Ut)}catch(Kt){if(un(Wt),Kt!==Kt+0)throw Kt;cn(1,0)}},t:function(Mt,Nt,Bt,Ut,Wt){var Kt=ln();try{bn(Mt)(Nt,Bt,Ut,Wt)}catch(Zt){if(un(Kt),Zt!==Zt+0)throw Zt;cn(1,0)}},u:function(Mt,Nt,Bt,Ut,Wt,Kt){var Zt=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt)}catch(rn){if(un(Zt),rn!==rn+0)throw rn;cn(1,0)}},x:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt){var rn=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt)}catch(tn){if(un(rn),tn!==tn+0)throw tn;cn(1,0)}},z:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn){var tn=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn)}catch(pn){if(un(tn),pn!==pn+0)throw pn;cn(1,0)}},ga:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn){var pn=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn,tn)}catch(An){if(un(pn),An!==An+0)throw An;cn(1,0)}},A:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An){var Ln=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An)}catch(Fn){if(un(Ln),Fn!==Fn+0)throw Fn;cn(1,0)}},C:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln,Fn,Ht,vn,Mn){var Hn=ln();try{bn(Mt)(Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln,Fn,Ht,vn,Mn)}catch(tr){if(un(Hn),tr!==tr+0)throw tr;cn(1,0)}},aa:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn){var tn=ln();try{wr(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn)}catch(pn){if(un(tn),pn!==pn+0)throw pn;cn(1,0)}},_:function(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln){var Fn=ln();try{vr(Mt,Nt,Bt,Ut,Wt,Kt,Zt,rn,tn,pn,An,Ln)}catch(Ht){if(un(Fn),Ht!==Ht+0)throw Ht;cn(1,0)}},$:function(Mt,Nt,Bt,Ut,Wt,Kt){var Zt=ln();try{xr(Mt,Nt,Bt,Ut,Wt,Kt)}catch(rn){if(un(Zt),rn!==rn+0)throw rn;cn(1,0)}},n:function(Mt){return Mt},F:function(Mt){jn=Mt},ha:Mr,y:function(Mt,Nt,Bt,Ut){return Mr(Mt,Nt,Bt,Ut)}};(function(){function Mt(Wt){at.asm=Wt.exports,At=at.asm.Ka,nn(),xn=at.asm.ib,on.unshift(at.asm.La),In--,at.monitorRunDependencies&&at.monitorRunDependencies(In),In==0&&$n&&(Wt=$n,$n=null,Wt())}function Nt(Wt){Mt(Wt.instance)}function Bt(Wt){return function(){if(!Tt&&(yt||bt)){if(typeof fetch=="function"&&!Pn.startsWith("file://"))return fetch(Pn,{credentials:"same-origin"}).then(function(Kt){if(!Kt.ok)throw"failed to load wasm binary file at '"+Pn+"'";return Kt.arrayBuffer()}).catch(function(){return zn()});if(ct)return new Promise(function(Kt,Zt){ct(Pn,function(rn){Kt(new Uint8Array(rn))},Zt)})}return Promise.resolve().then(function(){return zn()})}().then(function(Kt){return WebAssembly.instantiate(Kt,Ut)}).then(function(Kt){return Kt}).then(Wt,function(Kt){Pt("failed to asynchronously prepare wasm: "+Kt),kn(Kt)})}var Ut={a:Or};if(In++,at.monitorRunDependencies&&at.monitorRunDependencies(In),at.instantiateWasm)try{return at.instantiateWasm(Ut,Mt)}catch(Wt){return Pt("Module.instantiateWasm callback failed with error: "+Wt),!1}(Tt||typeof WebAssembly.instantiateStreaming!="function"||En()||Pn.startsWith("file://")||wt||typeof fetch!="function"?Bt(Nt):fetch(Pn,{credentials:"same-origin"}).then(function(Wt){return WebAssembly.instantiateStreaming(Wt,Ut).then(Nt,function(Kt){return Pt("wasm streaming compile failed: "+Kt),Pt("falling back to ArrayBuffer instantiation"),Bt(Nt)})})).catch(ft)})(),at.___wasm_call_ctors=function(){return(at.___wasm_call_ctors=at.asm.La).apply(null,arguments)},at._OrtInit=function(){return(at._OrtInit=at.asm.Ma).apply(null,arguments)},at._OrtCreateSessionOptions=function(){return(at._OrtCreateSessionOptions=at.asm.Na).apply(null,arguments)},at._OrtAppendExecutionProvider=function(){return(at._OrtAppendExecutionProvider=at.asm.Oa).apply(null,arguments)},at._OrtAddSessionConfigEntry=function(){return(at._OrtAddSessionConfigEntry=at.asm.Pa).apply(null,arguments)},at._OrtReleaseSessionOptions=function(){return(at._OrtReleaseSessionOptions=at.asm.Qa).apply(null,arguments)},at._OrtCreateSession=function(){return(at._OrtCreateSession=at.asm.Ra).apply(null,arguments)},at._OrtReleaseSession=function(){return(at._OrtReleaseSession=at.asm.Sa).apply(null,arguments)},at._OrtGetInputCount=function(){return(at._OrtGetInputCount=at.asm.Ta).apply(null,arguments)},at._OrtGetOutputCount=function(){return(at._OrtGetOutputCount=at.asm.Ua).apply(null,arguments)},at._OrtGetInputName=function(){return(at._OrtGetInputName=at.asm.Va).apply(null,arguments)},at._OrtGetOutputName=function(){return(at._OrtGetOutputName=at.asm.Wa).apply(null,arguments)},at._OrtFree=function(){return(at._OrtFree=at.asm.Xa).apply(null,arguments)},at._OrtCreateTensor=function(){return(at._OrtCreateTensor=at.asm.Ya).apply(null,arguments)},at._OrtGetTensorData=function(){return(at._OrtGetTensorData=at.asm.Za).apply(null,arguments)},at._OrtReleaseTensor=function(){return(at._OrtReleaseTensor=at.asm._a).apply(null,arguments)},at._OrtCreateRunOptions=function(){return(at._OrtCreateRunOptions=at.asm.$a).apply(null,arguments)},at._OrtAddRunConfigEntry=function(){return(at._OrtAddRunConfigEntry=at.asm.ab).apply(null,arguments)},at._OrtReleaseRunOptions=function(){return(at._OrtReleaseRunOptions=at.asm.bb).apply(null,arguments)},at._OrtRun=function(){return(at._OrtRun=at.asm.cb).apply(null,arguments)},at._OrtEndProfiling=function(){return(at._OrtEndProfiling=at.asm.db).apply(null,arguments)};var er,Sn=at._malloc=function(){return(Sn=at._malloc=at.asm.eb).apply(null,arguments)},ir=at._free=function(){return(ir=at._free=at.asm.fb).apply(null,arguments)},pr=at._fflush=function(){return(pr=at._fflush=at.asm.gb).apply(null,arguments)},or=at.___funcs_on_exit=function(){return(or=at.___funcs_on_exit=at.asm.hb).apply(null,arguments)},cn=at._setThrew=function(){return(cn=at._setThrew=at.asm.jb).apply(null,arguments)},ln=at.stackSave=function(){return(ln=at.stackSave=at.asm.kb).apply(null,arguments)},un=at.stackRestore=function(){return(un=at.stackRestore=at.asm.lb).apply(null,arguments)},mr=at.stackAlloc=function(){return(mr=at.stackAlloc=at.asm.mb).apply(null,arguments)},ar=at.___cxa_can_catch=function(){return(ar=at.___cxa_can_catch=at.asm.nb).apply(null,arguments)},gr=at.___cxa_is_pointer_type=function(){return(gr=at.___cxa_is_pointer_type=at.asm.ob).apply(null,arguments)},_r=at.dynCall_j=function(){return(_r=at.dynCall_j=at.asm.pb).apply(null,arguments)},yr=at.dynCall_iiiiij=function(){return(yr=at.dynCall_iiiiij=at.asm.qb).apply(null,arguments)},br=at.dynCall_jii=function(){return(br=at.dynCall_jii=at.asm.rb).apply(null,arguments)},wr=at.dynCall_viiiiij=function(){return(wr=at.dynCall_viiiiij=at.asm.sb).apply(null,arguments)},xr=at.dynCall_vjji=function(){return(xr=at.dynCall_vjji=at.asm.tb).apply(null,arguments)},vr=at.dynCall_viiijjjii=function(){return(vr=at.dynCall_viiijjjii=at.asm.ub).apply(null,arguments)},Tr=at.dynCall_iij=function(){return(Tr=at.dynCall_iij=at.asm.vb).apply(null,arguments)},Sr=at.dynCall_ji=function(){return(Sr=at.dynCall_ji=at.asm.wb).apply(null,arguments)},Er=at.dynCall_iiiiiij=function(){return(Er=at.dynCall_iiiiiij=at.asm.xb).apply(null,arguments)},Pr=at.dynCall_iiij=function(){return(Pr=at.dynCall_iiij=at.asm.yb).apply(null,arguments)};function Ar(){function Mt(){if(!er&&(er=!0,at.calledRun=!0,!Ot)){if(Kn(on),dt(at),at.onRuntimeInitialized&&at.onRuntimeInitialized(),at.postRun)for(typeof at.postRun=="function"&&(at.postRun=[at.postRun]);at.postRun.length;){var Nt=at.postRun.shift();fn.unshift(Nt)}Kn(fn)}}if(!(0<In)){if(at.preRun)for(typeof at.preRun=="function"&&(at.preRun=[at.preRun]);at.preRun.length;)Dn();Kn(dn),0<In||(at.setStatus?(at.setStatus("Running..."),setTimeout(function(){setTimeout(function(){at.setStatus("")},1),Mt()},1)):Mt())}}if(at.UTF8ToString=zt,at.stringToUTF8=function(Mt,Nt,Bt){return Xt(Mt,Lt,Nt,Bt)},at.lengthBytesUTF8=Jt,at.stackSave=ln,at.stackRestore=un,at.stackAlloc=mr,$n=function Mt(){er||Ar(),er||($n=Mt)},at.preInit)for(typeof at.preInit=="function"&&(at.preInit=[at.preInit]);0<at.preInit.length;)at.preInit.pop()();return Ar(),ot.ready});et.exports=st},4537:et=>{et.exports=function(_e,tt){for(var nt=new Array(arguments.length-1),st=0,ot=2,at=!0;ot<arguments.length;)nt[st++]=arguments[ot++];return new Promise(function(dt,ft){nt[st]=function(ht){if(at)if(at=!1,ht)ft(ht);else{for(var ct=new Array(arguments.length-1),it=0;it<ct.length;)ct[it++]=arguments[it];dt.apply(null,ct)}};try{_e.apply(tt||null,nt)}catch(ht){at&&(at=!1,ft(ht))}})}},7419:(et,_e)=>{var tt=_e;tt.length=function(dt){var ft=dt.length;if(!ft)return 0;for(var ht=0;--ft%4>1&&dt.charAt(ft)==="=";)++ht;return Math.ceil(3*dt.length)/4-ht};for(var nt=new Array(64),st=new Array(123),ot=0;ot<64;)st[nt[ot]=ot<26?ot+65:ot<52?ot+71:ot<62?ot-4:ot-59|43]=ot++;tt.encode=function(dt,ft,ht){for(var ct,it=null,rt=[],lt=0,ut=0;ft<ht;){var pt=dt[ft++];switch(ut){case 0:rt[lt++]=nt[pt>>2],ct=(3&pt)<<4,ut=1;break;case 1:rt[lt++]=nt[ct|pt>>4],ct=(15&pt)<<2,ut=2;break;case 2:rt[lt++]=nt[ct|pt>>6],rt[lt++]=nt[63&pt],ut=0}lt>8191&&((it||(it=[])).push(String.fromCharCode.apply(String,rt)),lt=0)}return ut&&(rt[lt++]=nt[ct],rt[lt++]=61,ut===1&&(rt[lt++]=61)),it?(lt&&it.push(String.fromCharCode.apply(String,rt.slice(0,lt))),it.join("")):String.fromCharCode.apply(String,rt.slice(0,lt))};var at="invalid encoding";tt.decode=function(dt,ft,ht){for(var ct,it=ht,rt=0,lt=0;lt<dt.length;){var ut=dt.charCodeAt(lt++);if(ut===61&&rt>1)break;if((ut=st[ut])===void 0)throw Error(at);switch(rt){case 0:ct=ut,rt=1;break;case 1:ft[ht++]=ct<<2|(48&ut)>>4,ct=ut,rt=2;break;case 2:ft[ht++]=(15&ct)<<4|(60&ut)>>2,ct=ut,rt=3;break;case 3:ft[ht++]=(3&ct)<<6|ut,rt=0}}if(rt===1)throw Error(at);return ht-it},tt.test=function(dt){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(dt)}},9211:et=>{function _e(){this._listeners={}}et.exports=_e,_e.prototype.on=function(tt,nt,st){return(this._listeners[tt]||(this._listeners[tt]=[])).push({fn:nt,ctx:st||this}),this},_e.prototype.off=function(tt,nt){if(tt===void 0)this._listeners={};else if(nt===void 0)this._listeners[tt]=[];else for(var st=this._listeners[tt],ot=0;ot<st.length;)st[ot].fn===nt?st.splice(ot,1):++ot;return this},_e.prototype.emit=function(tt){var nt=this._listeners[tt];if(nt){for(var st=[],ot=1;ot<arguments.length;)st.push(arguments[ot++]);for(ot=0;ot<nt.length;)nt[ot].fn.apply(nt[ot++].ctx,st)}return this}},945:et=>{function _e(at){return typeof Float32Array<"u"?function(){var dt=new Float32Array([-0]),ft=new Uint8Array(dt.buffer),ht=ft[3]===128;function ct(ut,pt,gt){dt[0]=ut,pt[gt]=ft[0],pt[gt+1]=ft[1],pt[gt+2]=ft[2],pt[gt+3]=ft[3]}function it(ut,pt,gt){dt[0]=ut,pt[gt]=ft[3],pt[gt+1]=ft[2],pt[gt+2]=ft[1],pt[gt+3]=ft[0]}function rt(ut,pt){return ft[0]=ut[pt],ft[1]=ut[pt+1],ft[2]=ut[pt+2],ft[3]=ut[pt+3],dt[0]}function lt(ut,pt){return ft[3]=ut[pt],ft[2]=ut[pt+1],ft[1]=ut[pt+2],ft[0]=ut[pt+3],dt[0]}at.writeFloatLE=ht?ct:it,at.writeFloatBE=ht?it:ct,at.readFloatLE=ht?rt:lt,at.readFloatBE=ht?lt:rt}():function(){function dt(ht,ct,it,rt){var lt=ct<0?1:0;if(lt&&(ct=-ct),ct===0)ht(1/ct>0?0:2147483648,it,rt);else if(isNaN(ct))ht(2143289344,it,rt);else if(ct>34028234663852886e22)ht((lt<<31|2139095040)>>>0,it,rt);else if(ct<11754943508222875e-54)ht((lt<<31|Math.round(ct/1401298464324817e-60))>>>0,it,rt);else{var ut=Math.floor(Math.log(ct)/Math.LN2);ht((lt<<31|ut+127<<23|8388607&Math.round(ct*Math.pow(2,-ut)*8388608))>>>0,it,rt)}}function ft(ht,ct,it){var rt=ht(ct,it),lt=2*(rt>>31)+1,ut=rt>>>23&255,pt=8388607&rt;return ut===255?pt?NaN:lt*(1/0):ut===0?1401298464324817e-60*lt*pt:lt*Math.pow(2,ut-150)*(pt+8388608)}at.writeFloatLE=dt.bind(null,tt),at.writeFloatBE=dt.bind(null,nt),at.readFloatLE=ft.bind(null,st),at.readFloatBE=ft.bind(null,ot)}(),typeof Float64Array<"u"?function(){var dt=new Float64Array([-0]),ft=new Uint8Array(dt.buffer),ht=ft[7]===128;function ct(ut,pt,gt){dt[0]=ut,pt[gt]=ft[0],pt[gt+1]=ft[1],pt[gt+2]=ft[2],pt[gt+3]=ft[3],pt[gt+4]=ft[4],pt[gt+5]=ft[5],pt[gt+6]=ft[6],pt[gt+7]=ft[7]}function it(ut,pt,gt){dt[0]=ut,pt[gt]=ft[7],pt[gt+1]=ft[6],pt[gt+2]=ft[5],pt[gt+3]=ft[4],pt[gt+4]=ft[3],pt[gt+5]=ft[2],pt[gt+6]=ft[1],pt[gt+7]=ft[0]}function rt(ut,pt){return ft[0]=ut[pt],ft[1]=ut[pt+1],ft[2]=ut[pt+2],ft[3]=ut[pt+3],ft[4]=ut[pt+4],ft[5]=ut[pt+5],ft[6]=ut[pt+6],ft[7]=ut[pt+7],dt[0]}function lt(ut,pt){return ft[7]=ut[pt],ft[6]=ut[pt+1],ft[5]=ut[pt+2],ft[4]=ut[pt+3],ft[3]=ut[pt+4],ft[2]=ut[pt+5],ft[1]=ut[pt+6],ft[0]=ut[pt+7],dt[0]}at.writeDoubleLE=ht?ct:it,at.writeDoubleBE=ht?it:ct,at.readDoubleLE=ht?rt:lt,at.readDoubleBE=ht?lt:rt}():function(){function dt(ht,ct,it,rt,lt,ut){var pt=rt<0?1:0;if(pt&&(rt=-rt),rt===0)ht(0,lt,ut+ct),ht(1/rt>0?0:2147483648,lt,ut+it);else if(isNaN(rt))ht(0,lt,ut+ct),ht(2146959360,lt,ut+it);else if(rt>17976931348623157e292)ht(0,lt,ut+ct),ht((pt<<31|2146435072)>>>0,lt,ut+it);else{var gt;if(rt<22250738585072014e-324)ht((gt=rt/5e-324)>>>0,lt,ut+ct),ht((pt<<31|gt/4294967296)>>>0,lt,ut+it);else{var mt=Math.floor(Math.log(rt)/Math.LN2);mt===1024&&(mt=1023),ht(4503599627370496*(gt=rt*Math.pow(2,-mt))>>>0,lt,ut+ct),ht((pt<<31|mt+1023<<20|1048576*gt&1048575)>>>0,lt,ut+it)}}}function ft(ht,ct,it,rt,lt){var ut=ht(rt,lt+ct),pt=ht(rt,lt+it),gt=2*(pt>>31)+1,mt=pt>>>20&2047,yt=4294967296*(1048575&pt)+ut;return mt===2047?yt?NaN:gt*(1/0):mt===0?5e-324*gt*yt:gt*Math.pow(2,mt-1075)*(yt+4503599627370496)}at.writeDoubleLE=dt.bind(null,tt,0,4),at.writeDoubleBE=dt.bind(null,nt,4,0),at.readDoubleLE=ft.bind(null,st,0,4),at.readDoubleBE=ft.bind(null,ot,4,0)}(),at}function tt(at,dt,ft){dt[ft]=255&at,dt[ft+1]=at>>>8&255,dt[ft+2]=at>>>16&255,dt[ft+3]=at>>>24}function nt(at,dt,ft){dt[ft]=at>>>24,dt[ft+1]=at>>>16&255,dt[ft+2]=at>>>8&255,dt[ft+3]=255&at}function st(at,dt){return(at[dt]|at[dt+1]<<8|at[dt+2]<<16|at[dt+3]<<24)>>>0}function ot(at,dt){return(at[dt]<<24|at[dt+1]<<16|at[dt+2]<<8|at[dt+3])>>>0}et.exports=_e(_e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(et){}return null}module.exports=inquire},6662:et=>{et.exports=function(_e,tt,nt){var st=nt||8192,ot=st>>>1,at=null,dt=st;return function(ft){if(ft<1||ft>ot)return _e(ft);dt+ft>st&&(at=_e(st),dt=0);var ht=tt.call(at,dt,dt+=ft);return 7&dt&&(dt=1+(7|dt)),ht}}},4997:(et,_e)=>{var tt=_e;tt.length=function(nt){for(var st=0,ot=0,at=0;at<nt.length;++at)(ot=nt.charCodeAt(at))<128?st+=1:ot<2048?st+=2:(64512&ot)==55296&&(64512&nt.charCodeAt(at+1))==56320?(++at,st+=4):st+=3;return st},tt.read=function(nt,st,ot){if(ot-st<1)return"";for(var at,dt=null,ft=[],ht=0;st<ot;)(at=nt[st++])<128?ft[ht++]=at:at>191&&at<224?ft[ht++]=(31&at)<<6|63&nt[st++]:at>239&&at<365?(at=((7&at)<<18|(63&nt[st++])<<12|(63&nt[st++])<<6|63&nt[st++])-65536,ft[ht++]=55296+(at>>10),ft[ht++]=56320+(1023&at)):ft[ht++]=(15&at)<<12|(63&nt[st++])<<6|63&nt[st++],ht>8191&&((dt||(dt=[])).push(String.fromCharCode.apply(String,ft)),ht=0);return dt?(ht&&dt.push(String.fromCharCode.apply(String,ft.slice(0,ht))),dt.join("")):String.fromCharCode.apply(String,ft.slice(0,ht))},tt.write=function(nt,st,ot){for(var at,dt,ft=ot,ht=0;ht<nt.length;++ht)(at=nt.charCodeAt(ht))<128?st[ot++]=at:at<2048?(st[ot++]=at>>6|192,st[ot++]=63&at|128):(64512&at)==55296&&(64512&(dt=nt.charCodeAt(ht+1)))==56320?(at=65536+((1023&at)<<10)+(1023&dt),++ht,st[ot++]=at>>18|240,st[ot++]=at>>12&63|128,st[ot++]=at>>6&63|128,st[ot++]=63&at|128):(st[ot++]=at>>12|224,st[ot++]=at>>6&63|128,st[ot++]=63&at|128);return ot-ft}},3442:(et,_e)=>{_e.__esModule=!0;var tt=function(){function nt(st){if(!st)throw new TypeError("Invalid argument; `value` has no value.");this.value=nt.EMPTY,st&&nt.isGuid(st)&&(this.value=st)}return nt.isGuid=function(st){var ot=st.toString();return st&&(st instanceof nt||nt.validator.test(ot))},nt.create=function(){return new nt([nt.gen(2),nt.gen(1),nt.gen(1),nt.gen(1),nt.gen(3)].join("-"))},nt.createEmpty=function(){return new nt("emptyguid")},nt.parse=function(st){return new nt(st)},nt.raw=function(){return[nt.gen(2),nt.gen(1),nt.gen(1),nt.gen(1),nt.gen(3)].join("-")},nt.gen=function(st){for(var ot="",at=0;at<st;at++)ot+=(65536*(1+Math.random())|0).toString(16).substring(1);return ot},nt.prototype.equals=function(st){return nt.isGuid(st)&&this.value===st.toString()},nt.prototype.isEmpty=function(){return this.value===nt.EMPTY},nt.prototype.toString=function(){return this.value},nt.prototype.toJSON=function(){return{value:this.value}},nt.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),nt.EMPTY="00000000-0000-0000-0000-000000000000",nt}();_e.Guid=tt},3720:et=>{et.exports=tt;var _e=null;try{_e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function tt(vt,At,It){this.low=0|vt,this.high=0|At,this.unsigned=!!It}function nt(vt){return(vt&&vt.__isLong__)===!0}tt.prototype.__isLong__,Object.defineProperty(tt.prototype,"__isLong__",{value:!0}),tt.isLong=nt;var st={},ot={};function at(vt,At){var It,jt,Lt;return At?(Lt=0<=(vt>>>=0)&&vt<256)&&(jt=ot[vt])?jt:(It=ft(vt,(0|vt)<0?-1:0,!0),Lt&&(ot[vt]=It),It):(Lt=-128<=(vt|=0)&&vt<128)&&(jt=st[vt])?jt:(It=ft(vt,vt<0?-1:0,!1),Lt&&(st[vt]=It),It)}function dt(vt,At){if(isNaN(vt))return At?mt:gt;if(At){if(vt<0)return mt;if(vt>=lt)return Tt}else{if(vt<=-ut)return St;if(vt+1>=ut)return xt}return vt<0?dt(-vt,At).neg():ft(vt%rt|0,vt/rt|0,At)}function ft(vt,At,It){return new tt(vt,At,It)}tt.fromInt=at,tt.fromNumber=dt,tt.fromBits=ft;var ht=Math.pow;function ct(vt,At,It){if(vt.length===0)throw Error("empty string");if(vt==="NaN"||vt==="Infinity"||vt==="+Infinity"||vt==="-Infinity")return gt;if(typeof At=="number"?(It=At,At=!1):At=!!At,(It=It||10)<2||36<It)throw RangeError("radix");var jt;if((jt=vt.indexOf("-"))>0)throw Error("interior hyphen");if(jt===0)return ct(vt.substring(1),At,It).neg();for(var Lt=dt(ht(It,8)),Rt=gt,$t=0;$t<vt.length;$t+=8){var Ot=Math.min(8,vt.length-$t),Ft=parseInt(vt.substring($t,$t+Ot),It);if(Ot<8){var Vt=dt(ht(It,Ot));Rt=Rt.mul(Vt).add(dt(Ft))}else Rt=(Rt=Rt.mul(Lt)).add(dt(Ft))}return Rt.unsigned=At,Rt}function it(vt,At){return typeof vt=="number"?dt(vt,At):typeof vt=="string"?ct(vt,At):ft(vt.low,vt.high,typeof At=="boolean"?At:vt.unsigned)}tt.fromString=ct,tt.fromValue=it;var rt=4294967296,lt=rt*rt,ut=lt/2,pt=at(1<<24),gt=at(0);tt.ZERO=gt;var mt=at(0,!0);tt.UZERO=mt;var yt=at(1);tt.ONE=yt;var bt=at(1,!0);tt.UONE=bt;var wt=at(-1);tt.NEG_ONE=wt;var xt=ft(-1,2147483647,!1);tt.MAX_VALUE=xt;var Tt=ft(-1,-1,!0);tt.MAX_UNSIGNED_VALUE=Tt;var St=ft(0,-2147483648,!1);tt.MIN_VALUE=St;var Pt=tt.prototype;Pt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pt.toNumber=function(){return this.unsigned?(this.high>>>0)*rt+(this.low>>>0):this.high*rt+(this.low>>>0)},Pt.toString=function(vt){if((vt=vt||10)<2||36<vt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(St)){var At=dt(vt),It=this.div(At),jt=It.mul(At).sub(this);return It.toString(vt)+jt.toInt().toString(vt)}return"-"+this.neg().toString(vt)}for(var Lt=dt(ht(vt,6),this.unsigned),Rt=this,$t="";;){var Ot=Rt.div(Lt),Ft=(Rt.sub(Ot.mul(Lt)).toInt()>>>0).toString(vt);if((Rt=Ot).isZero())return Ft+$t;for(;Ft.length<6;)Ft="0"+Ft;$t=""+Ft+$t}},Pt.getHighBits=function(){return this.high},Pt.getHighBitsUnsigned=function(){return this.high>>>0},Pt.getLowBits=function(){return this.low},Pt.getLowBitsUnsigned=function(){return this.low>>>0},Pt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(St)?64:this.neg().getNumBitsAbs();for(var vt=this.high!=0?this.high:this.low,At=31;At>0&&!(vt&1<<At);At--);return this.high!=0?At+33:At+1},Pt.isZero=function(){return this.high===0&&this.low===0},Pt.eqz=Pt.isZero,Pt.isNegative=function(){return!this.unsigned&&this.high<0},Pt.isPositive=function(){return this.unsigned||this.high>=0},Pt.isOdd=function(){return(1&this.low)==1},Pt.isEven=function(){return(1&this.low)==0},Pt.equals=function(vt){return nt(vt)||(vt=it(vt)),(this.unsigned===vt.unsigned||this.high>>>31!=1||vt.high>>>31!=1)&&this.high===vt.high&&this.low===vt.low},Pt.eq=Pt.equals,Pt.notEquals=function(vt){return!this.eq(vt)},Pt.neq=Pt.notEquals,Pt.ne=Pt.notEquals,Pt.lessThan=function(vt){return this.comp(vt)<0},Pt.lt=Pt.lessThan,Pt.lessThanOrEqual=function(vt){return this.comp(vt)<=0},Pt.lte=Pt.lessThanOrEqual,Pt.le=Pt.lessThanOrEqual,Pt.greaterThan=function(vt){return this.comp(vt)>0},Pt.gt=Pt.greaterThan,Pt.greaterThanOrEqual=function(vt){return this.comp(vt)>=0},Pt.gte=Pt.greaterThanOrEqual,Pt.ge=Pt.greaterThanOrEqual,Pt.compare=function(vt){if(nt(vt)||(vt=it(vt)),this.eq(vt))return 0;var At=this.isNegative(),It=vt.isNegative();return At&&!It?-1:!At&&It?1:this.unsigned?vt.high>>>0>this.high>>>0||vt.high===this.high&&vt.low>>>0>this.low>>>0?-1:1:this.sub(vt).isNegative()?-1:1},Pt.comp=Pt.compare,Pt.negate=function(){return!this.unsigned&&this.eq(St)?St:this.not().add(yt)},Pt.neg=Pt.negate,Pt.add=function(vt){nt(vt)||(vt=it(vt));var At=this.high>>>16,It=65535&this.high,jt=this.low>>>16,Lt=65535&this.low,Rt=vt.high>>>16,$t=65535&vt.high,Ot=vt.low>>>16,Ft=0,Vt=0,zt=0,Xt=0;return zt+=(Xt+=Lt+(65535&vt.low))>>>16,Vt+=(zt+=jt+Ot)>>>16,Ft+=(Vt+=It+$t)>>>16,Ft+=At+Rt,ft((zt&=65535)<<16|(Xt&=65535),(Ft&=65535)<<16|(Vt&=65535),this.unsigned)},Pt.subtract=function(vt){return nt(vt)||(vt=it(vt)),this.add(vt.neg())},Pt.sub=Pt.subtract,Pt.multiply=function(vt){if(this.isZero())return gt;if(nt(vt)||(vt=it(vt)),_e)return ft(_e.mul(this.low,this.high,vt.low,vt.high),_e.get_high(),this.unsigned);if(vt.isZero())return gt;if(this.eq(St))return vt.isOdd()?St:gt;if(vt.eq(St))return this.isOdd()?St:gt;if(this.isNegative())return vt.isNegative()?this.neg().mul(vt.neg()):this.neg().mul(vt).neg();if(vt.isNegative())return this.mul(vt.neg()).neg();if(this.lt(pt)&&vt.lt(pt))return dt(this.toNumber()*vt.toNumber(),this.unsigned);var At=this.high>>>16,It=65535&this.high,jt=this.low>>>16,Lt=65535&this.low,Rt=vt.high>>>16,$t=65535&vt.high,Ot=vt.low>>>16,Ft=65535&vt.low,Vt=0,zt=0,Xt=0,Jt=0;return Xt+=(Jt+=Lt*Ft)>>>16,zt+=(Xt+=jt*Ft)>>>16,Xt&=65535,zt+=(Xt+=Lt*Ot)>>>16,Vt+=(zt+=It*Ft)>>>16,zt&=65535,Vt+=(zt+=jt*Ot)>>>16,zt&=65535,Vt+=(zt+=Lt*$t)>>>16,Vt+=At*Ft+It*Ot+jt*$t+Lt*Rt,ft((Xt&=65535)<<16|(Jt&=65535),(Vt&=65535)<<16|(zt&=65535),this.unsigned)},Pt.mul=Pt.multiply,Pt.divide=function(vt){if(nt(vt)||(vt=it(vt)),vt.isZero())throw Error("division by zero");var At,It,jt;if(_e)return this.unsigned||this.high!==-2147483648||vt.low!==-1||vt.high!==-1?ft((this.unsigned?_e.div_u:_e.div_s)(this.low,this.high,vt.low,vt.high),_e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mt:gt;if(this.unsigned){if(vt.unsigned||(vt=vt.toUnsigned()),vt.gt(this))return mt;if(vt.gt(this.shru(1)))return bt;jt=mt}else{if(this.eq(St))return vt.eq(yt)||vt.eq(wt)?St:vt.eq(St)?yt:(At=this.shr(1).div(vt).shl(1)).eq(gt)?vt.isNegative()?yt:wt:(It=this.sub(vt.mul(At)),jt=At.add(It.div(vt)));if(vt.eq(St))return this.unsigned?mt:gt;if(this.isNegative())return vt.isNegative()?this.neg().div(vt.neg()):this.neg().div(vt).neg();if(vt.isNegative())return this.div(vt.neg()).neg();jt=gt}for(It=this;It.gte(vt);){At=Math.max(1,Math.floor(It.toNumber()/vt.toNumber()));for(var Lt=Math.ceil(Math.log(At)/Math.LN2),Rt=Lt<=48?1:ht(2,Lt-48),$t=dt(At),Ot=$t.mul(vt);Ot.isNegative()||Ot.gt(It);)Ot=($t=dt(At-=Rt,this.unsigned)).mul(vt);$t.isZero()&&($t=yt),jt=jt.add($t),It=It.sub(Ot)}return jt},Pt.div=Pt.divide,Pt.modulo=function(vt){return nt(vt)||(vt=it(vt)),_e?ft((this.unsigned?_e.rem_u:_e.rem_s)(this.low,this.high,vt.low,vt.high),_e.get_high(),this.unsigned):this.sub(this.div(vt).mul(vt))},Pt.mod=Pt.modulo,Pt.rem=Pt.modulo,Pt.not=function(){return ft(~this.low,~this.high,this.unsigned)},Pt.and=function(vt){return nt(vt)||(vt=it(vt)),ft(this.low&vt.low,this.high&vt.high,this.unsigned)},Pt.or=function(vt){return nt(vt)||(vt=it(vt)),ft(this.low|vt.low,this.high|vt.high,this.unsigned)},Pt.xor=function(vt){return nt(vt)||(vt=it(vt)),ft(this.low^vt.low,this.high^vt.high,this.unsigned)},Pt.shiftLeft=function(vt){return nt(vt)&&(vt=vt.toInt()),(vt&=63)==0?this:vt<32?ft(this.low<<vt,this.high<<vt|this.low>>>32-vt,this.unsigned):ft(0,this.low<<vt-32,this.unsigned)},Pt.shl=Pt.shiftLeft,Pt.shiftRight=function(vt){return nt(vt)&&(vt=vt.toInt()),(vt&=63)==0?this:vt<32?ft(this.low>>>vt|this.high<<32-vt,this.high>>vt,this.unsigned):ft(this.high>>vt-32,this.high>=0?0:-1,this.unsigned)},Pt.shr=Pt.shiftRight,Pt.shiftRightUnsigned=function(vt){if(nt(vt)&&(vt=vt.toInt()),(vt&=63)==0)return this;var At=this.high;return vt<32?ft(this.low>>>vt|At<<32-vt,At>>>vt,this.unsigned):ft(vt===32?At:At>>>vt-32,0,this.unsigned)},Pt.shru=Pt.shiftRightUnsigned,Pt.shr_u=Pt.shiftRightUnsigned,Pt.toSigned=function(){return this.unsigned?ft(this.low,this.high,!1):this},Pt.toUnsigned=function(){return this.unsigned?this:ft(this.low,this.high,!0)},Pt.toBytes=function(vt){return vt?this.toBytesLE():this.toBytesBE()},Pt.toBytesLE=function(){var vt=this.high,At=this.low;return[255&At,At>>>8&255,At>>>16&255,At>>>24,255&vt,vt>>>8&255,vt>>>16&255,vt>>>24]},Pt.toBytesBE=function(){var vt=this.high,At=this.low;return[vt>>>24,vt>>>16&255,vt>>>8&255,255&vt,At>>>24,At>>>16&255,At>>>8&255,255&At]},tt.fromBytes=function(vt,At,It){return It?tt.fromBytesLE(vt,At):tt.fromBytesBE(vt,At)},tt.fromBytesLE=function(vt,At){return new tt(vt[0]|vt[1]<<8|vt[2]<<16|vt[3]<<24,vt[4]|vt[5]<<8|vt[6]<<16|vt[7]<<24,At)},tt.fromBytesBE=function(vt,At){return new tt(vt[4]<<24|vt[5]<<16|vt[6]<<8|vt[7],vt[0]<<24|vt[1]<<16|vt[2]<<8|vt[3],At)}},1446:(et,_e,tt)=>{var nt,st,ot,at=tt(2100),dt=at.Reader,ft=at.Writer,ht=at.util,ct=at.roots.default||(at.roots.default={});ct.onnx=((ot={}).Version=(nt={},(st=Object.create(nt))[nt[0]="_START_VERSION"]=0,st[nt[1]="IR_VERSION_2017_10_10"]=1,st[nt[2]="IR_VERSION_2017_10_30"]=2,st[nt[3]="IR_VERSION_2017_11_3"]=3,st[nt[4]="IR_VERSION_2019_1_22"]=4,st[nt[5]="IR_VERSION"]=5,st),ot.AttributeProto=function(){function it(rt){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.name="",it.prototype.refAttrName="",it.prototype.docString="",it.prototype.type=0,it.prototype.f=0,it.prototype.i=ht.Long?ht.Long.fromBits(0,0,!1):0,it.prototype.s=ht.newBuffer([]),it.prototype.t=null,it.prototype.g=null,it.prototype.floats=ht.emptyArray,it.prototype.ints=ht.emptyArray,it.prototype.strings=ht.emptyArray,it.prototype.tensors=ht.emptyArray,it.prototype.graphs=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.name!=null&&rt.hasOwnProperty("name")&&lt.uint32(10).string(rt.name),rt.f!=null&&rt.hasOwnProperty("f")&&lt.uint32(21).float(rt.f),rt.i!=null&&rt.hasOwnProperty("i")&&lt.uint32(24).int64(rt.i),rt.s!=null&&rt.hasOwnProperty("s")&&lt.uint32(34).bytes(rt.s),rt.t!=null&&rt.hasOwnProperty("t")&&ct.onnx.TensorProto.encode(rt.t,lt.uint32(42).fork()).ldelim(),rt.g!=null&&rt.hasOwnProperty("g")&&ct.onnx.GraphProto.encode(rt.g,lt.uint32(50).fork()).ldelim(),rt.floats!=null&&rt.floats.length){lt.uint32(58).fork();for(var ut=0;ut<rt.floats.length;++ut)lt.float(rt.floats[ut]);lt.ldelim()}if(rt.ints!=null&&rt.ints.length){for(lt.uint32(66).fork(),ut=0;ut<rt.ints.length;++ut)lt.int64(rt.ints[ut]);lt.ldelim()}if(rt.strings!=null&&rt.strings.length)for(ut=0;ut<rt.strings.length;++ut)lt.uint32(74).bytes(rt.strings[ut]);if(rt.tensors!=null&&rt.tensors.length)for(ut=0;ut<rt.tensors.length;++ut)ct.onnx.TensorProto.encode(rt.tensors[ut],lt.uint32(82).fork()).ldelim();if(rt.graphs!=null&&rt.graphs.length)for(ut=0;ut<rt.graphs.length;++ut)ct.onnx.GraphProto.encode(rt.graphs[ut],lt.uint32(90).fork()).ldelim();return rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(106).string(rt.docString),rt.type!=null&&rt.hasOwnProperty("type")&&lt.uint32(160).int32(rt.type),rt.refAttrName!=null&&rt.hasOwnProperty("refAttrName")&&lt.uint32(170).string(rt.refAttrName),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.AttributeProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.name=rt.string();break;case 21:pt.refAttrName=rt.string();break;case 13:pt.docString=rt.string();break;case 20:pt.type=rt.int32();break;case 2:pt.f=rt.float();break;case 3:pt.i=rt.int64();break;case 4:pt.s=rt.bytes();break;case 5:pt.t=ct.onnx.TensorProto.decode(rt,rt.uint32());break;case 6:pt.g=ct.onnx.GraphProto.decode(rt,rt.uint32());break;case 7:if(pt.floats&&pt.floats.length||(pt.floats=[]),(7&gt)==2)for(var mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.floats.push(rt.float());else pt.floats.push(rt.float());break;case 8:if(pt.ints&&pt.ints.length||(pt.ints=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.ints.push(rt.int64());else pt.ints.push(rt.int64());break;case 9:pt.strings&&pt.strings.length||(pt.strings=[]),pt.strings.push(rt.bytes());break;case 10:pt.tensors&&pt.tensors.length||(pt.tensors=[]),pt.tensors.push(ct.onnx.TensorProto.decode(rt,rt.uint32()));break;case 11:pt.graphs&&pt.graphs.length||(pt.graphs=[]),pt.graphs.push(ct.onnx.GraphProto.decode(rt,rt.uint32()));break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.name!=null&&rt.hasOwnProperty("name")&&!ht.isString(rt.name))return"name: string expected";if(rt.refAttrName!=null&&rt.hasOwnProperty("refAttrName")&&!ht.isString(rt.refAttrName))return"refAttrName: string expected";if(rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString))return"docString: string expected";if(rt.type!=null&&rt.hasOwnProperty("type"))switch(rt.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(rt.f!=null&&rt.hasOwnProperty("f")&&typeof rt.f!="number")return"f: number expected";if(rt.i!=null&&rt.hasOwnProperty("i")&&!(ht.isInteger(rt.i)||rt.i&&ht.isInteger(rt.i.low)&&ht.isInteger(rt.i.high)))return"i: integer|Long expected";if(rt.s!=null&&rt.hasOwnProperty("s")&&!(rt.s&&typeof rt.s.length=="number"||ht.isString(rt.s)))return"s: buffer expected";if(rt.t!=null&&rt.hasOwnProperty("t")&&(ut=ct.onnx.TensorProto.verify(rt.t)))return"t."+ut;if(rt.g!=null&&rt.hasOwnProperty("g")&&(ut=ct.onnx.GraphProto.verify(rt.g)))return"g."+ut;if(rt.floats!=null&&rt.hasOwnProperty("floats")){if(!Array.isArray(rt.floats))return"floats: array expected";for(var lt=0;lt<rt.floats.length;++lt)if(typeof rt.floats[lt]!="number")return"floats: number[] expected"}if(rt.ints!=null&&rt.hasOwnProperty("ints")){if(!Array.isArray(rt.ints))return"ints: array expected";for(lt=0;lt<rt.ints.length;++lt)if(!(ht.isInteger(rt.ints[lt])||rt.ints[lt]&&ht.isInteger(rt.ints[lt].low)&&ht.isInteger(rt.ints[lt].high)))return"ints: integer|Long[] expected"}if(rt.strings!=null&&rt.hasOwnProperty("strings")){if(!Array.isArray(rt.strings))return"strings: array expected";for(lt=0;lt<rt.strings.length;++lt)if(!(rt.strings[lt]&&typeof rt.strings[lt].length=="number"||ht.isString(rt.strings[lt])))return"strings: buffer[] expected"}if(rt.tensors!=null&&rt.hasOwnProperty("tensors")){if(!Array.isArray(rt.tensors))return"tensors: array expected";for(lt=0;lt<rt.tensors.length;++lt)if(ut=ct.onnx.TensorProto.verify(rt.tensors[lt]))return"tensors."+ut}if(rt.graphs!=null&&rt.hasOwnProperty("graphs")){if(!Array.isArray(rt.graphs))return"graphs: array expected";for(lt=0;lt<rt.graphs.length;++lt){var ut;if(ut=ct.onnx.GraphProto.verify(rt.graphs[lt]))return"graphs."+ut}}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.AttributeProto)return rt;var lt=new ct.onnx.AttributeProto;switch(rt.name!=null&&(lt.name=String(rt.name)),rt.refAttrName!=null&&(lt.refAttrName=String(rt.refAttrName)),rt.docString!=null&&(lt.docString=String(rt.docString)),rt.type){case"UNDEFINED":case 0:lt.type=0;break;case"FLOAT":case 1:lt.type=1;break;case"INT":case 2:lt.type=2;break;case"STRING":case 3:lt.type=3;break;case"TENSOR":case 4:lt.type=4;break;case"GRAPH":case 5:lt.type=5;break;case"FLOATS":case 6:lt.type=6;break;case"INTS":case 7:lt.type=7;break;case"STRINGS":case 8:lt.type=8;break;case"TENSORS":case 9:lt.type=9;break;case"GRAPHS":case 10:lt.type=10}if(rt.f!=null&&(lt.f=Number(rt.f)),rt.i!=null&&(ht.Long?(lt.i=ht.Long.fromValue(rt.i)).unsigned=!1:typeof rt.i=="string"?lt.i=parseInt(rt.i,10):typeof rt.i=="number"?lt.i=rt.i:typeof rt.i=="object"&&(lt.i=new ht.LongBits(rt.i.low>>>0,rt.i.high>>>0).toNumber())),rt.s!=null&&(typeof rt.s=="string"?ht.base64.decode(rt.s,lt.s=ht.newBuffer(ht.base64.length(rt.s)),0):rt.s.length&&(lt.s=rt.s)),rt.t!=null){if(typeof rt.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");lt.t=ct.onnx.TensorProto.fromObject(rt.t)}if(rt.g!=null){if(typeof rt.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");lt.g=ct.onnx.GraphProto.fromObject(rt.g)}if(rt.floats){if(!Array.isArray(rt.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");lt.floats=[];for(var ut=0;ut<rt.floats.length;++ut)lt.floats[ut]=Number(rt.floats[ut])}if(rt.ints){if(!Array.isArray(rt.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(lt.ints=[],ut=0;ut<rt.ints.length;++ut)ht.Long?(lt.ints[ut]=ht.Long.fromValue(rt.ints[ut])).unsigned=!1:typeof rt.ints[ut]=="string"?lt.ints[ut]=parseInt(rt.ints[ut],10):typeof rt.ints[ut]=="number"?lt.ints[ut]=rt.ints[ut]:typeof rt.ints[ut]=="object"&&(lt.ints[ut]=new ht.LongBits(rt.ints[ut].low>>>0,rt.ints[ut].high>>>0).toNumber())}if(rt.strings){if(!Array.isArray(rt.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(lt.strings=[],ut=0;ut<rt.strings.length;++ut)typeof rt.strings[ut]=="string"?ht.base64.decode(rt.strings[ut],lt.strings[ut]=ht.newBuffer(ht.base64.length(rt.strings[ut])),0):rt.strings[ut].length&&(lt.strings[ut]=rt.strings[ut])}if(rt.tensors){if(!Array.isArray(rt.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(lt.tensors=[],ut=0;ut<rt.tensors.length;++ut){if(typeof rt.tensors[ut]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");lt.tensors[ut]=ct.onnx.TensorProto.fromObject(rt.tensors[ut])}}if(rt.graphs){if(!Array.isArray(rt.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(lt.graphs=[],ut=0;ut<rt.graphs.length;++ut){if(typeof rt.graphs[ut]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");lt.graphs[ut]=ct.onnx.GraphProto.fromObject(rt.graphs[ut])}}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.floats=[],ut.ints=[],ut.strings=[],ut.tensors=[],ut.graphs=[]),lt.defaults){if(ut.name="",ut.f=0,ht.Long){var pt=new ht.Long(0,0,!1);ut.i=lt.longs===String?pt.toString():lt.longs===Number?pt.toNumber():pt}else ut.i=lt.longs===String?"0":0;lt.bytes===String?ut.s="":(ut.s=[],lt.bytes!==Array&&(ut.s=ht.newBuffer(ut.s))),ut.t=null,ut.g=null,ut.docString="",ut.type=lt.enums===String?"UNDEFINED":0,ut.refAttrName=""}if(rt.name!=null&&rt.hasOwnProperty("name")&&(ut.name=rt.name),rt.f!=null&&rt.hasOwnProperty("f")&&(ut.f=lt.json&&!isFinite(rt.f)?String(rt.f):rt.f),rt.i!=null&&rt.hasOwnProperty("i")&&(typeof rt.i=="number"?ut.i=lt.longs===String?String(rt.i):rt.i:ut.i=lt.longs===String?ht.Long.prototype.toString.call(rt.i):lt.longs===Number?new ht.LongBits(rt.i.low>>>0,rt.i.high>>>0).toNumber():rt.i),rt.s!=null&&rt.hasOwnProperty("s")&&(ut.s=lt.bytes===String?ht.base64.encode(rt.s,0,rt.s.length):lt.bytes===Array?Array.prototype.slice.call(rt.s):rt.s),rt.t!=null&&rt.hasOwnProperty("t")&&(ut.t=ct.onnx.TensorProto.toObject(rt.t,lt)),rt.g!=null&&rt.hasOwnProperty("g")&&(ut.g=ct.onnx.GraphProto.toObject(rt.g,lt)),rt.floats&&rt.floats.length){ut.floats=[];for(var gt=0;gt<rt.floats.length;++gt)ut.floats[gt]=lt.json&&!isFinite(rt.floats[gt])?String(rt.floats[gt]):rt.floats[gt]}if(rt.ints&&rt.ints.length)for(ut.ints=[],gt=0;gt<rt.ints.length;++gt)typeof rt.ints[gt]=="number"?ut.ints[gt]=lt.longs===String?String(rt.ints[gt]):rt.ints[gt]:ut.ints[gt]=lt.longs===String?ht.Long.prototype.toString.call(rt.ints[gt]):lt.longs===Number?new ht.LongBits(rt.ints[gt].low>>>0,rt.ints[gt].high>>>0).toNumber():rt.ints[gt];if(rt.strings&&rt.strings.length)for(ut.strings=[],gt=0;gt<rt.strings.length;++gt)ut.strings[gt]=lt.bytes===String?ht.base64.encode(rt.strings[gt],0,rt.strings[gt].length):lt.bytes===Array?Array.prototype.slice.call(rt.strings[gt]):rt.strings[gt];if(rt.tensors&&rt.tensors.length)for(ut.tensors=[],gt=0;gt<rt.tensors.length;++gt)ut.tensors[gt]=ct.onnx.TensorProto.toObject(rt.tensors[gt],lt);if(rt.graphs&&rt.graphs.length)for(ut.graphs=[],gt=0;gt<rt.graphs.length;++gt)ut.graphs[gt]=ct.onnx.GraphProto.toObject(rt.graphs[gt],lt);return rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),rt.type!=null&&rt.hasOwnProperty("type")&&(ut.type=lt.enums===String?ct.onnx.AttributeProto.AttributeType[rt.type]:rt.type),rt.refAttrName!=null&&rt.hasOwnProperty("refAttrName")&&(ut.refAttrName=rt.refAttrName),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it.AttributeType=function(){var rt={},lt=Object.create(rt);return lt[rt[0]="UNDEFINED"]=0,lt[rt[1]="FLOAT"]=1,lt[rt[2]="INT"]=2,lt[rt[3]="STRING"]=3,lt[rt[4]="TENSOR"]=4,lt[rt[5]="GRAPH"]=5,lt[rt[6]="FLOATS"]=6,lt[rt[7]="INTS"]=7,lt[rt[8]="STRINGS"]=8,lt[rt[9]="TENSORS"]=9,lt[rt[10]="GRAPHS"]=10,lt}(),it}(),ot.ValueInfoProto=function(){function it(rt){if(rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.name="",it.prototype.type=null,it.prototype.docString="",it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){return lt||(lt=ft.create()),rt.name!=null&&rt.hasOwnProperty("name")&&lt.uint32(10).string(rt.name),rt.type!=null&&rt.hasOwnProperty("type")&&ct.onnx.TypeProto.encode(rt.type,lt.uint32(18).fork()).ldelim(),rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(26).string(rt.docString),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.ValueInfoProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.name=rt.string();break;case 2:pt.type=ct.onnx.TypeProto.decode(rt,rt.uint32());break;case 3:pt.docString=rt.string();break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.name!=null&&rt.hasOwnProperty("name")&&!ht.isString(rt.name))return"name: string expected";if(rt.type!=null&&rt.hasOwnProperty("type")){var lt=ct.onnx.TypeProto.verify(rt.type);if(lt)return"type."+lt}return rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString)?"docString: string expected":null},it.fromObject=function(rt){if(rt instanceof ct.onnx.ValueInfoProto)return rt;var lt=new ct.onnx.ValueInfoProto;if(rt.name!=null&&(lt.name=String(rt.name)),rt.type!=null){if(typeof rt.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");lt.type=ct.onnx.TypeProto.fromObject(rt.type)}return rt.docString!=null&&(lt.docString=String(rt.docString)),lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};return lt.defaults&&(ut.name="",ut.type=null,ut.docString=""),rt.name!=null&&rt.hasOwnProperty("name")&&(ut.name=rt.name),rt.type!=null&&rt.hasOwnProperty("type")&&(ut.type=ct.onnx.TypeProto.toObject(rt.type,lt)),rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.NodeProto=function(){function it(rt){if(this.input=[],this.output=[],this.attribute=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.input=ht.emptyArray,it.prototype.output=ht.emptyArray,it.prototype.name="",it.prototype.opType="",it.prototype.domain="",it.prototype.attribute=ht.emptyArray,it.prototype.docString="",it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.input!=null&&rt.input.length)for(var ut=0;ut<rt.input.length;++ut)lt.uint32(10).string(rt.input[ut]);if(rt.output!=null&&rt.output.length)for(ut=0;ut<rt.output.length;++ut)lt.uint32(18).string(rt.output[ut]);if(rt.name!=null&&rt.hasOwnProperty("name")&&lt.uint32(26).string(rt.name),rt.opType!=null&&rt.hasOwnProperty("opType")&&lt.uint32(34).string(rt.opType),rt.attribute!=null&&rt.attribute.length)for(ut=0;ut<rt.attribute.length;++ut)ct.onnx.AttributeProto.encode(rt.attribute[ut],lt.uint32(42).fork()).ldelim();return rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(50).string(rt.docString),rt.domain!=null&&rt.hasOwnProperty("domain")&&lt.uint32(58).string(rt.domain),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.NodeProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.input&&pt.input.length||(pt.input=[]),pt.input.push(rt.string());break;case 2:pt.output&&pt.output.length||(pt.output=[]),pt.output.push(rt.string());break;case 3:pt.name=rt.string();break;case 4:pt.opType=rt.string();break;case 7:pt.domain=rt.string();break;case 5:pt.attribute&&pt.attribute.length||(pt.attribute=[]),pt.attribute.push(ct.onnx.AttributeProto.decode(rt,rt.uint32()));break;case 6:pt.docString=rt.string();break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.input!=null&&rt.hasOwnProperty("input")){if(!Array.isArray(rt.input))return"input: array expected";for(var lt=0;lt<rt.input.length;++lt)if(!ht.isString(rt.input[lt]))return"input: string[] expected"}if(rt.output!=null&&rt.hasOwnProperty("output")){if(!Array.isArray(rt.output))return"output: array expected";for(lt=0;lt<rt.output.length;++lt)if(!ht.isString(rt.output[lt]))return"output: string[] expected"}if(rt.name!=null&&rt.hasOwnProperty("name")&&!ht.isString(rt.name))return"name: string expected";if(rt.opType!=null&&rt.hasOwnProperty("opType")&&!ht.isString(rt.opType))return"opType: string expected";if(rt.domain!=null&&rt.hasOwnProperty("domain")&&!ht.isString(rt.domain))return"domain: string expected";if(rt.attribute!=null&&rt.hasOwnProperty("attribute")){if(!Array.isArray(rt.attribute))return"attribute: array expected";for(lt=0;lt<rt.attribute.length;++lt){var ut=ct.onnx.AttributeProto.verify(rt.attribute[lt]);if(ut)return"attribute."+ut}}return rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString)?"docString: string expected":null},it.fromObject=function(rt){if(rt instanceof ct.onnx.NodeProto)return rt;var lt=new ct.onnx.NodeProto;if(rt.input){if(!Array.isArray(rt.input))throw TypeError(".onnx.NodeProto.input: array expected");lt.input=[];for(var ut=0;ut<rt.input.length;++ut)lt.input[ut]=String(rt.input[ut])}if(rt.output){if(!Array.isArray(rt.output))throw TypeError(".onnx.NodeProto.output: array expected");for(lt.output=[],ut=0;ut<rt.output.length;++ut)lt.output[ut]=String(rt.output[ut])}if(rt.name!=null&&(lt.name=String(rt.name)),rt.opType!=null&&(lt.opType=String(rt.opType)),rt.domain!=null&&(lt.domain=String(rt.domain)),rt.attribute){if(!Array.isArray(rt.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(lt.attribute=[],ut=0;ut<rt.attribute.length;++ut){if(typeof rt.attribute[ut]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");lt.attribute[ut]=ct.onnx.AttributeProto.fromObject(rt.attribute[ut])}}return rt.docString!=null&&(lt.docString=String(rt.docString)),lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.input=[],ut.output=[],ut.attribute=[]),lt.defaults&&(ut.name="",ut.opType="",ut.docString="",ut.domain=""),rt.input&&rt.input.length){ut.input=[];for(var pt=0;pt<rt.input.length;++pt)ut.input[pt]=rt.input[pt]}if(rt.output&&rt.output.length)for(ut.output=[],pt=0;pt<rt.output.length;++pt)ut.output[pt]=rt.output[pt];if(rt.name!=null&&rt.hasOwnProperty("name")&&(ut.name=rt.name),rt.opType!=null&&rt.hasOwnProperty("opType")&&(ut.opType=rt.opType),rt.attribute&&rt.attribute.length)for(ut.attribute=[],pt=0;pt<rt.attribute.length;++pt)ut.attribute[pt]=ct.onnx.AttributeProto.toObject(rt.attribute[pt],lt);return rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),rt.domain!=null&&rt.hasOwnProperty("domain")&&(ut.domain=rt.domain),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.ModelProto=function(){function it(rt){if(this.opsetImport=[],this.metadataProps=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.irVersion=ht.Long?ht.Long.fromBits(0,0,!1):0,it.prototype.opsetImport=ht.emptyArray,it.prototype.producerName="",it.prototype.producerVersion="",it.prototype.domain="",it.prototype.modelVersion=ht.Long?ht.Long.fromBits(0,0,!1):0,it.prototype.docString="",it.prototype.graph=null,it.prototype.metadataProps=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.irVersion!=null&&rt.hasOwnProperty("irVersion")&&lt.uint32(8).int64(rt.irVersion),rt.producerName!=null&&rt.hasOwnProperty("producerName")&&lt.uint32(18).string(rt.producerName),rt.producerVersion!=null&&rt.hasOwnProperty("producerVersion")&&lt.uint32(26).string(rt.producerVersion),rt.domain!=null&&rt.hasOwnProperty("domain")&&lt.uint32(34).string(rt.domain),rt.modelVersion!=null&&rt.hasOwnProperty("modelVersion")&&lt.uint32(40).int64(rt.modelVersion),rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(50).string(rt.docString),rt.graph!=null&&rt.hasOwnProperty("graph")&&ct.onnx.GraphProto.encode(rt.graph,lt.uint32(58).fork()).ldelim(),rt.opsetImport!=null&&rt.opsetImport.length)for(var ut=0;ut<rt.opsetImport.length;++ut)ct.onnx.OperatorSetIdProto.encode(rt.opsetImport[ut],lt.uint32(66).fork()).ldelim();if(rt.metadataProps!=null&&rt.metadataProps.length)for(ut=0;ut<rt.metadataProps.length;++ut)ct.onnx.StringStringEntryProto.encode(rt.metadataProps[ut],lt.uint32(114).fork()).ldelim();return lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.ModelProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.irVersion=rt.int64();break;case 8:pt.opsetImport&&pt.opsetImport.length||(pt.opsetImport=[]),pt.opsetImport.push(ct.onnx.OperatorSetIdProto.decode(rt,rt.uint32()));break;case 2:pt.producerName=rt.string();break;case 3:pt.producerVersion=rt.string();break;case 4:pt.domain=rt.string();break;case 5:pt.modelVersion=rt.int64();break;case 6:pt.docString=rt.string();break;case 7:pt.graph=ct.onnx.GraphProto.decode(rt,rt.uint32());break;case 14:pt.metadataProps&&pt.metadataProps.length||(pt.metadataProps=[]),pt.metadataProps.push(ct.onnx.StringStringEntryProto.decode(rt,rt.uint32()));break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.irVersion!=null&&rt.hasOwnProperty("irVersion")&&!(ht.isInteger(rt.irVersion)||rt.irVersion&&ht.isInteger(rt.irVersion.low)&&ht.isInteger(rt.irVersion.high)))return"irVersion: integer|Long expected";if(rt.opsetImport!=null&&rt.hasOwnProperty("opsetImport")){if(!Array.isArray(rt.opsetImport))return"opsetImport: array expected";for(var lt=0;lt<rt.opsetImport.length;++lt)if(ut=ct.onnx.OperatorSetIdProto.verify(rt.opsetImport[lt]))return"opsetImport."+ut}if(rt.producerName!=null&&rt.hasOwnProperty("producerName")&&!ht.isString(rt.producerName))return"producerName: string expected";if(rt.producerVersion!=null&&rt.hasOwnProperty("producerVersion")&&!ht.isString(rt.producerVersion))return"producerVersion: string expected";if(rt.domain!=null&&rt.hasOwnProperty("domain")&&!ht.isString(rt.domain))return"domain: string expected";if(rt.modelVersion!=null&&rt.hasOwnProperty("modelVersion")&&!(ht.isInteger(rt.modelVersion)||rt.modelVersion&&ht.isInteger(rt.modelVersion.low)&&ht.isInteger(rt.modelVersion.high)))return"modelVersion: integer|Long expected";if(rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString))return"docString: string expected";if(rt.graph!=null&&rt.hasOwnProperty("graph")&&(ut=ct.onnx.GraphProto.verify(rt.graph)))return"graph."+ut;if(rt.metadataProps!=null&&rt.hasOwnProperty("metadataProps")){if(!Array.isArray(rt.metadataProps))return"metadataProps: array expected";for(lt=0;lt<rt.metadataProps.length;++lt){var ut;if(ut=ct.onnx.StringStringEntryProto.verify(rt.metadataProps[lt]))return"metadataProps."+ut}}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.ModelProto)return rt;var lt=new ct.onnx.ModelProto;if(rt.irVersion!=null&&(ht.Long?(lt.irVersion=ht.Long.fromValue(rt.irVersion)).unsigned=!1:typeof rt.irVersion=="string"?lt.irVersion=parseInt(rt.irVersion,10):typeof rt.irVersion=="number"?lt.irVersion=rt.irVersion:typeof rt.irVersion=="object"&&(lt.irVersion=new ht.LongBits(rt.irVersion.low>>>0,rt.irVersion.high>>>0).toNumber())),rt.opsetImport){if(!Array.isArray(rt.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");lt.opsetImport=[];for(var ut=0;ut<rt.opsetImport.length;++ut){if(typeof rt.opsetImport[ut]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");lt.opsetImport[ut]=ct.onnx.OperatorSetIdProto.fromObject(rt.opsetImport[ut])}}if(rt.producerName!=null&&(lt.producerName=String(rt.producerName)),rt.producerVersion!=null&&(lt.producerVersion=String(rt.producerVersion)),rt.domain!=null&&(lt.domain=String(rt.domain)),rt.modelVersion!=null&&(ht.Long?(lt.modelVersion=ht.Long.fromValue(rt.modelVersion)).unsigned=!1:typeof rt.modelVersion=="string"?lt.modelVersion=parseInt(rt.modelVersion,10):typeof rt.modelVersion=="number"?lt.modelVersion=rt.modelVersion:typeof rt.modelVersion=="object"&&(lt.modelVersion=new ht.LongBits(rt.modelVersion.low>>>0,rt.modelVersion.high>>>0).toNumber())),rt.docString!=null&&(lt.docString=String(rt.docString)),rt.graph!=null){if(typeof rt.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");lt.graph=ct.onnx.GraphProto.fromObject(rt.graph)}if(rt.metadataProps){if(!Array.isArray(rt.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(lt.metadataProps=[],ut=0;ut<rt.metadataProps.length;++ut){if(typeof rt.metadataProps[ut]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");lt.metadataProps[ut]=ct.onnx.StringStringEntryProto.fromObject(rt.metadataProps[ut])}}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.opsetImport=[],ut.metadataProps=[]),lt.defaults){if(ht.Long){var pt=new ht.Long(0,0,!1);ut.irVersion=lt.longs===String?pt.toString():lt.longs===Number?pt.toNumber():pt}else ut.irVersion=lt.longs===String?"0":0;ut.producerName="",ut.producerVersion="",ut.domain="",ht.Long?(pt=new ht.Long(0,0,!1),ut.modelVersion=lt.longs===String?pt.toString():lt.longs===Number?pt.toNumber():pt):ut.modelVersion=lt.longs===String?"0":0,ut.docString="",ut.graph=null}if(rt.irVersion!=null&&rt.hasOwnProperty("irVersion")&&(typeof rt.irVersion=="number"?ut.irVersion=lt.longs===String?String(rt.irVersion):rt.irVersion:ut.irVersion=lt.longs===String?ht.Long.prototype.toString.call(rt.irVersion):lt.longs===Number?new ht.LongBits(rt.irVersion.low>>>0,rt.irVersion.high>>>0).toNumber():rt.irVersion),rt.producerName!=null&&rt.hasOwnProperty("producerName")&&(ut.producerName=rt.producerName),rt.producerVersion!=null&&rt.hasOwnProperty("producerVersion")&&(ut.producerVersion=rt.producerVersion),rt.domain!=null&&rt.hasOwnProperty("domain")&&(ut.domain=rt.domain),rt.modelVersion!=null&&rt.hasOwnProperty("modelVersion")&&(typeof rt.modelVersion=="number"?ut.modelVersion=lt.longs===String?String(rt.modelVersion):rt.modelVersion:ut.modelVersion=lt.longs===String?ht.Long.prototype.toString.call(rt.modelVersion):lt.longs===Number?new ht.LongBits(rt.modelVersion.low>>>0,rt.modelVersion.high>>>0).toNumber():rt.modelVersion),rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),rt.graph!=null&&rt.hasOwnProperty("graph")&&(ut.graph=ct.onnx.GraphProto.toObject(rt.graph,lt)),rt.opsetImport&&rt.opsetImport.length){ut.opsetImport=[];for(var gt=0;gt<rt.opsetImport.length;++gt)ut.opsetImport[gt]=ct.onnx.OperatorSetIdProto.toObject(rt.opsetImport[gt],lt)}if(rt.metadataProps&&rt.metadataProps.length)for(ut.metadataProps=[],gt=0;gt<rt.metadataProps.length;++gt)ut.metadataProps[gt]=ct.onnx.StringStringEntryProto.toObject(rt.metadataProps[gt],lt);return ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.StringStringEntryProto=function(){function it(rt){if(rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.key="",it.prototype.value="",it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){return lt||(lt=ft.create()),rt.key!=null&&rt.hasOwnProperty("key")&&lt.uint32(10).string(rt.key),rt.value!=null&&rt.hasOwnProperty("value")&&lt.uint32(18).string(rt.value),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.StringStringEntryProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.key=rt.string();break;case 2:pt.value=rt.string();break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){return typeof rt!="object"||rt===null?"object expected":rt.key!=null&&rt.hasOwnProperty("key")&&!ht.isString(rt.key)?"key: string expected":rt.value!=null&&rt.hasOwnProperty("value")&&!ht.isString(rt.value)?"value: string expected":null},it.fromObject=function(rt){if(rt instanceof ct.onnx.StringStringEntryProto)return rt;var lt=new ct.onnx.StringStringEntryProto;return rt.key!=null&&(lt.key=String(rt.key)),rt.value!=null&&(lt.value=String(rt.value)),lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};return lt.defaults&&(ut.key="",ut.value=""),rt.key!=null&&rt.hasOwnProperty("key")&&(ut.key=rt.key),rt.value!=null&&rt.hasOwnProperty("value")&&(ut.value=rt.value),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.TensorAnnotation=function(){function it(rt){if(this.quantParameterTensorNames=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.tensorName="",it.prototype.quantParameterTensorNames=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.tensorName!=null&&rt.hasOwnProperty("tensorName")&&lt.uint32(10).string(rt.tensorName),rt.quantParameterTensorNames!=null&&rt.quantParameterTensorNames.length)for(var ut=0;ut<rt.quantParameterTensorNames.length;++ut)ct.onnx.StringStringEntryProto.encode(rt.quantParameterTensorNames[ut],lt.uint32(18).fork()).ldelim();return lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.TensorAnnotation;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.tensorName=rt.string();break;case 2:pt.quantParameterTensorNames&&pt.quantParameterTensorNames.length||(pt.quantParameterTensorNames=[]),pt.quantParameterTensorNames.push(ct.onnx.StringStringEntryProto.decode(rt,rt.uint32()));break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.tensorName!=null&&rt.hasOwnProperty("tensorName")&&!ht.isString(rt.tensorName))return"tensorName: string expected";if(rt.quantParameterTensorNames!=null&&rt.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(rt.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var lt=0;lt<rt.quantParameterTensorNames.length;++lt){var ut=ct.onnx.StringStringEntryProto.verify(rt.quantParameterTensorNames[lt]);if(ut)return"quantParameterTensorNames."+ut}}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.TensorAnnotation)return rt;var lt=new ct.onnx.TensorAnnotation;if(rt.tensorName!=null&&(lt.tensorName=String(rt.tensorName)),rt.quantParameterTensorNames){if(!Array.isArray(rt.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");lt.quantParameterTensorNames=[];for(var ut=0;ut<rt.quantParameterTensorNames.length;++ut){if(typeof rt.quantParameterTensorNames[ut]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");lt.quantParameterTensorNames[ut]=ct.onnx.StringStringEntryProto.fromObject(rt.quantParameterTensorNames[ut])}}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.quantParameterTensorNames=[]),lt.defaults&&(ut.tensorName=""),rt.tensorName!=null&&rt.hasOwnProperty("tensorName")&&(ut.tensorName=rt.tensorName),rt.quantParameterTensorNames&&rt.quantParameterTensorNames.length){ut.quantParameterTensorNames=[];for(var pt=0;pt<rt.quantParameterTensorNames.length;++pt)ut.quantParameterTensorNames[pt]=ct.onnx.StringStringEntryProto.toObject(rt.quantParameterTensorNames[pt],lt)}return ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.GraphProto=function(){function it(rt){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.node=ht.emptyArray,it.prototype.name="",it.prototype.initializer=ht.emptyArray,it.prototype.docString="",it.prototype.input=ht.emptyArray,it.prototype.output=ht.emptyArray,it.prototype.valueInfo=ht.emptyArray,it.prototype.quantizationAnnotation=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.node!=null&&rt.node.length)for(var ut=0;ut<rt.node.length;++ut)ct.onnx.NodeProto.encode(rt.node[ut],lt.uint32(10).fork()).ldelim();if(rt.name!=null&&rt.hasOwnProperty("name")&&lt.uint32(18).string(rt.name),rt.initializer!=null&&rt.initializer.length)for(ut=0;ut<rt.initializer.length;++ut)ct.onnx.TensorProto.encode(rt.initializer[ut],lt.uint32(42).fork()).ldelim();if(rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(82).string(rt.docString),rt.input!=null&&rt.input.length)for(ut=0;ut<rt.input.length;++ut)ct.onnx.ValueInfoProto.encode(rt.input[ut],lt.uint32(90).fork()).ldelim();if(rt.output!=null&&rt.output.length)for(ut=0;ut<rt.output.length;++ut)ct.onnx.ValueInfoProto.encode(rt.output[ut],lt.uint32(98).fork()).ldelim();if(rt.valueInfo!=null&&rt.valueInfo.length)for(ut=0;ut<rt.valueInfo.length;++ut)ct.onnx.ValueInfoProto.encode(rt.valueInfo[ut],lt.uint32(106).fork()).ldelim();if(rt.quantizationAnnotation!=null&&rt.quantizationAnnotation.length)for(ut=0;ut<rt.quantizationAnnotation.length;++ut)ct.onnx.TensorAnnotation.encode(rt.quantizationAnnotation[ut],lt.uint32(114).fork()).ldelim();return lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.GraphProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.node&&pt.node.length||(pt.node=[]),pt.node.push(ct.onnx.NodeProto.decode(rt,rt.uint32()));break;case 2:pt.name=rt.string();break;case 5:pt.initializer&&pt.initializer.length||(pt.initializer=[]),pt.initializer.push(ct.onnx.TensorProto.decode(rt,rt.uint32()));break;case 10:pt.docString=rt.string();break;case 11:pt.input&&pt.input.length||(pt.input=[]),pt.input.push(ct.onnx.ValueInfoProto.decode(rt,rt.uint32()));break;case 12:pt.output&&pt.output.length||(pt.output=[]),pt.output.push(ct.onnx.ValueInfoProto.decode(rt,rt.uint32()));break;case 13:pt.valueInfo&&pt.valueInfo.length||(pt.valueInfo=[]),pt.valueInfo.push(ct.onnx.ValueInfoProto.decode(rt,rt.uint32()));break;case 14:pt.quantizationAnnotation&&pt.quantizationAnnotation.length||(pt.quantizationAnnotation=[]),pt.quantizationAnnotation.push(ct.onnx.TensorAnnotation.decode(rt,rt.uint32()));break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.node!=null&&rt.hasOwnProperty("node")){if(!Array.isArray(rt.node))return"node: array expected";for(var lt=0;lt<rt.node.length;++lt)if(ut=ct.onnx.NodeProto.verify(rt.node[lt]))return"node."+ut}if(rt.name!=null&&rt.hasOwnProperty("name")&&!ht.isString(rt.name))return"name: string expected";if(rt.initializer!=null&&rt.hasOwnProperty("initializer")){if(!Array.isArray(rt.initializer))return"initializer: array expected";for(lt=0;lt<rt.initializer.length;++lt)if(ut=ct.onnx.TensorProto.verify(rt.initializer[lt]))return"initializer."+ut}if(rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString))return"docString: string expected";if(rt.input!=null&&rt.hasOwnProperty("input")){if(!Array.isArray(rt.input))return"input: array expected";for(lt=0;lt<rt.input.length;++lt)if(ut=ct.onnx.ValueInfoProto.verify(rt.input[lt]))return"input."+ut}if(rt.output!=null&&rt.hasOwnProperty("output")){if(!Array.isArray(rt.output))return"output: array expected";for(lt=0;lt<rt.output.length;++lt)if(ut=ct.onnx.ValueInfoProto.verify(rt.output[lt]))return"output."+ut}if(rt.valueInfo!=null&&rt.hasOwnProperty("valueInfo")){if(!Array.isArray(rt.valueInfo))return"valueInfo: array expected";for(lt=0;lt<rt.valueInfo.length;++lt)if(ut=ct.onnx.ValueInfoProto.verify(rt.valueInfo[lt]))return"valueInfo."+ut}if(rt.quantizationAnnotation!=null&&rt.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(rt.quantizationAnnotation))return"quantizationAnnotation: array expected";for(lt=0;lt<rt.quantizationAnnotation.length;++lt){var ut;if(ut=ct.onnx.TensorAnnotation.verify(rt.quantizationAnnotation[lt]))return"quantizationAnnotation."+ut}}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.GraphProto)return rt;var lt=new ct.onnx.GraphProto;if(rt.node){if(!Array.isArray(rt.node))throw TypeError(".onnx.GraphProto.node: array expected");lt.node=[];for(var ut=0;ut<rt.node.length;++ut){if(typeof rt.node[ut]!="object")throw TypeError(".onnx.GraphProto.node: object expected");lt.node[ut]=ct.onnx.NodeProto.fromObject(rt.node[ut])}}if(rt.name!=null&&(lt.name=String(rt.name)),rt.initializer){if(!Array.isArray(rt.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(lt.initializer=[],ut=0;ut<rt.initializer.length;++ut){if(typeof rt.initializer[ut]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");lt.initializer[ut]=ct.onnx.TensorProto.fromObject(rt.initializer[ut])}}if(rt.docString!=null&&(lt.docString=String(rt.docString)),rt.input){if(!Array.isArray(rt.input))throw TypeError(".onnx.GraphProto.input: array expected");for(lt.input=[],ut=0;ut<rt.input.length;++ut){if(typeof rt.input[ut]!="object")throw TypeError(".onnx.GraphProto.input: object expected");lt.input[ut]=ct.onnx.ValueInfoProto.fromObject(rt.input[ut])}}if(rt.output){if(!Array.isArray(rt.output))throw TypeError(".onnx.GraphProto.output: array expected");for(lt.output=[],ut=0;ut<rt.output.length;++ut){if(typeof rt.output[ut]!="object")throw TypeError(".onnx.GraphProto.output: object expected");lt.output[ut]=ct.onnx.ValueInfoProto.fromObject(rt.output[ut])}}if(rt.valueInfo){if(!Array.isArray(rt.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(lt.valueInfo=[],ut=0;ut<rt.valueInfo.length;++ut){if(typeof rt.valueInfo[ut]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");lt.valueInfo[ut]=ct.onnx.ValueInfoProto.fromObject(rt.valueInfo[ut])}}if(rt.quantizationAnnotation){if(!Array.isArray(rt.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(lt.quantizationAnnotation=[],ut=0;ut<rt.quantizationAnnotation.length;++ut){if(typeof rt.quantizationAnnotation[ut]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");lt.quantizationAnnotation[ut]=ct.onnx.TensorAnnotation.fromObject(rt.quantizationAnnotation[ut])}}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.node=[],ut.initializer=[],ut.input=[],ut.output=[],ut.valueInfo=[],ut.quantizationAnnotation=[]),lt.defaults&&(ut.name="",ut.docString=""),rt.node&&rt.node.length){ut.node=[];for(var pt=0;pt<rt.node.length;++pt)ut.node[pt]=ct.onnx.NodeProto.toObject(rt.node[pt],lt)}if(rt.name!=null&&rt.hasOwnProperty("name")&&(ut.name=rt.name),rt.initializer&&rt.initializer.length)for(ut.initializer=[],pt=0;pt<rt.initializer.length;++pt)ut.initializer[pt]=ct.onnx.TensorProto.toObject(rt.initializer[pt],lt);if(rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),rt.input&&rt.input.length)for(ut.input=[],pt=0;pt<rt.input.length;++pt)ut.input[pt]=ct.onnx.ValueInfoProto.toObject(rt.input[pt],lt);if(rt.output&&rt.output.length)for(ut.output=[],pt=0;pt<rt.output.length;++pt)ut.output[pt]=ct.onnx.ValueInfoProto.toObject(rt.output[pt],lt);if(rt.valueInfo&&rt.valueInfo.length)for(ut.valueInfo=[],pt=0;pt<rt.valueInfo.length;++pt)ut.valueInfo[pt]=ct.onnx.ValueInfoProto.toObject(rt.valueInfo[pt],lt);if(rt.quantizationAnnotation&&rt.quantizationAnnotation.length)for(ut.quantizationAnnotation=[],pt=0;pt<rt.quantizationAnnotation.length;++pt)ut.quantizationAnnotation[pt]=ct.onnx.TensorAnnotation.toObject(rt.quantizationAnnotation[pt],lt);return ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot.TensorProto=function(){function it(rt){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.dims=ht.emptyArray,it.prototype.dataType=0,it.prototype.segment=null,it.prototype.floatData=ht.emptyArray,it.prototype.int32Data=ht.emptyArray,it.prototype.stringData=ht.emptyArray,it.prototype.int64Data=ht.emptyArray,it.prototype.name="",it.prototype.docString="",it.prototype.rawData=ht.newBuffer([]),it.prototype.externalData=ht.emptyArray,it.prototype.dataLocation=0,it.prototype.doubleData=ht.emptyArray,it.prototype.uint64Data=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.dims!=null&&rt.dims.length){lt.uint32(10).fork();for(var ut=0;ut<rt.dims.length;++ut)lt.int64(rt.dims[ut]);lt.ldelim()}if(rt.dataType!=null&&rt.hasOwnProperty("dataType")&&lt.uint32(16).int32(rt.dataType),rt.segment!=null&&rt.hasOwnProperty("segment")&&ct.onnx.TensorProto.Segment.encode(rt.segment,lt.uint32(26).fork()).ldelim(),rt.floatData!=null&&rt.floatData.length){for(lt.uint32(34).fork(),ut=0;ut<rt.floatData.length;++ut)lt.float(rt.floatData[ut]);lt.ldelim()}if(rt.int32Data!=null&&rt.int32Data.length){for(lt.uint32(42).fork(),ut=0;ut<rt.int32Data.length;++ut)lt.int32(rt.int32Data[ut]);lt.ldelim()}if(rt.stringData!=null&&rt.stringData.length)for(ut=0;ut<rt.stringData.length;++ut)lt.uint32(50).bytes(rt.stringData[ut]);if(rt.int64Data!=null&&rt.int64Data.length){for(lt.uint32(58).fork(),ut=0;ut<rt.int64Data.length;++ut)lt.int64(rt.int64Data[ut]);lt.ldelim()}if(rt.name!=null&&rt.hasOwnProperty("name")&&lt.uint32(66).string(rt.name),rt.rawData!=null&&rt.hasOwnProperty("rawData")&&lt.uint32(74).bytes(rt.rawData),rt.doubleData!=null&&rt.doubleData.length){for(lt.uint32(82).fork(),ut=0;ut<rt.doubleData.length;++ut)lt.double(rt.doubleData[ut]);lt.ldelim()}if(rt.uint64Data!=null&&rt.uint64Data.length){for(lt.uint32(90).fork(),ut=0;ut<rt.uint64Data.length;++ut)lt.uint64(rt.uint64Data[ut]);lt.ldelim()}if(rt.docString!=null&&rt.hasOwnProperty("docString")&&lt.uint32(98).string(rt.docString),rt.externalData!=null&&rt.externalData.length)for(ut=0;ut<rt.externalData.length;++ut)ct.onnx.StringStringEntryProto.encode(rt.externalData[ut],lt.uint32(106).fork()).ldelim();return rt.dataLocation!=null&&rt.hasOwnProperty("dataLocation")&&lt.uint32(112).int32(rt.dataLocation),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.TensorProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:if(pt.dims&&pt.dims.length||(pt.dims=[]),(7&gt)==2)for(var mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.dims.push(rt.int64());else pt.dims.push(rt.int64());break;case 2:pt.dataType=rt.int32();break;case 3:pt.segment=ct.onnx.TensorProto.Segment.decode(rt,rt.uint32());break;case 4:if(pt.floatData&&pt.floatData.length||(pt.floatData=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.floatData.push(rt.float());else pt.floatData.push(rt.float());break;case 5:if(pt.int32Data&&pt.int32Data.length||(pt.int32Data=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.int32Data.push(rt.int32());else pt.int32Data.push(rt.int32());break;case 6:pt.stringData&&pt.stringData.length||(pt.stringData=[]),pt.stringData.push(rt.bytes());break;case 7:if(pt.int64Data&&pt.int64Data.length||(pt.int64Data=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.int64Data.push(rt.int64());else pt.int64Data.push(rt.int64());break;case 8:pt.name=rt.string();break;case 12:pt.docString=rt.string();break;case 9:pt.rawData=rt.bytes();break;case 13:pt.externalData&&pt.externalData.length||(pt.externalData=[]),pt.externalData.push(ct.onnx.StringStringEntryProto.decode(rt,rt.uint32()));break;case 14:pt.dataLocation=rt.int32();break;case 10:if(pt.doubleData&&pt.doubleData.length||(pt.doubleData=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.doubleData.push(rt.double());else pt.doubleData.push(rt.double());break;case 11:if(pt.uint64Data&&pt.uint64Data.length||(pt.uint64Data=[]),(7&gt)==2)for(mt=rt.uint32()+rt.pos;rt.pos<mt;)pt.uint64Data.push(rt.uint64());else pt.uint64Data.push(rt.uint64());break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.dims!=null&&rt.hasOwnProperty("dims")){if(!Array.isArray(rt.dims))return"dims: array expected";for(var lt=0;lt<rt.dims.length;++lt)if(!(ht.isInteger(rt.dims[lt])||rt.dims[lt]&&ht.isInteger(rt.dims[lt].low)&&ht.isInteger(rt.dims[lt].high)))return"dims: integer|Long[] expected"}if(rt.dataType!=null&&rt.hasOwnProperty("dataType")&&!ht.isInteger(rt.dataType))return"dataType: integer expected";if(rt.segment!=null&&rt.hasOwnProperty("segment")&&(ut=ct.onnx.TensorProto.Segment.verify(rt.segment)))return"segment."+ut;if(rt.floatData!=null&&rt.hasOwnProperty("floatData")){if(!Array.isArray(rt.floatData))return"floatData: array expected";for(lt=0;lt<rt.floatData.length;++lt)if(typeof rt.floatData[lt]!="number")return"floatData: number[] expected"}if(rt.int32Data!=null&&rt.hasOwnProperty("int32Data")){if(!Array.isArray(rt.int32Data))return"int32Data: array expected";for(lt=0;lt<rt.int32Data.length;++lt)if(!ht.isInteger(rt.int32Data[lt]))return"int32Data: integer[] expected"}if(rt.stringData!=null&&rt.hasOwnProperty("stringData")){if(!Array.isArray(rt.stringData))return"stringData: array expected";for(lt=0;lt<rt.stringData.length;++lt)if(!(rt.stringData[lt]&&typeof rt.stringData[lt].length=="number"||ht.isString(rt.stringData[lt])))return"stringData: buffer[] expected"}if(rt.int64Data!=null&&rt.hasOwnProperty("int64Data")){if(!Array.isArray(rt.int64Data))return"int64Data: array expected";for(lt=0;lt<rt.int64Data.length;++lt)if(!(ht.isInteger(rt.int64Data[lt])||rt.int64Data[lt]&&ht.isInteger(rt.int64Data[lt].low)&&ht.isInteger(rt.int64Data[lt].high)))return"int64Data: integer|Long[] expected"}if(rt.name!=null&&rt.hasOwnProperty("name")&&!ht.isString(rt.name))return"name: string expected";if(rt.docString!=null&&rt.hasOwnProperty("docString")&&!ht.isString(rt.docString))return"docString: string expected";if(rt.rawData!=null&&rt.hasOwnProperty("rawData")&&!(rt.rawData&&typeof rt.rawData.length=="number"||ht.isString(rt.rawData)))return"rawData: buffer expected";if(rt.externalData!=null&&rt.hasOwnProperty("externalData")){if(!Array.isArray(rt.externalData))return"externalData: array expected";for(lt=0;lt<rt.externalData.length;++lt){var ut;if(ut=ct.onnx.StringStringEntryProto.verify(rt.externalData[lt]))return"externalData."+ut}}if(rt.dataLocation!=null&&rt.hasOwnProperty("dataLocation"))switch(rt.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(rt.doubleData!=null&&rt.hasOwnProperty("doubleData")){if(!Array.isArray(rt.doubleData))return"doubleData: array expected";for(lt=0;lt<rt.doubleData.length;++lt)if(typeof rt.doubleData[lt]!="number")return"doubleData: number[] expected"}if(rt.uint64Data!=null&&rt.hasOwnProperty("uint64Data")){if(!Array.isArray(rt.uint64Data))return"uint64Data: array expected";for(lt=0;lt<rt.uint64Data.length;++lt)if(!(ht.isInteger(rt.uint64Data[lt])||rt.uint64Data[lt]&&ht.isInteger(rt.uint64Data[lt].low)&&ht.isInteger(rt.uint64Data[lt].high)))return"uint64Data: integer|Long[] expected"}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.TensorProto)return rt;var lt=new ct.onnx.TensorProto;if(rt.dims){if(!Array.isArray(rt.dims))throw TypeError(".onnx.TensorProto.dims: array expected");lt.dims=[];for(var ut=0;ut<rt.dims.length;++ut)ht.Long?(lt.dims[ut]=ht.Long.fromValue(rt.dims[ut])).unsigned=!1:typeof rt.dims[ut]=="string"?lt.dims[ut]=parseInt(rt.dims[ut],10):typeof rt.dims[ut]=="number"?lt.dims[ut]=rt.dims[ut]:typeof rt.dims[ut]=="object"&&(lt.dims[ut]=new ht.LongBits(rt.dims[ut].low>>>0,rt.dims[ut].high>>>0).toNumber())}if(rt.dataType!=null&&(lt.dataType=0|rt.dataType),rt.segment!=null){if(typeof rt.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");lt.segment=ct.onnx.TensorProto.Segment.fromObject(rt.segment)}if(rt.floatData){if(!Array.isArray(rt.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(lt.floatData=[],ut=0;ut<rt.floatData.length;++ut)lt.floatData[ut]=Number(rt.floatData[ut])}if(rt.int32Data){if(!Array.isArray(rt.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(lt.int32Data=[],ut=0;ut<rt.int32Data.length;++ut)lt.int32Data[ut]=0|rt.int32Data[ut]}if(rt.stringData){if(!Array.isArray(rt.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(lt.stringData=[],ut=0;ut<rt.stringData.length;++ut)typeof rt.stringData[ut]=="string"?ht.base64.decode(rt.stringData[ut],lt.stringData[ut]=ht.newBuffer(ht.base64.length(rt.stringData[ut])),0):rt.stringData[ut].length&&(lt.stringData[ut]=rt.stringData[ut])}if(rt.int64Data){if(!Array.isArray(rt.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(lt.int64Data=[],ut=0;ut<rt.int64Data.length;++ut)ht.Long?(lt.int64Data[ut]=ht.Long.fromValue(rt.int64Data[ut])).unsigned=!1:typeof rt.int64Data[ut]=="string"?lt.int64Data[ut]=parseInt(rt.int64Data[ut],10):typeof rt.int64Data[ut]=="number"?lt.int64Data[ut]=rt.int64Data[ut]:typeof rt.int64Data[ut]=="object"&&(lt.int64Data[ut]=new ht.LongBits(rt.int64Data[ut].low>>>0,rt.int64Data[ut].high>>>0).toNumber())}if(rt.name!=null&&(lt.name=String(rt.name)),rt.docString!=null&&(lt.docString=String(rt.docString)),rt.rawData!=null&&(typeof rt.rawData=="string"?ht.base64.decode(rt.rawData,lt.rawData=ht.newBuffer(ht.base64.length(rt.rawData)),0):rt.rawData.length&&(lt.rawData=rt.rawData)),rt.externalData){if(!Array.isArray(rt.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(lt.externalData=[],ut=0;ut<rt.externalData.length;++ut){if(typeof rt.externalData[ut]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");lt.externalData[ut]=ct.onnx.StringStringEntryProto.fromObject(rt.externalData[ut])}}switch(rt.dataLocation){case"DEFAULT":case 0:lt.dataLocation=0;break;case"EXTERNAL":case 1:lt.dataLocation=1}if(rt.doubleData){if(!Array.isArray(rt.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(lt.doubleData=[],ut=0;ut<rt.doubleData.length;++ut)lt.doubleData[ut]=Number(rt.doubleData[ut])}if(rt.uint64Data){if(!Array.isArray(rt.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(lt.uint64Data=[],ut=0;ut<rt.uint64Data.length;++ut)ht.Long?(lt.uint64Data[ut]=ht.Long.fromValue(rt.uint64Data[ut])).unsigned=!0:typeof rt.uint64Data[ut]=="string"?lt.uint64Data[ut]=parseInt(rt.uint64Data[ut],10):typeof rt.uint64Data[ut]=="number"?lt.uint64Data[ut]=rt.uint64Data[ut]:typeof rt.uint64Data[ut]=="object"&&(lt.uint64Data[ut]=new ht.LongBits(rt.uint64Data[ut].low>>>0,rt.uint64Data[ut].high>>>0).toNumber(!0))}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.dims=[],ut.floatData=[],ut.int32Data=[],ut.stringData=[],ut.int64Data=[],ut.doubleData=[],ut.uint64Data=[],ut.externalData=[]),lt.defaults&&(ut.dataType=0,ut.segment=null,ut.name="",lt.bytes===String?ut.rawData="":(ut.rawData=[],lt.bytes!==Array&&(ut.rawData=ht.newBuffer(ut.rawData))),ut.docString="",ut.dataLocation=lt.enums===String?"DEFAULT":0),rt.dims&&rt.dims.length){ut.dims=[];for(var pt=0;pt<rt.dims.length;++pt)typeof rt.dims[pt]=="number"?ut.dims[pt]=lt.longs===String?String(rt.dims[pt]):rt.dims[pt]:ut.dims[pt]=lt.longs===String?ht.Long.prototype.toString.call(rt.dims[pt]):lt.longs===Number?new ht.LongBits(rt.dims[pt].low>>>0,rt.dims[pt].high>>>0).toNumber():rt.dims[pt]}if(rt.dataType!=null&&rt.hasOwnProperty("dataType")&&(ut.dataType=rt.dataType),rt.segment!=null&&rt.hasOwnProperty("segment")&&(ut.segment=ct.onnx.TensorProto.Segment.toObject(rt.segment,lt)),rt.floatData&&rt.floatData.length)for(ut.floatData=[],pt=0;pt<rt.floatData.length;++pt)ut.floatData[pt]=lt.json&&!isFinite(rt.floatData[pt])?String(rt.floatData[pt]):rt.floatData[pt];if(rt.int32Data&&rt.int32Data.length)for(ut.int32Data=[],pt=0;pt<rt.int32Data.length;++pt)ut.int32Data[pt]=rt.int32Data[pt];if(rt.stringData&&rt.stringData.length)for(ut.stringData=[],pt=0;pt<rt.stringData.length;++pt)ut.stringData[pt]=lt.bytes===String?ht.base64.encode(rt.stringData[pt],0,rt.stringData[pt].length):lt.bytes===Array?Array.prototype.slice.call(rt.stringData[pt]):rt.stringData[pt];if(rt.int64Data&&rt.int64Data.length)for(ut.int64Data=[],pt=0;pt<rt.int64Data.length;++pt)typeof rt.int64Data[pt]=="number"?ut.int64Data[pt]=lt.longs===String?String(rt.int64Data[pt]):rt.int64Data[pt]:ut.int64Data[pt]=lt.longs===String?ht.Long.prototype.toString.call(rt.int64Data[pt]):lt.longs===Number?new ht.LongBits(rt.int64Data[pt].low>>>0,rt.int64Data[pt].high>>>0).toNumber():rt.int64Data[pt];if(rt.name!=null&&rt.hasOwnProperty("name")&&(ut.name=rt.name),rt.rawData!=null&&rt.hasOwnProperty("rawData")&&(ut.rawData=lt.bytes===String?ht.base64.encode(rt.rawData,0,rt.rawData.length):lt.bytes===Array?Array.prototype.slice.call(rt.rawData):rt.rawData),rt.doubleData&&rt.doubleData.length)for(ut.doubleData=[],pt=0;pt<rt.doubleData.length;++pt)ut.doubleData[pt]=lt.json&&!isFinite(rt.doubleData[pt])?String(rt.doubleData[pt]):rt.doubleData[pt];if(rt.uint64Data&&rt.uint64Data.length)for(ut.uint64Data=[],pt=0;pt<rt.uint64Data.length;++pt)typeof rt.uint64Data[pt]=="number"?ut.uint64Data[pt]=lt.longs===String?String(rt.uint64Data[pt]):rt.uint64Data[pt]:ut.uint64Data[pt]=lt.longs===String?ht.Long.prototype.toString.call(rt.uint64Data[pt]):lt.longs===Number?new ht.LongBits(rt.uint64Data[pt].low>>>0,rt.uint64Data[pt].high>>>0).toNumber(!0):rt.uint64Data[pt];if(rt.docString!=null&&rt.hasOwnProperty("docString")&&(ut.docString=rt.docString),rt.externalData&&rt.externalData.length)for(ut.externalData=[],pt=0;pt<rt.externalData.length;++pt)ut.externalData[pt]=ct.onnx.StringStringEntryProto.toObject(rt.externalData[pt],lt);return rt.dataLocation!=null&&rt.hasOwnProperty("dataLocation")&&(ut.dataLocation=lt.enums===String?ct.onnx.TensorProto.DataLocation[rt.dataLocation]:rt.dataLocation),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it.DataType=function(){var rt={},lt=Object.create(rt);return lt[rt[0]="UNDEFINED"]=0,lt[rt[1]="FLOAT"]=1,lt[rt[2]="UINT8"]=2,lt[rt[3]="INT8"]=3,lt[rt[4]="UINT16"]=4,lt[rt[5]="INT16"]=5,lt[rt[6]="INT32"]=6,lt[rt[7]="INT64"]=7,lt[rt[8]="STRING"]=8,lt[rt[9]="BOOL"]=9,lt[rt[10]="FLOAT16"]=10,lt[rt[11]="DOUBLE"]=11,lt[rt[12]="UINT32"]=12,lt[rt[13]="UINT64"]=13,lt[rt[14]="COMPLEX64"]=14,lt[rt[15]="COMPLEX128"]=15,lt[rt[16]="BFLOAT16"]=16,lt}(),it.Segment=function(){function rt(lt){if(lt)for(var ut=Object.keys(lt),pt=0;pt<ut.length;++pt)lt[ut[pt]]!=null&&(this[ut[pt]]=lt[ut[pt]])}return rt.prototype.begin=ht.Long?ht.Long.fromBits(0,0,!1):0,rt.prototype.end=ht.Long?ht.Long.fromBits(0,0,!1):0,rt.create=function(lt){return new rt(lt)},rt.encode=function(lt,ut){return ut||(ut=ft.create()),lt.begin!=null&&lt.hasOwnProperty("begin")&&ut.uint32(8).int64(lt.begin),lt.end!=null&&lt.hasOwnProperty("end")&&ut.uint32(16).int64(lt.end),ut},rt.encodeDelimited=function(lt,ut){return this.encode(lt,ut).ldelim()},rt.decode=function(lt,ut){lt instanceof dt||(lt=dt.create(lt));for(var pt=ut===void 0?lt.len:lt.pos+ut,gt=new ct.onnx.TensorProto.Segment;lt.pos<pt;){var mt=lt.uint32();switch(mt>>>3){case 1:gt.begin=lt.int64();break;case 2:gt.end=lt.int64();break;default:lt.skipType(7&mt)}}return gt},rt.decodeDelimited=function(lt){return lt instanceof dt||(lt=new dt(lt)),this.decode(lt,lt.uint32())},rt.verify=function(lt){return typeof lt!="object"||lt===null?"object expected":lt.begin!=null&&lt.hasOwnProperty("begin")&&!(ht.isInteger(lt.begin)||lt.begin&&ht.isInteger(lt.begin.low)&&ht.isInteger(lt.begin.high))?"begin: integer|Long expected":lt.end!=null&&lt.hasOwnProperty("end")&&!(ht.isInteger(lt.end)||lt.end&&ht.isInteger(lt.end.low)&&ht.isInteger(lt.end.high))?"end: integer|Long expected":null},rt.fromObject=function(lt){if(lt instanceof ct.onnx.TensorProto.Segment)return lt;var ut=new ct.onnx.TensorProto.Segment;return lt.begin!=null&&(ht.Long?(ut.begin=ht.Long.fromValue(lt.begin)).unsigned=!1:typeof lt.begin=="string"?ut.begin=parseInt(lt.begin,10):typeof lt.begin=="number"?ut.begin=lt.begin:typeof lt.begin=="object"&&(ut.begin=new ht.LongBits(lt.begin.low>>>0,lt.begin.high>>>0).toNumber())),lt.end!=null&&(ht.Long?(ut.end=ht.Long.fromValue(lt.end)).unsigned=!1:typeof lt.end=="string"?ut.end=parseInt(lt.end,10):typeof lt.end=="number"?ut.end=lt.end:typeof lt.end=="object"&&(ut.end=new ht.LongBits(lt.end.low>>>0,lt.end.high>>>0).toNumber())),ut},rt.toObject=function(lt,ut){ut||(ut={});var pt={};if(ut.defaults){if(ht.Long){var gt=new ht.Long(0,0,!1);pt.begin=ut.longs===String?gt.toString():ut.longs===Number?gt.toNumber():gt}else pt.begin=ut.longs===String?"0":0;ht.Long?(gt=new ht.Long(0,0,!1),pt.end=ut.longs===String?gt.toString():ut.longs===Number?gt.toNumber():gt):pt.end=ut.longs===String?"0":0}return lt.begin!=null&&lt.hasOwnProperty("begin")&&(typeof lt.begin=="number"?pt.begin=ut.longs===String?String(lt.begin):lt.begin:pt.begin=ut.longs===String?ht.Long.prototype.toString.call(lt.begin):ut.longs===Number?new ht.LongBits(lt.begin.low>>>0,lt.begin.high>>>0).toNumber():lt.begin),lt.end!=null&&lt.hasOwnProperty("end")&&(typeof lt.end=="number"?pt.end=ut.longs===String?String(lt.end):lt.end:pt.end=ut.longs===String?ht.Long.prototype.toString.call(lt.end):ut.longs===Number?new ht.LongBits(lt.end.low>>>0,lt.end.high>>>0).toNumber():lt.end),pt},rt.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},rt}(),it.DataLocation=function(){var rt={},lt=Object.create(rt);return lt[rt[0]="DEFAULT"]=0,lt[rt[1]="EXTERNAL"]=1,lt}(),it}(),ot.TensorShapeProto=function(){function it(rt){if(this.dim=[],rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.dim=ht.emptyArray,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){if(lt||(lt=ft.create()),rt.dim!=null&&rt.dim.length)for(var ut=0;ut<rt.dim.length;++ut)ct.onnx.TensorShapeProto.Dimension.encode(rt.dim[ut],lt.uint32(10).fork()).ldelim();return lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.TensorShapeProto;rt.pos<ut;){var gt=rt.uint32();gt>>>3==1?(pt.dim&&pt.dim.length||(pt.dim=[]),pt.dim.push(ct.onnx.TensorShapeProto.Dimension.decode(rt,rt.uint32()))):rt.skipType(7&gt)}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.dim!=null&&rt.hasOwnProperty("dim")){if(!Array.isArray(rt.dim))return"dim: array expected";for(var lt=0;lt<rt.dim.length;++lt){var ut=ct.onnx.TensorShapeProto.Dimension.verify(rt.dim[lt]);if(ut)return"dim."+ut}}return null},it.fromObject=function(rt){if(rt instanceof ct.onnx.TensorShapeProto)return rt;var lt=new ct.onnx.TensorShapeProto;if(rt.dim){if(!Array.isArray(rt.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");lt.dim=[];for(var ut=0;ut<rt.dim.length;++ut){if(typeof rt.dim[ut]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");lt.dim[ut]=ct.onnx.TensorShapeProto.Dimension.fromObject(rt.dim[ut])}}return lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if((lt.arrays||lt.defaults)&&(ut.dim=[]),rt.dim&&rt.dim.length){ut.dim=[];for(var pt=0;pt<rt.dim.length;++pt)ut.dim[pt]=ct.onnx.TensorShapeProto.Dimension.toObject(rt.dim[pt],lt)}return ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it.Dimension=function(){function rt(ut){if(ut)for(var pt=Object.keys(ut),gt=0;gt<pt.length;++gt)ut[pt[gt]]!=null&&(this[pt[gt]]=ut[pt[gt]])}var lt;return rt.prototype.dimValue=ht.Long?ht.Long.fromBits(0,0,!1):0,rt.prototype.dimParam="",rt.prototype.denotation="",Object.defineProperty(rt.prototype,"value",{get:ht.oneOfGetter(lt=["dimValue","dimParam"]),set:ht.oneOfSetter(lt)}),rt.create=function(ut){return new rt(ut)},rt.encode=function(ut,pt){return pt||(pt=ft.create()),ut.dimValue!=null&&ut.hasOwnProperty("dimValue")&&pt.uint32(8).int64(ut.dimValue),ut.dimParam!=null&&ut.hasOwnProperty("dimParam")&&pt.uint32(18).string(ut.dimParam),ut.denotation!=null&&ut.hasOwnProperty("denotation")&&pt.uint32(26).string(ut.denotation),pt},rt.encodeDelimited=function(ut,pt){return this.encode(ut,pt).ldelim()},rt.decode=function(ut,pt){ut instanceof dt||(ut=dt.create(ut));for(var gt=pt===void 0?ut.len:ut.pos+pt,mt=new ct.onnx.TensorShapeProto.Dimension;ut.pos<gt;){var yt=ut.uint32();switch(yt>>>3){case 1:mt.dimValue=ut.int64();break;case 2:mt.dimParam=ut.string();break;case 3:mt.denotation=ut.string();break;default:ut.skipType(7&yt)}}return mt},rt.decodeDelimited=function(ut){return ut instanceof dt||(ut=new dt(ut)),this.decode(ut,ut.uint32())},rt.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";var pt={};if(ut.dimValue!=null&&ut.hasOwnProperty("dimValue")&&(pt.value=1,!(ht.isInteger(ut.dimValue)||ut.dimValue&&ht.isInteger(ut.dimValue.low)&&ht.isInteger(ut.dimValue.high))))return"dimValue: integer|Long expected";if(ut.dimParam!=null&&ut.hasOwnProperty("dimParam")){if(pt.value===1)return"value: multiple values";if(pt.value=1,!ht.isString(ut.dimParam))return"dimParam: string expected"}return ut.denotation!=null&&ut.hasOwnProperty("denotation")&&!ht.isString(ut.denotation)?"denotation: string expected":null},rt.fromObject=function(ut){if(ut instanceof ct.onnx.TensorShapeProto.Dimension)return ut;var pt=new ct.onnx.TensorShapeProto.Dimension;return ut.dimValue!=null&&(ht.Long?(pt.dimValue=ht.Long.fromValue(ut.dimValue)).unsigned=!1:typeof ut.dimValue=="string"?pt.dimValue=parseInt(ut.dimValue,10):typeof ut.dimValue=="number"?pt.dimValue=ut.dimValue:typeof ut.dimValue=="object"&&(pt.dimValue=new ht.LongBits(ut.dimValue.low>>>0,ut.dimValue.high>>>0).toNumber())),ut.dimParam!=null&&(pt.dimParam=String(ut.dimParam)),ut.denotation!=null&&(pt.denotation=String(ut.denotation)),pt},rt.toObject=function(ut,pt){pt||(pt={});var gt={};return pt.defaults&&(gt.denotation=""),ut.dimValue!=null&&ut.hasOwnProperty("dimValue")&&(typeof ut.dimValue=="number"?gt.dimValue=pt.longs===String?String(ut.dimValue):ut.dimValue:gt.dimValue=pt.longs===String?ht.Long.prototype.toString.call(ut.dimValue):pt.longs===Number?new ht.LongBits(ut.dimValue.low>>>0,ut.dimValue.high>>>0).toNumber():ut.dimValue,pt.oneofs&&(gt.value="dimValue")),ut.dimParam!=null&&ut.hasOwnProperty("dimParam")&&(gt.dimParam=ut.dimParam,pt.oneofs&&(gt.value="dimParam")),ut.denotation!=null&&ut.hasOwnProperty("denotation")&&(gt.denotation=ut.denotation),gt},rt.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},rt}(),it}(),ot.TypeProto=function(){function it(lt){if(lt)for(var ut=Object.keys(lt),pt=0;pt<ut.length;++pt)lt[ut[pt]]!=null&&(this[ut[pt]]=lt[ut[pt]])}var rt;return it.prototype.tensorType=null,it.prototype.denotation="",Object.defineProperty(it.prototype,"value",{get:ht.oneOfGetter(rt=["tensorType"]),set:ht.oneOfSetter(rt)}),it.create=function(lt){return new it(lt)},it.encode=function(lt,ut){return ut||(ut=ft.create()),lt.tensorType!=null&&lt.hasOwnProperty("tensorType")&&ct.onnx.TypeProto.Tensor.encode(lt.tensorType,ut.uint32(10).fork()).ldelim(),lt.denotation!=null&&lt.hasOwnProperty("denotation")&&ut.uint32(50).string(lt.denotation),ut},it.encodeDelimited=function(lt,ut){return this.encode(lt,ut).ldelim()},it.decode=function(lt,ut){lt instanceof dt||(lt=dt.create(lt));for(var pt=ut===void 0?lt.len:lt.pos+ut,gt=new ct.onnx.TypeProto;lt.pos<pt;){var mt=lt.uint32();switch(mt>>>3){case 1:gt.tensorType=ct.onnx.TypeProto.Tensor.decode(lt,lt.uint32());break;case 6:gt.denotation=lt.string();break;default:lt.skipType(7&mt)}}return gt},it.decodeDelimited=function(lt){return lt instanceof dt||(lt=new dt(lt)),this.decode(lt,lt.uint32())},it.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.tensorType!=null&&lt.hasOwnProperty("tensorType")){var ut=ct.onnx.TypeProto.Tensor.verify(lt.tensorType);if(ut)return"tensorType."+ut}return lt.denotation!=null&&lt.hasOwnProperty("denotation")&&!ht.isString(lt.denotation)?"denotation: string expected":null},it.fromObject=function(lt){if(lt instanceof ct.onnx.TypeProto)return lt;var ut=new ct.onnx.TypeProto;if(lt.tensorType!=null){if(typeof lt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ut.tensorType=ct.onnx.TypeProto.Tensor.fromObject(lt.tensorType)}return lt.denotation!=null&&(ut.denotation=String(lt.denotation)),ut},it.toObject=function(lt,ut){ut||(ut={});var pt={};return ut.defaults&&(pt.denotation=""),lt.tensorType!=null&&lt.hasOwnProperty("tensorType")&&(pt.tensorType=ct.onnx.TypeProto.Tensor.toObject(lt.tensorType,ut),ut.oneofs&&(pt.value="tensorType")),lt.denotation!=null&&lt.hasOwnProperty("denotation")&&(pt.denotation=lt.denotation),pt},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it.Tensor=function(){function lt(ut){if(ut)for(var pt=Object.keys(ut),gt=0;gt<pt.length;++gt)ut[pt[gt]]!=null&&(this[pt[gt]]=ut[pt[gt]])}return lt.prototype.elemType=0,lt.prototype.shape=null,lt.create=function(ut){return new lt(ut)},lt.encode=function(ut,pt){return pt||(pt=ft.create()),ut.elemType!=null&&ut.hasOwnProperty("elemType")&&pt.uint32(8).int32(ut.elemType),ut.shape!=null&&ut.hasOwnProperty("shape")&&ct.onnx.TensorShapeProto.encode(ut.shape,pt.uint32(18).fork()).ldelim(),pt},lt.encodeDelimited=function(ut,pt){return this.encode(ut,pt).ldelim()},lt.decode=function(ut,pt){ut instanceof dt||(ut=dt.create(ut));for(var gt=pt===void 0?ut.len:ut.pos+pt,mt=new ct.onnx.TypeProto.Tensor;ut.pos<gt;){var yt=ut.uint32();switch(yt>>>3){case 1:mt.elemType=ut.int32();break;case 2:mt.shape=ct.onnx.TensorShapeProto.decode(ut,ut.uint32());break;default:ut.skipType(7&yt)}}return mt},lt.decodeDelimited=function(ut){return ut instanceof dt||(ut=new dt(ut)),this.decode(ut,ut.uint32())},lt.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.elemType!=null&&ut.hasOwnProperty("elemType")&&!ht.isInteger(ut.elemType))return"elemType: integer expected";if(ut.shape!=null&&ut.hasOwnProperty("shape")){var pt=ct.onnx.TensorShapeProto.verify(ut.shape);if(pt)return"shape."+pt}return null},lt.fromObject=function(ut){if(ut instanceof ct.onnx.TypeProto.Tensor)return ut;var pt=new ct.onnx.TypeProto.Tensor;if(ut.elemType!=null&&(pt.elemType=0|ut.elemType),ut.shape!=null){if(typeof ut.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");pt.shape=ct.onnx.TensorShapeProto.fromObject(ut.shape)}return pt},lt.toObject=function(ut,pt){pt||(pt={});var gt={};return pt.defaults&&(gt.elemType=0,gt.shape=null),ut.elemType!=null&&ut.hasOwnProperty("elemType")&&(gt.elemType=ut.elemType),ut.shape!=null&&ut.hasOwnProperty("shape")&&(gt.shape=ct.onnx.TensorShapeProto.toObject(ut.shape,pt)),gt},lt.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},lt}(),it}(),ot.OperatorSetIdProto=function(){function it(rt){if(rt)for(var lt=Object.keys(rt),ut=0;ut<lt.length;++ut)rt[lt[ut]]!=null&&(this[lt[ut]]=rt[lt[ut]])}return it.prototype.domain="",it.prototype.version=ht.Long?ht.Long.fromBits(0,0,!1):0,it.create=function(rt){return new it(rt)},it.encode=function(rt,lt){return lt||(lt=ft.create()),rt.domain!=null&&rt.hasOwnProperty("domain")&&lt.uint32(10).string(rt.domain),rt.version!=null&&rt.hasOwnProperty("version")&&lt.uint32(16).int64(rt.version),lt},it.encodeDelimited=function(rt,lt){return this.encode(rt,lt).ldelim()},it.decode=function(rt,lt){rt instanceof dt||(rt=dt.create(rt));for(var ut=lt===void 0?rt.len:rt.pos+lt,pt=new ct.onnx.OperatorSetIdProto;rt.pos<ut;){var gt=rt.uint32();switch(gt>>>3){case 1:pt.domain=rt.string();break;case 2:pt.version=rt.int64();break;default:rt.skipType(7&gt)}}return pt},it.decodeDelimited=function(rt){return rt instanceof dt||(rt=new dt(rt)),this.decode(rt,rt.uint32())},it.verify=function(rt){return typeof rt!="object"||rt===null?"object expected":rt.domain!=null&&rt.hasOwnProperty("domain")&&!ht.isString(rt.domain)?"domain: string expected":rt.version!=null&&rt.hasOwnProperty("version")&&!(ht.isInteger(rt.version)||rt.version&&ht.isInteger(rt.version.low)&&ht.isInteger(rt.version.high))?"version: integer|Long expected":null},it.fromObject=function(rt){if(rt instanceof ct.onnx.OperatorSetIdProto)return rt;var lt=new ct.onnx.OperatorSetIdProto;return rt.domain!=null&&(lt.domain=String(rt.domain)),rt.version!=null&&(ht.Long?(lt.version=ht.Long.fromValue(rt.version)).unsigned=!1:typeof rt.version=="string"?lt.version=parseInt(rt.version,10):typeof rt.version=="number"?lt.version=rt.version:typeof rt.version=="object"&&(lt.version=new ht.LongBits(rt.version.low>>>0,rt.version.high>>>0).toNumber())),lt},it.toObject=function(rt,lt){lt||(lt={});var ut={};if(lt.defaults)if(ut.domain="",ht.Long){var pt=new ht.Long(0,0,!1);ut.version=lt.longs===String?pt.toString():lt.longs===Number?pt.toNumber():pt}else ut.version=lt.longs===String?"0":0;return rt.domain!=null&&rt.hasOwnProperty("domain")&&(ut.domain=rt.domain),rt.version!=null&&rt.hasOwnProperty("version")&&(typeof rt.version=="number"?ut.version=lt.longs===String?String(rt.version):rt.version:ut.version=lt.longs===String?ht.Long.prototype.toString.call(rt.version):lt.longs===Number?new ht.LongBits(rt.version.low>>>0,rt.version.high>>>0).toNumber():rt.version),ut},it.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},it}(),ot),et.exports=ct},2100:(et,_e,tt)=>{et.exports=tt(9482)},9482:(et,_e,tt)=>{var nt=_e;function st(){nt.util._configure(),nt.Writer._configure(nt.BufferWriter),nt.Reader._configure(nt.BufferReader)}nt.build="minimal",nt.Writer=tt(1173),nt.BufferWriter=tt(3155),nt.Reader=tt(1408),nt.BufferReader=tt(593),nt.util=tt(9693),nt.rpc=tt(5994),nt.roots=tt(5054),nt.configure=st,st()},1408:(et,_e,tt)=>{et.exports=ft;var nt,st=tt(9693),ot=st.LongBits,at=st.utf8;function dt(pt,gt){return RangeError("index out of range: "+pt.pos+" + "+(gt||1)+" > "+pt.len)}function ft(pt){this.buf=pt,this.pos=0,this.len=pt.length}var ht,ct=typeof Uint8Array<"u"?function(pt){if(pt instanceof Uint8Array||Array.isArray(pt))return new ft(pt);throw Error("illegal buffer")}:function(pt){if(Array.isArray(pt))return new ft(pt);throw Error("illegal buffer")},it=function(){return st.Buffer?function(pt){return(ft.create=function(gt){return st.Buffer.isBuffer(gt)?new nt(gt):ct(gt)})(pt)}:ct};function rt(){var pt=new ot(0,0),gt=0;if(!(this.len-this.pos>4)){for(;gt<3;++gt){if(this.pos>=this.len)throw dt(this);if(pt.lo=(pt.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return pt}return pt.lo=(pt.lo|(127&this.buf[this.pos++])<<7*gt)>>>0,pt}for(;gt<4;++gt)if(pt.lo=(pt.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return pt;if(pt.lo=(pt.lo|(127&this.buf[this.pos])<<28)>>>0,pt.hi=(pt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return pt;if(gt=0,this.len-this.pos>4){for(;gt<5;++gt)if(pt.hi=(pt.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return pt}else for(;gt<5;++gt){if(this.pos>=this.len)throw dt(this);if(pt.hi=(pt.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return pt}throw Error("invalid varint encoding")}function lt(pt,gt){return(pt[gt-4]|pt[gt-3]<<8|pt[gt-2]<<16|pt[gt-1]<<24)>>>0}function ut(){if(this.pos+8>this.len)throw dt(this,8);return new ot(lt(this.buf,this.pos+=4),lt(this.buf,this.pos+=4))}ft.create=it(),ft.prototype._slice=st.Array.prototype.subarray||st.Array.prototype.slice,ft.prototype.uint32=(ht=4294967295,function(){if(ht=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ht=(ht|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ht;if((this.pos+=5)>this.len)throw this.pos=this.len,dt(this,10);return ht}),ft.prototype.int32=function(){return 0|this.uint32()},ft.prototype.sint32=function(){var pt=this.uint32();return pt>>>1^-(1&pt)|0},ft.prototype.bool=function(){return this.uint32()!==0},ft.prototype.fixed32=function(){if(this.pos+4>this.len)throw dt(this,4);return lt(this.buf,this.pos+=4)},ft.prototype.sfixed32=function(){if(this.pos+4>this.len)throw dt(this,4);return 0|lt(this.buf,this.pos+=4)},ft.prototype.float=function(){if(this.pos+4>this.len)throw dt(this,4);var pt=st.float.readFloatLE(this.buf,this.pos);return this.pos+=4,pt},ft.prototype.double=function(){if(this.pos+8>this.len)throw dt(this,4);var pt=st.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,pt},ft.prototype.bytes=function(){var pt=this.uint32(),gt=this.pos,mt=this.pos+pt;if(mt>this.len)throw dt(this,pt);return this.pos+=pt,Array.isArray(this.buf)?this.buf.slice(gt,mt):gt===mt?new this.buf.constructor(0):this._slice.call(this.buf,gt,mt)},ft.prototype.string=function(){var pt=this.bytes();return at.read(pt,0,pt.length)},ft.prototype.skip=function(pt){if(typeof pt=="number"){if(this.pos+pt>this.len)throw dt(this,pt);this.pos+=pt}else do if(this.pos>=this.len)throw dt(this);while(128&this.buf[this.pos++]);return this},ft.prototype.skipType=function(pt){switch(pt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(pt=7&this.uint32())!=4;)this.skipType(pt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+pt+" at offset "+this.pos)}return this},ft._configure=function(pt){nt=pt,ft.create=it(),nt._configure();var gt=st.Long?"toLong":"toNumber";st.merge(ft.prototype,{int64:function(){return rt.call(this)[gt](!1)},uint64:function(){return rt.call(this)[gt](!0)},sint64:function(){return rt.call(this).zzDecode()[gt](!1)},fixed64:function(){return ut.call(this)[gt](!0)},sfixed64:function(){return ut.call(this)[gt](!1)}})}},593:(et,_e,tt)=>{et.exports=ot;var nt=tt(1408);(ot.prototype=Object.create(nt.prototype)).constructor=ot;var st=tt(9693);function ot(at){nt.call(this,at)}ot._configure=function(){st.Buffer&&(ot.prototype._slice=st.Buffer.prototype.slice)},ot.prototype.string=function(){var at=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+at,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+at,this.len))},ot._configure()},5054:et=>{et.exports={}},5994:(et,_e,tt)=>{_e.Service=tt(7948)},7948:(et,_e,tt)=>{et.exports=st;var nt=tt(9693);function st(ot,at,dt){if(typeof ot!="function")throw TypeError("rpcImpl must be a function");nt.EventEmitter.call(this),this.rpcImpl=ot,this.requestDelimited=!!at,this.responseDelimited=!!dt}(st.prototype=Object.create(nt.EventEmitter.prototype)).constructor=st,st.prototype.rpcCall=function ot(at,dt,ft,ht,ct){if(!ht)throw TypeError("request must be specified");var it=this;if(!ct)return nt.asPromise(ot,it,at,dt,ft,ht);if(it.rpcImpl)try{return it.rpcImpl(at,dt[it.requestDelimited?"encodeDelimited":"encode"](ht).finish(),function(rt,lt){if(rt)return it.emit("error",rt,at),ct(rt);if(lt!==null){if(!(lt instanceof ft))try{lt=ft[it.responseDelimited?"decodeDelimited":"decode"](lt)}catch(ut){return it.emit("error",ut,at),ct(ut)}return it.emit("data",lt,at),ct(null,lt)}it.end(!0)})}catch(rt){return it.emit("error",rt,at),void setTimeout(function(){ct(rt)},0)}else setTimeout(function(){ct(Error("already ended"))},0)},st.prototype.end=function(ot){return this.rpcImpl&&(ot||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(et,_e,tt)=>{et.exports=st;var nt=tt(9693);function st(ft,ht){this.lo=ft>>>0,this.hi=ht>>>0}var ot=st.zero=new st(0,0);ot.toNumber=function(){return 0},ot.zzEncode=ot.zzDecode=function(){return this},ot.length=function(){return 1};var at=st.zeroHash="\0\0\0\0\0\0\0\0";st.fromNumber=function(ft){if(ft===0)return ot;var ht=ft<0;ht&&(ft=-ft);var ct=ft>>>0,it=(ft-ct)/4294967296>>>0;return ht&&(it=~it>>>0,ct=~ct>>>0,++ct>4294967295&&(ct=0,++it>4294967295&&(it=0))),new st(ct,it)},st.from=function(ft){if(typeof ft=="number")return st.fromNumber(ft);if(nt.isString(ft)){if(!nt.Long)return st.fromNumber(parseInt(ft,10));ft=nt.Long.fromString(ft)}return ft.low||ft.high?new st(ft.low>>>0,ft.high>>>0):ot},st.prototype.toNumber=function(ft){if(!ft&&this.hi>>>31){var ht=1+~this.lo>>>0,ct=~this.hi>>>0;return ht||(ct=ct+1>>>0),-(ht+4294967296*ct)}return this.lo+4294967296*this.hi},st.prototype.toLong=function(ft){return nt.Long?new nt.Long(0|this.lo,0|this.hi,!!ft):{low:0|this.lo,high:0|this.hi,unsigned:!!ft}};var dt=String.prototype.charCodeAt;st.fromHash=function(ft){return ft===at?ot:new st((dt.call(ft,0)|dt.call(ft,1)<<8|dt.call(ft,2)<<16|dt.call(ft,3)<<24)>>>0,(dt.call(ft,4)|dt.call(ft,5)<<8|dt.call(ft,6)<<16|dt.call(ft,7)<<24)>>>0)},st.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},st.prototype.zzEncode=function(){var ft=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ft)>>>0,this.lo=(this.lo<<1^ft)>>>0,this},st.prototype.zzDecode=function(){var ft=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^ft)>>>0,this.hi=(this.hi>>>1^ft)>>>0,this},st.prototype.length=function(){var ft=this.lo,ht=(this.lo>>>28|this.hi<<4)>>>0,ct=this.hi>>>24;return ct===0?ht===0?ft<16384?ft<128?1:2:ft<2097152?3:4:ht<16384?ht<128?5:6:ht<2097152?7:8:ct<128?9:10}},9693:function(et,_e,tt){var nt=_e;function st(at,dt,ft){for(var ht=Object.keys(dt),ct=0;ct<ht.length;++ct)at[ht[ct]]!==void 0&&ft||(at[ht[ct]]=dt[ht[ct]]);return at}function ot(at){function dt(ft,ht){if(!(this instanceof dt))return new dt(ft,ht);Object.defineProperty(this,"message",{get:function(){return ft}}),Error.captureStackTrace?Error.captureStackTrace(this,dt):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ht&&st(this,ht)}return(dt.prototype=Object.create(Error.prototype)).constructor=dt,Object.defineProperty(dt.prototype,"name",{get:function(){return at}}),dt.prototype.toString=function(){return this.name+": "+this.message},dt}nt.asPromise=tt(4537),nt.base64=tt(7419),nt.EventEmitter=tt(9211),nt.float=tt(945),nt.inquire=tt(7199),nt.utf8=tt(4997),nt.pool=tt(6662),nt.LongBits=tt(1945),nt.isNode=!!(tt.g!==void 0&&tt.g&&tt.g.process&&tt.g.process.versions&&tt.g.process.versions.node),nt.global=nt.isNode&&tt.g||typeof window<"u"&&window||typeof self<"u"&&self||this,nt.emptyArray=Object.freeze?Object.freeze([]):[],nt.emptyObject=Object.freeze?Object.freeze({}):{},nt.isInteger=Number.isInteger||function(at){return typeof at=="number"&&isFinite(at)&&Math.floor(at)===at},nt.isString=function(at){return typeof at=="string"||at instanceof String},nt.isObject=function(at){return at&&typeof at=="object"},nt.isset=nt.isSet=function(at,dt){var ft=at[dt];return!(ft==null||!at.hasOwnProperty(dt))&&(typeof ft!="object"||(Array.isArray(ft)?ft.length:Object.keys(ft).length)>0)},nt.Buffer=function(){try{var at=nt.inquire("buffer").Buffer;return at.prototype.utf8Write?at:null}catch{return null}}(),nt._Buffer_from=null,nt._Buffer_allocUnsafe=null,nt.newBuffer=function(at){return typeof at=="number"?nt.Buffer?nt._Buffer_allocUnsafe(at):new nt.Array(at):nt.Buffer?nt._Buffer_from(at):typeof Uint8Array>"u"?at:new Uint8Array(at)},nt.Array=typeof Uint8Array<"u"?Uint8Array:Array,nt.Long=nt.global.dcodeIO&&nt.global.dcodeIO.Long||nt.global.Long||nt.inquire("long"),nt.key2Re=/^true|false|0|1$/,nt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,nt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,nt.longToHash=function(at){return at?nt.LongBits.from(at).toHash():nt.LongBits.zeroHash},nt.longFromHash=function(at,dt){var ft=nt.LongBits.fromHash(at);return nt.Long?nt.Long.fromBits(ft.lo,ft.hi,dt):ft.toNumber(!!dt)},nt.merge=st,nt.lcFirst=function(at){return at.charAt(0).toLowerCase()+at.substring(1)},nt.newError=ot,nt.ProtocolError=ot("ProtocolError"),nt.oneOfGetter=function(at){for(var dt={},ft=0;ft<at.length;++ft)dt[at[ft]]=1;return function(){for(var ht=Object.keys(this),ct=ht.length-1;ct>-1;--ct)if(dt[ht[ct]]===1&&this[ht[ct]]!==void 0&&this[ht[ct]]!==null)return ht[ct]}},nt.oneOfSetter=function(at){return function(dt){for(var ft=0;ft<at.length;++ft)at[ft]!==dt&&delete this[at[ft]]}},nt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},nt._configure=function(){var at=nt.Buffer;at?(nt._Buffer_from=at.from!==Uint8Array.from&&at.from||function(dt,ft){return new at(dt,ft)},nt._Buffer_allocUnsafe=at.allocUnsafe||function(dt){return new at(dt)}):nt._Buffer_from=nt._Buffer_allocUnsafe=null}},1173:(et,_e,tt)=>{et.exports=it;var nt,st=tt(9693),ot=st.LongBits,at=st.base64,dt=st.utf8;function ft(yt,bt,wt){this.fn=yt,this.len=bt,this.next=void 0,this.val=wt}function ht(){}function ct(yt){this.head=yt.head,this.tail=yt.tail,this.len=yt.len,this.next=yt.states}function it(){this.len=0,this.head=new ft(ht,0,0),this.tail=this.head,this.states=null}var rt=function(){return st.Buffer?function(){return(it.create=function(){return new nt})()}:function(){return new it}};function lt(yt,bt,wt){bt[wt]=255&yt}function ut(yt,bt){this.len=yt,this.next=void 0,this.val=bt}function pt(yt,bt,wt){for(;yt.hi;)bt[wt++]=127&yt.lo|128,yt.lo=(yt.lo>>>7|yt.hi<<25)>>>0,yt.hi>>>=7;for(;yt.lo>127;)bt[wt++]=127&yt.lo|128,yt.lo=yt.lo>>>7;bt[wt++]=yt.lo}function gt(yt,bt,wt){bt[wt]=255&yt,bt[wt+1]=yt>>>8&255,bt[wt+2]=yt>>>16&255,bt[wt+3]=yt>>>24}it.create=rt(),it.alloc=function(yt){return new st.Array(yt)},st.Array!==Array&&(it.alloc=st.pool(it.alloc,st.Array.prototype.subarray)),it.prototype._push=function(yt,bt,wt){return this.tail=this.tail.next=new ft(yt,bt,wt),this.len+=bt,this},ut.prototype=Object.create(ft.prototype),ut.prototype.fn=function(yt,bt,wt){for(;yt>127;)bt[wt++]=127&yt|128,yt>>>=7;bt[wt]=yt},it.prototype.uint32=function(yt){return this.len+=(this.tail=this.tail.next=new ut((yt>>>=0)<128?1:yt<16384?2:yt<2097152?3:yt<268435456?4:5,yt)).len,this},it.prototype.int32=function(yt){return yt<0?this._push(pt,10,ot.fromNumber(yt)):this.uint32(yt)},it.prototype.sint32=function(yt){return this.uint32((yt<<1^yt>>31)>>>0)},it.prototype.uint64=function(yt){var bt=ot.from(yt);return this._push(pt,bt.length(),bt)},it.prototype.int64=it.prototype.uint64,it.prototype.sint64=function(yt){var bt=ot.from(yt).zzEncode();return this._push(pt,bt.length(),bt)},it.prototype.bool=function(yt){return this._push(lt,1,yt?1:0)},it.prototype.fixed32=function(yt){return this._push(gt,4,yt>>>0)},it.prototype.sfixed32=it.prototype.fixed32,it.prototype.fixed64=function(yt){var bt=ot.from(yt);return this._push(gt,4,bt.lo)._push(gt,4,bt.hi)},it.prototype.sfixed64=it.prototype.fixed64,it.prototype.float=function(yt){return this._push(st.float.writeFloatLE,4,yt)},it.prototype.double=function(yt){return this._push(st.float.writeDoubleLE,8,yt)};var mt=st.Array.prototype.set?function(yt,bt,wt){bt.set(yt,wt)}:function(yt,bt,wt){for(var xt=0;xt<yt.length;++xt)bt[wt+xt]=yt[xt]};it.prototype.bytes=function(yt){var bt=yt.length>>>0;if(!bt)return this._push(lt,1,0);if(st.isString(yt)){var wt=it.alloc(bt=at.length(yt));at.decode(yt,wt,0),yt=wt}return this.uint32(bt)._push(mt,bt,yt)},it.prototype.string=function(yt){var bt=dt.length(yt);return bt?this.uint32(bt)._push(dt.write,bt,yt):this._push(lt,1,0)},it.prototype.fork=function(){return this.states=new ct(this),this.head=this.tail=new ft(ht,0,0),this.len=0,this},it.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ft(ht,0,0),this.len=0),this},it.prototype.ldelim=function(){var yt=this.head,bt=this.tail,wt=this.len;return this.reset().uint32(wt),wt&&(this.tail.next=yt.next,this.tail=bt,this.len+=wt),this},it.prototype.finish=function(){for(var yt=this.head.next,bt=this.constructor.alloc(this.len),wt=0;yt;)yt.fn(yt.val,bt,wt),wt+=yt.len,yt=yt.next;return bt},it._configure=function(yt){nt=yt,it.create=rt(),nt._configure()}},3155:(et,_e,tt)=>{et.exports=ot;var nt=tt(1173);(ot.prototype=Object.create(nt.prototype)).constructor=ot;var st=tt(9693);function ot(){nt.call(this)}function at(dt,ft,ht){dt.length<40?st.utf8.write(dt,ft,ht):ft.utf8Write?ft.utf8Write(dt,ht):ft.write(dt,ht)}ot._configure=function(){ot.alloc=st._Buffer_allocUnsafe,ot.writeBytesBuffer=st.Buffer&&st.Buffer.prototype instanceof Uint8Array&&st.Buffer.prototype.set.name==="set"?function(dt,ft,ht){ft.set(dt,ht)}:function(dt,ft,ht){if(dt.copy)dt.copy(ft,ht,0,dt.length);else for(var ct=0;ct<dt.length;)ft[ht++]=dt[ct++]}},ot.prototype.bytes=function(dt){st.isString(dt)&&(dt=st._Buffer_from(dt,"base64"));var ft=dt.length>>>0;return this.uint32(ft),ft&&this._push(ot.writeBytesBuffer,ft,dt),this},ot.prototype.string=function(dt){var ft=st.Buffer.byteLength(dt);return this.uint32(ft),ft&&this._push(at,ft,dt),this},ot._configure()},7714:(et,_e,tt)=>{_e.R=void 0;const nt=tt(6919),st=tt(7448);_e.R=new class{async init(){}async createSessionHandler(ot,at){const dt=new nt.Session(at);return await dt.loadModel(ot),new st.OnnxjsSessionHandler(dt)}}},4200:(et,_e,tt)=>{_e.c8=_e.rX=void 0;const nt=tt(1670),st=tt(5381),ot=tt(2157),at=tt(2306);_e.rX=()=>{if((typeof nt.env.wasm.initTimeout!="number"||nt.env.wasm.initTimeout<0)&&(nt.env.wasm.initTimeout=0),typeof nt.env.wasm.simd!="boolean"&&(nt.env.wasm.simd=!0),typeof nt.env.wasm.proxy!="boolean"&&(nt.env.wasm.proxy=!1),typeof nt.env.wasm.numThreads!="number"||!Number.isInteger(nt.env.wasm.numThreads)||nt.env.wasm.numThreads<=0){const dt=typeof navigator>"u"?(0,st.cpus)().length:navigator.hardwareConcurrency;nt.env.wasm.numThreads=Math.min(4,Math.ceil((dt||1)/2))}},_e.c8=new class{async init(){(0,_e.rX)(),await(0,ot.initWasm)()}async createSessionHandler(dt,ft){const ht=new at.OnnxruntimeWebAssemblySessionHandler;return await ht.loadModel(dt,ft),Promise.resolve(ht)}}},6018:function(et,_e,tt){var nt=this&&this.__createBinding||(Object.create?function(at,dt,ft,ht){ht===void 0&&(ht=ft);var ct=Object.getOwnPropertyDescriptor(dt,ft);ct&&!("get"in ct?!dt.__esModule:ct.writable||ct.configurable)||(ct={enumerable:!0,get:function(){return dt[ft]}}),Object.defineProperty(at,ht,ct)}:function(at,dt,ft,ht){ht===void 0&&(ht=ft),at[ht]=dt[ft]}),st=this&&this.__exportStar||function(at,dt){for(var ft in at)ft==="default"||Object.prototype.hasOwnProperty.call(dt,ft)||nt(dt,at,ft)};Object.defineProperty(_e,"__esModule",{value:!0}),st(tt(1670),_e);const ot=tt(1670);{const at=tt(7714).R;(0,ot.registerBackend)("webgl",at,-10)}{const at=tt(4200).c8;(0,ot.registerBackend)("cpu",at,10),(0,ot.registerBackend)("wasm",at,10),(0,ot.registerBackend)("xnnpack",at,9)}},246:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createAttributeWithCacheKey=void 0;class tt{constructor(st){Object.assign(this,st)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(st=>`${this[st]}`).join(";")),this._cacheKey}}_e.createAttributeWithCacheKey=nt=>new tt(nt)},7778:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.Attribute=void 0;const nt=tt(1446),st=tt(9395),ot=tt(9162),at=tt(2517);var dt=st.onnxruntime.experimental.fbs;class ft{constructor(ct){if(this._attributes=new Map,ct!=null){for(const it of ct)it instanceof nt.onnx.AttributeProto?this._attributes.set(it.name,[ft.getValue(it),ft.getType(it)]):it instanceof dt.Attribute&&this._attributes.set(it.name(),[ft.getValue(it),ft.getType(it)]);if(this._attributes.size<ct.length)throw new Error("duplicated attribute names")}}set(ct,it,rt){this._attributes.set(ct,[rt,it])}delete(ct){this._attributes.delete(ct)}getFloat(ct,it){return this.get(ct,"float",it)}getInt(ct,it){return this.get(ct,"int",it)}getString(ct,it){return this.get(ct,"string",it)}getTensor(ct,it){return this.get(ct,"tensor",it)}getFloats(ct,it){return this.get(ct,"floats",it)}getInts(ct,it){return this.get(ct,"ints",it)}getStrings(ct,it){return this.get(ct,"strings",it)}getTensors(ct,it){return this.get(ct,"tensors",it)}get(ct,it,rt){const lt=this._attributes.get(ct);if(lt===void 0){if(rt!==void 0)return rt;throw new Error(`required attribute not found: ${ct}`)}if(lt[1]!==it)throw new Error(`type mismatch: expected ${it} but got ${lt[1]}`);return lt[0]}static getType(ct){const it=ct instanceof nt.onnx.AttributeProto?ct.type:ct.type();switch(it){case nt.onnx.AttributeProto.AttributeType.FLOAT:return"float";case nt.onnx.AttributeProto.AttributeType.INT:return"int";case nt.onnx.AttributeProto.AttributeType.STRING:return"string";case nt.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case nt.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case nt.onnx.AttributeProto.AttributeType.INTS:return"ints";case nt.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case nt.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${nt.onnx.AttributeProto.AttributeType[it]}`)}}static getValue(ct){const it=ct instanceof nt.onnx.AttributeProto?ct.type:ct.type();if(it===nt.onnx.AttributeProto.AttributeType.GRAPH||it===nt.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const rt=this.getValueNoCheck(ct);if(it===nt.onnx.AttributeProto.AttributeType.INT&&at.LongUtil.isLong(rt))return at.LongUtil.longToNumber(rt);if(it===nt.onnx.AttributeProto.AttributeType.INTS){const lt=rt,ut=new Array(lt.length);for(let pt=0;pt<lt.length;pt++){const gt=lt[pt];ut[pt]=at.LongUtil.longToNumber(gt)}return ut}if(it===nt.onnx.AttributeProto.AttributeType.TENSOR)return ct instanceof nt.onnx.AttributeProto?ot.Tensor.fromProto(rt):ot.Tensor.fromOrtTensor(rt);if(it===nt.onnx.AttributeProto.AttributeType.TENSORS){if(ct instanceof nt.onnx.AttributeProto)return rt.map(lt=>ot.Tensor.fromProto(lt));if(ct instanceof dt.Attribute)return rt.map(lt=>ot.Tensor.fromOrtTensor(lt))}if(it===nt.onnx.AttributeProto.AttributeType.STRING&&ct instanceof nt.onnx.AttributeProto){const lt=rt;return(0,at.decodeUtf8String)(lt)}return it===nt.onnx.AttributeProto.AttributeType.STRINGS&&ct instanceof nt.onnx.AttributeProto?rt.map(at.decodeUtf8String):rt}static getValueNoCheck(ct){return ct instanceof nt.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(ct):this.getValueNoCheckFromOrtFormat(ct)}static getValueNoCheckFromOnnxFormat(ct){switch(ct.type){case nt.onnx.AttributeProto.AttributeType.FLOAT:return ct.f;case nt.onnx.AttributeProto.AttributeType.INT:return ct.i;case nt.onnx.AttributeProto.AttributeType.STRING:return ct.s;case nt.onnx.AttributeProto.AttributeType.TENSOR:return ct.t;case nt.onnx.AttributeProto.AttributeType.GRAPH:return ct.g;case nt.onnx.AttributeProto.AttributeType.FLOATS:return ct.floats;case nt.onnx.AttributeProto.AttributeType.INTS:return ct.ints;case nt.onnx.AttributeProto.AttributeType.STRINGS:return ct.strings;case nt.onnx.AttributeProto.AttributeType.TENSORS:return ct.tensors;case nt.onnx.AttributeProto.AttributeType.GRAPHS:return ct.graphs;default:throw new Error(`unsupported attribute type: ${nt.onnx.AttributeProto.AttributeType[ct.type]}`)}}static getValueNoCheckFromOrtFormat(ct){switch(ct.type()){case dt.AttributeType.FLOAT:return ct.f();case dt.AttributeType.INT:return ct.i();case dt.AttributeType.STRING:return ct.s();case dt.AttributeType.TENSOR:return ct.t();case dt.AttributeType.GRAPH:return ct.g();case dt.AttributeType.FLOATS:return ct.floatsArray();case dt.AttributeType.INTS:{const it=[];for(let rt=0;rt<ct.intsLength();rt++)it.push(ct.ints(rt));return it}case dt.AttributeType.STRINGS:{const it=[];for(let rt=0;rt<ct.stringsLength();rt++)it.push(ct.strings(rt));return it}case dt.AttributeType.TENSORS:{const it=[];for(let rt=0;rt<ct.tensorsLength();rt++)it.push(ct.tensors(rt));return it}default:throw new Error(`unsupported attribute type: ${dt.AttributeType[ct.type()]}`)}}}_e.Attribute=ft},7091:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.resolveBackend=_e.backend=void 0;const nt=tt(5038),st=new Map;async function ot(at){const dt=_e.backend;if(dt[at]!==void 0&&function(ft){const ht=ft;return"initialize"in ht&&typeof ht.initialize=="function"&&"createSessionHandler"in ht&&typeof ht.createSessionHandler=="function"&&"dispose"in ht&&typeof ht.dispose=="function"}(dt[at])){const ft=dt[at];let ht=ft.initialize();if(typeof ht=="object"&&"then"in ht&&(ht=await ht),ht)return st.set(at,ft),ft}}_e.backend={webgl:new nt.WebGLBackend},_e.resolveBackend=async function at(dt){if(!dt)return at(["webgl"]);{const ft=typeof dt=="string"?[dt]:dt;for(const ht of ft){const ct=st.get(ht);if(ct)return ct;const it=await ot(ht);if(it)return it}}throw new Error("no available backend to use")}},5038:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.WebGLBackend=void 0;const nt=tt(1670),st=tt(6231),ot=tt(6416),at=tt(7305);_e.WebGLBackend=class{get contextId(){return nt.env.webgl.contextId}set contextId(dt){nt.env.webgl.contextId=dt}get matmulMaxBatchSize(){return nt.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(dt){nt.env.webgl.matmulMaxBatchSize=dt}get textureCacheMode(){return nt.env.webgl.textureCacheMode}set textureCacheMode(dt){nt.env.webgl.textureCacheMode=dt}get pack(){return nt.env.webgl.pack}set pack(dt){nt.env.webgl.pack=dt}get async(){return nt.env.webgl.async}set async(dt){nt.env.webgl.async=dt}initialize(){try{return this.glContext=(0,at.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),st.Logger.setWithEnv(nt.env),st.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(dt){return st.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${dt}`),!1}}createSessionHandler(dt){return new ot.WebGLSessionHandler(this,dt)}dispose(){this.glContext.dispose()}}},5107:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.CoordsGlslLib=void 0;const nt=tt(2517),st=tt(8520),ot=tt(5060),at=tt(7859),dt=tt(9390);class ft extends st.GlslLib{constructor(ct){super(ct)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new st.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new st.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const ct=this.context.outputTextureLayout;return ct.isPacked?this.getPackedOutputSamplingSnippet(ct):this.getUnpackedOutputSamplingSnippet(ct)}getPackedOutputSamplingSnippet(ct){const it=ct.unpackedShape,rt=[ct.width,ct.height],lt={},ut="getOutputCoords";switch(it.length){case 0:lt[ut]=this.getOutputScalarCoords();break;case 1:lt[ut]=this.getOutputPacked1DCoords(it,rt);break;case 2:lt[ut]=this.getOutputPacked2DCoords(it,rt);break;case 3:lt[ut]=this.getOutputPacked3DCoords(it,rt);break;default:lt[ut]=this.getOutputPackedNDCoords(it,rt)}const pt=`
      void setOutput(vec4 val) {
        ${(0,ot.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return lt.floatTextureSetRGBA=new st.GlslLibRoutine(pt),lt}getUnpackedOutputSamplingSnippet(ct){const it=ct.unpackedShape,rt=[ct.width,ct.height],lt={},ut="getOutputCoords";switch(it.length){case 0:lt[ut]=this.getOutputScalarCoords();break;case 1:lt[ut]=this.getOutputUnpacked1DCoords(it,rt);break;case 2:lt[ut]=this.getOutputUnpacked2DCoords(it,rt);break;case 3:lt[ut]=this.getOutputUnpacked3DCoords(it,rt);break;case 4:lt[ut]=this.getOutputUnpacked4DCoords(it,rt);break;case 5:lt[ut]=this.getOutputUnpacked5DCoords(it,rt);break;case 6:lt[ut]=this.getOutputUnpacked6DCoords(it,rt);break;default:throw new Error(`Unsupported output dimensionality: ${it.length}`)}const pt=`
        void setOutput(float val) {
          ${(0,ot.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return lt.floatTextureSetR=new st.GlslLibRoutine(pt),lt}getOutputScalarCoords(){return new st.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(ct,it){const rt=it;let lt="";return rt[0]===1?(lt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${rt[1]}.0);
          }
        `,new st.GlslLibRoutine(lt)):rt[1]===1?(lt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${rt[0]}.0);
          }
        `,new st.GlslLibRoutine(lt)):(lt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${rt[0]}, ${rt[1]}));
          return 2 * (resTexRC.y * ${rt[0]} + resTexRC.x);
        }
      `,new st.GlslLibRoutine(lt))}getOutputPacked2DCoords(ct,it){let rt="";if(nt.ArrayUtil.arraysEqual(ct,it))return rt=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${it[0]}, ${it[1]}));
        }
      `,new st.GlslLibRoutine(rt);const lt=it,ut=Math.ceil(ct[1]/2);return rt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${lt[0]}, ${lt[1]}));

          int index = resTexRC.y * ${lt[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${ut}) * 2;
          int c = 2 * (index / ${ut});

          return ivec2(r, c);
        }
      `,new st.GlslLibRoutine(rt)}getOutputPacked3DCoords(ct,it){const rt=[it[0],it[1]],lt=Math.ceil(ct[2]/2),ut=lt*Math.ceil(ct[1]/2),pt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${rt[0]}, ${rt[1]}));
          int index = resTexRC.y * ${rt[0]} + resTexRC.x;

          int b = index / ${ut};
          index -= b * ${ut};

          // reverse r and c order for packed texture
          int r = imod(index, ${lt}) * 2;
          int c = 2 * (index / ${lt});

          return ivec3(b, r, c);
        }
      `;return new st.GlslLibRoutine(pt)}getOutputPackedNDCoords(ct,it){const rt=[it[0],it[1]],lt=Math.ceil(ct[ct.length-1]/2),ut=lt*Math.ceil(ct[ct.length-2]/2);let pt=ut,gt="",mt="b, r, c";for(let bt=2;bt<ct.length-1;bt++)pt*=ct[ct.length-bt-1],gt=`
      int b${bt} = index / ${pt};
      index -= b${bt} * ${pt};
    `+gt,mt=`b${bt}, `+mt;const yt=`
      ivec${ct.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${rt[0]}, ${rt[1]}));
        int index = resTexRC.y * ${rt[0]} + resTexRC.x;

        ${gt}

        int b = index / ${ut};
        index -= b * ${ut};

        // reverse r and c order for packed texture
        int r = imod(index, ${lt}) * 2;
        int c = 2 * (index / ${lt});

        return ivec${ct.length}(${mt});
      }
    `;return new st.GlslLibRoutine(yt)}getOutputUnpacked1DCoords(ct,it){const rt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          return resTexRC.y * ${it[0]} + resTexRC.x;
        }
      `;return new st.GlslLibRoutine(rt)}getOutputUnpacked2DCoords(ct,it){const rt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          int index = resTexRC.y * ${it[0]} + resTexRC.x;
          int r = index / ${ct[1]};
          int c = index - r * ${ct[1]};
          return ivec2(r, c);
        }
      `;return new st.GlslLibRoutine(rt)}getOutputUnpacked3DCoords(ct,it){let rt="";const lt=ct.length;let ut=null;lt<2&&(ut=[]),ut=new Array(lt-1),ut[lt-2]=ct[lt-1];for(let mt=lt-3;mt>=0;--mt)ut[mt]=ut[mt+1]*ct[mt+1];const pt=["r","c","d"],gt=ut.map((mt,yt)=>`int ${pt[yt]} = index / ${mt}; ${yt===ut.length-1?`int ${pt[yt+1]} = index - ${pt[yt]} * ${mt}`:`index -= ${pt[yt]} * ${mt}`};`).join("");return rt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          int index = resTexRC.y * ${it[0]} + resTexRC.x;
          ${gt}
          return ivec3(r, c, d);
        }
      `,new st.GlslLibRoutine(rt)}getOutputUnpacked4DCoords(ct,it){let rt="";const lt=ct.length;let ut=null;lt<2&&(ut=[]),ut=new Array(lt-1),ut[lt-2]=ct[lt-1];for(let mt=lt-3;mt>=0;--mt)ut[mt]=ut[mt+1]*ct[mt+1];const pt=["r","c","d","d2"],gt=ut.map((mt,yt)=>`int ${pt[yt]} = index / ${mt}; ${yt===ut.length-1?`int ${pt[yt+1]} = index - ${pt[yt]} * ${mt}`:`index -= ${pt[yt]} * ${mt}`};`).join("");return rt=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          int index = resTexRC.y * ${it[0]} + resTexRC.x;
          ${gt}
          return ivec4(r, c, d, d2);
        }
      `,new st.GlslLibRoutine(rt)}getOutputUnpacked5DCoords(ct,it){let rt="";const lt=ct.length;let ut=null;lt<2&&(ut=[]),ut=new Array(lt-1),ut[lt-2]=ct[lt-1];for(let mt=lt-3;mt>=0;--mt)ut[mt]=ut[mt+1]*ct[mt+1];const pt=["r","c","d","d2","d3"],gt=ut.map((mt,yt)=>`int ${pt[yt]} = index / ${mt}; ${yt===ut.length-1?`int ${pt[yt+1]} = index - ${pt[yt]} * ${mt}`:`index -= ${pt[yt]} * ${mt}`};`).join("");return rt=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          int index = resTexRC.y * ${it[0]} + resTexRC.x;
          ${gt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new st.GlslLibRoutine(rt)}getOutputUnpacked6DCoords(ct,it){let rt="";const lt=ct.length;let ut=null;lt<2&&(ut=[]),ut=new Array(lt-1),ut[lt-2]=ct[lt-1];for(let mt=lt-3;mt>=0;--mt)ut[mt]=ut[mt+1]*ct[mt+1];const pt=["r","c","d","d2","d3","d4"],gt=ut.map((mt,yt)=>`int ${pt[yt]} = index / ${mt}; ${yt===ut.length-1?`int ${pt[yt+1]} = index - ${pt[yt]} * ${mt}`:`index -= ${pt[yt]} * ${mt}`};`).join("");return rt=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${it[0]}, ${it[1]}));
         int index = resTexRC.y * ${it[0]} + resTexRC.x;
         ${gt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new st.GlslLibRoutine(rt)}getCommonUtilFuncs(){const ct={};let it="uvFromFlat";ct[it]=new st.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),it="packedUVfrom1D",ct[it]=new st.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),it="packedUVfrom2D",ct[it]=new st.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),it="packedUVfrom3D",ct[it]=new st.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),it="sampleTexture";const rt=(0,ot.getGlsl)(this.context.glContext.version);return ct[it]=new st.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${rt.texture2D}(textureSampler, uv).r;
        }`),ct}getInputsSamplingSnippets(){const ct={},it=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((rt,lt)=>{const ut=this.context.inputTextureLayouts[lt],pt=(0,dt.generateShaderFuncNameFromInputSamplerName)(rt);ut.isPacked?ct[pt]=this.getPackedSamplerFromInput(pt,rt,ut):ct[pt]=this.getUnpackedSamplerFromInput(pt,rt,ut);const gt=(0,dt.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(rt);ut.unpackedShape.length<=it.unpackedShape.length&&(ut.isPacked?ct[gt]=this.getPackedSamplerAtOutputCoords(gt,ut,it,rt):ct[gt]=this.getUnpackedSamplerAtOutputCoords(gt,ut,it,rt))}),ct}getPackedSamplerAtOutputCoords(ct,it,rt,lt){const ut=it.unpackedShape,pt=rt.unpackedShape,gt=lt,mt=(0,dt.generateShaderFuncNameFromInputSamplerName)(gt),yt=ut.length,bt=pt.length,wt=nt.BroadcastUtil.getBroadcastDims(ut,pt),xt=(0,dt.getCoordsDataType)(bt),Tt=bt-yt;let St;const Pt=(0,dt.getGlChannels)();St=yt===0?"":bt<2&&wt.length>=1?"coords = 0;":wt.map(Rt=>`coords.${Pt[Rt+Tt]} = 0;`).join(`
`);let vt="";vt=bt<2&&yt>0?"coords":ut.map((Rt,$t)=>`coords.${Pt[$t+Tt]}`).join(", ");let At="return outputValue;";const It=nt.ShapeUtil.size(ut)===1,jt=nt.ShapeUtil.size(pt)===1;if(yt!==1||It||jt){if(It&&!jt)At=bt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(wt.length){const Rt=yt-2,$t=yt-1;wt.indexOf(Rt)>-1&&wt.indexOf($t)>-1?At="return vec4(outputValue.x);":wt.indexOf(Rt)>-1?At="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":wt.indexOf($t)>-1&&(At="return vec4(outputValue.xx, outputValue.zz);")}}else At=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Lt=`
      vec4 ${ct}() {
        ${xt} coords = getOutputCoords();
        
        int lastDim = coords.${Pt[bt-1]};
        coords.${Pt[bt-1]} = coords.${Pt[bt-2]};
        coords.${Pt[bt-2]} = lastDim;
      
        ${St}
        vec4 outputValue = ${mt}(${vt});
        ${At}
      }
    `;return new st.GlslLibRoutine(Lt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(ct,it,rt,lt){const ut=[rt.width,rt.height],pt=[it.width,it.height],gt=it.unpackedShape.length,mt=rt.unpackedShape.length,yt=it.unpackedShape,bt=rt.unpackedShape,wt=(0,dt.generateShaderFuncNameFromInputSamplerName)(lt);if(gt===mt&&nt.ArrayUtil.arraysEqual(pt,ut)){const jt=`
          float ${ct}() {
            return sampleTexture(${lt}, TexCoords);
          }
        `;return new st.GlslLibRoutine(jt,["coordinates.sampleTexture"])}const xt=(0,dt.getCoordsDataType)(mt),Tt=nt.BroadcastUtil.getBroadcastDims(yt,bt),St=mt-gt;let Pt;const vt=(0,dt.getGlChannels)();Pt=gt===0?"":mt<2&&Tt.length>=1?"coords = 0;":Tt.map(jt=>`coords.${vt[jt+St]} = 0;`).join(`
`);let At="";At=mt<2&&gt>0?"coords":it.unpackedShape.map((jt,Lt)=>`coords.${vt[Lt+St]}`).join(", ");const It=`
        float ${ct}() {
          ${xt} coords = getOutputCoords();
          ${Pt}
          return ${wt}(${At});
        }
      `;return new st.GlslLibRoutine(It,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(ct,it,rt){switch(rt.unpackedShape.length){case 0:return this.getPackedSamplerScalar(ct,it);case 1:return this.getPackedSampler1D(ct,it,rt);case 2:return this.getPackedSampler2D(ct,it,rt);case 3:return this.getPackedSampler3D(ct,it,rt);default:return this.getPackedSamplerND(ct,it,rt)}}getUnpackedSamplerFromInput(ct,it,rt){const lt=rt.unpackedShape;switch(lt.length){case 0:return this.getUnpackedSamplerScalar(ct,it,rt);case 1:return this.getUnpackedSampler1D(ct,it,rt);case 2:return this.getUnpackedSampler2D(ct,it,rt);case 3:return this.getUnpackedSampler3D(ct,it,rt);case 4:return this.getUnpackedSampler4D(ct,it,rt);case 5:return this.getUnpackedSampler5D(ct,it,rt);case 6:return this.getUnpackedSampler6D(ct,it,rt);default:throw new Error(`Unsupported dimension ${lt.length}-D`)}}getPackedSamplerScalar(ct,it){const rt=`
          vec4 ${ct}() {
            return ${(0,ot.getGlsl)(this.context.glContext.version).texture2D}(${it}, halfCR);
          }
        `;return new st.GlslLibRoutine(rt)}getPackedSampler1D(ct,it,rt){const lt=[rt.width,rt.height],ut=[lt[1],lt[0]],pt=(0,ot.getGlsl)(this.context.glContext.version),gt=`vec4 ${ct}(int index) {
      vec2 uv = packedUVfrom1D(
      ${ut[0]}, ${ut[1]}, index);
      return ${pt.texture2D}(${it}, uv);
    }`;return new st.GlslLibRoutine(gt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(ct,it,rt){const lt=rt.unpackedShape,ut=[rt.width,rt.height],pt=(0,ot.getGlsl)(this.context.glContext.version),gt=ut[0],mt=ut[1];if(ut!=null&&nt.ArrayUtil.arraysEqual(lt,ut)){const xt=`vec4 ${ct}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${mt}.0, ${gt}.0);
        return ${pt.texture2D}(${it}, uv);
      }`;return new st.GlslLibRoutine(xt)}const yt=ut,bt=Math.ceil(lt[1]/2),wt=`vec4 ${ct}(int row, int col) {
      vec2 uv = packedUVfrom2D(${yt[1]}, ${yt[0]}, ${bt}, row, col);
      return ${pt.texture2D}(${it}, uv);
    }`;return new st.GlslLibRoutine(wt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(ct,it,rt){const lt=rt.unpackedShape,ut=[rt.width,rt.height],pt=[ut[0],ut[1]],gt=(0,ot.getGlsl)(this.context.glContext.version);if(lt[0]===1){const xt=lt.slice(1),Tt=[1,2],St=(0,dt.squeezeInputShape)(lt,xt),Pt=["b","row","col"],vt=JSON.parse(JSON.stringify(rt));vt.unpackedShape=St;const At=this.getPackedSamplerFromInput(ct,it,vt),It=`${At.routineBody}
      vec4 ${ct}(int b, int row, int col) {
        return ${ct}(${(0,dt.getSqueezedParams)(Pt,Tt)});
      } `;return new st.GlslLibRoutine(It,At.dependencies)}const mt=pt[0],yt=pt[1],bt=Math.ceil(lt[2]/2),wt=`vec4 ${ct}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${yt}, ${mt}, ${bt*Math.ceil(lt[1]/2)}, ${bt}, b, row, col);
      return ${gt.texture2D}(${it}, uv);}`;return new st.GlslLibRoutine(wt,["coordinates.packedUVfrom3D"])}getPackedSamplerND(ct,it,rt){const lt=rt.unpackedShape,ut=lt.length,pt=[rt.width,rt.height],gt=(0,ot.getGlsl)(this.context.glContext.version),mt=[pt[0],pt[1]],yt=mt[1],bt=mt[0],wt=Math.ceil(lt[ut-1]/2);let xt=wt*Math.ceil(lt[ut-2]/2),Tt="int b, int row, int col",St=`b * ${xt} + (row / 2) * ${wt} + (col / 2)`;for(let vt=2;vt<ut-1;vt++)Tt=`int b${vt}, `+Tt,xt*=lt[ut-vt-1],St=`b${vt} * ${xt} + `+St;const Pt=`vec4 ${ct}(${Tt}) {
      int index = ${St};
      int texR = index / ${bt};
      int texC = index - texR * ${bt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${bt}, ${yt});
      return ${gt.texture2D}(${it}, uv);
    }`;return new st.GlslLibRoutine(Pt)}getUnpackedSamplerScalar(ct,it,rt){const[lt,ut]=[rt.width,rt.height];if(lt===1&&ut===1){const gt=`
          float ${ct}() {
            return sampleTexture(${it}, halfCR);
          }
        `;return new st.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const pt=`
        float ${ct}() {
          int offset_${it} = coordsToOffset(TexCoords, ${lt}, ${ut});
          vec2 uv = uvFromFlat(${lt}, ${ut}, offset_${it});
          return sampleTexture(${it}, uv);
        }
      `;return new st.GlslLibRoutine(pt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(ct,it,rt){const lt=rt.width,ut=rt.height;if(ut===1&&lt===1){const gt=`
        float ${ct}(int index) {
          return sampleTexture(${it}, halfCR);
        }
      `;return new st.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(ut===1){const gt=`
          float ${ct}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${lt}.0, 0.5);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(lt===1){const gt=`
          float ${ct}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${ut}.0);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const pt=`
        float ${ct}(int index) {
          vec2 uv = uvFromFlat(${lt}, ${ut}, index);
          return sampleTexture(${it}, uv);
        }
      `;return new st.GlslLibRoutine(pt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(ct,it,rt){const lt=rt.unpackedShape,ut=[rt.height,rt.width];if(ut!=null&&nt.ArrayUtil.arraysEqual(lt,ut)){const xt=`
          float ${ct}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ut[1]}.0, ${ut[0]}.0);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(xt,["coordinates.sampleTexture"])}const{newShape:pt,keptDims:gt}=(0,at.squeezeShape)(lt),mt=pt;if(mt.length<lt.length){const xt=(0,dt.squeezeInputShape)(lt,mt),Tt=JSON.parse(JSON.stringify(rt));Tt.unpackedShape=xt;const St=["col","row"],Pt=`
          ${this.getUnpackedSamplerFromInput(ct,it,Tt).routineBody}
          float ${ct}(int row, int col) {
            return ${ct}(${(0,dt.getSqueezedParams)(St,gt)});
          }
        `;return new st.GlslLibRoutine(Pt,["coordinates.sampleTexture"])}const yt=ut[1],bt=ut[0];if(bt===1){const xt=`
          float ${ct}(int row, int col) {
            int offset_${it} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${it}), vec3(${lt[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${yt}.0);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(yt===1){const xt=`
          float ${ct}(int row, int col) {
            int offset_${it} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${it}), vec3(${lt[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${bt}.0, 0.5);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const wt=`
        float ${ct}(int row, int col) {
          int index = col * ${lt[1]} + row;
          vec2 uv = uvFromFlat(${yt}, ${bt}, index);
          return sampleTexture(${it}, uv);
        }
      `;return new st.GlslLibRoutine(wt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(ct,it,rt){const lt=rt.unpackedShape,ut=lt[1]*lt[2],pt=lt[2],{newShape:gt,keptDims:mt}=(0,at.squeezeShape)(lt),yt=gt;if(yt.length<lt.length){const wt=(0,dt.squeezeInputShape)(lt,yt),xt=["batch","col","row"],Tt=JSON.parse(JSON.stringify(rt));Tt.unpackedShape=wt;const St=this.getUnpackedSamplerFromInput(ct,it,Tt),Pt=mt.reverse(),vt=`
          ${St.routineBody}
          float ${ct}(int batch, int row, int col) {
            return ${ct}(${(0,dt.getSqueezedParams)(xt,Pt)});
          }
        `;return new st.GlslLibRoutine(vt,St.dependencies)}const bt=`
          float ${ct}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${ut} + col * ${pt} + row;
            vec2 uv = uvFromFlat(${rt.width}, ${rt.height}, index);
            return sampleTexture(${it}, uv);
          }
      `;return new st.GlslLibRoutine(bt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(ct,it,rt){const lt=rt.unpackedShape,ut=lt[3],pt=lt[2]*ut,gt=`
        float ${ct}(int row, int col, int depth, int depth2) {
          int index = row * ${lt[1]*pt} + col * ${pt} +
              depth2 * ${ut} + depth;
          vec2 uv = uvFromFlat(${rt.width}, ${rt.height}, index);
          return sampleTexture(${it}, uv);
        }
      `;return new st.GlslLibRoutine(gt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(ct,it,rt){const lt=rt.unpackedShape,ut=lt[4],pt=lt[3]*ut,gt=lt[2]*pt,mt=lt[1]*gt,{newShape:yt,keptDims:bt}=(0,at.squeezeShape)(lt);if(yt.length<lt.length){const xt=(0,dt.squeezeInputShape)(lt,yt),Tt=["row","col","depth","depth2","depth3"],St=JSON.parse(JSON.stringify(rt));St.unpackedShape=xt;const Pt=`
          ${this.getUnpackedSamplerFromInput(ct,it,St).routineBody}
          float ${ct}(int row, int col, int depth, int depth2, int depth3) {
            return ${ct}(${(0,dt.getSqueezedParams)(Tt,bt)});
          }
        `;return new st.GlslLibRoutine(Pt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const wt=`
        float ${ct}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${mt} + col * ${gt} + depth * ${pt} +
          depth3 * ${ut} + depth2;
          vec2 uv = uvFromFlat(${rt.width}, ${rt.height}, index);
          return sampleTexture(${it}, uv);
        }
      `;return new st.GlslLibRoutine(wt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(ct,it,rt){const lt=rt.unpackedShape,ut=lt[5],pt=lt[4]*ut,gt=lt[3]*pt,mt=lt[2]*gt,yt=lt[1]*mt,{newShape:bt,keptDims:wt}=(0,at.squeezeShape)(lt);if(bt.length<lt.length){const Tt=(0,dt.squeezeInputShape)(lt,bt),St=["row","col","depth","depth2","depth3","depth4"],Pt=JSON.parse(JSON.stringify(rt));Pt.unpackedShape=Tt;const vt=`
            ${this.getUnpackedSamplerFromInput(ct,it,Pt).routineBody}
            float ${ct}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${ct}(${(0,dt.getSqueezedParams)(St,wt)});
            }
          `;return new st.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const xt=`
          float ${ct}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${yt} + col * ${mt} + depth * ${gt} +
            depth2 * ${pt} + depth3 * ${ut} + depth4;
            vec2 uv = uvFromFlat(${rt.width}, ${rt.height}, index);
            return sampleTexture(${it}, uv);
          }
        `;return new st.GlslLibRoutine(xt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const ct=this.context.outputTextureLayout,it=ct.shape.length,rt=ct.strides,lt=ct.width,ut=ct.height,pt=[];for(let mt=0;mt<it-1;++mt)pt.push(`
        c[${mt}] = offset / ${rt[mt]};`),pt.push(`
        offset -= c[${mt}] * ${rt[mt]};`);pt.push(`
        c[${it-1}] = offset;`);const gt=`
      void toVec(vec2 texCoords, out int c[${it}]) {
        int offset = coordsToOffset(texCoords, ${lt}, ${ut});
        ${pt.join("")}
      }
      void toVec(int offset, out int c[${it}]) {
        ${pt.join("")}
      }
    `;return{toVec:new st.GlslLibRoutine(gt,["coordinates.coordsToOffset"])}}valueFrom(){const ct={};return this.context.programInfo.inputNames.forEach((it,rt)=>{const lt=this.context.inputTextureLayouts[rt],ut=(lt.unpackedShape.length>0?lt.unpackedShape:lt.shape).length;let pt=`_${it}`;ct[pt]=new st.GlslLibRoutine(this.getValueFromSingle(it,ut,lt.width,lt.height,!1),[`shapeUtils.indicesToOffset${pt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),pt+="_T",ct[pt]=new st.GlslLibRoutine(this.getValueFromSingle(it,ut,lt.width,lt.height,!0),[`shapeUtils.indicesToOffset${pt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),ct}getValueFromSingle(ct,it,rt,lt,ut){let pt=`_${ct}`;return ut&&(pt+="_T"),`
        float ${pt}(int m[${it}]) {
          int offset = indicesToOffset${pt}(m);
          vec2 coords = offsetToCoords(offset, ${rt}, ${lt});
          float value = getColorAsFloat(${(0,ot.getGlsl)(this.context.glContext.version).texture2D}(${ct}, coords));
          return value;
        }
        `}getPackedValueFrom(ct,it,rt,lt,ut){let pt=`_${ct}_Pack`;return ut&&(pt+="_T"),`
        vec4 ${pt}(int m[${it}]) {
          int offset = indicesToOffset_${ct}(m);
          vec2 coords = offsetToCoords(offset, ${rt}, ${lt});
          return ${(0,ot.getGlsl)(this.context.glContext.version).texture2D}(${ct}, coords);
        }
        `}}_e.CoordsGlslLib=ft},8520:(et,_e)=>{var tt;Object.defineProperty(_e,"__esModule",{value:!0}),_e.TopologicalSortGlslRoutines=_e.GlslLibRoutineNode=_e.GlslLibRoutine=_e.GlslLib=_e.GlslContext=_e.FunctionType=void 0,(tt=_e.FunctionType||(_e.FunctionType={}))[tt.ValueBased=0]="ValueBased",tt[tt.Positional=1]="Positional",_e.GlslContext=class{constructor(nt,st,ot,at){this.glContext=nt,this.programInfo=st,this.inputTextureLayouts=ot,this.outputTextureLayout=at}},_e.GlslLib=class{constructor(nt){this.context=nt}},_e.GlslLibRoutine=class{constructor(nt,st){this.routineBody=nt,this.dependencies=st}},_e.GlslLibRoutineNode=class{constructor(nt,st,ot){this.name=nt,this.dependencies=ot||[],st&&(this.routineBody=st)}addDependency(nt){nt&&this.dependencies.push(nt)}},_e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(nt){if(!nt||nt.length===0)return[];if(nt.length===1)return nt;const st=new Set,ot=new Set,at=new Array;return this.createOrderedNodes(nt,st,ot,at),at}static createOrderedNodes(nt,st,ot,at){for(let dt=0;dt<nt.length;++dt)this.dfsTraverse(nt[dt],st,ot,at)}static dfsTraverse(nt,st,ot,at){if(!nt||ot.has(nt.name))return;if(st.has(nt.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");st.add(nt.name);const dt=nt.dependencies;if(dt&&dt.length>0)for(let ft=0;ft<dt.length;++ft)this.dfsTraverse(dt[ft],st,ot,at);at.push(nt),ot.add(nt.name),st.delete(nt.name)}}},7341:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.EncodingGlslLib=void 0;const nt=tt(8520);class st extends nt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new nt.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new nt.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const at=st.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new nt.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${at}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const at=st.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new nt.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${at}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const at=new ArrayBuffer(4),dt=new Uint32Array(at),ft=new Uint8Array(at);if(dt[0]=3735928559,ft[0]===239)return!0;if(ft[0]===222)return!1;throw new Error("unknown endianness")}}_e.EncodingGlslLib=st},9894:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.FragColorGlslLib=void 0;const nt=tt(8520),st=tt(5060);class ot extends nt.GlslLib{constructor(dt){super(dt)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const dt=(0,st.getGlsl)(this.context.glContext.version);return{setFragColor:new nt.GlslLibRoutine(`
        void setFragColor(float value) {
            ${dt.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new nt.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_e.FragColorGlslLib=ot},2848:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.replaceInlines=void 0;const tt=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_e.replaceInlines=function(nt){const st={};let ot;for(;(ot=tt.exec(nt))!==null;){const at=ot[3].split(",").map(dt=>{const ft=dt.trim().split(" ");return ft&&ft.length===2?{type:ft[0],name:ft[1]}:null}).filter(dt=>dt!==null);st[ot[2]]={params:at,body:ot[4]}}for(const at in st){const dt="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",at),ft=new RegExp(dt,"gm");for(;(ot=ft.exec(nt))!==null;){const ht=ot[1],ct=ot[2],it=ot[3].split(","),rt=ht?`${ht} ${ct};`:"";let lt=st[at].body,ut="";st[at].params.forEach((gt,mt)=>{gt&&(ut+=`${gt.type} ${gt.name} = ${it[mt]};
`)}),lt=`${ut}
 ${lt}`,lt=lt.replace("return",`${ct} = `);const pt=`
      ${rt}
      {
        ${lt}
      }
      `;nt=nt.replace(ot[0],pt)}}return nt.replace(tt,"")}},8879:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.GlslPreprocessor=void 0;const nt=tt(8520),st=tt(2848),ot=tt(5483),at=tt(5060);_e.GlslPreprocessor=class{constructor(dt,ft,ht,ct){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new nt.GlslContext(dt,ft,ht,ct),Object.keys(ot.glslRegistry).forEach(rt=>{const lt=new ot.glslRegistry[rt](this.context);this.libs[rt]=lt});const it=this.glslLibRoutineDependencyGraph;for(const rt in this.libs){const lt=this.libs[rt].getFunctions();for(const ut in lt){const pt=rt+"."+ut;let gt;it[pt]?(gt=it[pt],gt.routineBody=lt[ut].routineBody):(gt=new nt.GlslLibRoutineNode(pt,lt[ut].routineBody),it[pt]=gt);const mt=lt[ut].dependencies;if(mt)for(let yt=0;yt<mt.length;++yt)if(it[mt[yt]])gt.addDependency(it[mt[yt]]);else{const bt=new nt.GlslLibRoutineNode(mt[yt]);it[mt[yt]]=bt,gt.addDependency(bt)}}}}preprocess(){const dt=this.context.programInfo;let ft=dt.shaderSource;return this.context.programInfo.hasMain||(ft=`${ft}
      ${(0,at.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),ft=(0,st.replaceInlines)(ft),`${(0,at.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(dt.inputNames,dt.variables)}
    ${this.getImports(ft)}
    ${ft}`}getImports(dt){const ft=this.selectGlslLibRoutinesToBeIncluded(dt);if(ft.length===0)return"";let ht="";for(let ct=0;ct<ft.length;++ct){if(!ft[ct].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${ft[ct].name}`);ht+=ft[ct].routineBody+`
`}return ht}selectGlslLibRoutinesToBeIncluded(dt){const ft=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(ht=>{const ct=ht.split(".")[1];dt.indexOf(ct)!==-1&&ft.push(this.glslLibRoutineDependencyGraph[ht])}),nt.TopologicalSortGlslRoutines.returnOrderedNodes(ft)}getUniforms(dt,ft){const ht=[];if(dt)for(const ct of dt)ht.push(`uniform sampler2D ${ct};`);if(ft)for(const ct of ft)ht.push(`uniform ${ct.type} ${ct.name}${ct.arrayLength?`[${ct.arrayLength}]`:""};`);return ht.join(`
`)}}},5483:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.glslRegistry=void 0;const nt=tt(5107),st=tt(7341),ot=tt(9894),at=tt(2655),dt=tt(3891);_e.glslRegistry={encoding:st.EncodingGlslLib,fragcolor:ot.FragColorGlslLib,vec:dt.VecGlslLib,shapeUtils:at.ShapeUtilsGlslLib,coordinates:nt.CoordsGlslLib}},2655:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.ShapeUtilsGlslLib=void 0;const nt=tt(8520);class st extends nt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const at=this.context.outputTextureLayout.shape.length,dt={};return this.context.programInfo.inputNames.forEach((ft,ht)=>{const ct=this.context.inputTextureLayouts[ht].unpackedShape;if(ct.length<=at){const it=ct.length,rt=at-it,lt=`bcastIndices_${ft}`;let ut="";for(let gt=0;gt<it;++gt)ut+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${rt+gt}]), ${ct[gt]}.0) );
          `;const pt=`
        void ${lt} (int bcastedIndices[${at}], out int realIndices[${it}]) {
          ${ut}
        }
        `;dt[lt]=new nt.GlslLibRoutine(pt)}}),dt}bcastMatmulIndex(){const at=this.context.outputTextureLayout.shape.length,dt={};return this.context.programInfo.inputNames.forEach((ft,ht)=>{const ct=this.context.inputTextureLayouts[ht].shape;if(!(ct.length<2||ct.length>at)){const it=ct.length,rt=at-it,lt=`bcastMatmulIndices_${ft}`;let ut="";for(let gt=0;gt<it-2;++gt)ut+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${rt+gt}]), ${ct[gt]}.0) );
          `;const pt=`
        void ${lt}(int bcastedIndices[${at}], out int realIndices[${it}]) {
          ${ut}
          realIndices[${it-1}] = bcastedIndices[${at-1}];
          realIndices[${it-2}] = bcastedIndices[${at-2}];
        }
        `;dt[lt]=new nt.GlslLibRoutine(pt)}}),dt}indicesToOffset(){const at={};return this.context.programInfo.inputNames.forEach((dt,ft)=>{const ht=this.context.inputTextureLayouts[ft].shape,ct=this.context.inputTextureLayouts[ft].strides,it=ht.length;let rt=`indicesToOffset_${dt}`;at[rt]=new nt.GlslLibRoutine(st.indexToOffsetSingle(rt,it,ct)),rt=`indicesToOffset_${dt}_T`,at[rt]=new nt.GlslLibRoutine(st.indexToOffsetSingle(rt,it,ct.slice().reverse()))}),at}static indexToOffsetSingle(at,dt,ft){let ht="";for(let ct=dt-1;ct>=0;--ct)ht+=`
        offset += indices[${ct}] * ${ft[ct]};
        `;return`
      int ${at}(int indices[${dt}]) {
        int offset = 0;
        ${ht}
        return offset;
      }
      `}offsetToIndices(){const at={};return this.context.programInfo.inputNames.forEach((dt,ft)=>{const ht=this.context.inputTextureLayouts[ft].shape,ct=this.context.inputTextureLayouts[ft].strides,it=ht.length;let rt=`offsetToIndices_${dt}`;at[rt]=new nt.GlslLibRoutine(st.offsetToIndicesSingle(rt,it,ct)),rt=`offsetToIndices_${dt}_T`,at[rt]=new nt.GlslLibRoutine(st.offsetToIndicesSingle(rt,it,ct.slice().reverse()))}),at}static offsetToIndicesSingle(at,dt,ft){const ht=[];for(let ct=0;ct<dt-1;++ct)ht.push(`
      indices[${ct}] = offset / ${ft[ct]};`),ht.push(`
        offset -= indices[${ct}] * ${ft[ct]};`);return ht.push(`
      indices[${dt-1}] = offset;`),`
      void ${at}(int offset, out int indices[${dt}]) {
        ${ht.join("")}
      }
      `}incrementIndices(){const at={};return this.context.programInfo.inputNames.forEach((dt,ft)=>{const ht=this.context.inputTextureLayouts[ft].shape,ct=ht.length,it=`incrementIndices_${dt}`;let rt="";for(let ut=0;ut<ct;++ut)rt+=`
        shape[${ut}] = ${ht[ut]};`;const lt=`
        void ${it}(int axis, out int indices[${ct}]) {
          int shape[${ct}];
          ${rt};
          for(int i = ${ct} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;at[it]=new nt.GlslLibRoutine(lt)}),at}}_e.ShapeUtilsGlslLib=st},5060:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.getDefaultFragShaderMain=_e.getFragShaderPreamble=_e.getVertexShaderSource=_e.getGlsl=void 0;const tt={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},nt={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function st(ot){return ot===1?tt:nt}_e.getGlsl=st,_e.getVertexShaderSource=function(ot){const at=st(ot);return`${at.version}
      precision highp float;
      ${at.attribute} vec3 position;
      ${at.attribute} vec2 textureCoord;

      ${at.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_e.getFragShaderPreamble=function(ot){const at=st(ot);return`${at.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${at.varyingFrag} vec2 TexCoords;
    ${at.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_e.getDefaultFragShaderMain=function(ot,at){return`
  void main() {
    int indices[${at}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${st(ot).output} = result;
  }
  `}},3891:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.VecGlslLib=void 0;const nt=tt(8520);class st extends nt.GlslLib{constructor(at){super(at)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const at=this.context.outputTextureLayout.shape.length,dt={add:"+=",sub:"-=",mul:"*=",div:"/="},ft={};for(const ht in dt){const ct=`${ht}Vec`;let it="";for(let lt=0;lt<at;++lt)it+=`
          dest[${lt}] ${dt[ht]} src[${lt}];
          `;const rt=`
        void ${ct}(int src[${at}], out int dest[${at}]) {
          ${it}
        }
        `;ft[ct]=new nt.GlslLibRoutine(rt)}return ft}copyVec(){const at=this.context.outputTextureLayout.shape.length;let dt="";for(let ht=0;ht<at;++ht)dt+=`
        dest[${ht}] = src[${ht}];
        `;const ft=`
      void copyVec(int src[${at}], out int dest[${at}]) {
        ${dt}
      }
      `;return{copyVec:new nt.GlslLibRoutine(ft)}}setVecItem(){const at=this.context.outputTextureLayout.shape.length;let dt=`
        if(index < 0)
            index =${at} + index;
        if (index == 0)
            m[0] = value;
        `;for(let ht=1;ht<at-1;++ht)dt+=`
        else if (index == ${ht})
            m[${ht}] = value;
            `;dt+=`
        else
            m[${at-1}] = value;
        `;const ft=`
      void setVecItem(out int m[${at}], int index, int value) {
        ${dt}
      }
        `;return{setVecItem:new nt.GlslLibRoutine(ft)}}getVecItem(){const at=this.context.outputTextureLayout.shape.length;let dt=`
        if(index < 0)
            index = ${at} + index;
        if (index == 0)
            return m[0];
      `;for(let ht=1;ht<at-1;++ht)dt+=`
        else if (index == ${ht})
            return m[${ht}];
      `;dt+=`
        else
            return m[${at-1}];
        `;const ft=`
      int getVecItem(int m[${at}], int index) {
        ${dt}
      }
    `;return{getVecItem:new nt.GlslLibRoutine(ft)}}}_e.VecGlslLib=st},8316:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.WebGLInferenceHandler=void 0;const nt=tt(6231),st=tt(9162),ot=tt(2517),at=tt(2403),dt=tt(7019),ft=tt(8710),ht=tt(5611),ct=tt(4057),it=tt(2039);_e.WebGLInferenceHandler=class{constructor(rt){this.session=rt,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(rt,lt){return(0,ct.calculateTextureWidthAndHeight)(this.session.layoutStrategy,rt,lt)}executeProgram(rt,lt){if(lt.length<rt.inputNames.length)throw new Error(`Input size mustn't be less than ${rt.inputNames.length}.`);if(rt.inputNames.length!==rt.inputTypes.length)throw new Error("input names size does not match input types");const ut=[];for(let wt=0;wt<rt.inputNames.length;++wt)ut[wt]=this.getOrCreateTextureData(lt[wt],rt.inputTypes[wt]);const pt=((wt,xt)=>{const Tt=xt.map(Pt=>`${Pt.unpackedShape.join(",")};${Pt.width}x${Pt.height}`).join("_");let St=wt.name;return wt.cacheHint&&(St+="["+wt.cacheHint+"]"),St+=":"+Tt,St})(rt,ut);let gt=this.session.programManager.getArtifact(pt);const mt=gt?gt.programInfo:typeof rt.get=="function"?rt.get():rt,yt=(0,ct.createTextureLayoutFromTextureType)(this.session.layoutStrategy,mt.output.dims,mt.output.textureType),bt=this.createTextureData(yt,mt.output.type);return gt||(gt=this.session.programManager.build(mt,ut,bt),this.session.programManager.setArtifact(pt,gt)),this.runProgram(gt,ut,bt),bt}run(rt,lt){return this.executeProgram(rt,lt).tensor}runProgram(rt,lt,ut){for(let pt=0;pt<lt.length;++pt)if(!!lt[pt].isPacked!=(rt.programInfo.inputTypes[pt]===it.TextureType.packed))throw new Error(`input[${pt}] property packed inconsistent`);if(!!ut.isPacked!=(rt.programInfo.output.textureType===it.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(rt,lt,ut)}getOrCreateTextureData(rt,lt){let ut=this.getTextureData(rt.dataId,lt===it.TextureType.packed);if(!ut&&(ut=this.getTextureData(rt.dataId,lt!==it.TextureType.packed),ut))return lt===it.TextureType.packed?this.pack(ut):this.unpack(ut);if(!ut){const pt=(0,ct.createTextureLayoutFromTextureType)(this.session.layoutStrategy,rt.dims,lt);if(lt===it.TextureType.packedLastDimension){const yt=rt.dims;if(yt.length===4){const bt=[yt[0],Math.ceil(yt[1]*yt[2]*yt[3]/4)],wt=(0,ct.createTextureLayoutFromTextureType)(this.session.layoutStrategy,bt,lt);let xt=rt.numberData;if(yt[1]*yt[2]*yt[3]%4!=0){const Tt=yt[0],St=yt[1]*yt[2]*yt[3],Pt=Math.ceil(St*1/4)*4;xt=new Float32Array(Tt*Pt);for(let vt=0;vt<Tt;++vt){const At=vt*St,It=vt*Pt+vt%1*St;xt.set(rt.numberData.subarray(At,At+St),It)}}return this.createTextureData(wt,rt.type,xt,rt,1)}}if(lt===it.TextureType.packed){const gt=(0,ct.createTextureLayoutFromShape)(this.session.layoutStrategy,rt.dims,1,[],{reverseWH:!0}),mt=this.createTextureData(gt,rt.type,rt.numberData,rt,1);ut=this.pack(mt)}else ut=this.createTextureData(pt,rt.type,rt.numberData,rt,1)}return ut}createTextureDataFromLayoutBindTensor(rt,lt,ut,pt){return this.createTextureData(rt,lt,ut,pt,1)}createTextureData(rt,lt,ut,pt,gt){nt.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(rt)}]`);const mt=this.session.textureManager.createTextureFromLayout(lt,rt,ut,gt);return this.createTextureDataFromTexture(rt,lt,mt,pt)}reshapeUnpacked(rt,lt){const ut=this.getOrCreateTextureData(rt,it.TextureType.unpacked),pt={channels:ut.channels,height:ut.height,width:ut.width,shape:lt.length!==0?lt:[1],strides:ot.ShapeUtil.computeStrides(lt),unpackedShape:lt};return this.createTextureDataFromTexture(pt,rt.type,ut.texture).tensor}reshapePacked(rt,lt){const ut=this.getOrCreateTextureData(rt,it.TextureType.packed);if((0,dt.isReshapeCheap)(rt.dims,lt)){const bt={channels:ut.channels,height:ut.height,width:ut.width,shape:lt.length!==0?lt:[1],strides:ot.ShapeUtil.computeStrides(lt),unpackedShape:lt,isPacked:!0};return this.createTextureDataFromTexture(bt,rt.type,ut.texture).tensor}const pt=(0,dt.processDims3D)(rt.dims),gt=(0,dt.processDims3D)(lt),mt=this.reshapePacked(rt,pt),yt=this.run((0,dt.createPackedReshape3DProgramInfoLoader)(this,mt,gt),[mt]);return this.reshapePacked(yt,lt)}cast(rt,lt){const ut=this.getOrCreateTextureData(rt,it.TextureType.unpacked);return this.createTextureDataFromTexture(ut,lt,ut.texture).tensor}createTextureDataFromTexture(rt,lt,ut,pt,gt){const mt=Object.assign(Object.assign({},rt),{tensor:pt||new st.Tensor(rt.unpackedShape,lt,yt=>this.readTexture(mt),async yt=>this.readTextureAsync(mt),void 0,gt),texture:ut});return this.setTextureData(mt.tensor.dataId,mt,rt.isPacked),mt}getTextureData(rt,lt=!1){return this.session.isInitializer(rt)?this.session.getTextureData(rt,lt):lt?this.packedTextureDataCache.get(rt):this.unpackedTextureDataCache.get(rt)}setTextureData(rt,lt,ut=!1){this.session.isInitializer(rt)?this.session.setTextureData(rt,lt,ut):(ut?this.packedTextureDataCache:this.unpackedTextureDataCache).set(rt,lt)}isTextureLayoutCached(rt,lt=!1){return!!this.getTextureData(rt.dataId,lt)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(rt=>this.session.textureManager.releaseTexture(rt)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(rt=>this.session.textureManager.releaseTexture(rt)),this.unpackedTextureDataCache=new Map}readTexture(rt){return rt.isPacked?this.readTexture(this.unpack(rt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(rt,rt.tensor.type,rt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ft.encodeAsUint8)(this,rt))}async readTextureAsync(rt){return rt.isPacked?this.readTextureAsync(this.unpack(rt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(rt,rt.tensor.type,rt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ft.encodeAsUint8)(this,rt))}pack(rt){return this.executeProgram((0,at.createPackProgramInfoLoader)(this,rt.tensor),[rt.tensor])}unpack(rt){return this.executeProgram((0,ht.createUnpackProgramInfoLoader)(this,rt.tensor),[rt.tensor])}}},1640:function(et,_e,tt){var nt=this&&this.__createBinding||(Object.create?function(zt,Xt,Jt,nn){nn===void 0&&(nn=Jt);var xn=Object.getOwnPropertyDescriptor(Xt,Jt);xn&&!("get"in xn?!Xt.__esModule:xn.writable||xn.configurable)||(xn={enumerable:!0,get:function(){return Xt[Jt]}}),Object.defineProperty(zt,nn,xn)}:function(zt,Xt,Jt,nn){nn===void 0&&(nn=Jt),zt[nn]=Xt[Jt]}),st=this&&this.__setModuleDefault||(Object.create?function(zt,Xt){Object.defineProperty(zt,"default",{enumerable:!0,value:Xt})}:function(zt,Xt){zt.default=Xt}),ot=this&&this.__importStar||function(zt){if(zt&&zt.__esModule)return zt;var Xt={};if(zt!=null)for(var Jt in zt)Jt!=="default"&&Object.prototype.hasOwnProperty.call(zt,Jt)&&nt(Xt,zt,Jt);return st(Xt,zt),Xt};Object.defineProperty(_e,"__esModule",{value:!0}),_e.WEBGL_OP_RESOLVE_RULES=void 0;const at=tt(2898),dt=ot(tt(7839)),ft=tt(4196),ht=tt(2069),ct=tt(8138),it=tt(9663),rt=tt(5193),lt=tt(7992),ut=tt(1253),pt=tt(4776),gt=tt(6572),mt=tt(3346),yt=tt(5623),bt=tt(2870),wt=tt(2143),xt=tt(4939),Tt=tt(718),St=tt(2268),Pt=tt(8117),vt=tt(2278),At=tt(5524),It=tt(5975),jt=tt(3933),Lt=tt(6558),Rt=tt(5723),$t=tt(3738),Ot=ot(tt(4909)),Ft=tt(8428),Vt=tt(9793);_e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Ot.abs],["Acos","","7+",Ot.acos],["Add","","7+",dt.add],["And","","7+",dt.and],["Asin","","7+",Ot.asin],["Atan","","7+",Ot.atan],["AveragePool","","7+",wt.averagePool,wt.parseAveragePoolAttributes],["BatchNormalization","","7+",at.batchNormalization,at.parseBatchNormalizationAttributes],["Cast","","6+",ft.cast,ft.parseCastAttributes],["Ceil","","6+",Ot.ceil],["Clip","","6-10",Ot.clip,Ot.parseClipAttributes],["Clip","","11+",Ot.clipV11],["Concat","","4+",ht.concat,ht.parseConcatAttributes],["Conv","","1+",ct.conv,ct.parseConvAttributes],["ConvTranspose","","1+",it.convTranspose,it.parseConvTransposeAttributes],["Cos","","7+",Ot.cos],["Div","","7+",dt.div],["Dropout","","7+",Ot.identity],["DepthToSpace","","1+",rt.depthToSpace,rt.parseDepthToSpaceAttributes],["Equal","","7+",dt.equal],["Elu","","6+",Ot.elu,Ot.parseEluAttributes],["Exp","","6+",Ot.exp],["Flatten","","1+",lt.flatten,lt.parseFlattenAttributes],["Floor","","6+",Ot.floor],["FusedConv","com.microsoft","1+",ct.conv,ct.parseConvAttributes],["Gather","","1+",ut.gather,ut.parseGatherAttributes],["Gemm","","7-10",pt.gemm,pt.parseGemmAttributesV7],["Gemm","","11+",pt.gemm,pt.parseGemmAttributesV11],["GlobalAveragePool","","1+",wt.globalAveragePool,wt.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",wt.globalMaxPool],["Greater","","7+",dt.greater],["Identity","","1+",Ot.identity],["ImageScaler","","1+",gt.imageScaler,gt.parseImageScalerAttributes],["InstanceNormalization","","6+",mt.instanceNormalization,mt.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Ot.leakyRelu,Ot.parseLeakyReluAttributes],["Less","","7+",dt.less],["Log","","6+",Ot.log],["MatMul","","1+",yt.matMul,yt.parseMatMulAttributes],["MaxPool","","1+",wt.maxPool,wt.parseMaxPoolAttributes],["Mul","","7+",dt.mul],["Neg","","6+",Ot.neg],["Not","","1+",Ot.not],["Or","","7+",dt.or],["Pad","","2-10",bt.padV2,bt.parsePadAttributesV2],["Pad","","11+",bt.padV11,bt.parsePadAttributesV11],["Pow","","7+",dt.pow],["PRelu","","7+",dt.pRelu],["ReduceLogSum","","1+",xt.reduceLogSum,xt.parseReduceAttributes],["ReduceMax","","1+",xt.reduceMax,xt.parseReduceAttributes],["ReduceMean","","1+",xt.reduceMean,xt.parseReduceAttributes],["ReduceMin","","1+",xt.reduceMin,xt.parseReduceAttributes],["ReduceProd","","1+",xt.reduceProd,xt.parseReduceAttributes],["ReduceSum","","1-12",xt.reduceSum,xt.parseReduceAttributes],["ReduceSumSquare","","1+",xt.reduceLogSumSquare,xt.parseReduceAttributes],["Relu","","6+",Ot.relu],["Reshape","","5+",Tt.reshape],["Resize","","10",St.resize,St.parseResizeAttributesV10],["Resize","","11+",St.resize,St.parseResizeAttributesV11],["Shape","","1+",Pt.shape],["Sigmoid","","6+",Ot.sigmoid],["Sin","","7+",Ot.sin],["Slice","","10+",vt.sliceV10],["Slice","","1-9",vt.slice,vt.parseSliceAttributes],["Softmax","","1-12",At.softmax,At.parseSoftmaxAttributes],["Softmax","","13+",At.softmaxV13,At.parseSoftmaxAttributesV13],["Split","","2-12",It.split,It.parseSplitAttributes],["Sqrt","","6+",Ot.sqrt],["Squeeze","","1-12",jt.squeeze,jt.parseSqueezeAttributes],["Squeeze","","13+",jt.squeezeV13],["Sub","","7+",dt.sub],["Sum","","6+",Lt.sum],["Tan","","7+",Ot.tan],["Tanh","","6+",Ot.tanh],["Tile","","6+",Rt.tile],["Transpose","","1+",$t.transpose,$t.parseTransposeAttributes],["Upsample","","7-8",Vt.upsample,Vt.parseUpsampleAttributesV7],["Upsample","","9",Vt.upsample,Vt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Ft.unsqueeze,Ft.parseUnsqueezeAttributes],["Unsqueeze","","13+",Ft.unsqueezeV13],["Xor","","7+",dt.xor]]},2898:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseBatchNormalizationAttributes=_e.batchNormalization=void 0;const nt=tt(246),st=tt(5060),ot=tt(2039),at={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]};_e.batchNormalization=(ht,ct,it)=>(ft(ct),[ht.run(Object.assign(Object.assign({},at),{cacheHint:it.cacheKey,get:()=>dt(ht,ct,it)}),ct)]),_e.parseBatchNormalizationAttributes=ht=>{const ct=ht.attributes.getFloat("epsilon",1e-5),it=ht.attributes.getFloat("momentum",.9),rt=ht.attributes.getInt("spatial",1);return(0,nt.createAttributeWithCacheKey)({epsilon:ct,momentum:it,spatial:rt})};const dt=(ht,ct,it)=>{const rt=(0,st.getGlsl)(ht.session.backend.glContext.version),lt=ct[0].dims.length,[ut,pt]=ht.calculateTextureWidthAndHeight(ct[1].dims,ot.TextureType.unpacked),gt=`
  float process(int[${lt}] indices) {
    vec2 position = offsetToCoords(indices[1], ${ut}, ${pt});
    float scale = getColorAsFloat(${rt.texture2D}(Scale, position));
    float mean = getColorAsFloat(${rt.texture2D}(Mean, position));
    float variance = getColorAsFloat(${rt.texture2D}(Variance, position));
    float b = getColorAsFloat(${rt.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${it.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},at),{output:{dims:ct[0].dims,type:ct[0].type,textureType:ot.TextureType.unpacked},shaderSource:gt})},ft=ht=>{if(!ht||ht.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const ct=ht[0],it=ht[1],rt=ht[2],lt=ht[3],ut=ht[4];if(ct.dims.length<3||it.dims.length!==1||rt.dims.length!==1||lt.dims.length!==1||ut.dims.length!==1)throw new Error("invalid input shape.");if(it.dims[0]!==ct.dims[1]||rt.dims[0]!==ct.dims[1]||lt.dims[0]!==ct.dims[1]||ut.dims[0]!==ct.dims[1])throw new Error("invalid input shape.");if(ct.type!=="float32"&&ct.type!=="float64"||it.type!=="float32"&&it.type!=="float64"||rt.type!=="float32"&&rt.type!=="float64"||lt.type!=="float32"&&lt.type!=="float64"||ut.type!=="float32"&&ut.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.xor=_e.sub=_e.pRelu=_e.pow=_e.or=_e.mul=_e.less=_e.greater=_e.equal=_e.div=_e.and=_e.add=_e.glslPRelu=_e.glslPow=_e.glslXor=_e.glslOr=_e.glslAnd=_e.glslLess=_e.glslGreater=_e.glslEqual=_e.glslSub=_e.glslMul=_e.glslDiv=_e.glslAdd=void 0;const nt=tt(2517),st=tt(8520),ot=tt(5060),at=tt(2039);function dt(){const xt="add_";return{body:`
  float ${xt}(float a, float b) {
    return a + b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function ft(){const xt="div_";return{body:`
  float ${xt}(float a, float b) {
    return a / b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function ht(){const xt="mul_";return{body:`
  float ${xt}(float a, float b) {
    return a * b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function ct(){const xt="sub_";return{body:`
  float ${xt}(float a, float b) {
    return a - b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function it(){const xt="equal_";return{body:`
  float ${xt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function rt(){const xt="greater_";return{body:`
  float ${xt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function lt(){const xt="less_";return{body:`
  float ${xt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function ut(){const xt="and_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function pt(){const xt="or_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function gt(){const xt="xor_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}function mt(){return function(xt){const Tt=`${xt}_`;return{body:`
  float ${Tt}(float a, float b) {
    return ${xt}(a, b);
  }
  vec4 ${Tt}(vec4 v1, vec4 v2) {
    return ${xt}(v1, v2);
  }
  `,name:Tt,type:st.FunctionType.ValueBased}}("pow")}function yt(){const xt="prelu_";return{body:`
  float ${xt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:xt,type:st.FunctionType.ValueBased}}_e.glslAdd=dt,_e.glslDiv=ft,_e.glslMul=ht,_e.glslSub=ct,_e.glslEqual=it,_e.glslGreater=rt,_e.glslLess=lt,_e.glslAnd=ut,_e.glslOr=pt,_e.glslXor=gt,_e.glslPow=mt,_e.glslPRelu=yt;const bt=(xt,Tt,St,Pt=Tt[0].type,vt)=>{const At=xt.session.pack?at.TextureType.packed:at.TextureType.unpacked;return{name:St.name,inputNames:["A","B"],inputTypes:[At,At],cacheHint:vt,get:()=>wt(xt,Tt,St,Pt)}},wt=(xt,Tt,St,Pt=Tt[0].type)=>{const vt=xt.session.pack?at.TextureType.packed:at.TextureType.unpacked,At=!nt.ShapeUtil.areEqual(Tt[0].dims,Tt[1].dims);let It=Tt[0].dims;const jt=xt.session.pack;if(At){const $t=nt.BroadcastUtil.calcShape(Tt[0].dims,Tt[1].dims,!1);if(!$t)throw new Error("Can't perform binary op on the given tensors");It=$t;const Ot=It.length,Ft=Tt[0].dims.length!==0?Tt[0].dims.length:1,Vt=Tt[1].dims.length!==0?Tt[1].dims.length:1,zt=Tt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Xt=Tt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Jt=(0,ot.getGlsl)(xt.session.backend.glContext.version),nn=jt?`
      ${St.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${St.name}(a, b);
        ${Jt.output} = result;
      }`:`
      ${St.body}
      float process(int indices[${Ot}]) {
        int aindices[${Ft}];
        int bindices[${Vt}];
        ${zt}
        ${Xt}
        return ${St.name}(_A(aindices), _B(bindices));
      }`;return{name:St.name,inputNames:["A","B"],inputTypes:[vt,vt],output:{dims:It,type:Pt,textureType:vt},shaderSource:nn,hasMain:jt}}const Lt=(0,ot.getGlsl)(xt.session.backend.glContext.version),Rt=`
    ${St.body}
    void main() {
      vec4 v1 = ${Lt.texture2D}(A, TexCoords);
      vec4 v2 = ${Lt.texture2D}(B, TexCoords);
      vec4 result = ${St.name}(v1, v2);
      ${Lt.output} = result;
    }
    `;return{name:St.name,inputNames:["A","B"],inputTypes:[vt,vt],output:{dims:Tt[0].dims,type:Pt,textureType:vt},shaderSource:Rt,hasMain:!0}};_e.add=(xt,Tt)=>[xt.run(bt(xt,Tt,dt()),Tt)],_e.and=(xt,Tt)=>[xt.run(bt(xt,Tt,ut(),"bool"),Tt)],_e.div=(xt,Tt)=>[xt.run(bt(xt,Tt,ft()),Tt)],_e.equal=(xt,Tt)=>[xt.run(bt(xt,Tt,it(),"bool"),Tt)],_e.greater=(xt,Tt)=>[xt.run(bt(xt,Tt,rt(),"bool"),Tt)],_e.less=(xt,Tt)=>[xt.run(bt(xt,Tt,lt(),"bool"),Tt)],_e.mul=(xt,Tt)=>[xt.run(bt(xt,Tt,ht()),Tt)],_e.or=(xt,Tt)=>[xt.run(bt(xt,Tt,pt(),"bool"),Tt)],_e.pow=(xt,Tt)=>[xt.run(bt(xt,Tt,mt()),Tt)],_e.pRelu=(xt,Tt)=>[xt.run(bt(xt,Tt,yt()),Tt)],_e.sub=(xt,Tt)=>[xt.run(bt(xt,Tt,ct()),Tt)],_e.xor=(xt,Tt)=>[xt.run(bt(xt,Tt,gt(),"bool"),Tt)]},4196:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseCastAttributes=_e.cast=void 0;const nt=tt(2517);_e.cast=(ot,at,dt)=>(st(at),[ot.cast(at[0],dt)]),_e.parseCastAttributes=ot=>nt.ProtoUtil.tensorDataTypeFromProto(ot.attributes.getInt("to"));const st=ot=>{if(!ot||ot.length!==1)throw new Error("Cast requires 1 input.");if(ot[0].type==="string")throw new Error("Invalid input type.")}},1163:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createPackedConcatProgramInfoLoader=void 0;const nt=tt(5060),st=tt(2039),ot=tt(9390),at=tt(2827);_e.createPackedConcatProgramInfoLoader=(ft,ht,ct)=>{const it=(rt=ht.length,lt=ct.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:rt},(ut,pt)=>`X${pt}`),inputTypes:Array(rt).fill(st.TextureType.packed),cacheHint:lt});var rt,lt;return Object.assign(Object.assign({},it),{get:()=>((ut,pt,gt,mt)=>{const yt=gt[0].dims.slice();if(mt>=yt.length||mt<-1*yt.length)throw new Error("axis specified for concat doesn't match input dimensionality");mt<0&&(mt=yt.length+mt);const bt=yt.slice(0);for(let zt=1;zt<gt.length;zt++){const Xt=gt[zt].dims.slice();for(let Jt=0;Jt<yt.length;Jt++)if(Jt===mt)bt[mt]+=Xt[Jt];else if(yt[Jt]!==Xt[Jt])throw new Error("non concat dimensions must match")}const wt=bt.length,xt=(0,at.getChannels)("coords",wt),Tt=(0,ot.getCoordsDataType)(wt),St=(0,at.unpackFromChannel)(),Pt=gt.map(zt=>zt.dims),vt=(0,ot.getGlChannels)(wt),At=new Array(Pt.length-1);At[0]=Pt[0][mt];for(let zt=1;zt<At.length;zt++)At[zt]=At[zt-1]+Pt[zt][mt];const It=vt[mt],jt=vt.slice(-2),Lt=vt.join();let Rt=`if (${It} < ${At[0]}) {
        return getChannel(
            getX0(${Lt}), vec2(${jt.join()}));
        }`;for(let zt=1;zt<At.length;zt++){const Xt=At[zt-1];Rt+=`
            if (${It} < ${At[zt]}  && ${It} >= ${At[zt-1]}) {
              return getChannel(
                getX${zt}(${dt(vt,It,Xt)}),
                vec2(${dt(jt,It,Xt)}));
            }`}const $t=At.length,Ot=At[At.length-1];Rt+=`
            return getChannel(
              getX${$t}(${dt(vt,It,Ot)}),
              vec2(${dt(jt,It,Ot)}));`;const Ft=(0,nt.getGlsl)(ut.session.backend.glContext.version),Vt=`
          ${St}
          float getValue(${vt.map(zt=>"int "+zt)}) {
            ${Rt}
          }

          void main() {
            ${Tt} coords = getOutputCoords();
            int lastDim = coords.${vt[wt-1]};
            coords.${vt[wt-1]} = coords.${vt[wt-2]};
            coords.${vt[wt-2]} = lastDim;

            vec4 result = vec4(getValue(${xt}), 0., 0., 0.);

            ${xt[wt-1]} = ${xt[wt-1]} + 1;
            if (${xt[wt-1]} < ${bt[wt-1]}) {
              result.g = getValue(${xt});
            }

            ${xt[wt-2]} = ${xt[wt-2]} + 1;
            if (${xt[wt-2]} < ${bt[wt-2]}) {
              result.a = getValue(${xt});
            }

            ${xt[wt-1]} = ${xt[wt-1]} - 1;
            if (${xt[wt-2]} < ${bt[wt-2]} &&
                ${xt[wt-1]} < ${bt[wt-1]}) {
              result.b = getValue(${xt});
            }
            ${Ft.output} = result;
          }
        `;return Object.assign(Object.assign({},pt),{output:{dims:bt,type:gt[0].type,textureType:st.TextureType.packed},shaderSource:Vt,hasMain:!0})})(ft,it,ht,ct.axis)})};const dt=(ft,ht,ct)=>{const it=ft.indexOf(ht);return ft.map((rt,lt)=>lt===it?`${rt} - ${ct}`:rt).join()}},2069:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseConcatAttributes=_e.concat=void 0;const nt=tt(246),st=tt(2039),ot=tt(1163);_e.concat=(rt,lt,ut)=>(it(lt),rt.session.pack&&lt[0].dims.length>1?[rt.run((0,ot.createPackedConcatProgramInfoLoader)(rt,lt,ut),lt)]:[rt.run(at(rt,lt,ut),lt)]);const at=(rt,lt,ut)=>{const pt=(gt=lt.length,mt=ut.cacheKey,{name:"Concat",inputNames:Array.from({length:gt},(yt,bt)=>`X${bt}`),inputTypes:Array(gt).fill(st.TextureType.unpacked),cacheHint:mt});var gt,mt;return Object.assign(Object.assign({},pt),{get:()=>((yt,bt,wt,xt)=>{const Tt=wt[0].dims.slice();if(xt>=Tt.length||xt<-1*Tt.length)throw new Error("axis specified for concat doesn't match input dimensionality");xt<0&&(xt=Tt.length+xt);const St=Tt.slice(0);for(let Lt=1;Lt<wt.length;Lt++){const Rt=wt[Lt].dims.slice();for(let $t=0;$t<Tt.length;$t++)if($t===xt)St[xt]+=Rt[$t];else if(Tt[$t]!==Rt[$t])throw new Error("non concat dimensions must match")}const Pt=St.length,vt=new Array(wt.length);let At=0;for(let Lt=0;Lt<vt.length;++Lt)At+=wt[Lt].dims[xt],vt[Lt]=At;let It="";It=wt.length<5?dt(vt):ft(vt);const jt=`
        ${ht(wt.length,Pt)}
        ${ct(vt)}
        ${It}
        float process(int indices[${Pt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${xt}]);

          if(textureIndex != 0) {
            indices[${xt}] = indices[${xt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},bt),{output:{dims:St,type:wt[0].type,textureType:st.TextureType.unpacked},shaderSource:jt})})(0,pt,lt,ut.axis)})},dt=rt=>`int getTextureWhereDataResides(int index) {
      ${rt.map((lt,ut)=>`if(index<${lt}) {return ${ut};}
`).join("")}
    }`,ft=rt=>dt(rt),ht=(rt,lt)=>{const ut=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${lt}]) {`];for(let pt=0;pt<rt;++pt)pt===0?ut.push(`	if (textureIndex == ${pt}) { return _X${pt}(indices); }`):pt===rt-1?ut.push(`	else { return _X${pt}(indices); }`):ut.push(`	else if (textureIndex == ${pt}) { return _X${pt}(indices); }`);return ut.push("	}"),ut.join(`
`)},ct=rt=>{const lt=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let ut=0;ut<rt.length;++ut)ut===0?lt.push(`	if (index == ${ut}) { return ${rt[ut]}; }`):ut===rt.length-1?lt.push(`	else { return ${rt[ut]}; }`):lt.push(`	else if (index == ${ut}) { return ${rt[ut]}; }`);return lt.push("	}"),lt.join(`
`)};_e.parseConcatAttributes=rt=>(0,nt.createAttributeWithCacheKey)({axis:rt.attributes.getInt("axis")});const it=rt=>{if(!rt||rt.length<1)throw new Error("too few inputs");const lt=rt[0].type,ut=rt[0].dims.length;if(lt==="string")throw new Error("string tensor is not supported yet");for(const pt of rt){if(pt.type!==lt)throw new Error("input tensors should be one type");if(pt.dims.length!==ut)throw new Error("input tensors should have the same shape")}}},4770:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createUnpackedGroupedConvProgramInfoLoader=void 0;const nt=tt(6231),st=tt(5060),ot=tt(2039),at=tt(8138),dt=tt(2823);_e.createUnpackedGroupedConvProgramInfoLoader=(ft,ht,ct)=>{const it=(rt=ht.length>2,lt=ct.cacheKey,{name:"GroupedConv",inputNames:rt?["X","W","Bias"]:["X","W"],inputTypes:rt?[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]:[ot.TextureType.unpacked,ot.TextureType.unpacked],cacheHint:lt});var rt,lt;return Object.assign(Object.assign({},it),{get:()=>((ut,pt,gt,mt)=>{const yt=pt.length>2?"value += getBias(output_channel);":"",bt=pt[0].dims.slice(),wt=pt[1].dims.slice(),xt=wt[0]/mt.group;nt.Logger.verbose("GroupedConv",`autpPad:${mt.autoPad}, dilations:${mt.dilations}, group:${mt.group}, kernelShape:${mt.kernelShape}, pads:${mt.pads}, strides:${mt.strides}`);const Tt=(0,at.calculateOutputShape)(bt,wt,mt.dilations,mt.pads,mt.strides),St=(0,st.getGlsl)(ut.session.backend.glContext.version),{activationFunction:Pt,applyActivation:vt}=(0,dt.getActivationSnippet)(mt),At=`
  const ivec2 strides = ivec2(${mt.strides[0]}, ${mt.strides[1]});
  const ivec2 pads = ivec2(${mt.pads[0]}, ${mt.pads[1]});
  ${Pt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${xt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${wt[1]}; wInChannel++) {
      int input_channel = group_id * ${wt[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${wt[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${mt.dilations[0]};

        if (xHeight < 0 || xHeight >= ${bt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${wt[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${mt.dilations[1]};
          if (xWidth < 0 || xWidth >= ${bt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${yt}
    ${vt}
    ${St.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},gt),{output:{dims:Tt,type:pt[0].type,textureType:ot.TextureType.unpacked},shaderSource:At,hasMain:!0})})(ft,ht,it,ct)})}},1386:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.conv2DPacked=_e.conv2DPackedPointwise=void 0;const nt=tt(8138),st=tt(8555),ot=tt(708);_e.conv2DPackedPointwise=(at,dt,ft)=>{const ht=dt[0].dims,ct=dt[1].dims,it=(0,nt.calculateOutputShape)(ht,ct,ft.dilations,ft.pads,ft.strides),rt=at.reshapePacked(dt[0],[ht[1],ht[2]*ht[3]]),lt=at.reshapePacked(dt[1],[ct[0],ct[1]]),ut=dt.length>2?[lt,rt,dt[2]]:[lt,rt],pt=at.run((0,ot.createPackedMatmulProgramInfoLoader)(at,ut,ft),ut);return at.reshapePacked(pt,it)},_e.conv2DPacked=(at,dt,ft)=>{const ht=dt[0].dims,ct=dt[1].dims,it=(0,nt.calculateOutputShape)(ht,ct,ft.dilations,ft.pads,ft.strides),rt=at.run((0,st.createPackedIm2ColProgramInfoLoader)(at,dt[0],dt[1],it,ft),[dt[0]]),lt=at.reshapePacked(dt[1],[ct[0],ct[1]*ct[2]*ct[3]]),ut=dt.length===3?[lt,rt,dt[2]]:[lt,rt],pt=at.run((0,ot.createPackedMatmulProgramInfoLoader)(at,ut,ft),ut);return at.reshapePacked(pt,it)}},9663:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseConvTransposeAttributes=_e.convTranspose=void 0;const nt=tt(246),st=tt(5060),ot=tt(2039),at=tt(2823),dt=(lt,ut,pt,gt,mt,yt)=>(lt-1)*ut+pt+(gt-1)*mt+1-yt,ft=(lt,ut,pt,gt,mt)=>{const yt=Math.floor(lt/2);ut==="SAME_UPPER"?(pt[gt]=yt,pt[mt]=lt-yt):ut==="SAME_LOWER"&&(pt[gt]=lt-yt,pt[mt]=yt)};_e.convTranspose=(lt,ut,pt)=>(rt(ut,pt),ht(lt,ut,pt));const ht=(lt,ut,pt)=>{const gt=it(pt,ut);return[ct(lt,ut,gt)]},ct=(lt,ut,pt)=>lt.run(((gt,mt,yt)=>{const bt=(wt=mt.length>2,xt=yt.cacheKey,{name:"ConvTranspose",inputNames:wt?["X","W","B"]:["X","W"],inputTypes:wt?[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]:[ot.TextureType.unpacked,ot.TextureType.unpacked],cacheHint:xt});var wt,xt;return Object.assign(Object.assign({},bt),{get:()=>((Tt,St,Pt,vt)=>{const At=St.length>2?"getB(output_channel)":"0.0",It=St[0].dims,jt=St[1].dims,Lt=jt[1],Rt=jt[0]/vt.group,$t=[St[0].dims[0],St[1].dims[1]*vt.group,...vt.outputShape],Ot=(0,st.getGlsl)(Tt.session.backend.glContext.version),{activationFunction:Ft,applyActivation:Vt}=(0,at.getActivationSnippet)(vt),zt=`
  const ivec2 strides = ivec2(${vt.strides[0]}, ${vt.strides[1]});
  const ivec2 pads = ivec2(${vt.pads[0]}, ${vt.pads[1]});
  ${Ft}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Lt};
    int wOutChannel = output_channel - group_id * ${Lt};

    float value = ${At};
    for (int inChannelOffset = 0; inChannelOffset < ${Rt}; inChannelOffset++) {
      int input_channel = group_id * ${Rt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${jt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${jt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${vt.dilations[0]}, wHOff * ${vt.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${It[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${It[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Vt}
    ${Ot.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Pt),{output:{dims:$t,type:St[0].type,textureType:ot.TextureType.unpacked},shaderSource:zt,hasMain:!0})})(gt,mt,bt,yt)})})(lt,ut,pt),ut),it=(lt,ut)=>{const pt=lt.kernelShape.slice();if(lt.kernelShape.length===0)for(let bt=2;bt<ut[1].dims.length;++bt)pt.push(ut[1].dims[bt]);const gt=lt.pads.slice(),mt=lt.outputShape.slice();((bt,wt,xt,Tt,St,Pt,vt,At)=>{const It=bt.length-2,jt=At.length===0;for(let Lt=0;Lt<It;++Lt){const Rt=jt?bt[Lt+2]*Pt[Lt]:At[Lt],$t=dt(bt[Lt+2],Pt[Lt],St[Lt],wt[Lt],xt[Lt],Rt);ft($t,Tt,St,Lt,Lt+It),jt&&At.push(Pt[Lt]*(bt[Lt+2]-1)+vt[Lt]+(wt[Lt]-1)*xt[Lt]+1-St[Lt]-St[Lt+It])}})(ut[0].dims,pt,lt.dilations,lt.autoPad,gt,lt.strides,lt.outputPadding,mt);const yt=Object.assign({},lt);return Object.assign(yt,{kernelShape:pt,pads:gt,outputShape:mt,cacheKey:lt.cacheKey}),yt};_e.parseConvTransposeAttributes=lt=>{const ut=lt.attributes,pt=(0,at.parseInternalActivationAttributes)(ut),gt=ut.getString("auto_pad","NOTSET"),mt=ut.getInts("dilations",[1,1]),yt=ut.getInt("group",1),bt=ut.getInts("kernel_shape",[]),wt=ut.getInts("output_padding",[0,0]),xt=ut.getInts("output_shape",[]),Tt=ut.getInts("pads",[0,0,0,0]),St=ut.getInts("strides",[1,1]);return(0,nt.createAttributeWithCacheKey)(Object.assign({autoPad:gt,dilations:mt,group:yt,kernelShape:bt,outputPadding:wt,outputShape:xt,pads:Tt,strides:St},pt))};const rt=(lt,ut)=>{if(!lt||lt.length!==2&&lt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(lt[0].dims.length!==4||lt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(lt[0].dims[1]!==lt[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const pt=lt[1].dims[1]*ut.group;if(lt.length===3&&(lt[2].dims.length!==1||lt[2].dims[0]!==pt))throw new Error("invalid bias");const gt=lt[0].dims.length-2;if(ut.dilations.length!==gt)throw new Error(`dilations should be ${gt}D`);if(ut.strides.length!==gt)throw new Error(`strides should be ${gt}D`);if(ut.pads.length!==2*gt)throw new Error(`pads should be ${2*gt}D`);if(ut.outputPadding.length!==gt)throw new Error(`output_padding should be ${gt}D`);if(ut.kernelShape.length!==0&&ut.kernelShape.length!==lt[1].dims.length-2)throw new Error("invalid kernel shape");if(ut.outputShape.length!==0&&ut.outputShape.length!==lt[0].dims.length-2)throw new Error("invalid output shape");if(lt[0].type!=="float32"||lt[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(lt.length===3&&lt[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseConvAttributes=_e.conv=_e.calculateOutputShape=void 0;const nt=tt(246),st=tt(2517),ot=tt(4770),at=tt(1386),dt=tt(9828),ft=tt(2823),ht=tt(3248),ct=tt(5623);_e.calculateOutputShape=(gt,mt,yt,bt,wt)=>{const xt=gt[0],Tt=gt.slice(2),St=Tt.length,Pt=mt[0],vt=mt.slice(2).map((It,jt)=>It+(It-1)*(yt[jt]-1)),At=Tt.map((It,jt)=>It+bt[jt]+bt[jt+St]).map((It,jt)=>Math.floor((It-vt[jt]+wt[jt])/wt[jt]));return[xt,Pt].concat(...At)},_e.conv=(gt,mt,yt)=>(pt(mt,yt),it(gt,mt,yt));const it=(gt,mt,yt)=>{const bt=ut(yt,mt),wt=gt.session.pack,xt=bt.kernelShape[0]===1&&bt.kernelShape[1]===1;return bt.group>1?[gt.run((0,ot.createUnpackedGroupedConvProgramInfoLoader)(gt,mt,bt),mt)]:xt&&wt?[rt(gt,mt,bt)]:wt&&mt[0].dims.length===4&&mt[0].dims[0]===1&&!xt?[(0,at.conv2DPacked)(gt,mt,bt)]:[lt(gt,mt,bt)]},rt=(gt,mt,yt)=>{const bt=mt[0].dims,wt=mt[1].dims,xt=(0,_e.calculateOutputShape)(bt,wt,yt.dilations,yt.pads,yt.strides),Tt=gt.reshapeUnpacked(mt[0],[bt[1],bt[2]*bt[3]]),St=gt.reshapeUnpacked(mt[1],[wt[0],wt[1]]),Pt=mt.length>2?[St,Tt,mt[2]]:[St,Tt],vt=gt.run((0,ct.createMatmulProgramInfoLoader)(Pt,yt),Pt);return gt.reshapeUnpacked(vt,xt)},lt=(gt,mt,yt)=>{const bt=mt[0].dims,wt=mt[1].dims,xt=(0,_e.calculateOutputShape)(bt,wt,yt.dilations,yt.pads,yt.strides),Tt=gt.run((0,ht.createIm2ColProgramInfoLoader)(gt,mt[0],mt[1],xt,yt),[mt[0]]),St=mt.length===3?[Tt,mt[1],mt[2]]:[Tt,mt[1]];return gt.run((0,dt.createDotProductProgramInfoLoader)(gt,mt,xt,yt),St)},ut=(gt,mt)=>{const yt=gt.kernelShape.slice();if(gt.kernelShape.length===0)for(let xt=2;xt<mt[1].dims.length;++xt)yt.push(mt[1].dims[xt]);const bt=gt.pads.slice();st.PoolConvUtil.adjustPadsBasedOnAutoPad(mt[0].dims,gt.strides,gt.dilations,yt,bt,gt.autoPad);const wt=Object.assign({},gt);return Object.assign(wt,{kernelShape:yt,pads:bt,cacheKey:gt.cacheKey}),wt};_e.parseConvAttributes=gt=>{const mt=gt.attributes,yt=(0,ft.parseInternalActivationAttributes)(mt),bt=mt.getString("auto_pad","NOTSET"),wt=mt.getInts("dilations",[1,1]),xt=mt.getInt("group",1),Tt=mt.getInts("kernel_shape",[]),St=mt.getInts("pads",[0,0,0,0]),Pt=mt.getInts("strides",[1,1]);return(0,nt.createAttributeWithCacheKey)(Object.assign({autoPad:bt,dilations:wt,group:xt,kernelShape:Tt,pads:St,strides:Pt},yt))};const pt=(gt,mt)=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(gt[0].dims.length!==4||gt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(gt[0].dims[1]!==gt[1].dims[1]*mt.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(gt.length===3&&(gt[2].dims.length!==1||gt[1].dims[0]!==gt[2].dims[0]))throw new Error("invalid bias");const yt=gt[0].dims.length-2;if(mt.dilations.length!==yt)throw new Error(`dilations should be ${yt}D`);if(mt.strides.length!==yt)throw new Error(`strides should be ${yt}D`);if(mt.pads.length!==2*yt)throw new Error(`pads should be ${2*yt}D`);if(mt.kernelShape.length!==0&&mt.kernelShape.length!==gt[1].dims.length-2)throw new Error("invalid kernel shape");if(gt[0].type!=="float32"||gt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(gt.length===3&&gt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseDepthToSpaceAttributes=_e.depthToSpace=void 0;const nt=tt(3738);_e.depthToSpace=(ot,at,dt)=>{st(at);const ft=dt.blocksize,ht=ft*ft,ct=dt.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],it=dt.mode==="DCR"?[at[0].dims[0],ft,ft,at[0].dims[1]/ht,at[0].dims[2],at[0].dims[3]]:[at[0].dims[0],at[0].dims[1]/ht,ft,ft,at[0].dims[2],at[0].dims[3]],rt=ot.reshapeUnpacked(at[0],it),lt={perm:ct,cacheKey:`${ct}`},[ut]=(0,nt.transpose)(ot,[rt],lt),pt=[at[0].dims[0],at[0].dims[1]/ht,at[0].dims[2]*ft,at[0].dims[3]*ft];return[ot.reshapeUnpacked(ut,pt)]},_e.parseDepthToSpaceAttributes=ot=>{const at=ot.attributes.getInt("blocksize");if(at<1)throw new Error(`blocksize must be >= 1, but got : ${at} for DepthToSpace`);const dt=ot.attributes.getString("mode","DCR");if(dt!=="DCR"&&dt!=="CRD")throw new Error(`unrecognized mode: ${dt} for DepthToSpace`);return{mode:dt,blocksize:at}};const st=ot=>{if(ot.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${ot.length}`);if(ot[0].type==="string"||ot[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createDotProductProgramInfoLoader=void 0;const nt=tt(2517),st=tt(5060),ot=tt(2039),at=tt(2823),dt=tt(3248);_e.createDotProductProgramInfoLoader=(ft,ht,ct,it)=>{const rt=((lt,ut)=>({name:"ConvDotProduct",inputNames:lt?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:lt?[ot.TextureType.unpacked,ot.TextureType.packedLastDimension,ot.TextureType.unpacked]:[ot.TextureType.unpacked,ot.TextureType.packedLastDimension],cacheKey:ut.activationCacheKey}))(ht.length>2,it);return Object.assign(Object.assign({},rt),{get:()=>((lt,ut,pt,gt,mt)=>{const yt=pt[0].dims,bt=pt[1].dims,wt=[bt[0],Math.ceil(yt[1]*bt[2]*bt[3]/4)],xt=(0,dt.calculateIm2ColDims)(yt,bt,gt),[Tt,St]=lt.calculateTextureWidthAndHeight(wt,ot.TextureType.packedLastDimension),Pt=nt.ShapeUtil.computeStrides(xt),[vt,At]=lt.calculateTextureWidthAndHeight(xt,ot.TextureType.packedLastDimension),It=gt.length,jt=pt.length<3?"0.0":"_B(b)",Lt=Math.ceil(yt[1]*bt[2]*bt[3]/4),{activationFunction:Rt,applyActivation:$t}=(0,at.getActivationSnippet)(mt),Ot=(0,st.getGlsl)(lt.session.backend.glContext.version),Ft=`
${Rt}
float process(int indices[${It}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Pt[0]} + im2col[1] * ${Pt[1]} + im2col[2] * ${Pt[2]};
  int kernelOffset = indices[1] * ${wt[1]};
  float value = ${jt};
  for (int i = 0; i < ${Lt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${vt}, ${At});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Tt}, ${St});
    value += dot(${Ot.texture2D}(Im2Col, im2colCoords), ${Ot.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${$t}
  return value;
}`;return Object.assign(Object.assign({},ut),{output:{dims:gt,type:pt[0].type,textureType:ot.TextureType.unpacked},shaderSource:Ft})})(ft,rt,ht,ct,it)})}},7992:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseFlattenAttributes=_e.flatten=void 0;const nt=tt(2517);_e.flatten=(ot,at,dt)=>{st(at,dt);const ft=nt.ShapeUtil.flattenShape(at[0].dims,dt);return[ot.reshapeUnpacked(at[0],ft)]},_e.parseFlattenAttributes=ot=>ot.attributes.getInt("axis",1);const st=(ot,at)=>{if(!ot||ot.length!==1)throw new Error("Flatten requires 1 input.");const dt=ot[0].dims.length;if(dt===0)throw new Error("scalar tensor is not supported.");if(at<-dt||at>dt)throw new Error("Invalid axis");if(ot[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseInternalActivationAttributes=_e.getActivationSnippet=void 0;const nt=tt(2517),st=tt(4909);_e.getActivationSnippet=function(ot){let at;switch(ot.activation){case"Relu":at=(0,st.glslRelu)();break;case"Sigmoid":at=(0,st.glslSigmoid)();break;case"Clip":at=(0,st.glslClip)(ot.clipMin,ot.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const dt=at.name;return{activationFunction:at.body,applyActivation:`value = ${dt}_(value);`}},_e.parseInternalActivationAttributes=ot=>{const at=ot.getString("activation","");if(at==="Clip"){const[dt,ft]=ot.getFloats("activation_params",[nt.MIN_CLIP,nt.MAX_CLIP]);return{activation:at,clipMax:ft,clipMin:dt,activationCacheKey:`${at}:${dt},${ft}`}}return{activation:at,activationCacheKey:at}}},1253:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseGatherAttributes=_e.gather=void 0;const nt=tt(246),st=tt(782),ot=tt(2517),at=tt(2039);_e.gather=(ct,it,rt)=>(ht(it,rt.axis),[ct.run(ft(ct,it,rt),it)]),_e.parseGatherAttributes=ct=>(0,nt.createAttributeWithCacheKey)({axis:ct.attributes.getInt("axis",0)});const dt={name:"Gather",inputNames:["A","B"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked]},ft=(ct,it,rt)=>{const lt=Object.assign(Object.assign({},dt),{cacheHint:rt.cacheKey});return Object.assign(Object.assign({},lt),{get:()=>((ut,pt,gt,mt)=>{const yt=gt[0].dims.slice(),bt=gt[1].dims.slice(),wt=new Array(yt.length+bt.length-1);mt=ot.ShapeUtil.normalizeAxis(mt,yt.length);const xt=[];for(let St=0;St<wt.length;St++)St<mt?(wt[St]=yt[St],xt.push(`inputIdx[${St}] = outputIdx[${St}];`)):St<mt+bt.length?(wt[St]=bt[St-mt],xt.push(`indexDataIdx[${St-mt}] = outputIdx[${St}];`)):(wt[St]=yt[St-bt.length+1],xt.push(`inputIdx[${St-bt.length+1}] = outputIdx[${St}];`));const Tt=`
      float process(int outputIdx[${wt.length||1}]) {
        int inputIdx[${yt.length}];
        int indexDataIdx[${bt.length||1}];
        indexDataIdx[0] = 0;
        ${xt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${mt}] = idx < 0 ? idx + ${yt[mt]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},pt),{output:{dims:wt,type:gt[0].type,textureType:at.TextureType.unpacked},shaderSource:Tt})})(0,lt,it,rt.axis)})},ht=(ct,it)=>{if(!ct||ct.length!==2)throw new Error("Gather requires 2 inputs.");const rt=ct[0].dims.length;if(rt<1)throw new Error("Invalid input shape.");if(it<-rt||it>rt-1)throw new Error("Invalid axis.");if(st.NUMBER_TYPES.indexOf(ct[0].type)===-1)throw new Error("Invaid input type.");if(ct[1].type!=="int32"&&ct[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseGemmAttributesV11=_e.parseGemmAttributesV7=_e.gemm=void 0;const nt=tt(246),st=tt(2517),ot=tt(2039);_e.gemm=(ct,it,rt)=>(ht(it,rt),[ct.run(dt(it,rt),it)]);const at=(ct,it)=>{const rt=ct.attributes.getInt("transA",0)!==0,lt=ct.attributes.getInt("transB",0)!==0,ut=ct.attributes.getFloat("alpha",1),pt=ct.attributes.getFloat("beta",1);return(0,nt.createAttributeWithCacheKey)({transA:rt,transB:lt,alpha:ut,beta:pt,isOptionalC:it})};_e.parseGemmAttributesV7=ct=>at(ct,!1),_e.parseGemmAttributesV11=ct=>at(ct,!0);const dt=(ct,it)=>{const rt={name:"Gemm",inputNames:ct.length===3?["A","B","C"]:["A","B"],inputTypes:ct.length===3?[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]:[ot.TextureType.unpacked,ot.TextureType.unpacked],key:it.cacheKey};return Object.assign(Object.assign({},rt),{get:()=>ft(rt,ct,it)})},ft=(ct,it,rt)=>{const lt=it[0].dims.slice(),ut=it[1].dims.slice(),[pt,gt]=st.GemmUtil.getShapeOfGemmResult(lt,rt.transA,ut,rt.transB,it.length===3?it[2].dims:void 0),mt=[pt,gt];if(!mt)throw new Error("Can't use gemm on the given tensors");let yt=lt[lt.length-1],bt="";rt.transA&&(yt=lt[0]),rt.transA&&rt.transB?bt="value += _A_T(a) * _B_T(b);":rt.transA&&!rt.transB?bt="value += _A_T(a) * _B(b);":!rt.transA&&rt.transB?bt="value += _A(a) * _B_T(b);":rt.transA||rt.transB||(bt="value += _A(a) * _B(b);");const wt=mt.length,xt=`
      float process(int indices[${wt}]) {
          int a[${wt}];
          int b[${wt}];
          ${it.length===3?`int c[${it[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${it.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${yt}; ++k) {
              a[${wt-1}] = k;
              b[${wt-2}] = k;
              ${bt}
          }

          value = value * alpha;
          ${it.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},ct),{output:{dims:mt,type:it[0].type,textureType:ot.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:rt.alpha},{name:"beta",type:"float",data:rt.beta}],shaderSource:xt})},ht=(ct,it)=>{if(!ct)throw new Error("Input is missing");if(it.isOptionalC&&(ct.length<2||ct.length>3))throw new Error("Invaid input shape.");if(!it.isOptionalC&&ct.length!==3)throw new Error("Gemm requires 3 inputs");if(ct.length===3&&ct[2].dims.length!==1&&ct[2].dims.length!==2)throw new Error("Invalid input shape of C");if(ct[0].type!=="float32"&&ct[0].type!=="float64"||ct[1].type!=="float32"&&ct[1].type!=="float64"||ct.length===3&&ct[2].type!=="float32"&&ct[2].type!=="float64")throw new Error("Invalid input type.");if(ct[0].type!==ct[1].type||ct.length===3&&ct[0].type!==ct[2].type)throw new Error("Input types are mismatched")}},8555:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createPackedIm2ColProgramInfoLoader=void 0;const nt=tt(5060),st=tt(2039),ot=tt(2827);_e.createPackedIm2ColProgramInfoLoader=(at,dt,ft,ht,ct)=>{const it=(rt=ct.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[st.TextureType.packed],cacheHint:rt});var rt;return Object.assign(Object.assign({},it),{get:()=>((lt,ut,pt,gt,mt,yt)=>{const bt=pt.dims,wt=gt.dims,xt=mt.length,Tt=[wt[1]*wt[2]*wt[3],mt[2]*mt[3]],St=wt[2]*wt[3],Pt=(0,ot.unpackFromChannel)(),vt=(0,nt.getGlsl)(lt.session.backend.glContext.version);let At="";for(let jt=0;jt<=1;jt++)for(let Lt=0;Lt<=1;Lt++)At+=`
            blockIndex = rc.x + ${Lt};
            pos = rc.y + ${jt};

            if(blockIndex < ${Tt[1]} && pos < ${Tt[0]}) {
              offsetY = int(blockIndex / (${mt[xt-1]})) * ${yt.strides[0]} -
                ${yt.pads[0]};
              d0 = offsetY + ${yt.dilations[0]} * (imod(pos, ${St}) / ${wt[2]});

              if(d0 < ${bt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${mt[xt-1]}) * ${yt.strides[1]} -
                  ${yt.pads[1]};
                d1 = offsetX + ${yt.dilations[1]} * imod(imod(pos, ${St}), ${wt[2]});

                if(d1 < ${bt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${St}.);
                    innerDims = vec2(d0, d1);
                    result[${2*jt+Lt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const It=`
      ${Pt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${At}
          ${vt.output} = result;
      }
            `;return Object.assign(Object.assign({},ut),{output:{dims:Tt,type:pt.type,textureType:st.TextureType.packed},shaderSource:It,hasMain:!0})})(at,it,dt,ft,ht,ct)})}},3248:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.calculateIm2ColDims=_e.createIm2ColProgramInfoLoader=void 0;const nt=tt(2039);_e.createIm2ColProgramInfoLoader=(st,ot,at,dt,ft)=>{const ht=(ct=ft.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:ct});var ct;return Object.assign(Object.assign({},ht),{get:()=>((it,rt,lt,ut,pt,gt)=>{const mt=lt.dims,yt=ut.dims,bt=pt.length,wt=(0,_e.calculateIm2ColDims)(mt,yt,pt,4),xt=`
        const int XC = ${mt[1]};
        const int XH = ${mt[2]};
        const int XW = ${mt[3]};
        const int KH = ${gt.kernelShape[0]};
        const int KW = ${gt.kernelShape[1]};
        const int dilationH = ${gt.dilations[0]};
        const int dilationW = ${gt.dilations[1]};
        const int strideH = ${gt.strides[0]};
        const int strideW = ${gt.strides[1]};
        const int padH = ${gt.pads[0]};
        const int padW = ${gt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${bt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${mt.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},rt),{output:{dims:wt,type:lt.type,textureType:nt.TextureType.packedLastDimension},shaderSource:xt})})(0,ht,ot,at,dt,ft)})},_e.calculateIm2ColDims=(st,ot,at,dt=4)=>[at[0],at[2],at[3],Math.ceil(st[1]*ot[2]*ot[3]/dt)]},6572:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseImageScalerAttributes=_e.imageScaler=void 0;const nt=tt(246),st=tt(2039);_e.imageScaler=(ht,ct,it)=>(ft(ct),[ht.run(at(ht,ct,it),ct)]),_e.parseImageScalerAttributes=ht=>{const ct=ht.attributes.getFloat("scale"),it=ht.attributes.getFloats("bias");return(0,nt.createAttributeWithCacheKey)({scale:ct,bias:it})};const ot={name:"ImageScaler",inputNames:["X"],inputTypes:[st.TextureType.unpacked]},at=(ht,ct,it)=>{const rt=Object.assign(Object.assign({},ot),{cacheHint:it.cacheKey});return Object.assign(Object.assign({},rt),{get:()=>((lt,ut,pt,gt)=>{const mt=pt[0].dims.slice(),yt=mt.length,bt=`
      ${dt(gt.bias.length)}
      float process(int indices[${yt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},ut),{output:{dims:mt,type:pt[0].type,textureType:st.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:gt.bias.length,data:gt.bias},{name:"scale",type:"float",data:gt.scale}],shaderSource:bt})})(0,rt,ct,it)})},dt=ht=>{const ct=[`float getBias(float bias[${ht}], int channel) {`];for(let it=0;it<ht;++it)it===0?ct.push(`	if (channel == ${it}) { return bias[${it}]; }`):it===ht-1?ct.push(`	else { return bias[${it}]; }`):ct.push(`	else if (channel == ${it}) { return bias[${it}]; }`);return ct.push("	}"),ct.join(`
`)},ft=ht=>{if(!ht||ht.length!==1)throw new Error("ImageScaler requires 1 input.");if(ht[0].dims.length!==4)throw new Error("Invalid input shape.");if(ht[0].type!=="float32"&&ht[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseInstanceNormalizationAttributes=_e.instanceNormalization=void 0;const nt=tt(5060),st=tt(2039);_e.instanceNormalization=(ct,it,rt)=>{ht(it);const lt=ct.run(at(it[0]),it);return[ct.run(ft(ct,it[0],rt,lt.dims),[it[0],lt,it[1],it[2]])]},_e.parseInstanceNormalizationAttributes=ct=>ct.attributes.getFloat("epsilon",1e-5);const ot={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[st.TextureType.unpacked]},at=ct=>Object.assign(Object.assign({},ot),{get:()=>((it,rt)=>{const lt=rt.dims.slice(),ut=lt[1],pt=lt[2]*lt[3],gt=[lt[0],ut],mt=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${lt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${lt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${pt});
        temp = 0.0;
        for(int a2=0; a2<${lt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${lt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${pt});

        return v;
      }`;return Object.assign(Object.assign({},it),{output:{dims:gt,type:rt.type,textureType:st.TextureType.packedLastDimension},shaderSource:mt})})(ot,ct)}),dt={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[st.TextureType.unpacked,st.TextureType.packedLastDimension,st.TextureType.unpacked,st.TextureType.unpacked]},ft=(ct,it,rt,lt)=>{const ut=Object.assign(Object.assign({},dt),{cacheHint:`${rt}`});return Object.assign(Object.assign({},ut),{get:()=>((pt,gt,mt,yt,bt)=>{const wt=(0,nt.getGlsl)(pt.session.backend.glContext.version),[xt,Tt]=pt.calculateTextureWidthAndHeight(bt,st.TextureType.packedLastDimension),[St,Pt]=[xt/4,Tt],vt=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${St}, ${Pt});
        return ${wt.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},gt),{output:{dims:mt.dims,type:mt.type,textureType:st.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:yt}],shaderSource:vt})})(ct,ut,it,rt,lt)})},ht=ct=>{if(!ct||ct.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const it=ct[0],rt=ct[1],lt=ct[2];if(it.dims.length<3||rt.dims.length!==1||lt.dims.length!==1)throw new Error("Invalid input shape.");if(rt.dims[0]!==it.dims[1]||lt.dims[0]!==it.dims[1])throw new Error("Input shapes are mismatched.");if(it.type!=="float32"&&it.type!=="float64"||rt.type!=="float32"&&rt.type!=="float64"||lt.type!=="float32"&&lt.type!=="float64")throw new Error("Invalid input type.");if(ct[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createPackedMatmulProgramInfoLoader=void 0;const nt=tt(2517),st=tt(5060),ot=tt(2039),at=tt(9390),dt=tt(2823),ft=tt(5623);_e.createPackedMatmulProgramInfoLoader=(ht,ct,it)=>{const rt=(lt=ct.length>2,ut=it.activationCacheKey,{name:"MatMul (packed)",inputNames:lt?["A","B","Bias"]:["A","B"],inputTypes:lt?[ot.TextureType.packed,ot.TextureType.packed,ot.TextureType.packed]:[ot.TextureType.packed,ot.TextureType.packed],cacheHint:ut});var lt,ut;return Object.assign(Object.assign({},rt),{get:()=>((pt,gt,mt,yt)=>{const bt=mt.length>2,wt=bt?"value += getBiasForMatmul();":"",xt=mt[0].dims,Tt=mt[1].dims,St=nt.BroadcastUtil.calcShape(xt,Tt,!0),Pt=!nt.ShapeUtil.areEqual(mt[0].dims,mt[1].dims);if(!St)throw new Error("Can't use matmul on the given tensors");const vt=xt[xt.length-1],At=Math.ceil(vt/2),It=xt.length,jt=Tt.length,Lt=(0,st.getGlsl)(pt.session.backend.glContext.version),Rt=(0,at.getCoordsDataType)(St.length),$t=St.length,Ot=(0,at.getGlChannels)(),{activationFunction:Ft,applyActivation:Vt}=(0,dt.getActivationSnippet)(yt),zt=bt?`${(0,ft.getBiasForMatmul)(Rt,Ot,mt[2].dims,St,!0)}`:"",Xt=Pt?`${function(dn,on,hn,fn){let Cn=[],Dn=[];const Pn=hn[0].dims,In=hn[1].dims,$n=Pn.length,kn=In.length,En=fn.length,Bn=En-$n,zn=En-kn;Cn=Pn.map((On,Un)=>`coords.${on[Un+Bn]}`),Cn[$n-1]="i*2",Cn.join(", "),Dn=In.map((On,Un)=>`coords.${on[Un+zn]}`),Dn[kn-2]="i*2",Dn.join(", ");const Vn=nt.BroadcastUtil.getBroadcastDims(Pn,fn),Kn=nt.BroadcastUtil.getBroadcastDims(In,fn),Jn=Vn.map(On=>`coords.${on[On+Bn]} = 0;`).join(`
`),qn=Kn.map(On=>`coords.${on[On+zn]} = 0;`).join(`
`),Wn=`int lastDim = coords.${on[En-1]};
  coords.${on[En-1]} = coords.${on[En-2]};
  coords.${on[En-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${dn} coords = getOutputCoords();
  ${Wn}
  ${Jn}
  vec4 outputValue = getA(${Cn});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${dn} coords = getOutputCoords();
  ${Wn}
  ${qn}
  vec4 outputValue = getB(${Dn});
  return outputValue;
}`}(Rt,Ot,mt,St)}`:"",Jt=Pt?"getAAtOutCoordsMatmul(i)":`getA(${function(dn,on){let hn="";for(let fn=0;fn<on-2;fn++)hn+=`rc.${dn[fn]}, `;return hn+=`rc.${dn[on-2]}, i*2`,hn}(Ot,It)})`,nn=Pt?"getBAtOutCoordsMatmul(i)":`getB(${function(dn,on){let hn="";for(let fn=0;fn<on-2;fn++)hn+=`rc.${dn[fn]}, `;return hn+=`i*2, rc.${dn[on-1]}`,hn}(Ot,jt)})`,xn=`
            ${Xt}
            ${zt}
            ${Ft}
            void main() {
              ${Pt?"":`${Rt} rc =
          getOutputCoords(); int lastDim = rc.${Ot[$t-1]}; rc.${Ot[$t-1]} =
          rc.${Ot[$t-2]}; rc.${Ot[$t-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${At}; i++) {
                vec4 a = ${Jt};
                vec4 b = ${nn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${wt}
              ${Vt}
              ${Lt.output} = value;
            }`;return Object.assign(Object.assign({},gt),{output:{dims:St,type:mt[0].type,textureType:ot.TextureType.packed},shaderSource:xn,hasMain:!0})})(ht,rt,ct,it)})}},5623:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.getBiasForMatmul=_e.createMatmulProgramInfoLoader=_e.parseMatMulAttributes=_e.matMul=void 0;const nt=tt(2517),st=tt(2039),ot=tt(9390),at=tt(2823),dt=tt(708);function ft(it,rt){const lt=(ut=it.length>2,pt=rt.activationCacheKey,{name:"MatMul",inputNames:ut?["A","B","Bias"]:["A","B"],inputTypes:ut?[st.TextureType.unpacked,st.TextureType.unpacked,st.TextureType.unpacked]:[st.TextureType.unpacked,st.TextureType.unpacked],cacheHint:pt});var ut,pt;return Object.assign(Object.assign({},lt),{get:()=>function(gt,mt,yt){const bt=mt[0].dims,wt=mt[1].dims,xt=nt.BroadcastUtil.calcShape(bt,wt,!0);if(!xt)throw new Error("Can't use matmul on the given tensors");const Tt=(0,ot.getCoordsDataType)(xt.length),St=(0,ot.getGlChannels)(),{activationFunction:Pt,applyActivation:vt}=(0,at.getActivationSnippet)(yt),At=mt.length>2,It=At?"value += getBiasForMatmul();":"",jt=At?`${ct(Tt,St,mt[2].dims,xt,!1)}`:"",Lt=xt.length,Rt=bt.length,$t=wt.length,Ot=`
    ${Pt}
    ${jt}
    float process(int indices[${Lt}]) {
        int a[${Rt}];
        int b[${$t}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${bt[bt.length-1]}; ++k) {
            a[${Rt-1}] = k;
            b[${$t-2}] = k;
            value += _A(a) * _B(b);
        }
        ${It}
        ${vt}
        return value;
    }`;return Object.assign(Object.assign({},gt),{output:{dims:xt,type:mt[0].type,textureType:st.TextureType.unpacked},shaderSource:Ot})}(lt,it,rt)})}_e.matMul=(it,rt,lt)=>(ht(rt),it.session.pack?[it.run((0,dt.createPackedMatmulProgramInfoLoader)(it,rt,lt),rt)]:[it.run(ft(rt,lt),rt)]),_e.parseMatMulAttributes=it=>(0,at.parseInternalActivationAttributes)(it.attributes),_e.createMatmulProgramInfoLoader=ft;const ht=it=>{if(!it||it.length!==2)throw new Error("MatMul requires 2 inputs.");if(it[0].dims[it[0].dims.length-1]!==it[1].dims[it[1].dims.length-2])throw new Error("shared dimension does not match.");if(it[0].type!=="float32"&&it[0].type!=="float64"||it[1].type!=="float32"&&it[1].type!=="float64")throw new Error("inputs should be float type");if(it[0].type!==it[1].type)throw new Error("inputs types should match")};function ct(it,rt,lt,ut,pt){let gt="";const mt=lt.length,yt=ut.length,bt=yt-mt;gt=yt<2&&mt>0?"coords":lt.map((Tt,St)=>`coords.${rt[St+bt]}`).join(", ");const wt=nt.BroadcastUtil.getBroadcastDims(lt,ut).map(Tt=>`coords.${rt[Tt+bt]} = 0;`).join(`
`);let xt="vec4(outputValue.xx, outputValue.yy)";return nt.ShapeUtil.size(lt)===1&&(xt="vec4(outputValue.x)"),pt?`
vec4 getBiasForMatmul() {
  ${it} coords = getOutputCoords();
  ${wt}
  vec4 outputValue = getBias(${gt});
  return ${xt};
}`:`
float getBiasForMatmul() {
  ${it} coords = getOutputCoords();
  ${wt}
  return getBias(coords.x);
}`}_e.getBiasForMatmul=ct},2403:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createPackProgramInfoLoader=void 0;const nt=tt(5060),st=tt(2039),ot=tt(9390),at=tt(2827),dt={name:"pack",inputNames:["A"],inputTypes:[st.TextureType.unpackedReversed]};_e.createPackProgramInfoLoader=(ft,ht)=>Object.assign(Object.assign({},dt),{get:()=>((ct,it)=>{const rt=(0,nt.getGlsl)(ct.session.backend.glContext.version),lt=it.dims,ut=lt.length,pt=it.dims.length,gt=(0,ot.getCoordsDataType)(pt),mt=(0,at.getChannels)("rc",pt),yt=(bt=pt,wt=mt,xt=lt[lt.length-2],Tt=lt[lt.length-1],bt===0||bt===1?"":`
    int r = ${wt[bt-2]};
    int c = ${wt[bt-1]};
    int rp1 = ${wt[bt-2]} + 1;
    int cp1 = ${wt[bt-1]} + 1;
    bool rEdge = rp1 >= ${Tt};
    bool cEdge = cp1 >= ${xt};
    `);var bt,wt,xt,Tt;let St;St=ut===0?[1,1]:ut===1?[lt[0],1]:[lt[pt-1],lt[pt-2]];const Pt=function(It,jt,Lt){if(It===0)return"false";if(It===1)return`rc > ${jt[0]}`;let Rt="";for(let $t=It-2;$t<It;$t++)Rt+=`${Lt[$t]} >= ${jt[$t-It+2]}`,$t<It-1&&(Rt+="||");return Rt}(pt,St,mt),vt=function(It,jt){const Lt=It.length;if(Lt===0)return"getA(), 0, 0, 0";if(Lt===1)return`getA(rc),
            rc + 1 >= ${It[0]} ? 0. : getA(rc + 1),
            0, 0`;let Rt="";if(Lt>2)for(let $t=0;$t<Lt-2;++$t)Rt+=`${jt[$t]},`;return`getA(${Rt}r, c),
          rEdge ? 0. : getA(${Rt}rp1, c),
          cEdge ? 0. : getA(${Rt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Rt}rp1, cp1)`}(lt,mt),At=`
        void main() {
          ${gt} rc = getOutputCoords();

          if(${Pt}) {
            ${rt.output} = vec4(0);
          } else {
            ${yt}

            ${rt.output} = vec4(${vt});
          }
        }
      `;return Object.assign(Object.assign({},dt),{hasMain:!0,output:{dims:it.dims,type:it.type,textureType:st.TextureType.packed},shaderSource:At})})(ft,ht)})},2827:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.unpackFromChannel=_e.getChannels=_e.getVecChannels=void 0;const nt=tt(9390);function st(ot,at){return(0,nt.getGlChannels)(at).map(dt=>`${ot}.${dt}`)}_e.getVecChannels=st,_e.getChannels=function(ot,at){return at===1?[ot]:st(ot,at)},_e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parsePadAttributesV11=_e.padV11=_e.parsePadAttributesV2=_e.padV2=void 0;const nt=tt(246),st=tt(2517),ot=tt(5060),at=tt(2039),dt={name:"Pad",inputNames:["A"],inputTypes:[at.TextureType.unpacked]};_e.padV2=(gt,mt,yt)=>(ct(mt),[gt.run(Object.assign(Object.assign({},dt),{cacheHint:yt.cacheKey,get:()=>ht(gt,mt[0],yt)}),mt)]),_e.parsePadAttributesV2=gt=>{const mt=gt.attributes.getString("mode","constant"),yt=gt.attributes.getFloat("value",0),bt=gt.attributes.getInts("pads");return(0,nt.createAttributeWithCacheKey)({mode:mt,value:yt,pads:bt})},_e.padV11=(gt,mt,yt)=>{it(mt);const bt=ft(gt,mt,yt);return(0,_e.padV2)(gt,[mt[0]],bt)},_e.parsePadAttributesV11=gt=>gt.attributes.getString("mode","constant");const ft=(gt,mt,yt)=>{if(!gt.session.isInitializer(mt[1].dataId)||mt.length>=3&&!gt.session.isInitializer(mt[2].dataId))throw new Error("dynamic pad attributes are not allowed");const bt=Array.from(mt[1].integerData),wt=mt.length>=3?mt[2].floatData[0]:0;return(0,nt.createAttributeWithCacheKey)({mode:yt,pads:bt,value:wt})},ht=(gt,mt,yt)=>{const bt=st.ShapeUtil.padShape(mt.dims.slice(),yt.pads),wt=bt.length,xt=`
      ${rt(gt,mt,yt)}
      float process(int[${wt}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[at.TextureType.unpacked],output:{dims:bt,type:mt.type,textureType:at.TextureType.unpacked},shaderSource:xt}},ct=gt=>{if(!gt||gt.length!==1)throw new Error("Pad requires 1 input");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type.")},it=gt=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(gt[1].type!=="int32")throw new Error("Invalid input type.");if(gt.length>=3&&gt[2].type==="string")throw new Error("Invalid input type.")},rt=(gt,mt,yt)=>{const bt=(0,ot.getGlsl)(gt.session.backend.glContext.version),[wt,xt]=gt.calculateTextureWidthAndHeight(mt.dims,at.TextureType.unpacked),Tt=st.ShapeUtil.computeStrides(mt.dims);switch(yt.mode){case"constant":return lt(bt,mt.dims,Tt,wt,xt,yt.pads,yt.value);case"reflect":return ut(bt,mt.dims,Tt,wt,xt,yt.pads);case"edge":return pt(bt,mt.dims,Tt,wt,xt,yt.pads);default:throw new Error("Invalid mode")}},lt=(gt,mt,yt,bt,wt,xt,Tt)=>{const St=mt.length;let Pt="";for(let vt=St-1;vt>=0;--vt)Pt+=`
        k = m[${vt}] - ${xt[vt]};
        if (k < 0)  return constant;
        if (k >= ${mt[vt]}) return constant;
        offset += k * ${yt[vt]};
        `;return`
      float padA(int m[${St}]) {
        const float constant = float(${Tt});
        int offset = 0;
        int k = 0;
        ${Pt}
        vec2 coords = offsetToCoords(offset, ${bt}, ${wt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},ut=(gt,mt,yt,bt,wt,xt)=>{const Tt=mt.length;let St="";for(let Pt=Tt-1;Pt>=0;--Pt)St+=`
        k = m[${Pt}] - ${xt[Pt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(mt[Pt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${mt[Pt]}) { k = _2n_1 - k; }
        }
        offset += k * ${yt[Pt]};
        `;return`
      float padA(int m[${Tt}]) {
        int offset = 0;
        int k = 0;
        ${St}
        vec2 coords = offsetToCoords(offset, ${bt}, ${wt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},pt=(gt,mt,yt,bt,wt,xt)=>{const Tt=mt.length;let St="";for(let Pt=Tt-1;Pt>=0;--Pt)St+=`
        k = m[${Pt}] - ${xt[Pt]};
        if (k < 0)  k = 0;
        if (k >= ${mt[Pt]}) k = ${mt[Pt]-1};
        offset += k * ${yt[Pt]};
      `;return`
      float padA(int m[${Tt}]) {
        int offset = 0;
        int k = 0;
        ${St}
        vec2 coords = offsetToCoords(offset, ${bt}, ${wt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.globalMaxPool=_e.parseMaxPoolAttributes=_e.maxPool=_e.parseGlobalAveragePoolAttributes=_e.globalAveragePool=_e.parseAveragePoolAttributes=_e.averagePool=void 0;const nt=tt(246),st=tt(2517),ot=tt(2039);_e.averagePool=(pt,gt,mt)=>{it(gt);const yt={name:"AveragePool",inputNames:["X"],inputTypes:[ot.TextureType.unpacked],cacheHint:mt.cacheKey};return[pt.run(Object.assign(Object.assign({},yt),{get:()=>at(gt,yt,!1,mt)}),gt)]},_e.parseAveragePoolAttributes=pt=>{const gt=pt.attributes.getString("auto_pad","NOTSET"),mt=pt.attributes.getInt("ceil_mode",0),yt=pt.attributes.getInt("count_include_pad",0)!==0,bt=pt.attributes.getInts("kernel_shape"),wt=pt.attributes.getInts("strides",[]),xt=pt.attributes.getInts("pads",[]);if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,nt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:yt,kernelShape:bt,strides:wt,pads:xt})};const at=(pt,gt,mt,yt)=>{const[bt,wt]=ft(pt,yt,mt),xt=st.ShapeUtil.size(bt.kernelShape);let Tt="";bt.countIncludePad?Tt+=`value /= float(${xt});`:Tt+=`value /= float(${xt} - pad);`;const St=`
        ${rt(pt[0].dims,bt,"value += _X(x);",Tt,"0.0")}
      `;return Object.assign(Object.assign({},gt),{output:{dims:wt,type:pt[0].type,textureType:ot.TextureType.unpacked},shaderSource:St})};_e.globalAveragePool=(pt,gt,mt)=>{it(gt);const yt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[ot.TextureType.unpacked],cacheHint:`${mt.countIncludePad}`};return[pt.run(Object.assign(Object.assign({},yt),{get:()=>at(gt,yt,!0,mt)}),gt)]},_e.parseGlobalAveragePoolAttributes=pt=>{const gt=pt.attributes.getInt("count_include_pad",0)!==0;return(0,nt.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:gt,kernelShape:[],strides:[],pads:[]})},_e.maxPool=(pt,gt,mt)=>{it(gt);const yt={name:"MaxPool",inputNames:["X"],inputTypes:[ot.TextureType.unpacked],cacheHint:mt.cacheKey};return[pt.run(Object.assign(Object.assign({},yt),{get:()=>dt(gt,yt,!1,mt)}),gt)]},_e.parseMaxPoolAttributes=pt=>{const gt=pt.attributes.getString("auto_pad","NOTSET"),mt=pt.attributes.getInt("ceil_mode",0),yt=pt.attributes.getInts("kernel_shape"),bt=pt.attributes.getInts("strides",[]),wt=pt.attributes.getInts("pads",[]),xt=pt.attributes.getInt("storage_order",0),Tt=pt.attributes.getInts("dilations",[]);if(xt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,nt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:!1,kernelShape:yt,strides:bt,pads:wt,storageOrder:xt,dilations:Tt})};const dt=(pt,gt,mt,yt)=>{const[bt,wt]=ft(pt,yt,mt),xt=`
      ${rt(pt[0].dims,bt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},gt),{output:{dims:wt,type:pt[0].type,textureType:ot.TextureType.unpacked},shaderSource:xt})},ft=(pt,gt,mt)=>{const yt=pt[0].dims.slice(),bt=Object.hasOwnProperty.call(gt,"dilations"),wt=gt.kernelShape.slice(),xt=gt.strides.slice(),Tt=bt?gt.dilations.slice():[],St=gt.pads.slice();st.PoolConvUtil.adjustPoolAttributes(mt,yt,wt,xt,Tt,St);const Pt=st.PoolConvUtil.computePoolOutputShape(mt,yt,xt,Tt,wt,St,gt.autoPad),vt=Object.assign({},gt);return bt?Object.assign(vt,{kernelShape:wt,strides:xt,pads:St,dilations:Tt,cacheKey:gt.cacheKey}):Object.assign(vt,{kernelShape:wt,strides:xt,pads:St,cacheKey:gt.cacheKey}),[vt,Pt]},ht={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},ct={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[ot.TextureType.unpacked]};_e.globalMaxPool=(pt,gt)=>(it(gt),[pt.run(Object.assign(Object.assign({},ct),{get:()=>dt(gt,ct,!0,ht)}),gt)]);const it=pt=>{if(!pt||pt.length!==1)throw new Error("Pool ops requires 1 input.");if(pt[0].type!=="float32"&&pt[0].type!=="float64")throw new Error("Invalid input type.")},rt=(pt,gt,mt,yt,bt)=>{const wt=pt.length;if(gt.kernelShape.length<=2){const xt=gt.kernelShape[gt.kernelShape.length-1],Tt=gt.strides[gt.strides.length-1],St=gt.pads[gt.pads.length/2-1],Pt=gt.pads[gt.pads.length-1],vt=pt[wt-1];let At="",It="",jt="";if(At=St+Pt!==0?`
          for (int i = 0; i < ${xt}; i++) {
            x[${wt} - 1] = indices[${wt} - 1] * ${Tt} - ${St} + i;
            if (x[${wt} - 1] < 0 || x[${wt} - 1] >= ${vt}) {
              pad++;
              continue;
            }
            ${mt}
          }`:`
          for (int i = 0; i < ${xt}; i++) {
            x[${wt} - 1] = indices[${wt} - 1] * ${Tt} - ${St} + i;
            ${mt}
          }`,gt.kernelShape.length===2){const Lt=gt.kernelShape[gt.kernelShape.length-2],Rt=gt.strides[gt.strides.length-2],$t=gt.pads[gt.pads.length/2-2],Ot=gt.pads[gt.pads.length-2],Ft=pt[wt-2];It=$t+Ot!==0?`
            for (int j = 0; j < ${Lt}; j++) {
              x[${wt} - 2] = indices[${wt} - 2] * ${Rt} - ${$t} + j;
              if (x[${wt} - 2] < 0 || x[${wt} - 2] >= ${Ft}) {
                pad+= ${xt};
                continue;
              }
          `:`
            for (int j = 0; j < ${Lt}; j++) {
              x[${wt} - 2] = indices[${wt} - 2] * ${Rt} - ${$t} + j;
            `,jt=`
          }
        `}return`
        float process(int indices[${wt}]) {
          int x[${wt}];
          copyVec(indices, x);

          float value = ${bt};
          int pad = 0;
          ${It}
          ${At}
          ${jt}
          ${yt}
          return value;
        }
      `}{const xt=st.ShapeUtil.size(gt.kernelShape),Tt=st.ShapeUtil.computeStrides(gt.kernelShape),St=Tt.length,Pt=gt.pads.length,vt=ut(St),At=lt(pt,"inputDims"),It=lt(gt.pads,"pads"),jt=lt(Tt,"kernelStrides"),Lt=lt(gt.strides,"strides");let Rt="";return Rt=gt.pads.reduce(($t,Ot)=>$t+Ot)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${mt}
          }`:`
          }
          ${mt}
        `,`
        ${vt}
        float process(int indices[${wt}]) {
          int x[${wt}];
          copyVec(indices, x);
          int offset[${St}];
          int pads[${Pt}];
          int inputDims[${wt}];
          int kernelStrides[${St}];
          int strides[${St}];
          ${It}
          ${At}
          ${Lt}
          ${jt}

          float value = ${bt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${xt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${wt} - ${St}; j < ${wt}; j++) {
              x[j] = indices[j] * strides[j - ${wt} + ${St}]
                + offset[j - ${wt} + ${St}] - pads[j - 2];
              ${Rt}
          }
          ${yt}

          return value;
        }
      `}},lt=(pt,gt)=>{let mt="";for(let yt=0;yt<pt.length;yt++)mt+=`
      ${gt}[${yt}] = ${pt[yt]};
    `;return mt},ut=pt=>`
  void offsetToIndices(int offset, int[${pt}] strides, out int[${pt}] indices) {
    if (${pt} == 0) {
      return;
    }
    for (int i = 0; i < ${pt} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${pt} - 1] = offset;
  }`},4939:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.reduceLogSumSquare=_e.reduceLogSum=_e.reduceProd=_e.reduceMin=_e.reduceMax=_e.reduceMean=_e.reduceSum=_e.parseReduceAttributes=void 0;const nt=tt(246),st=tt(782),ot=tt(2517),at=tt(2039),dt=(ct,it,rt,lt,ut)=>{ht(it);const pt={name:lt,inputNames:["A"],inputTypes:[at.TextureType.unpacked]};return[ct.run(Object.assign(Object.assign({},pt),{cacheHint:rt.cacheKey,get:()=>ft(ct,it,rt,lt,ut,pt)}),it)]};_e.parseReduceAttributes=ct=>{const it=ct.attributes.getInts("axes",[]),rt=ct.attributes.getInt("keepdims",1)===1;return(0,nt.createAttributeWithCacheKey)({axes:it,keepDims:rt})};const ft=(ct,it,rt,lt,ut,pt)=>{const gt=[],mt=it[0].dims.length||1,yt=[],bt=ot.ShapeUtil.normalizeAxes(rt.axes,it[0].dims.length),wt=ut(it,bt);let xt=wt[1];for(let St=0;St<it[0].dims.length;St++)bt.indexOf(St)>=0||bt.length===0?(rt.keepDims&&gt.push(1),xt=`
          for(int j${St} = 0; j${St} < ${it[0].dims[St]}; j${St}++) {
            inputIdx[${St}] = j${St};
            ${xt}
          }`):(yt.push(`inputIdx[${St}] = outputIdx[${gt.length}];`),gt.push(it[0].dims[St]));const Tt=`
      float process(int outputIdx[${gt.length||1}]) {
        float value;                 // final result
        int inputIdx[${mt}];      // addressing input data
        ${yt.join(`
`)}
        ${wt[0]}       // init ops for reduce max/min
        ${xt}
        ${wt[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},pt),{output:{dims:gt,type:it[0].type,textureType:at.TextureType.unpacked},shaderSource:Tt})},ht=ct=>{if(!ct||ct.length!==1)throw new Error("Reduce op requires 1 input.");if(st.NUMBER_TYPES.indexOf(ct[0].type)===-1)throw new Error("Invalid input type.")};_e.reduceSum=(ct,it,rt)=>dt(ct,it,rt,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_e.reduceMean=(ct,it,rt)=>dt(ct,it,rt,"ReduceMean",(lt,ut)=>{let pt=1;for(let gt=0;gt<lt[0].dims.length;gt++)(ut.indexOf(gt)>=0||ut.length===0)&&(pt*=lt[0].dims[gt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${pt}.;`]}),_e.reduceMax=(ct,it,rt)=>dt(ct,it,rt,"ReduceMax",(lt,ut)=>{const pt=[];for(let gt=0;gt<lt[0].dims.length;gt++)(ut.indexOf(gt)>=0||ut.length===0)&&pt.push(`inputIdx[${gt}] = 0;`);return[`${pt.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_e.reduceMin=(ct,it,rt)=>dt(ct,it,rt,"ReduceMin",(lt,ut)=>{const pt=[];for(let gt=0;gt<lt[0].dims.length;gt++)(ut.indexOf(gt)>=0||ut.length===0)&&pt.push(`inputIdx[${gt}] = 0;`);return[`${pt.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_e.reduceProd=(ct,it,rt)=>dt(ct,it,rt,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_e.reduceLogSum=(ct,it,rt)=>dt(ct,it,rt,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_e.reduceLogSumSquare=(ct,it,rt)=>dt(ct,it,rt,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.isReshapeCheap=_e.processDims3D=_e.createPackedReshape3DProgramInfoLoader=void 0;const nt=tt(2517),st=tt(5060),ot=tt(2039),at=tt(2827);_e.createPackedReshape3DProgramInfoLoader=(dt,ft,ht)=>{const ct=(it=>({name:"Reshape (packed)",inputTypes:[ot.TextureType.packed],inputNames:["A"],cacheHint:`${it}`}))(ht);return Object.assign(Object.assign({},ct),{get:()=>((it,rt,lt,ut)=>{const pt=rt.dims,gt=ut;let mt="";for(let wt=0;wt<4;wt++){let xt="";switch(wt){case 0:xt="outputCoords = rc;";break;case 1:xt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:xt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:xt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}mt+=`
        ${xt}
        ${wt>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${wt}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${wt>0?"}":""}
      `}const yt=(0,st.getGlsl)(it.session.backend.glContext.version),bt=`
      ${function(wt){const xt=nt.ShapeUtil.computeStrides(wt),Tt=["b","r","c"],St="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${xt.map((Pt,vt)=>`int ${Tt[vt]} = ${St} / ${Pt}; ${vt===xt.length-1?`int ${Tt[vt+1]} = ${St} - ${Tt[vt]} * ${Pt}`:`index -= ${Tt[vt]} * ${Pt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(pt)}
      ${function(wt){const xt=nt.ShapeUtil.computeStrides(wt);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${xt[0]} + coords.z * ${xt[1]} + coords.y;
  }
`}(gt)}
      ${(0,at.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${gt[2]};
        int cols = ${gt[1]};

        ${mt}
        ${yt.output} = result;
      }
    `;return Object.assign(Object.assign({},lt),{output:{dims:gt,type:rt.type,textureType:ot.TextureType.packed},shaderSource:bt,hasMain:!0})})(dt,ft,ct,ht)})},_e.processDims3D=function(dt){if(dt.length===0)return[1,1,1];let ft=1;for(let ht=0;ht<dt.length-2;++ht)ft*=dt[ht];return[ft,dt.length>1?dt[dt.length-2]:1,dt[dt.length-1]]},_e.isReshapeCheap=function(dt,ft){let ht=!1;return ht=dt.length===0||ft.length===0||(dt.length<2||ft.length<2?dt[dt.length-1]===ft[ft.length-1]:dt[dt.length-1]===ft[ft.length-1]&&dt[dt.length-2]===ft[ft.length-2]),ht}},718:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.reshape=void 0;const nt=tt(2517);_e.reshape=(st,ot)=>{const at=nt.ShapeUtil.calculateReshapedDims(ot[0].dims,ot[1].integerData);return st.session.pack?[st.reshapePacked(ot[0],at)]:[st.reshapeUnpacked(ot[0],at)]}},2268:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseResizeAttributesV11=_e.parseResizeAttributesV10=_e.resize=void 0;const nt=tt(5060),st=tt(2039),ot=tt(9390),at=tt(2827),dt=tt(9793),ft={name:"Resize",inputNames:["A"],inputTypes:[st.TextureType.packed]};_e.resize=(lt,ut,pt)=>((0,dt.validateInputs)(ut,pt),[lt.run(Object.assign(Object.assign({},ft),{cacheHint:pt.cacheKey,get:()=>ht(lt,ut,pt)}),ut)]),_e.parseResizeAttributesV10=lt=>(0,dt.parseUpsampleAttributes)(lt,10),_e.parseResizeAttributesV11=lt=>(0,dt.parseUpsampleAttributes)(lt,11);const ht=(lt,ut,pt)=>{const gt=(0,nt.getGlsl)(lt.session.backend.glContext.version),[mt,yt]=ct(ut,pt);if(mt.every(Rt=>Rt===1)&&pt.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},ft),{output:{dims:yt,type:ut[0].type,textureType:st.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${gt.texture2D}(X, TexCoords);
                    ${gt.output} = v;
                }`});const bt=yt.length;if(bt<2)throw new Error(`output dimension should be at least 2, but got ${bt}`);const wt=yt[bt-2],xt=yt[bt-1],Tt=ut[0].dims;if(bt!==Tt.length)throw new Error(`output dimension should match input ${Tt.length}, but got ${bt}`);const St=Tt[bt-2],Pt=Tt[bt-1],vt=mt[bt-2],At=mt[bt-1];let It="";if(pt.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${pt.mode}'`);switch(pt.coordinateTransformMode){case"asymmetric":It=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":It=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":It=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${xt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${wt}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${xt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${wt}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":It=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${xt}.0 - 1.0, ${wt}.0 - 1.0, ${xt}.0 - 1.0,
                            ${wt}.0 - 1.0);
                        vec4 original = vec4(${Pt}.0 - 1.0, ${St}.0 - 1.0, ${Pt}.0 - 1.0,
                            ${St}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${pt.coordinateTransformMode}'`)}const jt=(0,ot.getCoordsDataType)(bt),Lt=`
            const vec2 inputWH = vec2(${St}.0, ${Pt}.0);
            const vec4 scaleWHWH = vec4(float(${vt}), float(${At}), float(${vt}), float(${At}));
            ${(0,at.unpackFromChannel)()}
            ${It}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${jt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${wt-1};
                bool hasNextCol = rc.z < ${xt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${gt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},ft),{output:{dims:yt,type:ut[0].type,textureType:st.TextureType.packed},hasMain:!0,shaderSource:Lt})},ct=(lt,ut)=>{const pt=lt[0].dims;let gt,mt=ut.scales;if(mt.length===0){const bt=lt[ut.scalesInputIdx];if(bt&&bt.size!==0){if(lt[ut.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");mt=it(bt,ut.mode,ut.isResize)}else{const wt=lt[ut.sizesInputIdx];if(!wt||wt.size===0)throw new Error("Either scales or sizes MUST be provided as input.");gt=Array.from(wt.integerData),mt=rt(gt,pt,ut.mode,ut.isResize)}}else if(lt[ut.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const yt=gt||pt.map((bt,wt)=>Math.floor(bt*mt[wt]));return[mt,yt]},it=(lt,ut,pt)=>{const gt=Array.from(lt.floatData);return(0,dt.scalesValidation)(gt,ut,pt),gt},rt=(lt,ut,pt,gt)=>{const mt=ut.length,yt=new Array(mt);for(let bt=0,wt=mt;bt<wt;bt++)if(ut[bt]===0){if(lt[bt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");yt[bt]=1}else yt[bt]=lt[bt]/ut[bt];return(0,dt.scalesValidation)(yt,pt,gt),yt}},8117:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.shape=void 0;const nt=tt(9162);_e.shape=(ot,at)=>(st(at),[new nt.Tensor([at[0].dims.length],"int32",void 0,void 0,new Int32Array(at[0].dims))]);const st=ot=>{if(!ot||ot.length!==1)throw new Error("Shape requires 1 input.")}},2278:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.sliceV10=_e.parseSliceAttributes=_e.slice=void 0;const nt=tt(246),st=tt(782),ot=tt(2517),at=tt(2039),dt={name:"Slice",inputNames:["A"],inputTypes:[at.TextureType.unpacked]};_e.slice=(rt,lt,ut)=>(ht(lt),[rt.run(Object.assign(Object.assign({},dt),{cacheHint:ut.cacheKey,get:()=>ft(rt,lt[0],ut)}),lt)]),_e.parseSliceAttributes=rt=>{const lt=rt.attributes.getInts("starts"),ut=rt.attributes.getInts("ends"),pt=rt.attributes.getInts("axes",[]);return(0,nt.createAttributeWithCacheKey)({starts:lt,ends:ut,axes:pt})};const ft=(rt,lt,ut)=>{const pt=ut.axes.length===0?lt.dims.slice(0).map((Tt,St)=>St):ut.axes,gt=ot.ShapeUtil.normalizeAxes(pt,lt.dims.length),mt=ut.starts.map((Tt,St)=>Tt>lt.dims[gt[St]]-1?lt.dims[gt[St]]:ot.ShapeUtil.normalizeAxis(Tt,lt.dims[gt[St]])),yt=ut.ends.map((Tt,St)=>Tt>lt.dims[gt[St]]-1?lt.dims[gt[St]]:ot.ShapeUtil.normalizeAxis(Tt,lt.dims[gt[St]])),bt=lt.dims.slice(),wt=[];for(let Tt=0;Tt<gt.length;Tt++)bt[gt[Tt]]=yt[Tt]-mt[Tt],mt[Tt]>0&&wt.push(`outputIdx[${gt[Tt]}] += ${mt[Tt]};`);const xt=`
      float process(int outputIdx[${bt.length}]) {
        ${wt.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},dt),{output:{dims:bt,type:lt.type,textureType:at.TextureType.unpacked},shaderSource:xt})},ht=rt=>{if(!rt||rt.length!==1)throw new Error("Slice requires 1 input.");if(st.NUMBER_TYPES.indexOf(rt[0].type)===-1)throw new Error("Invalid input type.")};_e.sliceV10=(rt,lt)=>{it(lt);const ut=ct(rt,lt);return[rt.run(Object.assign(Object.assign({},dt),{cacheHint:ut.cacheKey,get:()=>ft(rt,lt[0],ut)}),[lt[0]])]};const ct=(rt,lt)=>{if(!rt.session.isInitializer(lt[1].dataId)||!rt.session.isInitializer(lt[2].dataId)||lt.length>=4&&!rt.session.isInitializer(lt[3].dataId)||lt.length>=5&&!rt.session.isInitializer(lt[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(lt.length>=5&&lt[4].integerData.some(mt=>mt!==1))throw new Error("currently non-1 steps is not supported for Slice");const ut=Array.from(lt[1].integerData),pt=Array.from(lt[2].integerData),gt=lt.length>=4?Array.from(lt[3].integerData):[];return{starts:ut,ends:pt,axes:gt,cacheKey:`${gt};${ut};${pt}`}},it=rt=>{if(!rt||rt.length<3||rt.length>5)throw new Error("Invalid input number.");if(rt[1].type!=="int32"||rt[1].dims.length!==1)throw new Error("Invalid input type.");if(rt[2].type!=="int32"||rt[2].dims.length!==1)throw new Error("Invalid input type.");if(rt.length>=4&&(rt[3].type!=="int32"||rt[3].dims.length!==1))throw new Error("Invalid input type.");if(rt.length>=5&&(rt[4].type!=="int32"||rt[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.softmaxV13=_e.parseSoftmaxAttributesV13=_e.parseSoftmaxAttributes=_e.softmax=void 0;const nt=tt(246),st=tt(2517),ot=tt(5060),at=tt(2039),dt=tt(3738),ft={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[at.TextureType.unpacked]},ht={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked]},ct={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked,at.TextureType.unpacked]};_e.softmax=(gt,mt,yt)=>{pt(mt);const bt=mt[0].dims.slice(),wt=st.ShapeUtil.normalizeAxis(yt.axis,bt.length),xt=st.ShapeUtil.sizeToDimension(bt,wt),Tt=st.ShapeUtil.sizeFromDimension(bt,wt);return it(gt,mt,yt,xt,Tt)},_e.parseSoftmaxAttributes=gt=>(0,nt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",1)}),_e.parseSoftmaxAttributesV13=gt=>(0,nt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",-1)}),_e.softmaxV13=(gt,mt,yt)=>{pt(mt);const bt=mt[0].dims.slice(),wt=st.ShapeUtil.normalizeAxis(yt.axis,bt.length),xt=bt.length,Tt=wt!==xt-1,St=[];let Pt,vt=[],At=[];Tt&&(vt=Array.from({length:xt}).map((Rt,$t)=>$t),vt[wt]=xt-1,vt[xt-1]=wt,vt.map(Rt=>St.push(bt[Rt])),Pt=(0,nt.createAttributeWithCacheKey)({perm:vt}),At=(0,dt.transpose)(gt,mt,Pt));const It=Tt?st.ShapeUtil.sizeToDimension(St,xt-1):st.ShapeUtil.sizeToDimension(bt,xt-1),jt=Tt?st.ShapeUtil.sizeFromDimension(St,xt-1):st.ShapeUtil.sizeFromDimension(bt,xt-1),Lt=it(gt,Tt?At:mt,yt,It,jt);return Tt?(0,dt.transpose)(gt,Lt,Pt):Lt};const it=(gt,mt,yt,bt,wt)=>{const xt=rt(gt,mt[0],bt,wt,[bt]),Tt=gt.run(Object.assign(Object.assign({},ft),{cacheHint:yt.cacheKey,get:()=>xt}),mt),St=lt(gt,mt[0],bt,wt,xt.output.dims,[bt]),Pt=gt.run(Object.assign(Object.assign({},ht),{cacheHint:yt.cacheKey,get:()=>St}),[mt[0],Tt]),vt=ut(gt,mt[0],bt,wt,xt.output.dims,St.output.dims);return[gt.run(Object.assign(Object.assign({},ct),{cacheHint:yt.cacheKey,get:()=>vt}),[mt[0],Tt,Pt])]},rt=(gt,mt,yt,bt,wt)=>{const[xt,Tt]=gt.calculateTextureWidthAndHeight(mt.dims,at.TextureType.unpacked),St=wt.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(wt.length!==1)throw new Error("Dimensionality of the output should be 1");if(wt[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");const Pt=(0,ot.getGlsl)(gt.session.backend.glContext.version),vt=`
      float process(int[${St}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float max = getColorAsFloat(${Pt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${xt},
        ${Tt} )));
        for(int i=1; i<${bt}; ++i)
        {
          float current = getColorAsFloat(${Pt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${xt}, ${Tt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},ft),{output:{dims:wt,type:mt.type,textureType:at.TextureType.unpacked},shaderSource:vt})},lt=(gt,mt,yt,bt,wt,xt)=>{const[Tt,St]=gt.calculateTextureWidthAndHeight(mt.dims,at.TextureType.unpacked),Pt=xt.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(xt.length!==1)throw new Error("Dimensionality of the output should be 1");if(xt[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");if(wt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(wt[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const vt=`
      float process(int[${Pt}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${bt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,ot.getGlsl)(gt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Tt}, ${St}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},ht),{output:{dims:xt,type:mt.type,textureType:at.TextureType.unpacked},shaderSource:vt})},ut=(gt,mt,yt,bt,wt,xt)=>{const[Tt,St]=gt.calculateTextureWidthAndHeight(mt.dims,at.TextureType.unpacked),Pt=mt.dims.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(wt.length!==1||xt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(wt[0]!==yt||xt[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const vt=`
      float process(int[${Pt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Tt}, ${St});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${bt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},ct),{output:{dims:mt.dims,type:mt.type,textureType:at.TextureType.unpacked},shaderSource:vt})},pt=gt=>{if(!gt||gt.length!==1)throw new Error("Softmax requires 1 input.");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseSplitAttributes=_e.split=void 0;const nt=tt(246),st=tt(2517),ot=tt(2039),at={name:"Split",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};_e.split=(ct,it,rt)=>{ht(it);const lt=st.ShapeUtil.normalizeAxis(rt.axis,it[0].dims.length),ut=dt(ct,it,lt,rt),pt=[];for(let gt=0;gt<ut;++gt)pt.push(ct.run(Object.assign(Object.assign({},at),{cacheHint:`${rt.cacheKey};${gt}`,get:()=>ft(ct,it[0],rt,lt,gt)}),it));return pt},_e.parseSplitAttributes=ct=>{const it=ct.attributes.getInt("axis",0),rt=ct.attributes.getInts("split",[]),lt=ct.outputs.length;return(0,nt.createAttributeWithCacheKey)({axis:it,split:rt,numOutputs:lt})};const dt=(ct,it,rt,lt)=>{const[,ut]=st.SplitUtil.splitShape(it[0].dims,rt,lt.split,lt.numOutputs);return ut.length},ft=(ct,it,rt,lt,ut)=>{const[pt,gt]=st.SplitUtil.splitShape(it.dims,lt,rt.split,rt.numOutputs),mt=gt[ut],yt=pt[ut],bt=`
      float process(int indices[${yt.length}]) {
        indices[${lt}] += ${mt};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},at),{cacheHint:`${rt.cacheKey}:${ut}`,output:{dims:yt,type:it.type,textureType:ot.TextureType.unpacked},shaderSource:bt})},ht=ct=>{if(!ct||ct.length!==1)throw new Error("Split requires one input.");if(ct[0].type!=="int8"&&ct[0].type!=="uint8"&&ct[0].type!=="int16"&&ct[0].type!=="uint16"&&ct[0].type!=="int32"&&ct[0].type!=="uint32"&&ct[0].type!=="float32"&&ct[0].type!=="float64"&&ct[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseSqueezeAttributes=_e.squeezeV13=_e.squeeze=void 0;const nt=tt(2517);_e.squeeze=(at,dt,ft)=>{st(dt);const ht=nt.ShapeUtil.squeezeShape(dt[0].dims,ft);return[at.reshapeUnpacked(dt[0],ht)]},_e.squeezeV13=(at,dt)=>(ot(dt),(0,_e.squeeze)(at,[dt[0]],Array.from(dt[1].integerData))),_e.parseSqueezeAttributes=at=>at.attributes.getInts("axes");const st=at=>{if(!at||at.length!==1)throw new Error("Squeeze requires 1 input.");if(at[0].type==="string")throw new Error("invalid input tensor types.")},ot=at=>{if(!at||at.length!==2)throw new Error("Squeeze requires 2 inputs.");if(at[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.sum=void 0;const nt=tt(5060),st=tt(2039);_e.sum=(dt,ft)=>{at(ft);const ht={name:"Sum",inputNames:ft.map((ct,it)=>`X${it}`),inputTypes:new Array(ft.length).fill(st.TextureType.unpacked)};return[dt.run(Object.assign(Object.assign({},ht),{get:()=>ot(dt,ft,ht)}),ft)]};const ot=(dt,ft,ht)=>{const ct=(0,nt.getGlsl)(dt.session.backend.glContext.version),it=ft[0].dims.slice(),rt=`
      void main() {
        vec4 result = ${ft.map((lt,ut)=>`${ct.texture2D}(X${ut},TexCoords)`).join(" + ")};
        ${ct.output} = result;
      }
    `;return Object.assign(Object.assign({},ht),{output:{dims:it,type:ft[0].type,textureType:st.TextureType.unpacked},hasMain:!0,shaderSource:rt})},at=dt=>{if(!dt||dt.length===0)throw new Error("Sum requires inputs.");const ft=dt[0].dims.length;for(let ht=1;ht<dt.length;ht++){if(ft!==dt[ht].dims.length)throw new Error("Input shapes are mismatched.");for(let ct=0;ct<ft;ct++)if(dt[0].dims[ct]!==dt[ht].dims[ct])throw new Error("Input shapes are not matched.")}if(dt[0].type!=="float32"&&dt[0].type!=="float64")throw new Error("Invalid input type.");for(let ht=1;ht<dt.length;ht++)if(dt[0].type!==dt[ht].type)throw new Error("Input types are not matched.")}},5723:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.tile=void 0;const nt=tt(782),st=tt(2039);_e.tile=(dt,ft)=>{at(ft);const ht={name:"Tile",inputNames:["A"],inputTypes:[st.TextureType.unpacked]};return[dt.run(Object.assign(Object.assign({},ht),{get:()=>ot(dt,ft,ht)}),ft)]};const ot=(dt,ft,ht)=>{const ct=ft[0].dims.slice(),it=new Array(ct.length),rt=[];for(let pt=0;pt<ct.length;pt++)it[pt]=ct[pt]*ft[1].numberData[pt],rt.push(`inputIdx[${pt}] = int(mod(float(outputIdx[${pt}]), ${ct[pt]}.));`);const lt=it.length,ut=`
      float process(int outputIdx[${lt}]) {
        int inputIdx[${lt}];
        ${rt.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},ht),{output:{dims:it,type:ft[0].type,textureType:st.TextureType.unpacked},shaderSource:ut})},at=dt=>{if(!dt||dt.length!==2)throw new Error("Tile requires 2 input.");if(dt[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(dt[1].dims[0]!==dt[0].dims.length)throw new Error("Invalid input shape.");if(nt.NUMBER_TYPES.indexOf(dt[0].type)===-1)throw new Error("Invalid input type.");if(dt[1].type!=="int32"&&dt[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseTransposeAttributes=_e.transpose=void 0;const nt=tt(246),st=tt(2517),ot=tt(2039),at={name:"Transpose",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};_e.transpose=(rt,lt,ut)=>(it(lt),[rt.run(Object.assign(Object.assign({},at),{cacheHint:ut.cacheKey,get:()=>dt(rt,lt[0],ut.perm)}),lt)]),_e.parseTransposeAttributes=rt=>(0,nt.createAttributeWithCacheKey)({perm:rt.attributes.getInts("perm",[])});const dt=(rt,lt,ut)=>{const pt=lt.dims;ut=ft(pt,ut);const gt=ht(pt,ut),mt=pt.length,yt=`
      ${ct("perm",ut,mt)}
      float process(int indices[${mt}]) {
        int a[${mt}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},at),{output:{dims:gt,type:lt.type,textureType:ot.TextureType.unpacked},shaderSource:yt})},ft=(rt,lt)=>(lt&&lt.length!==rt.length&&(lt=[...rt.keys()].reverse()),lt),ht=(rt,lt)=>(lt=ft(rt,lt),st.ShapeUtil.sortBasedOnPerm(rt,lt)),ct=(rt,lt,ut)=>{const pt=[];pt.push(`void ${rt}(out int a[${ut}], int src[${ut}]) {`);for(let gt=0;gt<ut;++gt)pt.push(`	a[${lt[gt]}]=src[${gt}];`);return pt.push("	}"),pt.join(`
`)},it=rt=>{if(!rt||rt.length!==1)throw new Error("Transpose requires 1 input.");if(rt[0].type!=="float32"&&rt[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.encodeAsUint8=void 0;const nt=tt(5060),st=tt(2039);_e.encodeAsUint8=(ot,at)=>{const dt=at.shape,ft=(0,nt.getGlsl)(ot.session.backend.glContext.version),ht=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${ft.texture2D}(X,TexCoords).r;
      ${ft.output} = encodeAsUint8(value);
    }`,ct={name:"Uint8Encode",inputTypes:[st.TextureType.unpacked],inputNames:["X"],output:{dims:dt,type:at.tensor.type,textureType:st.TextureType.downloadUint8AsFloat},shaderSource:ht,hasMain:!0};return ot.executeProgram(ct,[at.tensor])}},4909:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.tanh=_e.tan=_e.sqrt=_e.sin=_e.sigmoid=_e.relu=_e.not=_e.neg=_e.log=_e.parseLeakyReluAttributes=_e.leakyRelu=_e.identity=_e.floor=_e.exp=_e.parseEluAttributes=_e.elu=_e.cos=_e.ceil=_e.clipV11=_e.parseClipAttributes=_e.clip=_e.atan=_e.asin=_e.acos=_e.abs=_e.glslTanh=_e.glslTan=_e.glslSqrt=_e.glslSigmoid=_e.glslRelu=_e.glslSin=_e.glslNot=_e.glslNeg=_e.glslLog=_e.glslLeakyRelu=_e.glslIdentity=_e.glslClip=_e.glslFloor=_e.glslExp=_e.glslElu=_e.glslCos=_e.glslCeil=_e.glslAtan=_e.glslAsin=_e.glslAcos=_e.glslAbs=void 0;const nt=tt(246),st=tt(2517),ot=tt(8520),at=tt(5060),dt=tt(2039);function ft(){return Lt("abs")}function ht(){return Lt("acos")}function ct(){return Lt("asin")}function it(){return Lt("atan")}function rt(){return Lt("ceil")}function lt(){return Lt("cos")}function ut(Ot){const Ft="elu";return{body:`
  const float alpha = float(${Ot});

  float ${Ft}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Ft}_(vec4 v) {
    return vec4(${Ft}_(v.x), ${Ft}_(v.y), ${Ft}_(v.z), ${Ft}_(v.w));
  }
  `,name:Ft,type:ot.FunctionType.ValueBased}}function pt(){return Lt("exp")}function gt(){return Lt("floor")}function mt(Ot,Ft){const Vt="clip";return{body:`
  const float min = float(${Ot});
  const float max = float(${Ft});

  float ${Vt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Vt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Vt,type:ot.FunctionType.ValueBased}}function yt(){const Ot="indentity";return{body:`
  float ${Ot}_(float a) {
    return a;
  }
  vec4 ${Ot}_(vec4 v) {
    return v;
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function bt(Ot){const Ft="leakyRelu";return{body:`
  const float alpha = float(${Ot});

  float ${Ft}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Ft}_(vec4 v) {
    return vec4(${Ft}_(v.x), ${Ft}_(v.y), ${Ft}_(v.z), ${Ft}_(v.w));
  }
  `,name:Ft,type:ot.FunctionType.ValueBased}}function wt(){return Lt("log")}function xt(){const Ot="neg";return{body:`
  float ${Ot}_(float a) {
    return -a;
  }
  vec4 ${Ot}_(vec4 v) {
    return -v;
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function Tt(){const Ot="not";return{body:`
  float ${Ot}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Ot}_(bool a) {
    return !a;
  }
  vec4 ${Ot}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Ot}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function St(){return Lt("sin")}function Pt(){const Ot="relu";return{body:`
  float ${Ot}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Ot}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function vt(){const Ot="sigmoid";return{body:`
  float ${Ot}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Ot}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function At(){return Lt("sqrt")}function It(){return Lt("tan")}function jt(){const Ot="tanh";return{body:`
  float ${Ot}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Ot}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}function Lt(Ot){return{body:`
  float ${Ot}_(float a) {
    return ${Ot}(a);
  }
  vec4 ${Ot}_(vec4 v) {
    return ${Ot}(v);
  }
  `,name:Ot,type:ot.FunctionType.ValueBased}}_e.glslAbs=ft,_e.glslAcos=ht,_e.glslAsin=ct,_e.glslAtan=it,_e.glslCeil=rt,_e.glslCos=lt,_e.glslElu=ut,_e.glslExp=pt,_e.glslFloor=gt,_e.glslClip=mt,_e.glslIdentity=yt,_e.glslLeakyRelu=bt,_e.glslLog=wt,_e.glslNeg=xt,_e.glslNot=Tt,_e.glslSin=St,_e.glslRelu=Pt,_e.glslSigmoid=vt,_e.glslSqrt=At,_e.glslTan=It,_e.glslTanh=jt;const Rt=(Ot,Ft,Vt,zt)=>{const Xt=Ot.session.pack?dt.TextureType.packed:dt.TextureType.unpacked,Jt={name:Vt.name,inputTypes:[Xt],inputNames:["A"],cacheHint:zt};return Object.assign(Object.assign({},Jt),{get:()=>((nn,xn,dn,on)=>{const hn=nn.session.pack?dt.TextureType.packed:dt.TextureType.unpacked,fn=(0,at.getGlsl)(nn.session.backend.glContext.version);return Object.assign(Object.assign({},xn),{output:{dims:dn.dims,type:dn.type,textureType:hn},shaderSource:`
     ${on.body}
     void main() {
       vec4 v = ${fn.texture2D}(A, TexCoords);
       v = ${on.name}_(v);
       ${fn.output} = v;
     }
     `,hasMain:!0})})(Ot,Jt,Ft,Vt)})};_e.abs=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],ft()),Ft)],_e.acos=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],ht()),Ft)],_e.asin=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],ct()),Ft)],_e.atan=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],it()),Ft)],_e.clip=(Ot,Ft,Vt)=>[Ot.run(Rt(Ot,Ft[0],mt(Vt.min,Vt.max),Vt.cacheKey),Ft)],_e.parseClipAttributes=Ot=>(0,nt.createAttributeWithCacheKey)({min:Ot.attributes.getFloat("min",st.MIN_CLIP),max:Ot.attributes.getFloat("max",st.MAX_CLIP)}),_e.clipV11=(Ot,Ft)=>{const Vt=$t(Ot,Ft);return(0,_e.clip)(Ot,[Ft[0]],Vt)};const $t=(Ot,Ft)=>{if(Ft.length>=3&&(!Ot.session.isInitializer(Ft[1].dataId)||!Ot.session.isInitializer(Ft[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Vt=Ft.length>=3?Ft[1].numberData[0]:st.MIN_CLIP,zt=Ft.length>=3?Ft[2].numberData[0]:st.MAX_CLIP;return(0,nt.createAttributeWithCacheKey)({min:Vt,max:zt})};_e.ceil=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],rt()),Ft)],_e.cos=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],lt()),Ft)],_e.elu=(Ot,Ft,Vt)=>[Ot.run(Rt(Ot,Ft[0],ut(Vt.alpha),Vt.cacheKey),Ft)],_e.parseEluAttributes=Ot=>(0,nt.createAttributeWithCacheKey)({alpha:Ot.attributes.getFloat("alpha",1)}),_e.exp=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],pt()),Ft)],_e.floor=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],gt()),Ft)],_e.identity=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],yt()),Ft)],_e.leakyRelu=(Ot,Ft,Vt)=>[Ot.run(Rt(Ot,Ft[0],bt(Vt.alpha),Vt.cacheKey),Ft)],_e.parseLeakyReluAttributes=Ot=>(0,nt.createAttributeWithCacheKey)({alpha:Ot.attributes.getFloat("alpha",.01)}),_e.log=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],wt()),Ft)],_e.neg=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],xt()),Ft)],_e.not=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],Tt()),Ft)],_e.relu=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],Pt()),Ft)],_e.sigmoid=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],vt()),Ft)],_e.sin=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],St()),Ft)],_e.sqrt=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],At()),Ft)],_e.tan=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],It()),Ft)],_e.tanh=(Ot,Ft)=>[Ot.run(Rt(Ot,Ft[0],jt()),Ft)]},5611:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createUnpackProgramInfoLoader=_e.createUnpackProgramInfo=void 0;const nt=tt(5060),st=tt(2039),ot=tt(9390),at=tt(2827),dt={name:"unpack",inputNames:["A"],inputTypes:[st.TextureType.packed]};_e.createUnpackProgramInfo=(ft,ht)=>{const ct=ht.dims.length,it=(0,at.getChannels)("rc",ct),rt=it.slice(-2),lt=(0,ot.getCoordsDataType)(ct),ut=(0,at.unpackFromChannel)(),pt=ht.dims.length===0?"":function(yt,bt){if(yt===1)return"rc";let wt="";for(let xt=0;xt<yt;xt++)wt+=bt[xt],xt<yt-1&&(wt+=",");return wt}(ct,it),gt=ct<=1?"rc":`vec2(${rt.join(",")})`,mt=`
    ${ut}
    void main() {
      ${lt} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${pt});

       ${(0,nt.getGlsl)(ft.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${gt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},dt),{hasMain:!0,output:{dims:ht.dims,type:ht.type,textureType:st.TextureType.unpacked},shaderSource:mt})},_e.createUnpackProgramInfoLoader=(ft,ht)=>Object.assign(Object.assign({},dt),{get:()=>(0,_e.createUnpackProgramInfo)(ft,ht)})},8428:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.parseUnsqueezeAttributes=_e.unsqueezeV13=_e.unsqueeze=void 0;const nt=tt(2517);_e.unsqueeze=(at,dt,ft)=>{st(dt);const ht=nt.ShapeUtil.unsqueezeShape(dt[0].dims,ft);return[at.reshapeUnpacked(dt[0],ht)]},_e.unsqueezeV13=(at,dt)=>(ot(dt),(0,_e.unsqueeze)(at,[dt[0]],Array.from(dt[1].integerData))),_e.parseUnsqueezeAttributes=at=>at.attributes.getInts("axes");const st=at=>{if(!at||at.length!==1)throw new Error("Unsqueeze requires 1 input.");if(at[0].type==="string")throw new Error("invalid input tensor types.")},ot=at=>{if(!at||at.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(at[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.scalesValidation=_e.validateInputs=_e.parseUpsampleAttributes=_e.parseUpsampleAttributesV9=_e.parseUpsampleAttributesV7=_e.upsample=void 0;const nt=tt(246),st=tt(5060),ot=tt(2039),at={name:"Upsample",inputNames:["X"],inputTypes:[ot.TextureType.unpacked]};_e.upsample=(ft,ht,ct)=>((0,_e.validateInputs)(ht,ct),[ft.run(Object.assign(Object.assign({},at),{cacheHint:ct.cacheKey,get:()=>dt(ft,ht,ct)}),ht)]),_e.parseUpsampleAttributesV7=ft=>(0,_e.parseUpsampleAttributes)(ft,7),_e.parseUpsampleAttributesV9=ft=>(0,_e.parseUpsampleAttributes)(ft,9),_e.parseUpsampleAttributes=(ft,ht)=>{const ct=ht>=10,it=ft.attributes.getString("mode","nearest");if(it!=="nearest"&&it!=="linear"&&(ht<11||it!=="cubic"))throw new Error(`unrecognized mode: ${it}`);let rt=[];ht<9&&(rt=ft.attributes.getFloats("scales"),(0,_e.scalesValidation)(rt,it,ct));const lt=ft.attributes.getFloat("extrapolation_value",0),ut=ht>10?ft.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(ut)===-1)throw new Error(`coordinate_transform_mode '${ut}' is not supported`);const pt=ut==="tf_crop_and_resize",gt=pt,mt=it==="nearest"&&ht>=11?ft.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(mt)===-1)throw new Error(`nearest_mode '${mt}' is not supported`);const yt=ft.attributes.getFloat("cubic_coeff_a",-.75),bt=ft.attributes.getInt("exclude_outside",0)!==0;if(bt&&it!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const wt=ht<11||it==="nearest"&&ut==="asymmetric"&&mt==="floor";let xt=0,Tt=0,St=0;return ht>10?ft.inputs.length>2?(xt=1,Tt=2,St=3):(Tt=1,St=2):ht===9&&(Tt=1),(0,nt.createAttributeWithCacheKey)({opset:ht,isResize:ct,mode:it,scales:rt,extrapolationValue:lt,coordinateTransformMode:ut,useExtrapolation:gt,needRoiInput:pt,nearestMode:mt,cubicCoefficientA:yt,excludeOutside:bt,useNearest2xOptimization:wt,roiInputIdx:xt,scalesInputIdx:Tt,sizesInputIdx:St})};const dt=(ft,ht,ct)=>{const it=(0,st.getGlsl)(ft.session.backend.glContext.version),[rt,lt]=ft.calculateTextureWidthAndHeight(ht[0].dims,ot.TextureType.unpacked),ut=ht[0].dims.map((St,Pt)=>Math.floor(St*ct.scales[Pt])),[pt,gt]=ft.calculateTextureWidthAndHeight(ut,ot.TextureType.unpacked),mt=ut.length,yt=new Array(mt),bt=new Array(mt);let wt=`
      int output_pitches[${mt}];
      int input_pitches[${mt}];
      `;for(let St=mt-1;St>=0;St--)yt[St]=St===mt-1?1:yt[St+1]*ut[St+1],bt[St]=St===mt-1?1:bt[St+1]*ht[0].dims[St+1],wt+=`
        output_pitches[${St}] = ${yt[St]};
        input_pitches[${St}] = ${bt[St]};
        `;const xt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${rt}, ${lt});
        float value = getColorAsFloat(${it.texture2D}(X, coords));
        return value;
      }
      `,Tt=ct.mode==="nearest"?`
    ${xt}
    float process(int indices[${mt}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${pt}, ${gt});

      ${wt}

      int d, m;
      for (int dim = 0; dim < ${mt}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:mt===4?`
    ${xt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${pt}, ${gt});

      ${wt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ht[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${xt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${pt}, ${gt});

      ${wt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ht[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},at),{output:{dims:ut,type:ht[0].type,textureType:ot.TextureType.unpacked},shaderSource:Tt,variables:[{name:"scales",type:"int",arrayLength:ct.scales.length,data:ct.scales.map(St=>Math.ceil(St))}]})};_e.validateInputs=(ft,ht)=>{if(!ft||ht.opset<9&&ft.length!==1||ht.opset>=9&&ht.opset<11&&ft.length!==2||ht.opset>=11&&ft.length<2)throw new Error("invalid inputs.");if(ht.scales.length>0&&ft[0].dims.length!==ht.scales.length)throw new Error("Invalid input shape.");if(ft[0].type==="string")throw new Error("Invalid input tensor types.")},_e.scalesValidation=(ft,ht,ct)=>{if(ct){for(const it of ft)if(it<=0)throw new Error("Scale value should be greater than 0.")}else for(const it of ft)if(it<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(ht!=="linear"&&ht!=="cubic"||ft.length===2||ft.length===4&&ft[0]===1&&ft[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${ct?"Resize":"Upsample"} opeartor.`)}},1958:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.ProgramManager=void 0;const nt=tt(1670),st=tt(6231),ot=tt(8879),at=tt(5060);_e.ProgramManager=class{constructor(dt,ft,ht){this.profiler=dt,this.glContext=ft,this.textureLayoutStrategy=ht,this.repo=new Map,this.attributesBound=!1}getArtifact(dt){return this.repo.get(dt)}setArtifact(dt,ft){this.repo.set(dt,ft)}run(dt,ft,ht){var ct;this.profiler.event("op",`ProgramManager.run ${(ct=dt.programInfo.name)!==null&&ct!==void 0?ct:"unknown kernel"}`,()=>{var it;const rt=this.glContext.gl,lt=dt.program;rt.useProgram(lt);try{this.bindOutput(ht),this.attributesBound||this.bindAttributes(dt.attribLocations),this.bindUniforms(dt.uniformLocations,(it=dt.programInfo.variables)!==null&&it!==void 0?it:[],ft)}catch(ut){throw st.Logger.error("ProgramManager",dt.programInfo.shaderSource),ut}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(dt=>this.glContext.deleteProgram(dt.program))}build(dt,ft,ht){return this.profiler.event("backend","ProgramManager.build",()=>{const ct=new ot.GlslPreprocessor(this.glContext,dt,ft,ht),it=ct.preprocess(),rt=this.compile(it);return{programInfo:dt,program:rt,uniformLocations:this.getUniformLocations(rt,ct.context.programInfo.inputNames,ct.context.programInfo.variables),attribLocations:this.getAttribLocations(rt)}})}compile(dt){if(!this.vertexShader){st.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const ct=(0,at.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(ct,this.glContext.gl.VERTEX_SHADER)}nt.env.debug&&st.Logger.verbose("ProrgramManager",`FragShader:
${dt}
`);const ft=this.glContext.compileShader(dt,this.glContext.gl.FRAGMENT_SHADER),ht=this.glContext.createProgram(this.vertexShader,ft);return this.glContext.deleteShader(ft),ht}bindOutput(dt){const ft=dt.width,ht=dt.height;st.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${ft}/${ht}, shape=${dt.shape}, type=${dt.tensor.type}`),this.glContext.attachFramebuffer(dt.texture,ft,ht)}bindAttributes(dt){const ft=dt.position,ht=dt.textureCoord;this.glContext.setVertexAttributes(ft,ht),this.attributesBound=!0}bindUniforms(dt,ft,ht){var ct;const it=this.glContext.gl;let rt=0;for(const{name:lt,type:ut,location:pt,arrayLength:gt}of dt){const mt=(ct=ft.find(yt=>yt.name===lt))===null||ct===void 0?void 0:ct.data;if(ut!=="sampler2D"&&!mt)throw new Error(`variable '${lt}' does not have data defined in program info`);switch(ut){case"sampler2D":this.bindTexture(ht[rt],pt,rt),rt++;break;case"float":gt?it.uniform1fv(pt,mt):it.uniform1f(pt,mt);break;case"int":gt?it.uniform1iv(pt,mt):it.uniform1i(pt,mt);break;default:throw new Error(`Uniform not implemented: ${ut}`)}}}bindTexture(dt,ft,ht){this.glContext.bindTextureToUniform(dt.texture,ht,ft)}getAttribLocations(dt){return{position:this.getAttribLocation(dt,"position"),textureCoord:this.getAttribLocation(dt,"textureCoord")}}getUniformLocations(dt,ft,ht){const ct=[];if(ft)for(const it of ft)ct.push({name:it,type:"sampler2D",location:this.getUniformLocation(dt,it)});if(ht)for(const it of ht)ct.push(Object.assign(Object.assign({},it),{location:this.getUniformLocation(dt,it.name)}));return ct}getUniformLocation(dt,ft){const ht=this.glContext.gl.getUniformLocation(dt,ft);if(ht===null)throw new Error(`Uniform ${ft} not found.`);return ht}getAttribLocation(dt,ft){return this.glContext.gl.getAttribLocation(dt,ft)}}},6416:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.WebGLSessionHandler=void 0;const nt=tt(6231),st=tt(1047),ot=tt(8316),at=tt(1640),dt=tt(1958),ft=tt(7859),ht=tt(5702);_e.WebGLSessionHandler=class{constructor(ct,it){this.backend=ct,this.context=it,this.layoutStrategy=new ft.PreferLogicalStrategy(ct.glContext.maxTextureSize),this.programManager=new dt.ProgramManager(this.context.profiler,ct.glContext,this.layoutStrategy),this.textureManager=new ht.TextureManager(ct.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:ct.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=ct.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new ot.WebGLInferenceHandler(this)}onGraphInitialized(ct){const it=ct.getValues().filter(rt=>rt.from===-1&&rt.tensor).map(rt=>rt.tensor.dataId);this.initializers=new Set(it)}isInitializer(ct){return!!this.initializers&&this.initializers.has(ct)}addInitializer(ct){this.initializers.add(ct)}getTextureData(ct,it){return it?this.packedTextureDataCache.get(ct):this.unpackedTextureDataCache.get(ct)}setTextureData(ct,it,rt=!1){nt.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),rt?this.packedTextureDataCache.set(ct,it):this.unpackedTextureDataCache.set(ct,it)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(ct=>this.textureManager.releaseTexture(ct,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(ct=>this.textureManager.releaseTexture(ct,!0)),this.unpackedTextureDataCache=new Map}resolve(ct,it,rt){const lt=(0,st.resolveOperator)(ct,it,at.WEBGL_OP_RESOLVE_RULES);return{impl:lt.opImpl,context:lt.opInit?lt.opInit(ct,rt):ct}}}},7769:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.Uint8DataEncoder=_e.RGBAFloatDataEncoder=_e.RedFloat32DataEncoder=void 0;const nt=tt(6231);_e.RedFloat32DataEncoder=class{constructor(st,ot=1){if(ot===1)this.internalFormat=st.R32F,this.format=st.RED,this.textureType=st.FLOAT,this.channelSize=ot;else{if(ot!==4)throw new Error(`Invalid number of channels: ${ot}`);this.internalFormat=st.RGBA32F,this.format=st.RGBA,this.textureType=st.FLOAT,this.channelSize=ot}}encode(st,ot){let at,dt;return st.constructor!==Float32Array&&(nt.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),dt=new Float32Array(st)),ot*this.channelSize>st.length?(nt.Logger.warning("Encoder","Source data too small. Allocating larger array"),dt=st,at=this.allocate(ot*this.channelSize),dt.forEach((ft,ht)=>at[ht]=ft)):(dt=st,at=dt),at}allocate(st){return new Float32Array(4*st)}decode(st,ot){return this.channelSize===1?st.filter((at,dt)=>dt%4==0).subarray(0,ot):st.subarray(0,ot)}},_e.RGBAFloatDataEncoder=class{constructor(st,ot=1,at){if(ot!==1&&ot!==4)throw new Error(`Invalid number of channels: ${ot}`);this.internalFormat=st.RGBA,this.format=st.RGBA,this.channelSize=ot,this.textureType=at||st.FLOAT}encode(st,ot){let at=st;return this.channelSize===1&&(nt.Logger.verbose("Encoder","Exploding into a larger array"),at=this.allocate(ot),st.forEach((dt,ft)=>at[4*ft]=dt)),at}allocate(st){return new Float32Array(4*st)}decode(st,ot){return this.channelSize===1?st.filter((at,dt)=>dt%4==0).subarray(0,ot):st.subarray(0,ot)}},_e.Uint8DataEncoder=class{constructor(st,ot=1){if(this.channelSize=4,ot===1)this.internalFormat=st.ALPHA,this.format=st.ALPHA,this.textureType=st.UNSIGNED_BYTE,this.channelSize=ot;else{if(ot!==4)throw new Error(`Invalid number of channels: ${ot}`);this.internalFormat=st.RGBA,this.format=st.RGBA,this.textureType=st.UNSIGNED_BYTE,this.channelSize=ot}}encode(st,ot){return new Uint8Array(st.buffer,st.byteOffset,st.byteLength)}allocate(st){return new Uint8Array(st*this.channelSize)}decode(st,ot){if(st instanceof Uint8Array)return st.subarray(0,ot);throw new Error(`Invalid array type: ${st.constructor}`)}}},7859:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.getBatchDim=_e.sizeToSquarishShape=_e.getRowsCols=_e.sizeFromShape=_e.isInt=_e.parseAxisParam=_e.squeezeShape=_e.PreferLogicalStrategy=_e.AlwaysKeepOriginalSizeStrategy=void 0;const nt=tt(6231),st=tt(2517);function ot(ct,it){const rt=[],lt=[],ut=it!=null&&Array.isArray(it)&&it.length===0,pt=it==null||ut?null:at(it,ct).sort();let gt=0;for(let mt=0;mt<ct.length;++mt){if(pt!=null){if(pt[gt]===mt&&ct[mt]!==1)throw new Error(`Can't squeeze axis ${mt} since its dim '${ct[mt]}' is not 1`);(pt[gt]==null||pt[gt]>mt)&&ct[mt]===1&&(rt.push(ct[mt]),lt.push(mt)),pt[gt]<=mt&&gt++}ct[mt]!==1&&(rt.push(ct[mt]),lt.push(mt))}return{newShape:rt,keptDims:lt}}function at(ct,it){const rt=it.length;return ct=ct==null?it.map((lt,ut)=>ut):[].concat(ct),(0,st.assert)(ct.every(lt=>lt>=-rt&&lt<rt),()=>`All values in axis param must be in range [-${rt}, ${rt}) but got axis ${ct}`),(0,st.assert)(ct.every(dt),()=>`All values in axis param must be integers but got axis ${ct}`),ct.map(lt=>lt<0?rt+lt:lt)}function dt(ct){return ct%1==0}function ft(ct){if(ct.length===0)return 1;let it=ct[0];for(let rt=1;rt<ct.length;rt++)it*=ct[rt];return it}function ht(ct){const it=Math.ceil(Math.sqrt(ct));return[it,Math.ceil(ct/it)]}_e.AlwaysKeepOriginalSizeStrategy=class{constructor(ct){this.maxTextureSize=ct}computeTextureWH(ct,it){if(ct.length===0)return[1,1];const rt=this.maxTextureSize;if(it&&it.breakAxis!==void 0){const pt=it.breakAxis>=ct.length?1:ct.slice(it.breakAxis).reduce((mt,yt)=>mt*yt),gt=it.breakAxis<=0?1:ct.slice(0,it.breakAxis).reduce((mt,yt)=>mt*yt);if(!(pt>rt||gt>rt))return[pt,gt];nt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ct}, breakAxis:${it.breakAxis}`)}const lt=ct.reduce((pt,gt)=>pt*gt);let ut=Math.floor(Math.sqrt(lt));for(;ut<rt&&ut<lt&&lt%ut!=0;ut++);if(ut>=rt||lt%ut!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${ct}`);return[ut,lt/ut]}},_e.PreferLogicalStrategy=class{constructor(ct){this.maxTextureSize=ct}computeTextureWH(ct,it){const rt=this.computeTexture(ct,it);return it&&it.isPacked&&(rt[0]/=2,rt[1]/=2),it&&it.reverseWH?[rt[1],rt[0]]:rt}computeTexture(ct,it){const rt=it&&it.isPacked;if(ct.length===0)return rt?[2,2]:[1,1];let lt=this.maxTextureSize;if(it&&it.breakAxis!==void 0){const gt=it.breakAxis>=ct.length?1:ct.slice(it.breakAxis).reduce((yt,bt)=>yt*bt),mt=it.breakAxis<=0?1:ct.slice(0,it.breakAxis).reduce((yt,bt)=>yt*bt);if(!(gt>lt||mt>lt))return[gt,mt];nt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ct}, breakAxis:${it.breakAxis}`)}let ut=ct.slice(0);rt&&(lt*=2,ut=ut.map((gt,mt)=>mt>=ut.length-2?ut[mt]%2==0?ut[mt]:ut[mt]+1:ut[mt]),ut.length===1&&(ut=[2,ut[0]])),ut.length!==2&&(ut=ot(ut).newShape);const pt=ft(ut);return ut.length<=1&&pt<=lt?[1,pt]:ut.length===2&&ut[0]<=lt&&ut[1]<=lt?ut:ut.length===3&&ut[0]*ut[1]<=lt&&ut[2]<=lt?[ut[0]*ut[1],ut[2]]:ut.length===3&&ut[0]<=lt&&ut[1]*ut[2]<=lt?[ut[0],ut[1]*ut[2]]:ut.length===4&&ut[0]*ut[1]*ut[2]<=lt&&ut[3]<=lt?[ut[0]*ut[1]*ut[2],ut[3]]:ut.length===4&&ut[0]<=lt&&ut[1]*ut[2]*ut[3]<=lt?[ut[0],ut[1]*ut[2]*ut[3]]:rt?ht(pt/4).map(gt=>2*gt):ht(pt)}},_e.squeezeShape=ot,_e.parseAxisParam=at,_e.isInt=dt,_e.sizeFromShape=ft,_e.getRowsCols=function(ct){if(ct.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[ct.length>1?ct[ct.length-2]:1,ct[ct.length-1]]},_e.sizeToSquarishShape=ht,_e.getBatchDim=function(ct,it=2){return ft(ct.slice(0,ct.length-it))}},4057:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createTextureLayoutFromShape=_e.calculateTextureWidthAndHeight=_e.createTextureLayoutFromTextureType=void 0;const nt=tt(2517),st=tt(2039);_e.createTextureLayoutFromTextureType=(ot,at,dt)=>{const ft=dt===st.TextureType.unpacked||dt===st.TextureType.unpackedReversed?1:4,ht=dt===st.TextureType.packed,ct=dt===st.TextureType.unpackedReversed||dt===st.TextureType.packed,it=dt===st.TextureType.packedLastDimension?at.length-1:void 0,rt=dt===st.TextureType.packedLastDimension?at.map((lt,ut)=>ut===at.length-1?4*lt:lt):void 0;return(0,_e.createTextureLayoutFromShape)(ot,at,ft,rt,{isPacked:ht,reverseWH:ct,breakAxis:it})},_e.calculateTextureWidthAndHeight=(ot,at,dt)=>{const ft=(0,_e.createTextureLayoutFromTextureType)(ot,at,dt);return[ft.width,ft.height]},_e.createTextureLayoutFromShape=(ot,at,dt=1,ft,ht)=>{const ct=!(!ht||!ht.isPacked),[it,rt]=ot.computeTextureWH(ct&&ft||at,ht),lt=at.length;let ut=at.slice(0);if(lt===0&&(ut=[1]),dt===1)ft=at;else if(ct){if(dt!==4)throw new Error("a packed texture must be 4-channel");ft=at,lt>0&&(ut[lt-1]=Math.ceil(ut[lt-1]/2)),lt>1&&(ut[lt-2]=Math.ceil(ut[lt-2]/2))}else if(!ft)throw new Error("Unpacked shape is needed when using channels > 1");return{width:it,height:rt,channels:dt,isPacked:ct,shape:ut,strides:nt.ShapeUtil.computeStrides(ut),unpackedShape:ft,reversedWH:ht&&ht.reverseWH}}},5702:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.TextureManager=void 0;const nt=tt(6231);_e.TextureManager=class{constructor(st,ot,at,dt){this.glContext=st,this.layoutStrategy=ot,this.profiler=at,this.config=dt,this.pendingRead=new Map,dt.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(st,ot,at,dt){const ft=this.toEncoderType(st),ht=this.glContext.getEncoder(ft,ot.channels||1,dt);if(ot.isPacked&&dt===1)throw new Error("not implemented");const ct=ot.width,it=ot.height;let rt,lt;if(this.config.reuseTextures){rt=`${ct}x${it}_${ht.format}_${ht.internalFormat}_${ht.textureType}`,lt=this.inUseTextures.get(rt),lt||(lt=[],this.inUseTextures.set(rt,lt));const pt=this.idleTextures.get(rt);if(pt&&pt.length>0){const gt=pt.pop();return lt.push(gt),dt===1&&this.glContext.updateTexture(gt,ct,it,ht,this.toTextureData(st,at)),gt}}nt.Logger.verbose("TextureManager",`Creating new texture of size ${ot.width}x${ot.height}`);const ut=this.glContext.allocateTexture(ct,it,ht,this.toTextureData(st,at));return this.config.reuseTextures&&(lt.push(ut),this.textureLookup.set(ut,rt)),ut}readTexture(st,ot,at){return at||(at=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const dt=st.shape.reduce((ht,ct)=>ht*ct)*at,ft=this.glContext.readTexture(st.texture,st.width,st.height,dt,this.toEncoderType(ot),at);return this.toTensorData(ot,ft)})}async readTextureAsync(st,ot,at){const dt=st.tensor.dataId;if(at||(at=1),this.pendingRead.has(dt)){const ft=this.pendingRead.get(dt);return new Promise(ht=>ft==null?void 0:ft.push(ht))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(dt,[]);const ft=st.shape.reduce((rt,lt)=>rt*lt)*at;await this.glContext.createAndWaitForFence();const ht=this.glContext.readTexture(st.texture,st.width,st.height,ft,this.toEncoderType(ot),at),ct=this.toTensorData(ot,ht),it=this.pendingRead.get(dt);return this.pendingRead.delete(dt),it==null||it.forEach(rt=>rt(ct)),ct})}readUint8TextureAsFloat(st){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const ot=st.shape.reduce((dt,ft)=>dt*ft),at=this.glContext.readTexture(st.texture,st.width,st.height,4*ot,"byte",4);return new Float32Array(at.buffer,at.byteOffset,ot)})}releaseTexture(st,ot){let at;if(this.config.reuseTextures&&(at=this.textureLookup.get(st.texture),at)){ot&&this.textureLookup.delete(at);const dt=this.inUseTextures.get(at);if(dt){const ft=dt.indexOf(st.texture);if(ft!==-1){dt.splice(ft,1);let ht=this.idleTextures.get(at);ht||(ht=[],this.idleTextures.set(at,ht)),ht.push(st.texture)}}}at&&!ot||(nt.Logger.verbose("TextureManager",`Deleting texture of size ${st.width}x${st.height}`),this.glContext.deleteTexture(st.texture))}toTensorData(st,ot){switch(st){case"int16":return ot instanceof Int16Array?ot:Int16Array.from(ot);case"int32":return ot instanceof Int32Array?ot:Int32Array.from(ot);case"int8":return ot instanceof Int8Array?ot:Int8Array.from(ot);case"uint16":return ot instanceof Uint16Array?ot:Uint16Array.from(ot);case"uint32":return ot instanceof Uint32Array?ot:Uint32Array.from(ot);case"uint8":case"bool":return ot instanceof Uint8Array?ot:Uint8Array.from(ot);case"float32":return ot instanceof Float32Array?ot:Float32Array.from(ot);case"float64":return ot instanceof Float64Array?ot:Float64Array.from(ot);default:throw new Error(`TensorData type ${st} is not supported`)}}toTextureData(st,ot){if(ot)return ot instanceof Float32Array?ot:new Float32Array(ot)}toEncoderType(st){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(et,_e)=>{var tt;Object.defineProperty(_e,"__esModule",{value:!0}),_e.TextureType=void 0,(tt=_e.TextureType||(_e.TextureType={}))[tt.unpacked=0]="unpacked",tt[tt.unpackedReversed=1]="unpackedReversed",tt[tt.packed=2]="packed",tt[tt.downloadUint8AsFloat=3]="downloadUint8AsFloat",tt[tt.packedLastDimension=4]="packedLastDimension"},9390:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.getGlChannels=_e.getCoordsDataType=_e.getSqueezedParams=_e.squeezeInputShape=_e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_e.generateShaderFuncNameFromInputSamplerName=_e.repeatedTry=_e.getPackedShape=void 0;const nt=tt(2517);_e.getPackedShape=function(st){const ot=st.length;return st.slice(0,ot-1).concat(st[ot-1]/4)},_e.repeatedTry=async function(st,ot=dt=>0,at){return new Promise((dt,ft)=>{let ht=0;const ct=()=>{if(st())return void dt();ht++;const it=ot(ht);at!=null&&ht>=at?ft():setTimeout(ct,it)};ct()})},_e.generateShaderFuncNameFromInputSamplerName=function(st){return(0,nt.assert)(st!==void 0&&st.length!==0,()=>"empty string found for sampler name"),"get"+st.charAt(0).toUpperCase()+st.slice(1)},_e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(st){return(0,nt.assert)(st!==void 0&&st.length!==0,()=>"empty string found for sampler name"),"get"+st.charAt(0).toUpperCase()+st.slice(1)+"AtOutCoords"},_e.squeezeInputShape=function(st,ot){let at=JSON.parse(JSON.stringify(st));return at=ot,at},_e.getSqueezedParams=function(st,ot){return ot.map(at=>st[at]).join(", ")},_e.getCoordsDataType=function(st){if(st<=1)return"int";if(st===2)return"ivec2";if(st===3)return"ivec3";if(st===4)return"ivec4";if(st===5)return"ivec5";if(st===6)return"ivec6";throw Error(`GPU for rank ${st} is not yet supported`)},_e.getGlChannels=function(st=6){return["x","y","z","w","u","v"].slice(0,st)}},7305:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createNewWebGLContext=_e.createWebGLContext=void 0;const nt=tt(6231),st=tt(1713),ot={};function at(dt){const ft=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const it=document.createElement("canvas");return it.width=1,it.height=1,it}();let ht;const ct={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!dt||dt==="webgl2")&&(ht=ft.getContext("webgl2",ct),ht))try{return new st.WebGLContext(ht,2)}catch(it){nt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${it}`)}if((!dt||dt==="webgl")&&(ht=ft.getContext("webgl",ct)||ft.getContext("experimental-webgl",ct),ht))try{return new st.WebGLContext(ht,1)}catch(it){nt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${it}`)}throw new Error("WebGL is not supported")}_e.createWebGLContext=function dt(ft){let ht;ft&&ft!=="webgl2"||!("webgl2"in ot)?ft&&ft!=="webgl"||!("webgl"in ot)||(ht=ot.webgl):ht=ot.webgl2,ht=ht||at(ft),ft=ft||ht.version===1?"webgl":"webgl2";const ct=ht.gl;return ot[ft]=ht,ct.isContextLost()?(delete ot[ft],dt(ft)):(ct.disable(ct.DEPTH_TEST),ct.disable(ct.STENCIL_TEST),ct.disable(ct.BLEND),ct.disable(ct.DITHER),ct.disable(ct.POLYGON_OFFSET_FILL),ct.disable(ct.SAMPLE_COVERAGE),ct.enable(ct.SCISSOR_TEST),ct.enable(ct.CULL_FACE),ct.cullFace(ct.BACK),ht)},_e.createNewWebGLContext=at},1713:function(et,_e,tt){var nt=this&&this.__createBinding||(Object.create?function(ct,it,rt,lt){lt===void 0&&(lt=rt);var ut=Object.getOwnPropertyDescriptor(it,rt);ut&&!("get"in ut?!it.__esModule:ut.writable||ut.configurable)||(ut={enumerable:!0,get:function(){return it[rt]}}),Object.defineProperty(ct,lt,ut)}:function(ct,it,rt,lt){lt===void 0&&(lt=rt),ct[lt]=it[rt]}),st=this&&this.__setModuleDefault||(Object.create?function(ct,it){Object.defineProperty(ct,"default",{enumerable:!0,value:it})}:function(ct,it){ct.default=it}),ot=this&&this.__importStar||function(ct){if(ct&&ct.__esModule)return ct;var it={};if(ct!=null)for(var rt in ct)rt!=="default"&&Object.prototype.hasOwnProperty.call(ct,rt)&&nt(it,ct,rt);return st(it,ct),it};Object.defineProperty(_e,"__esModule",{value:!0}),_e.WebGLContext=_e.linearSearchLastTrue=void 0;const at=tt(1670),dt=ot(tt(7769)),ft=tt(9390);function ht(ct){let it=0;for(;it<ct.length&&ct[it]();++it);return it-1}_e.linearSearchLastTrue=ht,_e.WebGLContext=class{constructor(ct,it){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=ct,this.version=it,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(ct,it,rt,lt){const ut=this.gl,pt=ut.createTexture();ut.bindTexture(ut.TEXTURE_2D,pt),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MIN_FILTER,ut.NEAREST),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MAG_FILTER,ut.NEAREST),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_S,ut.CLAMP_TO_EDGE),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_T,ut.CLAMP_TO_EDGE);const gt=lt?rt.encode(lt,ct*it):null;return ut.texImage2D(ut.TEXTURE_2D,0,rt.internalFormat,ct,it,0,rt.format,rt.textureType,gt),this.checkError(),pt}updateTexture(ct,it,rt,lt,ut){const pt=this.gl;pt.bindTexture(pt.TEXTURE_2D,ct);const gt=lt.encode(ut,it*rt);pt.texSubImage2D(pt.TEXTURE_2D,0,0,0,it,rt,lt.format,lt.textureType,gt),this.checkError()}attachFramebuffer(ct,it,rt){const lt=this.gl;lt.bindTexture(lt.TEXTURE_2D,ct),lt.bindFramebuffer(lt.FRAMEBUFFER,this.framebuffer),lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,ct,0),this.checkError(),lt.viewport(0,0,it,rt),lt.scissor(0,0,it,rt)}readTexture(ct,it,rt,lt,ut,pt){const gt=this.gl;pt||(pt=1),this.frameBufferBound||this.attachFramebuffer(ct,it,rt);const mt=this.getEncoder(ut,pt),yt=mt.allocate(it*rt);return gt.bindTexture(gt.TEXTURE_2D,ct),gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_2D,ct,0),gt.readPixels(0,0,it,rt,gt.RGBA,mt.textureType,yt),this.checkError(),mt.decode(yt,lt)}isFramebufferReady(){return!0}getActiveTexture(){const ct=this.gl;return"TEXTURE"+(ct.getParameter(this.gl.ACTIVE_TEXTURE)-ct.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(ct,it){const rt=this.gl;rt.vertexAttribPointer(ct,3,rt.FLOAT,!1,20,0),rt.enableVertexAttribArray(ct),it!==-1&&(rt.vertexAttribPointer(it,2,rt.FLOAT,!1,20,12),rt.enableVertexAttribArray(it)),this.checkError()}createProgram(ct,it){const rt=this.gl,lt=rt.createProgram();return rt.attachShader(lt,ct),rt.attachShader(lt,it),rt.linkProgram(lt),lt}compileShader(ct,it){const rt=this.gl,lt=rt.createShader(it);if(!lt)throw new Error(`createShader() returned null with type ${it}`);if(rt.shaderSource(lt,ct),rt.compileShader(lt),rt.getShaderParameter(lt,rt.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${rt.getShaderInfoLog(lt)}
Shader source:
${ct}`);return lt}deleteShader(ct){this.gl.deleteShader(ct)}bindTextureToUniform(ct,it,rt){const lt=this.gl;lt.activeTexture(lt.TEXTURE0+it),this.checkError(),lt.bindTexture(lt.TEXTURE_2D,ct),this.checkError(),lt.uniform1i(rt,it),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(at.env.debug){const ct=this.gl,it=ct.getError();let rt="";switch(it){case ct.NO_ERROR:return;case ct.INVALID_ENUM:rt="INVALID_ENUM";break;case ct.INVALID_VALUE:rt="INVALID_VALUE";break;case ct.INVALID_OPERATION:rt="INVALID_OPERATION";break;case ct.INVALID_FRAMEBUFFER_OPERATION:rt="INVALID_FRAMEBUFFER_OPERATION";break;case ct.OUT_OF_MEMORY:rt="OUT_OF_MEMORY";break;case ct.CONTEXT_LOST_WEBGL:rt="CONTEXT_LOST_WEBGL";break;default:rt=`Unknown WebGL Error: ${it.toString(16)}`}throw new Error(rt)}}deleteTexture(ct){this.gl.deleteTexture(ct)}deleteProgram(ct){this.gl.deleteProgram(ct)}getEncoder(ct,it,rt=0){if(this.version===2)return new dt.RedFloat32DataEncoder(this.gl,it);switch(ct){case"float":return rt===1||this.isRenderFloat32Supported?new dt.RGBAFloatDataEncoder(this.gl,it):new dt.RGBAFloatDataEncoder(this.gl,it,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new dt.Uint8DataEncoder(this.gl,it);default:throw new Error(`Invalid dataType: ${ct}`)}}clearActiveTextures(){const ct=this.gl;for(let it=0;it<this.maxTextureImageUnits;++it)ct.activeTexture(ct.TEXTURE0+it),ct.bindTexture(ct.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const ct=this.gl;ct.bindFramebuffer(ct.FRAMEBUFFER,null),ct.deleteFramebuffer(this.framebuffer),ct.bindBuffer(ct.ARRAY_BUFFER,null),ct.deleteBuffer(this.vertexbuffer),ct.bindBuffer(ct.ELEMENT_ARRAY_BUFFER,null),ct.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const ct=this.gl,it=ct.createBuffer();if(!it)throw new Error("createBuffer() returned null");const rt=this.createDefaultGeometry();return ct.bindBuffer(ct.ARRAY_BUFFER,it),ct.bufferData(ct.ARRAY_BUFFER,rt,ct.STATIC_DRAW),this.checkError(),it}createFramebuffer(){const ct=this.gl.createFramebuffer();if(!ct)throw new Error("createFramebuffer returned null");return ct}queryVitalParameters(){const ct=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=ct.getParameter(ct.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=ct.getParameter(ct.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const ct=this.gl,it=ct.createTexture();ct.bindTexture(ct.TEXTURE_2D,it);const rt=this.version===2?ct.RGBA32F:ct.RGBA;ct.texImage2D(ct.TEXTURE_2D,0,rt,1,1,0,ct.RGBA,ct.FLOAT,null);const lt=ct.createFramebuffer();ct.bindFramebuffer(ct.FRAMEBUFFER,lt),ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,it,0);const ut=ct.checkFramebufferStatus(ct.FRAMEBUFFER)===ct.FRAMEBUFFER_COMPLETE;return ct.bindTexture(ct.TEXTURE_2D,null),ct.bindFramebuffer(ct.FRAMEBUFFER,null),ct.deleteTexture(it),ct.deleteFramebuffer(lt),ut}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const ct=this.gl;let it,rt,lt,ut,pt;try{it=ct.createTexture(),rt=ct.createFramebuffer(),ct.bindTexture(ct.TEXTURE_2D,it);const gt=this.version===2?ct.RGBA32F:ct.RGBA;return ct.texImage2D(ct.TEXTURE_2D,0,gt,1,1,0,ct.RGBA,ct.FLOAT,null),ct.bindFramebuffer(ct.FRAMEBUFFER,rt),ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,it,0),ct.enable(ct.BLEND),lt=ct.createShader(ct.VERTEX_SHADER),!!lt&&(ct.shaderSource(lt,"void main(){}"),ct.compileShader(lt),ut=ct.createShader(ct.FRAGMENT_SHADER),!!ut&&(ct.shaderSource(ut,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),ct.compileShader(ut),pt=ct.createProgram(),!!pt&&(ct.attachShader(pt,lt),ct.attachShader(pt,ut),ct.linkProgram(pt),ct.useProgram(pt),ct.drawArrays(ct.POINTS,0,1),ct.getError()===ct.NO_ERROR)))}finally{ct.disable(ct.BLEND),pt&&ct.deleteProgram(pt),lt&&ct.deleteShader(lt),ut&&ct.deleteShader(ut),rt&&(ct.bindFramebuffer(ct.FRAMEBUFFER,null),ct.deleteFramebuffer(rt)),it&&(ct.bindTexture(ct.TEXTURE_2D,null),ct.deleteTexture(it))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const ct=this.gl,it=this.disjointTimerQueryWebgl2Extension,rt=ct.createQuery();return ct.beginQuery(it.TIME_ELAPSED_EXT,rt),rt}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ct=this.gl,it=this.disjointTimerQueryWebgl2Extension;ct.endQuery(it.TIME_ELAPSED_EXT)}}isTimerResultAvailable(ct){let it=!1,rt=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const lt=this.gl,ut=this.disjointTimerQueryWebgl2Extension;it=lt.getQueryParameter(ct,lt.QUERY_RESULT_AVAILABLE),rt=lt.getParameter(ut.GPU_DISJOINT_EXT)}return it&&!rt}getTimerResult(ct){let it=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const rt=this.gl;it=rt.getQueryParameter(ct,rt.QUERY_RESULT),rt.deleteQuery(ct)}return it/1e6}async waitForQueryAndGetTime(ct){return await(0,ft.repeatedTry)(()=>this.isTimerResultAvailable(ct)),this.getTimerResult(ct)}async createAndWaitForFence(){const ct=this.createFence(this.gl);return this.pollFence(ct)}createFence(ct){let it;const rt=ct,lt=rt.fenceSync(rt.SYNC_GPU_COMMANDS_COMPLETE,0);return ct.flush(),it=lt===null?()=>!0:()=>{const ut=rt.clientWaitSync(lt,0,0);return ut===rt.ALREADY_SIGNALED||ut===rt.CONDITION_SATISFIED},{query:lt,isFencePassed:it}}async pollFence(ct){return new Promise(it=>{this.addItemToPoll(()=>ct.isFencePassed(),()=>it())})}pollItems(){const ct=ht(this.itemsToPoll.map(it=>it.isDoneFn));for(let it=0;it<=ct;++it){const{resolveFn:rt}=this.itemsToPoll[it];rt()}this.itemsToPoll=this.itemsToPoll.slice(ct+1)}async addItemToPoll(ct,it){this.itemsToPoll.push({isDoneFn:ct,resolveFn:it}),this.itemsToPoll.length>1||await(0,ft.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.ExecutionPlan=void 0;const nt=tt(6231);class st{constructor(at,dt){this.op=at,this.node=dt}}_e.ExecutionPlan=class{constructor(ot,at,dt){this.graph=ot,this.profiler=dt,this.initialize(at)}initialize(ot){this.profiler.event("session","ExecutionPlan.initialize",()=>{const at=this.graph.getNodes();if(at.length!==ot.length)throw new Error("The size of nodes and OPs do not match.");this._ops=ot.map((dt,ft)=>new st(dt,at[ft])),this.reset(),this._starter=[],this._ops.forEach((dt,ft)=>{let ht=!0;for(const ct of dt.node.inputs)if(!this._values[ct]&&this.graph.getInputIndices().indexOf(ct)===-1){ht=!1;break}ht&&this._starter.push(ft)})})}reset(){this._values=this.graph.getValues().map(ot=>ot.tensor)}async execute(ot,at){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const dt=ot.createInferenceHandler(),ft=this.graph.getInputIndices();if(at.length!==ft.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${at.length} expected: ${ft.length}`);at.forEach((ut,pt)=>{const gt=ft[pt];this._values[gt]=ut});const ht=this._starter.slice(0),ct=this.graph.getValues(),it=this.graph.getNodes();let rt=0;for(;rt<ht.length;){const ut=ht[rt++],pt=this._ops[ut],gt=pt.node.inputs.map(wt=>this._values[wt]);if(gt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${pt.node}`);const mt=gt;nt.Logger.verbose("ExecPlan",`Runing op:${pt.node.name} (${mt.map((wt,xt)=>`'${pt.node.inputs[xt]}': ${wt.type}[${wt.dims.join(",")}]`).join(", ")})`);const yt=await this.profiler.event("node",pt.node.name,async()=>pt.op.impl(dt,mt,pt.op.context));if(yt.length!==pt.node.outputs.length)throw new Error("the size of output does not match model definition.");yt.forEach((wt,xt)=>{const Tt=pt.node.outputs[xt];if(this._values[Tt])throw new Error(`output [${Tt}] already has value: op:${pt.node.name}`);this._values[Tt]=wt});const bt=new Set;yt.forEach((wt,xt)=>{const Tt=pt.node.outputs[xt];for(const St of ct[Tt].to){const Pt=it[St];let vt=!0;for(const At of Pt.inputs)if(!this._values[At]){vt=!1;break}vt&&bt.add(St)}}),ht.push(...bt)}const lt=[];for(let ut=0;ut<this.graph.getOutputIndices().length;ut++){const pt=this.graph.getOutputIndices()[ut],gt=this._values[pt];if(gt===void 0)throw new Error(`required output [${pt}] does not have value`);pt===0?await gt.getData():gt.data,lt.push(gt)}return nt.Logger.verbose("ExecPlan","disposing of inferenceHandler"),dt.dispose(),lt})}}},7070:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.Graph=void 0;const nt=tt(1446),st=tt(7778),ot=tt(9395),at=tt(9162),dt=tt(2517);var ft=ot.onnxruntime.experimental.fbs;_e.Graph={from:(rt,lt)=>new it(rt,lt)};class ht{constructor(lt){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,lt&&(this.type=dt.ProtoUtil.tensorValueTypeFromProto(lt.type.tensorType))}get from(){return this._from}get to(){return this._to}}class ct{constructor(lt,ut){lt instanceof nt.onnx.NodeProto?(this.name=lt.name,this.opType=lt.opType,this.attributes=new st.Attribute(lt.attribute)):lt instanceof ft.Node&&(this.name=ut??lt.name(),this.opType=lt.opType(),this.attributes=new st.Attribute(dt.ProtoUtil.tensorAttributesFromORTFormat(lt))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class it{constructor(lt,ut){if(!lt)throw new TypeError("graph is empty");this.buildGraph(lt),this.transformGraph(ut),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(lt){if(lt instanceof nt.onnx.GraphProto)this.buildGraphFromOnnxFormat(lt);else{if(!(lt instanceof ft.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(lt)}}buildGraphFromOnnxFormat(lt){const ut=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const pt=new Map;if(!lt.input)throw new Error("missing information in graph: input");const gt=[];for(const mt of lt.input){if(ut.has(mt.name))throw new Error(`duplicated input name: ${mt.name}`);const yt=this._allData.push(new ht(mt))-1;ut.set(mt.name,yt),gt.push(mt.name)}if(!lt.initializer)throw new Error("missing information in graph: initializer");for(const mt of lt.initializer){let yt=ut.get(mt.name);if(yt===void 0){const bt=new ht;bt.type={shape:{dims:dt.ProtoUtil.tensorDimsFromProto(mt.dims)},tensorType:dt.ProtoUtil.tensorDataTypeFromProto(mt.dataType)},yt=this._allData.push(bt)-1,ut.set(mt.name,yt)}this._allData[yt]._from=-1,this._allData[yt].tensor=at.Tensor.fromProto(mt)}for(let mt=0;mt<this._allData.length;mt++)this._allData[mt].tensor||(this._allInputIndices.push(mt),this._allInputNames.push(gt[mt]));if(!lt.output)throw new Error("missing information in graph: output");for(const mt of lt.output){if(ut.has(mt.name))throw new Error(`duplicated output name: ${mt.name}`);const yt=this._allData.push(new ht(mt))-1;ut.set(mt.name,yt),this._allOutputIndices.push(yt),this._allOutputNames.push(mt.name)}if(!lt.node)throw new Error("missing information in graph: node");for(const mt of lt.node){if(!mt.name)for(let bt=0;;bt++){const wt=`unnamed_${mt.opType}_${bt}`;if(!pt.has(wt)){mt.name=wt;break}}if(pt.has(mt.name))throw new Error(`duplicated node name: ${mt.name}`);const yt=this._nodes.push(new ct(mt))-1;pt.set(mt.name,yt)}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=lt.node[mt];if(!bt.output)throw new Error(`missing output for node: ${bt.name}`);for(const wt of bt.output){let xt=ut.get(wt);if(xt===void 0&&(xt=this._allData.push(new ht)-1,ut.set(wt,xt)),yt.outputs.push(xt),this._allData[xt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${xt}`);if(this._allData[xt]._from=mt,bt.opType==="Constant"){if(!bt.attribute||bt.attribute.length!==1||!bt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!bt.output||bt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");yt.outputs.pop(),yt.executeNode=!1,this._allData[xt]._from=-1,this._allData[xt].tensor=at.Tensor.fromProto(bt.attribute[0].t)}}}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=lt.node[mt];if(!bt.input)throw new Error(`missing input for node: ${bt.name}`);for(const wt of bt.input){const xt=ut.get(wt);if(xt===void 0){if(wt===""&&bt.input.length===3&&bt.opType==="Resize")continue;throw new Error(`unrecognized input '${wt}' for node: ${bt.name}`)}yt.inputs.push(xt),this._allData[xt]._to.push(mt)}}return!0}buildGraphFromOrtFormat(lt){var ut,pt,gt;const mt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const yt=new Map,bt=[];for(let wt=0;wt<lt.inputsLength();wt++){const xt=lt.inputs(wt);if(mt.has(xt))throw new Error(`duplicated input name: ${xt}`);for(let Tt=0;Tt<lt.nodeArgsLength();Tt++)if(((ut=lt.nodeArgs(Tt))===null||ut===void 0?void 0:ut.name())===xt){const St=new ht;if(((gt=(pt=lt.nodeArgs(Tt))===null||pt===void 0?void 0:pt.type())===null||gt===void 0?void 0:gt.valueType())!==ft.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Pt=lt.nodeArgs(Tt).type().value(new ft.TensorTypeAndShape),vt=dt.ProtoUtil.tensorDataTypeFromProto(Pt.elemType()),At=Pt.shape(),It=[];for(let Lt=0;Lt<At.dimLength();Lt++)It.push(dt.LongUtil.longToNumber(At.dim(Lt).value().dimValue()));St.type={shape:{dims:It},tensorType:vt};const jt=this._allData.push(St)-1;mt.set(xt,jt),bt.push(xt)}}for(let wt=0;wt<lt.initializersLength();wt++){const xt=lt.initializers(wt);let Tt=mt.get(xt.name());if(Tt===void 0){const St=new ht,Pt=dt.ProtoUtil.tensorDimsFromORTFormat(xt),vt=dt.ProtoUtil.tensorDataTypeFromProto(xt.dataType());St.type={shape:{dims:Pt},tensorType:vt},Tt=this._allData.push(St)-1,mt.set(xt.name(),Tt)}this._allData[Tt]._from=-1,this._allData[Tt].tensor=at.Tensor.fromOrtTensor(xt)}for(let wt=0;wt<this._allData.length;wt++)this._allData[wt].tensor||(this._allInputIndices.push(wt),this._allInputNames.push(bt[wt]));for(let wt=0;wt<lt.outputsLength();wt++){const xt=lt.outputs(wt);if(mt.has(xt))throw new Error(`duplicated output name: ${xt}`);const Tt=this._allData.push(new ht)-1;mt.set(xt,Tt),this._allOutputIndices.push(Tt),this._allOutputNames.push(xt)}if(!lt.nodes)throw new Error("missing information in graph: node");for(let wt=0;wt<lt.nodesLength();wt++){const xt=lt.nodes(wt);let Tt=xt.name();if(!Tt)for(let Pt=0;Tt=`unnamed_${xt.opType()}_${Pt}`,yt.has(Tt);Pt++);if(yt.has(Tt))throw new Error(`duplicated node name: ${Tt}`);const St=this._nodes.push(new ct(xt,Tt))-1;yt.set(Tt,St)}for(let wt=0;wt<this._nodes.length;wt++){const xt=this._nodes[wt],Tt=lt.nodes(wt);if(Tt==null)throw new Error(`No node exists at index ${wt}`);if((Tt==null?void 0:Tt.outputsLength())===0)throw new Error(`missing output for node: ${Tt.name}`);for(let St=0;St<(Tt==null?void 0:Tt.outputsLength());St++){const Pt=Tt==null?void 0:Tt.outputs(St);let vt=mt.get(Pt);if(vt===void 0&&(vt=this._allData.push(new ht)-1,mt.set(Pt,vt)),xt.outputs.push(vt),this._allData[vt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${vt}`);if(this._allData[vt]._from=wt,Tt.opType()==="Constant"){if(Tt.attributesLength()!==1||!Tt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Tt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");xt.outputs.pop(),xt.executeNode=!1,this._allData[vt]._from=-1,this._allData[vt].tensor=at.Tensor.fromOrtTensor(Tt.attributes(0).t())}}}for(let wt=0;wt<this._nodes.length;wt++){const xt=this._nodes[wt],Tt=lt.nodes(wt);if(Tt.inputsLength()===0)throw new Error(`missing input for node: ${Tt.name}`);for(let St=0;St<Tt.inputsLength();St++){const Pt=Tt.inputs(St),vt=mt.get(Pt);if(vt===void 0)throw new Error(`unrecognized input '${Pt}' for node: ${Tt.name()}`);xt.inputs.push(vt),this._allData[vt]._to.push(wt)}}}checkIsAcyclic(){const lt=new Set;this._allInputIndices.forEach(gt=>{this._allData[gt]._to.forEach(mt=>{lt.add(mt)})});const ut=Array.from(lt),pt=new Array(this._nodes.length).fill("white");for(;ut.length>0;){const gt=ut.pop();pt[gt]==="gray"?pt[gt]="black":(ut.push(gt),pt[gt]="gray",this._nodes[gt].outputs.forEach(mt=>{const yt=this._allData[mt];if(yt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(yt._from!==gt)throw new Error("from property of the Value object doesn't match index of Node being processed");yt._to.forEach(bt=>{if(pt[bt]==="gray")throw new Error("model graph is cyclic");pt[bt]==="white"&&ut.push(bt)})}))}}transformGraph(lt){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),lt&&lt.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let lt=0;for(let ut=0;ut<this._nodes.length;ut++)this._nodes[ut].executeNode?lt>0&&(this._nodes[ut].inputs.forEach(pt=>{const gt=this._allData[pt]._to.indexOf(ut+lt);gt!==-1&&(this._allData[pt]._to[gt]=ut)}),this._nodes[ut].outputs.forEach(pt=>{this._allData[pt]._from&&this._allData[pt]._from===ut+lt&&(this._allData[pt]._from=ut)})):(lt++,this._nodes[ut].outputs.forEach(pt=>{this._allData[pt]._from=-2}),this._nodes.splice(ut,1),ut--);lt=0;for(let ut=0;ut<this._allData.length;ut++)if(this._allData[ut].from!==-2||this._allOutputIndices.indexOf(ut+lt)!==-1){if(lt>0){let pt=-1;this._allData[ut].from!==void 0&&this._allData[ut].from!==-1?(pt=this._nodes[this._allData[ut].from].outputs.indexOf(ut+lt),pt!==-1&&(this._nodes[this._allData[ut].from].outputs[pt]=ut)):(pt=this._allInputIndices.indexOf(ut+lt),pt!==-1&&(this._allInputIndices[pt]=ut)),this._allData[ut].to.forEach(gt=>{pt=this._nodes[gt].inputs.indexOf(ut+lt),pt!==-1&&(this._nodes[gt].inputs[pt]=ut)}),this._allData[ut].to.length===0&&(pt=this._allOutputIndices.indexOf(ut+lt),pt!==-1&&(this._allOutputIndices[pt]=ut))}}else lt++,this._allData.splice(ut,1),ut--}deleteNode(lt){const ut=this._nodes[lt];if(ut.outputs.length>1){for(let wt=1;wt<ut.outputs.length;wt++)if(this._allData[ut.outputs[wt]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ut.executeNode=!1;const pt=ut.inputs[0],gt=ut.outputs[0],mt=this._allData[gt].to,yt=this._allData[pt].to.indexOf(lt);if(yt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[pt].to.splice(yt,1),this._allData[gt]._to=[];const bt=this._allOutputIndices.indexOf(gt);if(bt!==-1&&(this._allOutputIndices[bt]=pt),mt&&mt.length>0)for(const wt of mt){const xt=this._nodes[wt].inputs.indexOf(gt);if(xt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[wt].inputs[xt]=pt,this._allData[pt].to.push(wt)}}removeAllDropoutNodes(){let lt=0;for(const ut of this._nodes){if(ut.opType==="Dropout"){if(ut.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ut.outputs.length!==1&&ut.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ut.outputs.length===2&&this._allData[ut.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(lt)}lt++}}removeAllIdentityNodes(){let lt=0;for(const ut of this._nodes)ut.opType==="Identity"&&this.deleteNode(lt),lt++}isActivation(lt){switch(lt.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const lt of this._nodes)if(lt.opType==="Conv"){const ut=this._allData[lt.outputs[0]]._to;if(ut.length===1&&this.isActivation(this._nodes[ut[0]])){const pt=this._nodes[ut[0]];if(pt.opType==="Clip")if(pt.inputs.length===1)try{lt.attributes.set("activation_params","floats",[pt.attributes.getFloat("min"),pt.attributes.getFloat("max")])}catch{lt.attributes.set("activation_params","floats",[dt.MIN_CLIP,dt.MAX_CLIP])}else{if(!(pt.inputs.length>=3&&this._allData[pt.inputs[1]].tensor!==void 0&&this._allData[pt.inputs[2]].tensor!==void 0))continue;lt.attributes.set("activation_params","floats",[this._allData[pt.inputs[1]].tensor.floatData[0],this._allData[pt.inputs[2]].tensor.floatData[0]])}lt.attributes.set("activation","string",pt.opType),this.deleteNode(ut[0])}}}}},6231:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.now=_e.Profiler=_e.Logger=void 0;const tt={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},nt={none:new class{log(ct,it,rt){}},console:new class{log(ct,it,rt){console.log(`${this.color(ct)} ${rt?"\x1B[35m"+rt+"\x1B[0m ":""}${it}`)}color(ct){switch(ct){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${ct}`)}}}},st={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let ot={"":st};function at(ct,it,rt,lt){if(it===void 0)return ut=ct,{verbose:at.verbose.bind(null,ut),info:at.info.bind(null,ut),warning:at.warning.bind(null,ut),error:at.error.bind(null,ut),fatal:at.fatal.bind(null,ut)};if(rt===void 0)dt(ct,it);else if(typeof rt=="number"&&lt===void 0)dt(ct,it);else if(typeof rt=="string"&&lt===void 0)dt(ct,rt,0,it);else{if(typeof rt!="string"||typeof lt!="number")throw new TypeError("input is valid");dt(ct,rt,0,it)}var ut}function dt(ct,it,rt,lt){const ut=ot[lt||""]||ot[""];tt[ct]<tt[ut.minimalSeverity]||(ut.logDateTime&&(it=`${new Date().toISOString()}|${it}`),ut.logSourceLocation,nt[ut.provider].log(ct,it,lt))}(function(ct){function it(lt){ot={},rt("",lt||{})}function rt(lt,ut){if(lt==="*")it(ut);else{const pt=ot[lt]||st;ot[lt]={provider:ut.provider||pt.provider,minimalSeverity:ut.minimalSeverity||pt.minimalSeverity,logDateTime:ut.logDateTime===void 0?pt.logDateTime:ut.logDateTime,logSourceLocation:ut.logSourceLocation===void 0?pt.logSourceLocation:ut.logSourceLocation}}}ct.verbose=function(lt,ut){ct("verbose",lt,ut)},ct.info=function(lt,ut){ct("info",lt,ut)},ct.warning=function(lt,ut){ct("warning",lt,ut)},ct.error=function(lt,ut){ct("error",lt,ut)},ct.fatal=function(lt,ut){ct("fatal",lt,ut)},ct.reset=it,ct.set=rt,ct.setWithEnv=function(lt){const ut={};lt.logLevel&&(ut.minimalSeverity=lt.logLevel),rt("",ut)}})(at||(at={})),_e.Logger=at;class ft{constructor(it,rt,lt,ut,pt,gt){this.category=it,this.name=rt,this.startTime=lt,this.endCallback=ut,this.timer=pt,this.ctx=gt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class ht{constructor(it,rt,lt,ut){this.category=it,this.name=rt,this.startTime=lt,this.endTime=ut}}_e.Profiler=class{static create(ct){return ct===void 0?new this:new this(ct.maxNumberEvents,ct.flushBatchSize,ct.flushIntervalInMilliseconds)}constructor(ct,it,rt){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=ct===void 0?1e4:ct,this._flushBatchSize=it===void 0?10:it,this._flushIntervalInMilliseconds=rt===void 0?5e3:rt}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(ct,it,rt,lt){const ut=this._started?this.begin(ct,it,lt):void 0;let pt=!1;const gt=rt();if(gt&&typeof gt.then=="function")return pt=!0,new Promise((mt,yt)=>{gt.then(async bt=>{ut&&await ut.end(),mt(bt)},async bt=>{ut&&await ut.end(),yt(bt)})});if(!pt&&ut){const mt=ut.end();if(mt&&typeof mt.then=="function")return new Promise((yt,bt)=>{mt.then(()=>{yt(gt)},wt=>{bt(wt)})})}return gt}begin(ct,it,rt){if(!this._started)throw new Error("profiler is not started yet");if(rt===void 0){const lt=(0,_e.now)();return this.flush(lt),new ft(ct,it,lt,ut=>this.endSync(ut))}{const lt=rt.beginTimer();return new ft(ct,it,0,async ut=>this.end(ut),lt,rt)}}async end(ct){const it=await ct.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ht(ct.category,ct.name,ct.startTime,it)),this.flush(it))}endSync(ct){const it=(0,_e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ht(ct.category,ct.name,ct.startTime,it)),this.flush(it))}logOneEvent(ct){_e.Logger.verbose(`Profiler.${ct.category}`,`${(ct.endTime-ct.startTime).toFixed(2)}ms on event '${ct.name}' at ${ct.endTime.toFixed(2)}`)}flush(ct){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||ct-this._flushTime>=this._flushIntervalInMilliseconds){for(const it=this._flushPointer;this._flushPointer<it+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_e.now)()}}get started(){return this._started}},_e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.Model=void 0;const nt=tt(5686),st=tt(1446),ot=tt(7070),at=tt(9395),dt=tt(2517);var ft=at.onnxruntime.experimental.fbs;_e.Model=class{constructor(){}load(ht,ct,it){if(!it)try{return void this.loadFromOnnxFormat(ht,ct)}catch(rt){if(it!==void 0)throw rt}this.loadFromOrtFormat(ht,ct)}loadFromOnnxFormat(ht,ct){const it=st.onnx.ModelProto.decode(ht);if(dt.LongUtil.longToNumber(it.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=it.opsetImport.map(rt=>({domain:rt.domain,version:dt.LongUtil.longToNumber(rt.version)})),this._graph=ot.Graph.from(it.graph,ct)}loadFromOrtFormat(ht,ct){const it=new nt.flatbuffers.ByteBuffer(ht),rt=ft.InferenceSession.getRootAsInferenceSession(it).model();if(dt.LongUtil.longToNumber(rt.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let lt=0;lt<rt.opsetImportLength();lt++){const ut=rt.opsetImport(lt);this._opsets.push({domain:ut==null?void 0:ut.domain(),version:dt.LongUtil.longToNumber(ut.version())})}this._graph=ot.Graph.from(rt.graph(),ct)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.FLOAT_TYPES=_e.INT_TYPES=_e.NUMBER_TYPES=void 0,_e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_e.FLOAT_TYPES=["float32","float64"]},1047:(et,_e)=>{function tt(nt,st){if(st.endsWith("+")){const ot=Number.parseInt(st.substring(0,st.length-1),10);return!isNaN(ot)&&ot<=nt}if(st.split("-").length===2){const ot=st.split("-"),at=Number.parseInt(ot[0],10),dt=Number.parseInt(ot[1],10);return!isNaN(at)&&!isNaN(dt)&&at<=nt&&nt<=dt}return Number.parseInt(st,10)===nt}Object.defineProperty(_e,"__esModule",{value:!0}),_e.resolveOperator=void 0,_e.resolveOperator=function(nt,st,ot){for(const at of ot){const dt=at[0],ft=at[1],ht=at[2],ct=at[3],it=at[4];if(nt.opType===dt){for(const rt of st)if((rt.domain===ft||rt.domain==="ai.onnx"&&ft==="")&&tt(rt.version,ht))return{opImpl:ct,opInit:it}}}throw new TypeError(`cannot resolve operator '${nt.opType}' with opsets: ${st.map(at=>`${at.domain||"ai.onnx"} v${at.version}`).join(", ")}`)}},9395:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.onnxruntime=void 0;const nt=tt(5686);var st,ot;st=_e.onnxruntime||(_e.onnxruntime={}),function(at){(function(dt){dt[dt.UNDEFINED=0]="UNDEFINED",dt[dt.FLOAT=1]="FLOAT",dt[dt.INT=2]="INT",dt[dt.STRING=3]="STRING",dt[dt.TENSOR=4]="TENSOR",dt[dt.GRAPH=5]="GRAPH",dt[dt.FLOATS=6]="FLOATS",dt[dt.INTS=7]="INTS",dt[dt.STRINGS=8]="STRINGS",dt[dt.TENSORS=9]="TENSORS",dt[dt.GRAPHS=10]="GRAPHS",dt[dt.SPARSE_TENSOR=11]="SPARSE_TENSOR",dt[dt.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(at.AttributeType||(at.AttributeType={}))}((ot=st.experimental||(st.experimental={})).fbs||(ot.fbs={})),function(at){(function(dt){(function(ft){(function(ht){ht[ht.UNKNOWN=0]="UNKNOWN",ht[ht.VALUE=1]="VALUE",ht[ht.PARAM=2]="PARAM"})(ft.DimensionValueType||(ft.DimensionValueType={}))})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){(function(ht){ht[ht.UNDEFINED=0]="UNDEFINED",ht[ht.FLOAT=1]="FLOAT",ht[ht.UINT8=2]="UINT8",ht[ht.INT8=3]="INT8",ht[ht.UINT16=4]="UINT16",ht[ht.INT16=5]="INT16",ht[ht.INT32=6]="INT32",ht[ht.INT64=7]="INT64",ht[ht.STRING=8]="STRING",ht[ht.BOOL=9]="BOOL",ht[ht.FLOAT16=10]="FLOAT16",ht[ht.DOUBLE=11]="DOUBLE",ht[ht.UINT32=12]="UINT32",ht[ht.UINT64=13]="UINT64",ht[ht.COMPLEX64=14]="COMPLEX64",ht[ht.COMPLEX128=15]="COMPLEX128",ht[ht.BFLOAT16=16]="BFLOAT16"})(ft.TensorDataType||(ft.TensorDataType={}))})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){(function(ht){ht[ht.Primitive=0]="Primitive",ht[ht.Fused=1]="Fused"})(ft.NodeType||(ft.NodeType={}))})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){(function(ht){ht[ht.NONE=0]="NONE",ht[ht.tensor_type=1]="tensor_type",ht[ht.sequence_type=2]="sequence_type",ht[ht.map_type=3]="map_type"})(ft.TypeInfoValue||(ft.TypeInfoValue={}))})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsShape(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsShape(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}dim(it,rt){let lt=this.bb.__offset(this.bb_pos,4);return lt?(rt||new at.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}dimLength(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__vector_len(this.bb_pos+it):0}static startShape(it){it.startObject(1)}static addDim(it,rt){it.addFieldOffset(0,rt,0)}static createDimVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startDimVector(it,rt){it.startVector(4,rt,4)}static endShape(it){return it.endObject()}static createShape(it,rt){return ht.startShape(it),ht.addDim(it,rt),ht.endShape(it)}}ft.Shape=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsDimension(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsDimension(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}value(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?(it||new at.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}denotation(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.__string(this.bb_pos+rt,it):null}static startDimension(it){it.startObject(2)}static addValue(it,rt){it.addFieldOffset(0,rt,0)}static addDenotation(it,rt){it.addFieldOffset(1,rt,0)}static endDimension(it){return it.endObject()}static createDimension(it,rt,lt){return ht.startDimension(it),ht.addValue(it,rt),ht.addDenotation(it,lt),ht.endDimension(it)}}ft.Dimension=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsDimensionValue(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsDimensionValue(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}dimType(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readInt8(this.bb_pos+it):at.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.readInt64(this.bb_pos+it):this.bb.createLong(0,0)}dimParam(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.__string(this.bb_pos+rt,it):null}static startDimensionValue(it){it.startObject(3)}static addDimType(it,rt){it.addFieldInt8(0,rt,at.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(it,rt){it.addFieldInt64(1,rt,it.createLong(0,0))}static addDimParam(it,rt){it.addFieldOffset(2,rt,0)}static endDimensionValue(it){return it.endObject()}static createDimensionValue(it,rt,lt,ut){return ht.startDimensionValue(it),ht.addDimType(it,rt),ht.addDimValue(it,lt),ht.addDimParam(it,ut),ht.endDimensionValue(it)}}ft.DimensionValue=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsTensorTypeAndShape(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsTensorTypeAndShape(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}elemType(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readInt32(this.bb_pos+it):at.experimental.fbs.TensorDataType.UNDEFINED}shape(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?(it||new at.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startTensorTypeAndShape(it){it.startObject(2)}static addElemType(it,rt){it.addFieldInt32(0,rt,at.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(it,rt){it.addFieldOffset(1,rt,0)}static endTensorTypeAndShape(it){return it.endObject()}static createTensorTypeAndShape(it,rt,lt){return ht.startTensorTypeAndShape(it),ht.addElemType(it,rt),ht.addShape(it,lt),ht.endTensorTypeAndShape(it)}}ft.TensorTypeAndShape=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsMapType(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsMapType(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}keyType(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readInt32(this.bb_pos+it):at.experimental.fbs.TensorDataType.UNDEFINED}valueType(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?(it||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startMapType(it){it.startObject(2)}static addKeyType(it,rt){it.addFieldInt32(0,rt,at.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(it,rt){it.addFieldOffset(1,rt,0)}static endMapType(it){return it.endObject()}static createMapType(it,rt,lt){return ht.startMapType(it),ht.addKeyType(it,rt),ht.addValueType(it,lt),ht.endMapType(it)}}ft.MapType=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsSequenceType(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsSequenceType(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}elemType(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?(it||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startSequenceType(it){it.startObject(1)}static addElemType(it,rt){it.addFieldOffset(0,rt,0)}static endSequenceType(it){return it.endObject()}static createSequenceType(it,rt){return ht.startSequenceType(it),ht.addElemType(it,rt),ht.endSequenceType(it)}}ft.SequenceType=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(dt.fbs||(dt.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(ft,ht){return this.bb_pos=ft,this.bb=ht,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(ft,ht,ct,it){return ft.prep(4,12),ft.writeInt32(it),ft.writeInt32(ct),ft.writeInt32(ht),ft.offset()}}})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsNodeEdge(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsNodeEdge(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}nodeIndex(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readUint32(this.bb_pos+it):0}inputEdges(it,rt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(rt||new at.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+lt)+12*it,this.bb):null}inputEdgesLength(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__vector_len(this.bb_pos+it):0}outputEdges(it,rt){let lt=this.bb.__offset(this.bb_pos,8);return lt?(rt||new at.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+lt)+12*it,this.bb):null}outputEdgesLength(){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__vector_len(this.bb_pos+it):0}static startNodeEdge(it){it.startObject(3)}static addNodeIndex(it,rt){it.addFieldInt32(0,rt,0)}static addInputEdges(it,rt){it.addFieldOffset(1,rt,0)}static startInputEdgesVector(it,rt){it.startVector(12,rt,4)}static addOutputEdges(it,rt){it.addFieldOffset(2,rt,0)}static startOutputEdgesVector(it,rt){it.startVector(12,rt,4)}static endNodeEdge(it){return it.endObject()}static createNodeEdge(it,rt,lt,ut){return ht.startNodeEdge(it),ht.addNodeIndex(it,rt),ht.addInputEdges(it,lt),ht.addOutputEdges(it,ut),ht.endNodeEdge(it)}}ft.NodeEdge=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsNode(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsNode(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}name(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}docString(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.__string(this.bb_pos+rt,it):null}domain(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.__string(this.bb_pos+rt,it):null}sinceVersion(){let it=this.bb.__offset(this.bb_pos,10);return it?this.bb.readInt32(this.bb_pos+it):0}index(){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.readUint32(this.bb_pos+it):0}opType(it){let rt=this.bb.__offset(this.bb_pos,14);return rt?this.bb.__string(this.bb_pos+rt,it):null}type(){let it=this.bb.__offset(this.bb_pos,16);return it?this.bb.readInt32(this.bb_pos+it):at.experimental.fbs.NodeType.Primitive}executionProviderType(it){let rt=this.bb.__offset(this.bb_pos,18);return rt?this.bb.__string(this.bb_pos+rt,it):null}inputs(it,rt){let lt=this.bb.__offset(this.bb_pos,20);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}inputsLength(){let it=this.bb.__offset(this.bb_pos,20);return it?this.bb.__vector_len(this.bb_pos+it):0}outputs(it,rt){let lt=this.bb.__offset(this.bb_pos,22);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}outputsLength(){let it=this.bb.__offset(this.bb_pos,22);return it?this.bb.__vector_len(this.bb_pos+it):0}attributes(it,rt){let lt=this.bb.__offset(this.bb_pos,24);return lt?(rt||new at.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}attributesLength(){let it=this.bb.__offset(this.bb_pos,24);return it?this.bb.__vector_len(this.bb_pos+it):0}inputArgCounts(it){let rt=this.bb.__offset(this.bb_pos,26);return rt?this.bb.readInt32(this.bb.__vector(this.bb_pos+rt)+4*it):0}inputArgCountsLength(){let it=this.bb.__offset(this.bb_pos,26);return it?this.bb.__vector_len(this.bb_pos+it):0}inputArgCountsArray(){let it=this.bb.__offset(this.bb_pos,26);return it?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+it),this.bb.__vector_len(this.bb_pos+it)):null}implicitInputs(it,rt){let lt=this.bb.__offset(this.bb_pos,28);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}implicitInputsLength(){let it=this.bb.__offset(this.bb_pos,28);return it?this.bb.__vector_len(this.bb_pos+it):0}static startNode(it){it.startObject(13)}static addName(it,rt){it.addFieldOffset(0,rt,0)}static addDocString(it,rt){it.addFieldOffset(1,rt,0)}static addDomain(it,rt){it.addFieldOffset(2,rt,0)}static addSinceVersion(it,rt){it.addFieldInt32(3,rt,0)}static addIndex(it,rt){it.addFieldInt32(4,rt,0)}static addOpType(it,rt){it.addFieldOffset(5,rt,0)}static addType(it,rt){it.addFieldInt32(6,rt,at.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(it,rt){it.addFieldOffset(7,rt,0)}static addInputs(it,rt){it.addFieldOffset(8,rt,0)}static createInputsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startInputsVector(it,rt){it.startVector(4,rt,4)}static addOutputs(it,rt){it.addFieldOffset(9,rt,0)}static createOutputsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startOutputsVector(it,rt){it.startVector(4,rt,4)}static addAttributes(it,rt){it.addFieldOffset(10,rt,0)}static createAttributesVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startAttributesVector(it,rt){it.startVector(4,rt,4)}static addInputArgCounts(it,rt){it.addFieldOffset(11,rt,0)}static createInputArgCountsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addInt32(rt[lt]);return it.endVector()}static startInputArgCountsVector(it,rt){it.startVector(4,rt,4)}static addImplicitInputs(it,rt){it.addFieldOffset(12,rt,0)}static createImplicitInputsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startImplicitInputsVector(it,rt){it.startVector(4,rt,4)}static endNode(it){return it.endObject()}static createNode(it,rt,lt,ut,pt,gt,mt,yt,bt,wt,xt,Tt,St,Pt){return ht.startNode(it),ht.addName(it,rt),ht.addDocString(it,lt),ht.addDomain(it,ut),ht.addSinceVersion(it,pt),ht.addIndex(it,gt),ht.addOpType(it,mt),ht.addType(it,yt),ht.addExecutionProviderType(it,bt),ht.addInputs(it,wt),ht.addOutputs(it,xt),ht.addAttributes(it,Tt),ht.addInputArgCounts(it,St),ht.addImplicitInputs(it,Pt),ht.endNode(it)}}ft.Node=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsValueInfo(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsValueInfo(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}name(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}docString(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.__string(this.bb_pos+rt,it):null}type(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?(it||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startValueInfo(it){it.startObject(3)}static addName(it,rt){it.addFieldOffset(0,rt,0)}static addDocString(it,rt){it.addFieldOffset(1,rt,0)}static addType(it,rt){it.addFieldOffset(2,rt,0)}static endValueInfo(it){return it.endObject()}static createValueInfo(it,rt,lt,ut){return ht.startValueInfo(it),ht.addName(it,rt),ht.addDocString(it,lt),ht.addType(it,ut),ht.endValueInfo(it)}}ft.ValueInfo=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsTypeInfo(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsTypeInfo(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}denotation(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}valueType(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.readUint8(this.bb_pos+it):at.experimental.fbs.TypeInfoValue.NONE}value(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.__union(it,this.bb_pos+rt):null}static startTypeInfo(it){it.startObject(3)}static addDenotation(it,rt){it.addFieldOffset(0,rt,0)}static addValueType(it,rt){it.addFieldInt8(1,rt,at.experimental.fbs.TypeInfoValue.NONE)}static addValue(it,rt){it.addFieldOffset(2,rt,0)}static endTypeInfo(it){return it.endObject()}static createTypeInfo(it,rt,lt,ut){return ht.startTypeInfo(it),ht.addDenotation(it,rt),ht.addValueType(it,lt),ht.addValue(it,ut),ht.endTypeInfo(it)}}ft.TypeInfo=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsOperatorSetId(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsOperatorSetId(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}domain(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}version(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.readInt64(this.bb_pos+it):this.bb.createLong(0,0)}static startOperatorSetId(it){it.startObject(2)}static addDomain(it,rt){it.addFieldOffset(0,rt,0)}static addVersion(it,rt){it.addFieldInt64(1,rt,it.createLong(0,0))}static endOperatorSetId(it){return it.endObject()}static createOperatorSetId(it,rt,lt){return ht.startOperatorSetId(it),ht.addDomain(it,rt),ht.addVersion(it,lt),ht.endOperatorSetId(it)}}ft.OperatorSetId=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsTensor(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsTensor(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}name(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}docString(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.__string(this.bb_pos+rt,it):null}dims(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.readInt64(this.bb.__vector(this.bb_pos+rt)+8*it):this.bb.createLong(0,0)}dimsLength(){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__vector_len(this.bb_pos+it):0}dataType(){let it=this.bb.__offset(this.bb_pos,10);return it?this.bb.readInt32(this.bb_pos+it):at.experimental.fbs.TensorDataType.UNDEFINED}rawData(it){let rt=this.bb.__offset(this.bb_pos,12);return rt?this.bb.readUint8(this.bb.__vector(this.bb_pos+rt)+it):0}rawDataLength(){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.__vector_len(this.bb_pos+it):0}rawDataArray(){let it=this.bb.__offset(this.bb_pos,12);return it?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+it),this.bb.__vector_len(this.bb_pos+it)):null}stringData(it,rt){let lt=this.bb.__offset(this.bb_pos,14);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}stringDataLength(){let it=this.bb.__offset(this.bb_pos,14);return it?this.bb.__vector_len(this.bb_pos+it):0}static startTensor(it){it.startObject(6)}static addName(it,rt){it.addFieldOffset(0,rt,0)}static addDocString(it,rt){it.addFieldOffset(1,rt,0)}static addDims(it,rt){it.addFieldOffset(2,rt,0)}static createDimsVector(it,rt){it.startVector(8,rt.length,8);for(let lt=rt.length-1;lt>=0;lt--)it.addInt64(rt[lt]);return it.endVector()}static startDimsVector(it,rt){it.startVector(8,rt,8)}static addDataType(it,rt){it.addFieldInt32(3,rt,at.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(it,rt){it.addFieldOffset(4,rt,0)}static createRawDataVector(it,rt){it.startVector(1,rt.length,1);for(let lt=rt.length-1;lt>=0;lt--)it.addInt8(rt[lt]);return it.endVector()}static startRawDataVector(it,rt){it.startVector(1,rt,1)}static addStringData(it,rt){it.addFieldOffset(5,rt,0)}static createStringDataVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startStringDataVector(it,rt){it.startVector(4,rt,4)}static endTensor(it){return it.endObject()}static createTensor(it,rt,lt,ut,pt,gt,mt){return ht.startTensor(it),ht.addName(it,rt),ht.addDocString(it,lt),ht.addDims(it,ut),ht.addDataType(it,pt),ht.addRawData(it,gt),ht.addStringData(it,mt),ht.endTensor(it)}}ft.Tensor=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsSparseTensor(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsSparseTensor(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}values(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?(it||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}indices(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?(it||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}dims(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.readInt64(this.bb.__vector(this.bb_pos+rt)+8*it):this.bb.createLong(0,0)}dimsLength(){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__vector_len(this.bb_pos+it):0}static startSparseTensor(it){it.startObject(3)}static addValues(it,rt){it.addFieldOffset(0,rt,0)}static addIndices(it,rt){it.addFieldOffset(1,rt,0)}static addDims(it,rt){it.addFieldOffset(2,rt,0)}static createDimsVector(it,rt){it.startVector(8,rt.length,8);for(let lt=rt.length-1;lt>=0;lt--)it.addInt64(rt[lt]);return it.endVector()}static startDimsVector(it,rt){it.startVector(8,rt,8)}static endSparseTensor(it){return it.endObject()}static createSparseTensor(it,rt,lt,ut){return ht.startSparseTensor(it),ht.addValues(it,rt),ht.addIndices(it,lt),ht.addDims(it,ut),ht.endSparseTensor(it)}}ft.SparseTensor=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsAttribute(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsAttribute(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}name(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}docString(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.__string(this.bb_pos+rt,it):null}type(){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.readInt32(this.bb_pos+it):at.experimental.fbs.AttributeType.UNDEFINED}f(){let it=this.bb.__offset(this.bb_pos,10);return it?this.bb.readFloat32(this.bb_pos+it):0}i(){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.readInt64(this.bb_pos+it):this.bb.createLong(0,0)}s(it){let rt=this.bb.__offset(this.bb_pos,14);return rt?this.bb.__string(this.bb_pos+rt,it):null}t(it){let rt=this.bb.__offset(this.bb_pos,16);return rt?(it||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}g(it){let rt=this.bb.__offset(this.bb_pos,18);return rt?(it||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}floats(it){let rt=this.bb.__offset(this.bb_pos,20);return rt?this.bb.readFloat32(this.bb.__vector(this.bb_pos+rt)+4*it):0}floatsLength(){let it=this.bb.__offset(this.bb_pos,20);return it?this.bb.__vector_len(this.bb_pos+it):0}floatsArray(){let it=this.bb.__offset(this.bb_pos,20);return it?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+it),this.bb.__vector_len(this.bb_pos+it)):null}ints(it){let rt=this.bb.__offset(this.bb_pos,22);return rt?this.bb.readInt64(this.bb.__vector(this.bb_pos+rt)+8*it):this.bb.createLong(0,0)}intsLength(){let it=this.bb.__offset(this.bb_pos,22);return it?this.bb.__vector_len(this.bb_pos+it):0}strings(it,rt){let lt=this.bb.__offset(this.bb_pos,24);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}stringsLength(){let it=this.bb.__offset(this.bb_pos,24);return it?this.bb.__vector_len(this.bb_pos+it):0}tensors(it,rt){let lt=this.bb.__offset(this.bb_pos,26);return lt?(rt||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}tensorsLength(){let it=this.bb.__offset(this.bb_pos,26);return it?this.bb.__vector_len(this.bb_pos+it):0}graphs(it,rt){let lt=this.bb.__offset(this.bb_pos,28);return lt?(rt||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}graphsLength(){let it=this.bb.__offset(this.bb_pos,28);return it?this.bb.__vector_len(this.bb_pos+it):0}static startAttribute(it){it.startObject(13)}static addName(it,rt){it.addFieldOffset(0,rt,0)}static addDocString(it,rt){it.addFieldOffset(1,rt,0)}static addType(it,rt){it.addFieldInt32(2,rt,at.experimental.fbs.AttributeType.UNDEFINED)}static addF(it,rt){it.addFieldFloat32(3,rt,0)}static addI(it,rt){it.addFieldInt64(4,rt,it.createLong(0,0))}static addS(it,rt){it.addFieldOffset(5,rt,0)}static addT(it,rt){it.addFieldOffset(6,rt,0)}static addG(it,rt){it.addFieldOffset(7,rt,0)}static addFloats(it,rt){it.addFieldOffset(8,rt,0)}static createFloatsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addFloat32(rt[lt]);return it.endVector()}static startFloatsVector(it,rt){it.startVector(4,rt,4)}static addInts(it,rt){it.addFieldOffset(9,rt,0)}static createIntsVector(it,rt){it.startVector(8,rt.length,8);for(let lt=rt.length-1;lt>=0;lt--)it.addInt64(rt[lt]);return it.endVector()}static startIntsVector(it,rt){it.startVector(8,rt,8)}static addStrings(it,rt){it.addFieldOffset(10,rt,0)}static createStringsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startStringsVector(it,rt){it.startVector(4,rt,4)}static addTensors(it,rt){it.addFieldOffset(11,rt,0)}static createTensorsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startTensorsVector(it,rt){it.startVector(4,rt,4)}static addGraphs(it,rt){it.addFieldOffset(12,rt,0)}static createGraphsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startGraphsVector(it,rt){it.startVector(4,rt,4)}static endAttribute(it){return it.endObject()}static createAttribute(it,rt,lt,ut,pt,gt,mt,yt,bt,wt,xt,Tt,St,Pt){return ht.startAttribute(it),ht.addName(it,rt),ht.addDocString(it,lt),ht.addType(it,ut),ht.addF(it,pt),ht.addI(it,gt),ht.addS(it,mt),ht.addT(it,yt),ht.addG(it,bt),ht.addFloats(it,wt),ht.addInts(it,xt),ht.addStrings(it,Tt),ht.addTensors(it,St),ht.addGraphs(it,Pt),ht.endAttribute(it)}}ft.Attribute=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsGraph(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsGraph(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}initializers(it,rt){let lt=this.bb.__offset(this.bb_pos,4);return lt?(rt||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}initializersLength(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__vector_len(this.bb_pos+it):0}nodeArgs(it,rt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(rt||new at.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}nodeArgsLength(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__vector_len(this.bb_pos+it):0}nodes(it,rt){let lt=this.bb.__offset(this.bb_pos,8);return lt?(rt||new at.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}nodesLength(){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__vector_len(this.bb_pos+it):0}maxNodeIndex(){let it=this.bb.__offset(this.bb_pos,10);return it?this.bb.readUint32(this.bb_pos+it):0}nodeEdges(it,rt){let lt=this.bb.__offset(this.bb_pos,12);return lt?(rt||new at.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}nodeEdgesLength(){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.__vector_len(this.bb_pos+it):0}inputs(it,rt){let lt=this.bb.__offset(this.bb_pos,14);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}inputsLength(){let it=this.bb.__offset(this.bb_pos,14);return it?this.bb.__vector_len(this.bb_pos+it):0}outputs(it,rt){let lt=this.bb.__offset(this.bb_pos,16);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*it,rt):null}outputsLength(){let it=this.bb.__offset(this.bb_pos,16);return it?this.bb.__vector_len(this.bb_pos+it):0}sparseInitializers(it,rt){let lt=this.bb.__offset(this.bb_pos,18);return lt?(rt||new at.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}sparseInitializersLength(){let it=this.bb.__offset(this.bb_pos,18);return it?this.bb.__vector_len(this.bb_pos+it):0}static startGraph(it){it.startObject(8)}static addInitializers(it,rt){it.addFieldOffset(0,rt,0)}static createInitializersVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startInitializersVector(it,rt){it.startVector(4,rt,4)}static addNodeArgs(it,rt){it.addFieldOffset(1,rt,0)}static createNodeArgsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startNodeArgsVector(it,rt){it.startVector(4,rt,4)}static addNodes(it,rt){it.addFieldOffset(2,rt,0)}static createNodesVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startNodesVector(it,rt){it.startVector(4,rt,4)}static addMaxNodeIndex(it,rt){it.addFieldInt32(3,rt,0)}static addNodeEdges(it,rt){it.addFieldOffset(4,rt,0)}static createNodeEdgesVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startNodeEdgesVector(it,rt){it.startVector(4,rt,4)}static addInputs(it,rt){it.addFieldOffset(5,rt,0)}static createInputsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startInputsVector(it,rt){it.startVector(4,rt,4)}static addOutputs(it,rt){it.addFieldOffset(6,rt,0)}static createOutputsVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startOutputsVector(it,rt){it.startVector(4,rt,4)}static addSparseInitializers(it,rt){it.addFieldOffset(7,rt,0)}static createSparseInitializersVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startSparseInitializersVector(it,rt){it.startVector(4,rt,4)}static endGraph(it){return it.endObject()}static createGraph(it,rt,lt,ut,pt,gt,mt,yt,bt){return ht.startGraph(it),ht.addInitializers(it,rt),ht.addNodeArgs(it,lt),ht.addNodes(it,ut),ht.addMaxNodeIndex(it,pt),ht.addNodeEdges(it,gt),ht.addInputs(it,mt),ht.addOutputs(it,yt),ht.addSparseInitializers(it,bt),ht.endGraph(it)}}ft.Graph=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsModel(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsModel(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}irVersion(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readInt64(this.bb_pos+it):this.bb.createLong(0,0)}opsetImport(it,rt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(rt||new at.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}opsetImportLength(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__vector_len(this.bb_pos+it):0}producerName(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?this.bb.__string(this.bb_pos+rt,it):null}producerVersion(it){let rt=this.bb.__offset(this.bb_pos,10);return rt?this.bb.__string(this.bb_pos+rt,it):null}domain(it){let rt=this.bb.__offset(this.bb_pos,12);return rt?this.bb.__string(this.bb_pos+rt,it):null}modelVersion(){let it=this.bb.__offset(this.bb_pos,14);return it?this.bb.readInt64(this.bb_pos+it):this.bb.createLong(0,0)}docString(it){let rt=this.bb.__offset(this.bb_pos,16);return rt?this.bb.__string(this.bb_pos+rt,it):null}graph(it){let rt=this.bb.__offset(this.bb_pos,18);return rt?(it||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}graphDocString(it){let rt=this.bb.__offset(this.bb_pos,20);return rt?this.bb.__string(this.bb_pos+rt,it):null}static startModel(it){it.startObject(9)}static addIrVersion(it,rt){it.addFieldInt64(0,rt,it.createLong(0,0))}static addOpsetImport(it,rt){it.addFieldOffset(1,rt,0)}static createOpsetImportVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startOpsetImportVector(it,rt){it.startVector(4,rt,4)}static addProducerName(it,rt){it.addFieldOffset(2,rt,0)}static addProducerVersion(it,rt){it.addFieldOffset(3,rt,0)}static addDomain(it,rt){it.addFieldOffset(4,rt,0)}static addModelVersion(it,rt){it.addFieldInt64(5,rt,it.createLong(0,0))}static addDocString(it,rt){it.addFieldOffset(6,rt,0)}static addGraph(it,rt){it.addFieldOffset(7,rt,0)}static addGraphDocString(it,rt){it.addFieldOffset(8,rt,0)}static endModel(it){return it.endObject()}static createModel(it,rt,lt,ut,pt,gt,mt,yt,bt,wt){return ht.startModel(it),ht.addIrVersion(it,rt),ht.addOpsetImport(it,lt),ht.addProducerName(it,ut),ht.addProducerVersion(it,pt),ht.addDomain(it,gt),ht.addModelVersion(it,mt),ht.addDocString(it,yt),ht.addGraph(it,bt),ht.addGraphDocString(it,wt),ht.endModel(it)}}ft.Model=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsKernelCreateInfos(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsKernelCreateInfos(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}nodeIndices(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.readUint32(this.bb.__vector(this.bb_pos+rt)+4*it):0}nodeIndicesLength(){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__vector_len(this.bb_pos+it):0}nodeIndicesArray(){let it=this.bb.__offset(this.bb_pos,4);return it?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+it),this.bb.__vector_len(this.bb_pos+it)):null}kernelDefHashes(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?this.bb.readUint64(this.bb.__vector(this.bb_pos+rt)+8*it):this.bb.createLong(0,0)}kernelDefHashesLength(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__vector_len(this.bb_pos+it):0}static startKernelCreateInfos(it){it.startObject(2)}static addNodeIndices(it,rt){it.addFieldOffset(0,rt,0)}static createNodeIndicesVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addInt32(rt[lt]);return it.endVector()}static startNodeIndicesVector(it,rt){it.startVector(4,rt,4)}static addKernelDefHashes(it,rt){it.addFieldOffset(1,rt,0)}static createKernelDefHashesVector(it,rt){it.startVector(8,rt.length,8);for(let lt=rt.length-1;lt>=0;lt--)it.addInt64(rt[lt]);return it.endVector()}static startKernelDefHashesVector(it,rt){it.startVector(8,rt,8)}static endKernelCreateInfos(it){return it.endObject()}static createKernelCreateInfos(it,rt,lt){return ht.startKernelCreateInfos(it),ht.addNodeIndices(it,rt),ht.addKernelDefHashes(it,lt),ht.endKernelCreateInfos(it)}}ft.KernelCreateInfos=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsSubGraphSessionState(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsSubGraphSessionState(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}graphId(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}sessionState(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?(it||new at.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startSubGraphSessionState(it){it.startObject(2)}static addGraphId(it,rt){it.addFieldOffset(0,rt,0)}static addSessionState(it,rt){it.addFieldOffset(1,rt,0)}static endSubGraphSessionState(it){let rt=it.endObject();return it.requiredField(rt,4),rt}static createSubGraphSessionState(it,rt,lt){return ht.startSubGraphSessionState(it),ht.addGraphId(it,rt),ht.addSessionState(it,lt),ht.endSubGraphSessionState(it)}}ft.SubGraphSessionState=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsSessionState(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsSessionState(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}kernels(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?(it||new at.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}subGraphSessionStates(it,rt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(rt||new at.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*it),this.bb):null}subGraphSessionStatesLength(){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__vector_len(this.bb_pos+it):0}static startSessionState(it){it.startObject(2)}static addKernels(it,rt){it.addFieldOffset(0,rt,0)}static addSubGraphSessionStates(it,rt){it.addFieldOffset(1,rt,0)}static createSubGraphSessionStatesVector(it,rt){it.startVector(4,rt.length,4);for(let lt=rt.length-1;lt>=0;lt--)it.addOffset(rt[lt]);return it.endVector()}static startSubGraphSessionStatesVector(it,rt){it.startVector(4,rt,4)}static endSessionState(it){return it.endObject()}static createSessionState(it,rt,lt){return ht.startSessionState(it),ht.addKernels(it,rt),ht.addSubGraphSessionStates(it,lt),ht.endSessionState(it)}}ft.SessionState=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={})),function(at){(function(dt){(function(ft){class ht{constructor(){this.bb=null,this.bb_pos=0}__init(it,rt){return this.bb_pos=it,this.bb=rt,this}static getRootAsInferenceSession(it,rt){return(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static getSizePrefixedRootAsInferenceSession(it,rt){return it.setPosition(it.position()+nt.flatbuffers.SIZE_PREFIX_LENGTH),(rt||new ht).__init(it.readInt32(it.position())+it.position(),it)}static bufferHasIdentifier(it){return it.__has_identifier("ORTM")}ortVersion(it){let rt=this.bb.__offset(this.bb_pos,4);return rt?this.bb.__string(this.bb_pos+rt,it):null}model(it){let rt=this.bb.__offset(this.bb_pos,6);return rt?(it||new at.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}sessionState(it){let rt=this.bb.__offset(this.bb_pos,8);return rt?(it||new at.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+rt),this.bb):null}static startInferenceSession(it){it.startObject(3)}static addOrtVersion(it,rt){it.addFieldOffset(0,rt,0)}static addModel(it,rt){it.addFieldOffset(1,rt,0)}static addSessionState(it,rt){it.addFieldOffset(2,rt,0)}static endInferenceSession(it){return it.endObject()}static finishInferenceSessionBuffer(it,rt){it.finish(rt,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(it,rt){it.finish(rt,"ORTM",!0)}static createInferenceSession(it,rt,lt,ut){return ht.startInferenceSession(it),ht.addOrtVersion(it,rt),ht.addModel(it,lt),ht.addSessionState(it,ut),ht.endInferenceSession(it)}}ft.InferenceSession=ht})(dt.fbs||(dt.fbs={}))})(at.experimental||(at.experimental={}))}(_e.onnxruntime||(_e.onnxruntime={}))},7448:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.OnnxjsSessionHandler=void 0;const nt=tt(1670),st=tt(9162);_e.OnnxjsSessionHandler=class{constructor(ot){this.session=ot,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(ot,at,dt){const ft=new Map;for(const it in ot)if(Object.hasOwnProperty.call(ot,it)){const rt=ot[it];ft.set(it,new st.Tensor(rt.dims,rt.type,void 0,void 0,rt.data))}const ht=await this.session.run(ft),ct={};return ht.forEach((it,rt)=>{ct[rt]=new nt.Tensor(it.type,it.data,it.dims)}),ct}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.Session=void 0;const nt=tt(7067),st=tt(1296),ot=tt(7091),at=tt(1036),dt=tt(6231),ft=tt(2644);_e.Session=class{constructor(ht={}){this._initialized=!1,this.backendHint=ht.backendHint,this.profiler=dt.Profiler.create(ht.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(ht,ct,it){await this.profiler.event("session","Session.loadModel",async()=>{const rt=await(0,ot.resolveBackend)(this.backendHint);if(this.sessionHandler=rt.createSessionHandler(this.context),this._model=new ft.Model,typeof ht=="string"){const lt=ht.endsWith(".ort");if(typeof fetch>"u"){const ut=await(0,st.promisify)(nt.readFile)(ht);this.initialize(ut,lt)}else{const ut=await fetch(ht),pt=await ut.arrayBuffer();this.initialize(new Uint8Array(pt),lt)}}else if(ArrayBuffer.isView(ht))this.initialize(ht);else{const lt=new Uint8Array(ht,ct||0,it||ht.byteLength);this.initialize(lt)}})}initialize(ht,ct){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const it=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(ht,it,ct),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new at.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(ht){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const ct=this.normalizeAndValidateInputs(ht),it=await this._executionPlan.execute(this.sessionHandler,ct);return this.createOutput(it)})}normalizeAndValidateInputs(ht){const ct=this._model.graph.getInputNames();if(Array.isArray(ht)){if(ht.length!==ct.length)throw new Error(`incorrect input array length: expected ${ct.length} but got ${ht.length}`)}else{if(ht.size!==ct.length)throw new Error(`incorrect input map size: expected ${ct.length} but got ${ht.size}`);const it=new Array(ht.size);let rt=0;for(let lt=0;lt<ct.length;++lt){const ut=ht.get(ct[lt]);if(!ut)throw new Error(`missing input tensor for: '${name}'`);it[rt++]=ut}ht=it}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,ht,!1);else{const it=this._model.graph.getInputIndices(),rt=this._model.graph.getValues(),lt=new Array(it.length);for(let ut=0;ut<it.length;++ut){const pt=rt[it[ut]];lt[ut]=pt.type.shape.dims,this.context.graphInputTypes.push(pt.type.tensorType),this.context.graphInputDims.push(ht[ut].dims)}this.validateInputTensorDims(lt,ht,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,ht),ht}validateInputTensorTypes(ht,ct){for(let it=0;it<ct.length;it++){const rt=ht[it],lt=ct[it].type;if(rt!==lt)throw new Error(`input tensor[${it}] check failed: expected type '${rt}' but got ${lt}`)}}validateInputTensorDims(ht,ct,it){for(let rt=0;rt<ct.length;rt++){const lt=ht[rt],ut=ct[rt].dims;if(!this.compareTensorDims(lt,ut,it))throw new Error(`input tensor[${rt}] check failed: expected shape '[${lt.join(",")}]' but got [${ut.join(",")}]`)}}compareTensorDims(ht,ct,it){if(ht.length!==ct.length)return!1;for(let rt=0;rt<ht.length;++rt)if(ht[rt]!==ct[rt]&&(!it||ht[rt]!==0))return!1;return!0}createOutput(ht){const ct=this._model.graph.getOutputNames();if(ht.length!==ct.length)throw new Error("expected number of outputs do not match number of generated outputs");const it=new Map;for(let rt=0;rt<ct.length;++rt)it.set(ct[rt],ht[rt]);return it}initializeOps(ht){const ct=ht.getNodes();this._ops=new Array(ct.length);for(let it=0;it<ct.length;it++)this._ops[it]=this.sessionHandler.resolve(ct[it],this._model.opsets,ht)}}},9162:function(et,_e,tt){var nt=this&&this.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(_e,"__esModule",{value:!0}),_e.Tensor=void 0;const st=tt(3442),ot=nt(tt(3720)),at=tt(1446),dt=tt(9395),ft=tt(2517);var ht=dt.onnxruntime.experimental.fbs;class ct{get data(){if(this.cache===void 0){const gt=this.dataProvider(this.dataId);if(gt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=gt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(gt){return this.data[ft.ShapeUtil.indicesToOffset(gt,this.strides)]}set(gt,mt){this.data[ft.ShapeUtil.indicesToOffset(gt,this.strides)]=mt}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=ft.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(gt,mt,yt,bt,wt,xt=st.Guid.create()){this.dims=gt,this.type=mt,this.dataProvider=yt,this.asyncDataProvider=bt,this.cache=wt,this.dataId=xt,this.size=ft.ShapeUtil.validateDimsAndCalcSize(gt);const Tt=this.size,St=yt===void 0&&bt===void 0&&wt===void 0;if(wt!==void 0&&wt.length!==Tt)throw new RangeError("Input dims doesn't match data length.");if(mt==="string"){if(!(wt===void 0||Array.isArray(wt)&&wt.every(Pt=>typeof Pt=="string")))throw new TypeError("cache should be a string array");St&&(this.cache=new Array(Tt))}else{if(wt!==void 0){const Pt=rt(mt);if(!(wt instanceof Pt))throw new TypeError(`cache should be type ${Pt.name}`)}if(St){const Pt=new ArrayBuffer(Tt*function(vt){switch(vt){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${vt}`)}}(mt));this.cache=function(vt,At){return new(rt(At))(vt)}(Pt,mt)}}}static fromProto(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=ft.ProtoUtil.tensorDataTypeFromProto(gt.dataType),yt=ft.ProtoUtil.tensorDimsFromProto(gt.dims),bt=new ct(yt,mt);if(mt==="string")gt.stringData.forEach((wt,xt)=>{bt.data[xt]=(0,ft.decodeUtf8String)(wt)});else if(gt.rawData&&typeof gt.rawData.byteLength=="number"&&gt.rawData.byteLength>0){const wt=bt.data,xt=new DataView(gt.rawData.buffer,gt.rawData.byteOffset,gt.rawData.byteLength),Tt=it(gt.dataType),St=gt.rawData.byteLength/Tt;if(gt.rawData.byteLength%Tt!=0)throw new Error("invalid buffer length");if(wt.length!==St)throw new Error("buffer length mismatch");for(let Pt=0;Pt<St;Pt++){const vt=ut(xt,gt.dataType,Pt*Tt);wt[Pt]=vt}}else{let wt;switch(gt.dataType){case at.onnx.TensorProto.DataType.FLOAT:wt=gt.floatData;break;case at.onnx.TensorProto.DataType.INT32:case at.onnx.TensorProto.DataType.INT16:case at.onnx.TensorProto.DataType.UINT16:case at.onnx.TensorProto.DataType.INT8:case at.onnx.TensorProto.DataType.UINT8:case at.onnx.TensorProto.DataType.BOOL:wt=gt.int32Data;break;case at.onnx.TensorProto.DataType.INT64:wt=gt.int64Data;break;case at.onnx.TensorProto.DataType.DOUBLE:wt=gt.doubleData;break;case at.onnx.TensorProto.DataType.UINT32:case at.onnx.TensorProto.DataType.UINT64:wt=gt.uint64Data;break;default:throw new Error("unspecific error")}if(wt==null)throw new Error("failed to populate data from a tensorproto value");const xt=bt.data;if(xt.length!==wt.length)throw new Error("array length mismatch");for(let Tt=0;Tt<wt.length;Tt++){const St=wt[Tt];ot.default.isLong(St)?xt[Tt]=lt(St,gt.dataType):xt[Tt]=St}}return bt}static fromData(gt,mt,yt){return new ct(mt,yt,void 0,void 0,gt)}static fromOrtTensor(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=ft.ProtoUtil.tensorDimsFromORTFormat(gt),yt=ft.ProtoUtil.tensorDataTypeFromProto(gt.dataType()),bt=new ct(mt,yt);if(yt==="string")for(let wt=0;wt<gt.stringDataLength();wt++)bt.data[wt]=gt.stringData(wt);else if(gt.rawDataArray()&&typeof gt.rawDataLength()=="number"&&gt.rawDataLength()>0){const wt=bt.data,xt=new DataView(gt.rawDataArray().buffer,gt.rawDataArray().byteOffset,gt.rawDataLength()),Tt=it(gt.dataType()),St=gt.rawDataLength()/Tt;if(gt.rawDataLength()%Tt!=0)throw new Error("invalid buffer length");if(wt.length!==St)throw new Error("buffer length mismatch");for(let Pt=0;Pt<St;Pt++){const vt=ut(xt,gt.dataType(),Pt*Tt);wt[Pt]=vt}}return bt}}function it(pt){switch(pt){case at.onnx.TensorProto.DataType.UINT8:case at.onnx.TensorProto.DataType.INT8:case at.onnx.TensorProto.DataType.BOOL:return 1;case at.onnx.TensorProto.DataType.UINT16:case at.onnx.TensorProto.DataType.INT16:return 2;case at.onnx.TensorProto.DataType.FLOAT:case at.onnx.TensorProto.DataType.INT32:case at.onnx.TensorProto.DataType.UINT32:return 4;case at.onnx.TensorProto.DataType.INT64:case at.onnx.TensorProto.DataType.DOUBLE:case at.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${at.onnx.TensorProto.DataType[pt]}`)}}function rt(pt){switch(pt){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function lt(pt,gt){if(gt===at.onnx.TensorProto.DataType.INT64||gt===ht.TensorDataType.INT64){if(pt.greaterThanOrEqual(2147483648)||pt.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(gt!==at.onnx.TensorProto.DataType.UINT32&&gt!==ht.TensorDataType.UINT32&&gt!==at.onnx.TensorProto.DataType.UINT64&&gt!==ht.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${at.onnx.TensorProto.DataType[gt]}`);if(pt.greaterThanOrEqual(4294967296)||pt.lessThan(0))throw new TypeError("uint64 is not supported")}return pt.toNumber()}function ut(pt,gt,mt){switch(gt){case at.onnx.TensorProto.DataType.BOOL:case at.onnx.TensorProto.DataType.UINT8:return pt.getUint8(mt);case at.onnx.TensorProto.DataType.INT8:return pt.getInt8(mt);case at.onnx.TensorProto.DataType.UINT16:return pt.getUint16(mt,!0);case at.onnx.TensorProto.DataType.INT16:return pt.getInt16(mt,!0);case at.onnx.TensorProto.DataType.FLOAT:return pt.getFloat32(mt,!0);case at.onnx.TensorProto.DataType.INT32:return pt.getInt32(mt,!0);case at.onnx.TensorProto.DataType.UINT32:return pt.getUint32(mt,!0);case at.onnx.TensorProto.DataType.INT64:return lt(ot.default.fromBits(pt.getUint32(mt,!0),pt.getUint32(mt+4,!0),!1),gt);case at.onnx.TensorProto.DataType.DOUBLE:return pt.getFloat64(mt,!0);case at.onnx.TensorProto.DataType.UINT64:return lt(ot.default.fromBits(pt.getUint32(mt,!0),pt.getUint32(mt+4,!0),!0),gt);default:throw new Error(`cannot read from DataView for type ${at.onnx.TensorProto.DataType[gt]}`)}}_e.Tensor=ct},2517:function(et,_e,tt){var nt=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(_e,"__esModule",{value:!0}),_e.decodeUtf8String=_e.MAX_CLIP=_e.MIN_CLIP=_e.PoolConvUtil=_e.ReduceUtil=_e.SplitUtil=_e.MathUtil=_e.ShapeUtil=_e.LongUtil=_e.ProtoUtil=_e.GemmUtil=_e.arrayCopyHelper=_e.BroadcastUtil=_e.MatMulUtil=_e.ArrayUtil=_e.assert=_e.checkInputsShape=void 0;const st=tt(5686),ot=nt(tt(3720)),at=tt(1446),dt=tt(9162);_e.checkInputsShape=function(gt,...mt){if(!gt||gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(!gt[yt].dims||gt[yt].dims.length!==mt[yt])return!1;return!0},_e.assert=function(gt,mt){if(!gt)throw new Error(typeof mt=="string"?mt:mt())},_e.ArrayUtil=class{static arraysEqual(gt,mt){if(gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(gt[yt]!==mt[yt])return!1;return!0}};class ft{static preprocessInputShapes(mt,yt){return[mt.length===1?[1,mt[0]]:mt,yt.length===1?[yt[0],1]:yt]}static postprocessOutputShape(mt,yt,bt){yt===1&&mt.splice(mt.length-2,1),bt===1&&mt.pop()}static calcMatMulShape(mt,yt){return mt[1]!==yt[0]?void 0:[mt[0],yt[1]]}}_e.MatMulUtil=ft;class ht{static calcShape(mt,yt,bt=!1){const wt=mt.length,xt=yt.length;if(wt===0)return yt;if(xt===0)return mt;const Tt=Math.max(mt.length,yt.length),St=new Array(Tt);if(bt){if(wt<2||xt<2)return;const Pt=ft.calcMatMulShape([mt[wt-2],mt[wt-1]],[yt[xt-2],yt[xt-1]]);if(Pt===void 0)return;[St[Tt-2],St[Tt-1]]=Pt}for(let Pt=bt?3:1;Pt<=Tt;Pt++){const vt=wt-Pt<0?1:mt[wt-Pt],At=xt-Pt<0?1:yt[xt-Pt];if(vt!==At&&vt>1&&At>1)return;St[Tt-Pt]=Math.max(vt,At)}return St}static index(mt,yt){const bt=new Array(yt.length);return ht.fillIndex(mt,yt,bt),bt}static fillIndex(mt,yt,bt){const wt=mt.length-yt.length;for(let xt=0;xt<yt.length;xt++)bt[xt]=mt[wt+xt]%yt[xt]}static calc(mt,yt,bt,wt,xt){const Tt=ht.calcShape(mt.dims,yt.dims);if(Tt){if(wt&&!rt.areEqual(Tt,mt.dims))return;const St=rt.size(Tt),Pt=wt?mt:new dt.Tensor(Tt,xt||mt.type);if(Tt.length===0)Pt.set([],bt(mt.get([]),yt.get([])));else{const vt=new Array(Tt.length),At=new Array(mt.dims.length),It=new Array(yt.dims.length);let jt,Lt=0,Rt=0,$t=!1,Ot=!1;mt.dims.length===0&&(Lt=mt.get([]),$t=!0),yt.dims.length===0&&(Rt=yt.get([]),Ot=!0);for(let Ft=0;Ft<St;Ft++){jt=Ft;for(let Vt=Tt.length-1;Vt>=0;Vt--)vt[Vt]=jt%Tt[Vt],jt=Math.floor(jt/Tt[Vt]);$t||(ht.fillIndex(vt,mt.dims,At),Lt=mt.get(At)),Ot||(ht.fillIndex(vt,yt.dims,It),Rt=yt.get(It)),Pt.set(vt,bt(Lt,Rt))}}return Pt}}static isValidBroadcast(mt,yt){const bt=mt.length,wt=yt.length;if(bt>wt)return!1;for(let xt=1;xt<=bt;xt++)if(mt[bt-xt]!==1&&mt[bt-xt]!==yt[wt-xt])return!1;return!0}static getBroadcastDims(mt,yt){const bt=mt.length,wt=[];for(let xt=0;xt<bt;xt++){const Tt=bt-1-xt,St=mt[Tt]||1;(yt[yt.length-1-xt]||1)>1&&St===1&&wt.unshift(Tt)}return wt}}_e.BroadcastUtil=ht,_e.arrayCopyHelper=function(gt,mt,yt,bt,wt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+wt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+wt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<wt;xt++)gt[yt+xt]=mt[bt+xt]},_e.GemmUtil=class{static getShapeOfGemmResult(gt,mt,yt,bt,wt){if(gt.length!==2||yt.length!==2)throw new Error("shape need to be of size 2");let xt,Tt,St;mt?(xt=gt[1],Tt=gt[0]):(xt=gt[0],Tt=gt[1]);let Pt=-1;if(bt?(St=yt[0],Pt=1):(St=yt[1],Pt=0),yt[Pt]!==Tt)throw new Error("dimension mismatch");if(xt<=0||St<=0||Tt<=0)throw new Error("invalid shape specified");if(wt&&!ht.isValidBroadcast(wt,[xt,St]))throw new Error("gemm: invalid bias shape for broadcast");return[xt,St,Tt]}};class ct{static tensorDataTypeFromProto(mt){switch(mt){case at.onnx.TensorProto.DataType.INT8:return"int8";case at.onnx.TensorProto.DataType.UINT8:return"uint8";case at.onnx.TensorProto.DataType.BOOL:return"bool";case at.onnx.TensorProto.DataType.INT16:return"int16";case at.onnx.TensorProto.DataType.UINT16:return"uint16";case at.onnx.TensorProto.DataType.INT32:return"int32";case at.onnx.TensorProto.DataType.UINT32:return"uint32";case at.onnx.TensorProto.DataType.FLOAT:return"float32";case at.onnx.TensorProto.DataType.DOUBLE:return"float64";case at.onnx.TensorProto.DataType.STRING:return"string";case at.onnx.TensorProto.DataType.INT64:return"int32";case at.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${at.onnx.TensorProto.DataType[mt]}`)}}static tensorDataTypeStringToEnum(mt){switch(mt){case"int8":return at.onnx.TensorProto.DataType.INT8;case"uint8":return at.onnx.TensorProto.DataType.UINT8;case"bool":return at.onnx.TensorProto.DataType.BOOL;case"int16":return at.onnx.TensorProto.DataType.INT16;case"uint16":return at.onnx.TensorProto.DataType.UINT16;case"int32":return at.onnx.TensorProto.DataType.INT32;case"uint32":return at.onnx.TensorProto.DataType.UINT32;case"float32":return at.onnx.TensorProto.DataType.FLOAT;case"float64":return at.onnx.TensorProto.DataType.DOUBLE;case"string":return at.onnx.TensorProto.DataType.STRING;case"int64":return at.onnx.TensorProto.DataType.INT64;case"uint64":return at.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${mt}`)}}static tensorDimsFromProto(mt){return mt.map(yt=>ot.default.isLong(yt)?yt.toNumber():yt)}static tensorValueTypeFromProto(mt){return{tensorType:ct.tensorDataTypeFromProto(mt.elemType),shape:{dims:ct.tensorDimsFromProto(mt.shape.dim.map(yt=>yt.dimValue))}}}static tensorDimsFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.dimsLength();bt++)yt.push(it.longToNumber(mt.dims(bt)));return yt}static tensorAttributesFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.attributesLength();bt++)yt.push(mt.attributes(bt));return yt}}_e.ProtoUtil=ct;class it{static longToNumber(mt,yt){return ot.default.isLong(mt)?mt.toNumber():mt instanceof st.flatbuffers.Long?ot.default.fromValue({low:mt.low,high:mt.high,unsigned:yt!=null&&yt}).toNumber():mt}static isLong(mt){return ot.default.isLong(mt)||mt instanceof st.flatbuffers.Long}}_e.LongUtil=it;class rt{static size(mt){return rt.getSizeFromDimensionRange(mt,0,mt.length)}static sizeFromDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeFromDimension as Tensor has ${mt.length} dimensions.`);return rt.getSizeFromDimensionRange(mt,yt,mt.length)}static sizeToDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeToDimension as Tensor has ${mt.length} dimensions.`);return rt.getSizeFromDimensionRange(mt,0,yt)}static getSizeFromDimensionRange(mt,yt,bt){let wt=1;for(let xt=yt;xt<bt;xt++){if(mt[xt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");wt*=mt[xt]}return wt}static computeStrides(mt){const yt=mt.length;if(yt===0)return[];if(yt===1)return[1];const bt=new Array(yt);bt[yt-1]=1,bt[yt-2]=mt[yt-1];for(let wt=yt-3;wt>=0;--wt)bt[wt]=bt[wt+1]*mt[wt+1];return bt}static transpose(mt){return mt.slice().reverse()}static indicesToOffset(mt,yt,bt){bt===void 0&&(bt=mt.length);let wt=0;for(let xt=0;xt<bt;++xt)wt+=yt[xt]*mt[xt];return wt}static offsetToIndices(mt,yt){const bt=yt.length;if(bt===0)return[];if(bt===1)return[mt*yt[0]];const wt=new Array(yt.length);for(let xt=0;xt<wt.length-1;++xt)wt[xt]=Math.floor(mt/yt[xt]),mt-=wt[xt]*yt[xt];return wt[wt.length-1]=mt,wt}static normalizeAxis(mt,yt){if(mt<-yt&&mt>=yt)throw new Error("unsupported axis for this operation.");return mt<0?mt+yt:mt}static normalizeAxes(mt,yt){return mt.map(bt=>this.normalizeAxis(bt,yt))}static incrementIndex(mt,yt,bt){if(yt.length===0||mt.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(bt===void 0)bt=yt.length;else if(bt<=0||bt>yt.length)throw new Error("Incorrect axis to increment on");for(let wt=bt-1;wt>=0&&(mt[wt]++,!(mt[wt]<yt[wt]));--wt)mt[wt]=0}static calculateReshapedDims(mt,yt){if(yt.length===0){if(mt.length===0||rt.size(mt)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const bt=yt.length,wt=new Array(bt);let xt=-1,Tt=1;for(let Pt=0;Pt<bt;Pt++){if(yt[Pt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(yt[Pt]===-1){if(xt!==-1)throw new Error("at most one dimension in shape hints can be -1");xt=Pt}else{if(yt[Pt]===0){if(Pt>=mt.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");wt[Pt]=mt[Pt]}else wt[Pt]=yt[Pt];Tt*=wt[Pt]}}const St=rt.size(mt);if(xt!==-1){if(St%Tt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${mt}] Output shape: [${yt}]`);wt[xt]=St/Tt}else if(Tt!==St)throw new Error("reshapedDims and originalDims don't have matching sizes");return wt}static sortBasedOnPerm(mt,yt){return yt?yt.map(bt=>mt[bt]):mt.slice().reverse()}static padShape(mt,yt){const bt=mt.length;return mt.map((wt,xt)=>wt+yt[xt]+yt[xt+bt])}static areEqual(mt,yt){return mt.length===yt.length&&mt.every((bt,wt)=>bt===yt[wt])}static validateDimsAndCalcSize(mt){if(mt.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let yt=1;for(const bt of mt){if(!Number.isInteger(bt))throw new TypeError(`Invalid shape: ${bt} is not an integer`);if(bt<0||bt>2147483647)throw new TypeError(`Invalid shape: length ${bt} is not allowed`);yt*=bt}return yt}static flattenShape(mt,yt){yt<0&&(yt+=mt.length);const bt=mt.reduce((xt,Tt)=>xt*Tt,1),wt=mt.slice(yt).reduce((xt,Tt)=>xt*Tt,1);return[bt/wt,wt]}static squeezeShape(mt,yt){const bt=new Array;yt=rt.normalizeAxes(yt,mt.length);for(let wt=0;wt<mt.length;wt++){const xt=yt.indexOf(wt)>=0;if(xt&&mt[wt]!==1)throw new Error("squeeze an axis of size different than 1");(yt.length===0&&mt[wt]>1||yt.length>0&&!xt)&&bt.push(mt[wt])}return bt}static unsqueezeShape(mt,yt){const bt=new Array(mt.length+yt.length);bt.fill(0);for(let xt=0;xt<yt.length;xt++){const Tt=rt.normalizeAxis(yt[xt],bt.length);if(Tt>=bt.length)throw new Error("'axes' has an out of range axis");if(bt[Tt]!==0)throw new Error("'axes' has a duplicate axis");bt[Tt]=1}let wt=0;for(let xt=0;xt<bt.length;xt++)bt[xt]===0&&(bt[xt]=mt[wt++]);if(wt!==mt.length)throw new Error("the unsqueezed dimension could not be established");return bt}}_e.ShapeUtil=rt,_e.MathUtil=class{static sqr(gt,mt,yt,bt,wt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+wt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+wt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<wt;xt++)gt[yt+xt]+=Math.pow(mt[bt+xt],2)}static axpy(gt,mt,yt,bt,wt,xt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+wt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+wt>gt.length)throw new Error("target array is too small to hold result");for(let Tt=0;Tt<wt;Tt++)gt[yt+Tt]+=xt*mt[bt+Tt]}static powx(gt,mt,yt,bt,wt,xt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+wt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+wt>gt.length)throw new Error("target array is too small to hold result");for(let Tt=0;Tt<wt;Tt++)gt[yt+Tt]=Math.pow(mt[bt+Tt],xt)}static mul(gt,mt,yt,bt,wt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+wt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+wt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<wt;xt++)gt[yt+xt]=mt[bt+xt]*gt[yt+xt]}};class lt{static splitShape(mt,yt,bt,wt){if(bt.length===0){if(!wt)throw new Error("need to know number of outputs when the 'split' attribute is not specified");lt.determineSplit(mt[yt],wt,bt)}const xt=[],Tt=[0];for(let St=0;St<bt.length;++St){St!==0&&Tt.push(Tt[St-1]+bt[St-1]);const Pt=mt.slice();Pt[yt]=bt[St],xt.push(Pt)}return[xt,Tt]}static determineSplit(mt,yt,bt){if(mt%yt!=0)throw new Error("cannot split tensor to equal sized parts");for(let wt=0;wt<yt;++wt)bt.push(mt/yt)}}_e.SplitUtil=lt;class ut{static calcReduce(mt,yt,bt,wt,xt){const Tt=mt.dims.slice(0);yt.length===0&&Tt.forEach((Lt,Rt)=>yt.push(Rt));const St=ut.calcReduceShape(Tt,yt,!0),Pt=rt.size(St),vt=new dt.Tensor(St,mt.type),At=rt.computeStrides(St),It=rt.computeStrides(Tt),jt=new Array(Tt.length);for(let Lt=0;Lt<Pt;Lt++){const Rt=rt.offsetToIndices(Lt,At);ht.fillIndex(Rt,Tt,jt),vt.set(Rt,ut.calcReduceByAxis(mt.numberData,yt,Tt,0,rt.indicesToOffset(jt,It),wt,xt))}return bt?vt:new dt.Tensor(ut.calcReduceShape(Tt,yt,bt),vt.type,void 0,void 0,vt.data,vt.dataId)}static calcReduceByAxis(mt,yt,bt,wt,xt,Tt,St){let Pt=0;if(wt>=yt.length)return Tt(mt[xt]);const vt=yt[wt],At=vt>=bt.length?1:rt.size(bt.slice(vt+1));for(let It=0;It<bt[vt];It++)Pt=It===0?ut.calcReduceByAxis(mt,yt,bt,wt+1,xt,Tt,St):St(Pt,ut.calcReduceByAxis(mt,yt,bt,wt+1,xt,Tt,St)),xt+=At;return Pt}static calcReduceShape(mt,yt,bt){const wt=mt.slice();for(let xt=0;xt<yt.length;xt++)wt[yt[xt]]=bt?1:0;return wt.filter(xt=>xt!==0)}}_e.ReduceUtil=ut;class pt{static adjustPoolAttributes(mt,yt,bt,wt,xt,Tt){if(!mt&&bt.length!==yt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(mt)for(let St=0;St<yt.length-2;St++)St>=bt.length?bt.push(yt[St+2]):bt[St]=yt[St+2];for(let St=0;St<bt.length;St++)if(St<wt.length){if(wt[St]<0)throw new Error("strides should be greater than or equal to 1")}else wt.push(1);for(let St=0;St<bt.length;St++)if(St<xt.length){if(xt[St]<0)throw new Error("dilations should be greater than or equal to 1")}else xt.push(1);for(let St=0;St<2*bt.length;St++)if(St<Tt.length){if(Tt[St]<0)throw new Error("pad should be greater than or equal to 1")}else Tt.push(0);for(let St=0;St<bt.length;St++){if(bt[St]<=0)throw new Error("kernel shapes need to be greater than 0");if(Tt[St]>=bt[St]||Tt[St+bt.length]>=bt[St])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(mt,yt,bt,wt,xt,Tt){if(Tt){if(xt.length!==2*(mt.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(yt.length!==mt.length-2)throw new Error("length of strides should be the length of data dimensions");if(wt.length!==mt.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let St=0;St<mt.length-2;St++)pt.adjustPadAndReturnShape(mt[St+2],yt[St],bt[St],wt[St],xt,St,St+mt.length-2,Tt)}}static computePoolOutputShape(mt,yt,bt,wt,xt,Tt,St){if(yt.length<=0)throw new Error("input shape must be of size greater than 0");const Pt=[yt[0],yt[1]];return pt.computeShapeHelper(mt,yt,Pt,bt,wt,xt,Tt,St),Pt}static computeConvOutputShape(mt,yt,bt,wt,xt,Tt,St){if(mt.length<=0||yt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Pt=[mt[0],yt[0]];return pt.computeShapeHelper(!1,mt,Pt,bt,wt,xt,Tt,St),Pt}static computeShapeHelper(mt,yt,bt,wt,xt,Tt,St,Pt){if(mt)for(let vt=0;vt<yt.length-2;vt++)bt.push(1);else for(let vt=0;vt<yt.length-2;vt++)bt.push(pt.adjustPadAndReturnShape(yt[vt+2],wt[vt],xt[vt],Tt[vt],St,vt,vt+yt.length-2,Pt))}static adjustPadAndReturnShape(mt,yt,bt,wt,xt,Tt,St,Pt){const vt=bt*(wt-1)+1;if(!Pt||Pt==="NOTSET")return Math.floor((mt+xt[Tt]+xt[St]-vt)/yt+1);switch(Pt){case"VALID":return xt[Tt]=0,xt[St]=0,Math.floor((mt-vt)/yt+1);case"SAME_LOWER":case"SAME_UPPER":if(bt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const At=((mt+yt-1)/yt-1)*yt+wt-mt;return xt[Tt]=Math.floor(Pt==="SAME_LOWER"?(At+1)/2:At/2),xt[St]=At-xt[Tt],Math.floor((mt+At-wt)/yt+1)}default:throw new Error("Unsupported AutoPad type")}}}_e.PoolConvUtil=pt,_e.MIN_CLIP=-34028234663852886e22,_e.MAX_CLIP=34028234663852886e22,_e.decodeUtf8String=function(gt){return new TextDecoder().decode(gt)}},7967:(et,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.iterateExtraOptions=void 0,_e.iterateExtraOptions=(tt,nt,st,ot)=>{if(typeof tt=="object"&&tt!==null){if(st.has(tt))throw new Error("Circular reference in options");st.add(tt)}Object.entries(tt).forEach(([at,dt])=>{const ft=nt?nt+at:at;if(typeof dt=="object")(0,_e.iterateExtraOptions)(dt,ft+".",st,ot);else if(typeof dt=="string"||typeof dt=="number")ot(ft,dt.toString());else{if(typeof dt!="boolean")throw new Error("Can't handle extra config type: "+typeof dt);ot(ft,dt?"1":"0")}})}},2157:function(et,_e,tt){var nt,st=this&&this.__createBinding||(Object.create?function(At,It,jt,Lt){Lt===void 0&&(Lt=jt);var Rt=Object.getOwnPropertyDescriptor(It,jt);Rt&&!("get"in Rt?!It.__esModule:Rt.writable||Rt.configurable)||(Rt={enumerable:!0,get:function(){return It[jt]}}),Object.defineProperty(At,Lt,Rt)}:function(At,It,jt,Lt){Lt===void 0&&(Lt=jt),At[Lt]=It[jt]}),ot=this&&this.__setModuleDefault||(Object.create?function(At,It){Object.defineProperty(At,"default",{enumerable:!0,value:It})}:function(At,It){At.default=It}),at=this&&this.__importStar||function(At){if(At&&At.__esModule)return At;var It={};if(At!=null)for(var jt in At)jt!=="default"&&Object.prototype.hasOwnProperty.call(At,jt)&&st(It,At,jt);return ot(It,At),It};Object.defineProperty(_e,"__esModule",{value:!0}),_e.endProfiling=_e.run=_e.releaseSession=_e.createSession=_e.createSessionFinalize=_e.createSessionAllocate=_e.initOrt=_e.initWasm=void 0;const dt=tt(1670),ft=at(tt(349)),ht=tt(6361),ct=()=>!!dt.env.wasm.proxy&&typeof document<"u";let it,rt,lt,ut=!1,pt=!1,gt=!1;const mt=[],yt=[],bt=[],wt=[],xt=[],Tt=[],St=()=>{if(ut||!pt||gt||!it)throw new Error("worker not ready")},Pt=At=>{switch(At.data.type){case"init-wasm":ut=!1,At.data.err?(gt=!0,rt[1](At.data.err)):(pt=!0,rt[0]());break;case"init-ort":At.data.err?lt[1](At.data.err):lt[0]();break;case"create_allocate":At.data.err?mt.shift()[1](At.data.err):mt.shift()[0](At.data.out);break;case"create_finalize":At.data.err?yt.shift()[1](At.data.err):yt.shift()[0](At.data.out);break;case"create":At.data.err?bt.shift()[1](At.data.err):bt.shift()[0](At.data.out);break;case"release":At.data.err?wt.shift()[1](At.data.err):wt.shift()[0]();break;case"run":At.data.err?xt.shift()[1](At.data.err):xt.shift()[0](At.data.out);break;case"end-profiling":At.data.err?Tt.shift()[1](At.data.err):Tt.shift()[0]()}},vt=typeof document<"u"?(nt=document==null?void 0:document.currentScript)===null||nt===void 0?void 0:nt.src:void 0;_e.initWasm=async()=>{if(ct()){if(pt)return;if(ut)throw new Error("multiple calls to 'initWasm()' detected.");if(gt)throw new Error("previous call to 'initWasm()' failed.");return ut=!0,dt.env.wasm.wasmPaths===void 0&&vt&&vt.indexOf("blob:")!==0&&(dt.env.wasm.wasmPaths=vt.substr(0,+vt.lastIndexOf("/")+1)),new Promise((At,It)=>{it==null||it.terminate(),it=tt(9710).Z(),it.onmessage=Pt,rt=[At,It];const jt={type:"init-wasm",in:dt.env.wasm};it.postMessage(jt)})}return(0,ht.initializeWebAssembly)(dt.env.wasm)},_e.initOrt=async(At,It)=>{if(ct())return St(),new Promise((jt,Lt)=>{lt=[jt,Lt];const Rt={type:"init-ort",in:{numThreads:At,loggingLevel:It}};it.postMessage(Rt)});ft.initOrt(At,It)},_e.createSessionAllocate=async At=>ct()?(St(),new Promise((It,jt)=>{mt.push([It,jt]);const Lt={type:"create_allocate",in:{model:At}};it.postMessage(Lt,[At.buffer])})):ft.createSessionAllocate(At),_e.createSessionFinalize=async(At,It)=>ct()?(St(),new Promise((jt,Lt)=>{yt.push([jt,Lt]);const Rt={type:"create_finalize",in:{modeldata:At,options:It}};it.postMessage(Rt)})):ft.createSessionFinalize(At,It),_e.createSession=async(At,It)=>ct()?(St(),new Promise((jt,Lt)=>{bt.push([jt,Lt]);const Rt={type:"create",in:{model:At,options:It}};it.postMessage(Rt,[At.buffer])})):ft.createSession(At,It),_e.releaseSession=async At=>{if(ct())return St(),new Promise((It,jt)=>{wt.push([It,jt]);const Lt={type:"release",in:At};it.postMessage(Lt)});ft.releaseSession(At)},_e.run=async(At,It,jt,Lt,Rt)=>ct()?(St(),new Promise(($t,Ot)=>{xt.push([$t,Ot]);const Ft={type:"run",in:{sessionId:At,inputIndices:It,inputs:jt,outputIndices:Lt,options:Rt}};it.postMessage(Ft,ft.extractTransferableBuffers(jt))})):ft.run(At,It,jt,Lt,Rt),_e.endProfiling=async At=>{if(ct())return St(),new Promise((It,jt)=>{Tt.push([It,jt]);const Lt={type:"end-profiling",in:At};it.postMessage(Lt)});ft.endProfiling(At)}},586:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.setRunOptions=void 0;const nt=tt(7967),st=tt(4983),ot=tt(6361);_e.setRunOptions=at=>{const dt=(0,ot.getInstance)();let ft=0;const ht=[],ct=at||{};try{if((at==null?void 0:at.logSeverityLevel)===void 0)ct.logSeverityLevel=2;else if(typeof at.logSeverityLevel!="number"||!Number.isInteger(at.logSeverityLevel)||at.logSeverityLevel<0||at.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${at.logSeverityLevel}`);if((at==null?void 0:at.logVerbosityLevel)===void 0)ct.logVerbosityLevel=0;else if(typeof at.logVerbosityLevel!="number"||!Number.isInteger(at.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${at.logVerbosityLevel}`);(at==null?void 0:at.terminate)===void 0&&(ct.terminate=!1);let it=0;if((at==null?void 0:at.tag)!==void 0&&(it=(0,st.allocWasmString)(at.tag,ht)),ft=dt._OrtCreateRunOptions(ct.logSeverityLevel,ct.logVerbosityLevel,!!ct.terminate,it),ft===0)throw new Error("Can't create run options");return(at==null?void 0:at.extra)!==void 0&&(0,nt.iterateExtraOptions)(at.extra,"",new WeakSet,(rt,lt)=>{const ut=(0,st.allocWasmString)(rt,ht),pt=(0,st.allocWasmString)(lt,ht);if(dt._OrtAddRunConfigEntry(ft,ut,pt)!==0)throw new Error(`Can't set a run config entry: ${rt} - ${lt}`)}),[ft,ht]}catch(it){throw ft!==0&&dt._OrtReleaseRunOptions(ft),ht.forEach(dt._free),it}}},2306:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.OnnxruntimeWebAssemblySessionHandler=void 0;const nt=tt(2806),st=tt(1670),ot=tt(2850),at=tt(2157);let dt;_e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(ft){const ht=await fetch(ft),ct=await ht.arrayBuffer();return(0,at.createSessionAllocate)(new Uint8Array(ct))}async loadModel(ft,ht){if(dt||(await(0,at.initOrt)(st.env.wasm.numThreads,(ct=>{switch(ct){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${ct}`)}})(st.env.logLevel)),dt=!0),typeof ft=="string")if(typeof fetch>"u"){const ct=await(0,ot.promisify)(nt.readFile)(ft);[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSession)(ct,ht)}else{const ct=await this.createSessionAllocate(ft);[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSessionFinalize)(ct,ht)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSession)(ft,ht)}async dispose(){return(0,at.releaseSession)(this.sessionId)}async run(ft,ht,ct){const it=[],rt=[];Object.entries(ft).forEach(gt=>{const mt=gt[0],yt=gt[1],bt=this.inputNames.indexOf(mt);if(bt===-1)throw new Error(`invalid input '${mt}'`);it.push(yt),rt.push(bt)});const lt=[];Object.entries(ht).forEach(gt=>{const mt=gt[0],yt=this.outputNames.indexOf(mt);if(yt===-1)throw new Error(`invalid output '${mt}'`);lt.push(yt)});const ut=await(0,at.run)(this.sessionId,rt,it.map(gt=>[gt.type,gt.dims,gt.data]),lt,ct),pt={};for(let gt=0;gt<ut.length;gt++)pt[this.outputNames[lt[gt]]]=new st.Tensor(ut[gt][0],ut[gt][2],ut[gt][1]);return pt}startProfiling(){}endProfiling(){(0,at.endProfiling)(this.sessionId)}}},4919:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.setSessionOptions=void 0;const nt=tt(7967),st=tt(4983),ot=tt(6361);_e.setSessionOptions=at=>{const dt=(0,ot.getInstance)();let ft=0;const ht=[],ct=at||{};(it=>{it.extra||(it.extra={}),it.extra.session||(it.extra.session={});const rt=it.extra.session;rt.use_ort_model_bytes_directly||(rt.use_ort_model_bytes_directly="1")})(ct);try{(at==null?void 0:at.graphOptimizationLevel)===void 0&&(ct.graphOptimizationLevel="all");const it=(ut=>{switch(ut){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ut}`)}})(ct.graphOptimizationLevel);(at==null?void 0:at.enableCpuMemArena)===void 0&&(ct.enableCpuMemArena=!0),(at==null?void 0:at.enableMemPattern)===void 0&&(ct.enableMemPattern=!0),(at==null?void 0:at.executionMode)===void 0&&(ct.executionMode="sequential");const rt=(ut=>{switch(ut){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ut}`)}})(ct.executionMode);let lt=0;if((at==null?void 0:at.logId)!==void 0&&(lt=(0,st.allocWasmString)(at.logId,ht)),(at==null?void 0:at.logSeverityLevel)===void 0)ct.logSeverityLevel=2;else if(typeof at.logSeverityLevel!="number"||!Number.isInteger(at.logSeverityLevel)||at.logSeverityLevel<0||at.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${at.logSeverityLevel}`);if((at==null?void 0:at.logVerbosityLevel)===void 0)ct.logVerbosityLevel=0;else if(typeof at.logVerbosityLevel!="number"||!Number.isInteger(at.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${at.logVerbosityLevel}`);if((at==null?void 0:at.enableProfiling)===void 0&&(ct.enableProfiling=!1),ft=dt._OrtCreateSessionOptions(it,!!ct.enableCpuMemArena,!!ct.enableMemPattern,rt,!!ct.enableProfiling,0,lt,ct.logSeverityLevel,ct.logVerbosityLevel),ft===0)throw new Error("Can't create session options");return at!=null&&at.executionProviders&&((ut,pt,gt)=>{for(const mt of pt){let yt=typeof mt=="string"?mt:mt.name;switch(yt){case"xnnpack":yt="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${yt}`)}const bt=(0,st.allocWasmString)(yt,gt);if((0,ot.getInstance)()._OrtAppendExecutionProvider(ut,bt)!==0)throw new Error(`Can't append execution provider: ${yt}`)}})(ft,at.executionProviders,ht),(at==null?void 0:at.extra)!==void 0&&(0,nt.iterateExtraOptions)(at.extra,"",new WeakSet,(ut,pt)=>{const gt=(0,st.allocWasmString)(ut,ht),mt=(0,st.allocWasmString)(pt,ht);if(dt._OrtAddSessionConfigEntry(ft,gt,mt)!==0)throw new Error(`Can't set a session config entry: ${ut} - ${pt}`)}),[ft,ht]}catch(it){throw ft!==0&&dt._OrtReleaseSessionOptions(ft),ht.forEach(dt._free),it}}},4983:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.allocWasmString=void 0;const nt=tt(6361);_e.allocWasmString=(st,ot)=>{const at=(0,nt.getInstance)(),dt=at.lengthBytesUTF8(st)+1,ft=at._malloc(dt);return at.stringToUTF8(st,ft,dt),ot.push(ft),ft}},349:(et,_e,tt)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.extractTransferableBuffers=_e.endProfiling=_e.run=_e.releaseSession=_e.createSession=_e.createSessionFinalize=_e.createSessionAllocate=_e.initOrt=void 0;const nt=tt(586),st=tt(4919),ot=tt(4983),at=tt(6361);_e.initOrt=(it,rt)=>{const lt=(0,at.getInstance)()._OrtInit(it,rt);if(lt!==0)throw new Error(`Can't initialize onnxruntime. error code = ${lt}`)};const dt=new Map;_e.createSessionAllocate=it=>{const rt=(0,at.getInstance)(),lt=rt._malloc(it.byteLength);return rt.HEAPU8.set(it,lt),[lt,it.byteLength]},_e.createSessionFinalize=(it,rt)=>{const lt=(0,at.getInstance)();let ut=0,pt=0,gt=[];try{if([pt,gt]=(0,st.setSessionOptions)(rt),ut=lt._OrtCreateSession(it[0],it[1],pt),ut===0)throw new Error("Can't create a session")}finally{lt._free(it[0]),lt._OrtReleaseSessionOptions(pt),gt.forEach(lt._free)}const mt=lt._OrtGetInputCount(ut),yt=lt._OrtGetOutputCount(ut),bt=[],wt=[],xt=[],Tt=[];for(let St=0;St<mt;St++){const Pt=lt._OrtGetInputName(ut,St);if(Pt===0)throw new Error("Can't get an input name");wt.push(Pt),bt.push(lt.UTF8ToString(Pt))}for(let St=0;St<yt;St++){const Pt=lt._OrtGetOutputName(ut,St);if(Pt===0)throw new Error("Can't get an output name");Tt.push(Pt),xt.push(lt.UTF8ToString(Pt))}return dt.set(ut,[ut,wt,Tt]),[ut,bt,xt]},_e.createSession=(it,rt)=>{const lt=(0,_e.createSessionAllocate)(it);return(0,_e.createSessionFinalize)(lt,rt)},_e.releaseSession=it=>{const rt=(0,at.getInstance)(),lt=dt.get(it);if(!lt)throw new Error("invalid session id");const ut=lt[0],pt=lt[1],gt=lt[2];pt.forEach(rt._OrtFree),gt.forEach(rt._OrtFree),rt._OrtReleaseSession(ut),dt.delete(it)};const ft=it=>{switch(it){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${it}`)}},ht=it=>{switch(it){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${it}`)}},ct=it=>{switch(it){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${it}`)}};_e.run=(it,rt,lt,ut,pt)=>{const gt=(0,at.getInstance)(),mt=dt.get(it);if(!mt)throw new Error("invalid session id");const yt=mt[0],bt=mt[1],wt=mt[2],xt=rt.length,Tt=ut.length;let St=0,Pt=[];const vt=[],At=[];try{[St,Pt]=(0,nt.setRunOptions)(pt);for(let Ot=0;Ot<xt;Ot++){const Ft=lt[Ot][0],Vt=lt[Ot][1],zt=lt[Ot][2];let Xt,Jt;if(Array.isArray(zt)){Jt=4*zt.length,Xt=gt._malloc(Jt),At.push(Xt);let dn=Xt/4;for(let on=0;on<zt.length;on++){if(typeof zt[on]!="string")throw new TypeError(`tensor data at index ${on} is not a string`);gt.HEAPU32[dn++]=(0,ot.allocWasmString)(zt[on],At)}}else Jt=zt.byteLength,Xt=gt._malloc(Jt),At.push(Xt),gt.HEAPU8.set(new Uint8Array(zt.buffer,zt.byteOffset,Jt),Xt);const nn=gt.stackSave(),xn=gt.stackAlloc(4*Vt.length);try{let dn=xn/4;Vt.forEach(hn=>gt.HEAP32[dn++]=hn);const on=gt._OrtCreateTensor(ft(Ft),Xt,Jt,xn,Vt.length);if(on===0)throw new Error("Can't create a tensor");vt.push(on)}finally{gt.stackRestore(nn)}}const It=gt.stackSave(),jt=gt.stackAlloc(4*xt),Lt=gt.stackAlloc(4*xt),Rt=gt.stackAlloc(4*Tt),$t=gt.stackAlloc(4*Tt);try{let Ot=jt/4,Ft=Lt/4,Vt=Rt/4,zt=$t/4;for(let nn=0;nn<xt;nn++)gt.HEAPU32[Ot++]=vt[nn],gt.HEAPU32[Ft++]=bt[rt[nn]];for(let nn=0;nn<Tt;nn++)gt.HEAPU32[Vt++]=0,gt.HEAPU32[zt++]=wt[ut[nn]];let Xt=gt._OrtRun(yt,Lt,jt,xt,$t,Tt,Rt,St);const Jt=[];if(Xt===0)for(let nn=0;nn<Tt;nn++){const xn=gt.HEAPU32[Rt/4+nn],dn=gt.stackSave(),on=gt.stackAlloc(16);let hn,fn=0;try{if(Xt=gt._OrtGetTensorData(xn,on,on+4,on+8,on+12),Xt!==0)throw new Error(`Can't access output tensor data. error code = ${Xt}`);let Cn=on/4;const Dn=gt.HEAPU32[Cn++];fn=gt.HEAPU32[Cn++];const Pn=gt.HEAPU32[Cn++],In=gt.HEAPU32[Cn++],$n=[];for(let En=0;En<In;En++)$n.push(gt.HEAPU32[Pn/4+En]);gt._OrtFree(Pn);const kn=$n.length===0?1:$n.reduce((En,Bn)=>En*Bn);if(hn=ht(Dn),hn==="string"){const En=[];let Bn=fn/4;for(let zn=0;zn<kn;zn++){const Vn=gt.HEAPU32[Bn++],Kn=zn===kn-1?void 0:gt.HEAPU32[Bn]-Vn;En.push(gt.UTF8ToString(Vn,Kn))}Jt.push([hn,$n,En])}else{const En=new(ct(hn))(kn);new Uint8Array(En.buffer,En.byteOffset,En.byteLength).set(gt.HEAPU8.subarray(fn,fn+En.byteLength)),Jt.push([hn,$n,En])}}finally{gt.stackRestore(dn),hn==="string"&&fn&&gt._free(fn),gt._OrtReleaseTensor(xn)}}if(Xt===0)return Jt;throw new Error(`failed to call OrtRun(). error code = ${Xt}.`)}finally{gt.stackRestore(It)}}finally{vt.forEach(gt._OrtReleaseTensor),At.forEach(gt._free),gt._OrtReleaseRunOptions(St),Pt.forEach(gt._free)}},_e.endProfiling=it=>{const rt=(0,at.getInstance)(),lt=dt.get(it);if(!lt)throw new Error("invalid session id");const ut=lt[0],pt=rt._OrtEndProfiling(ut);if(pt===0)throw new Error("Can't get an profile file name");rt._OrtFree(pt)},_e.extractTransferableBuffers=it=>{const rt=[];for(const lt of it){const ut=lt[2];!Array.isArray(ut)&&ut.buffer&&rt.push(ut.buffer)}return rt}},6361:function(et,_e,tt){var nt=this&&this.__createBinding||(Object.create?function(pt,gt,mt,yt){yt===void 0&&(yt=mt);var bt=Object.getOwnPropertyDescriptor(gt,mt);bt&&!("get"in bt?!gt.__esModule:bt.writable||bt.configurable)||(bt={enumerable:!0,get:function(){return gt[mt]}}),Object.defineProperty(pt,yt,bt)}:function(pt,gt,mt,yt){yt===void 0&&(yt=mt),pt[yt]=gt[mt]}),st=this&&this.__setModuleDefault||(Object.create?function(pt,gt){Object.defineProperty(pt,"default",{enumerable:!0,value:gt})}:function(pt,gt){pt.default=gt}),ot=this&&this.__importStar||function(pt){if(pt&&pt.__esModule)return pt;var gt={};if(pt!=null)for(var mt in pt)mt!=="default"&&Object.prototype.hasOwnProperty.call(pt,mt)&&nt(gt,pt,mt);return st(gt,pt),gt},at=this&&this.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(_e,"__esModule",{value:!0}),_e.dispose=_e.getInstance=_e.initializeWebAssembly=void 0;const dt=ot(tt(6449)),ft=at(tt(932)),ht=tt(3474);let ct,it=!1,rt=!1,lt=!1;const ut=(pt,gt)=>gt?pt?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":pt?"ort-wasm-simd.wasm":"ort-wasm.wasm";_e.initializeWebAssembly=async pt=>{if(it)return Promise.resolve();if(rt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(lt)throw new Error("previous call to 'initializeWebAssembly()' failed.");rt=!0;const gt=pt.initTimeout,mt=pt.numThreads,yt=pt.simd,bt=mt>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),wt=yt&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),xt=typeof pt.wasmPaths=="string"?pt.wasmPaths:void 0,Tt=ut(!1,bt),St=ut(wt,bt),Pt=typeof pt.wasmPaths=="object"?pt.wasmPaths[St]:void 0;let vt=!1;const At=[];if(gt>0&&At.push(new Promise(It=>{setTimeout(()=>{vt=!0,It()},gt)})),At.push(new Promise((It,jt)=>{const Lt=bt?ht:ft.default,Rt={locateFile:($t,Ot)=>bt&&$t.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([tt(4154)],{type:"text/javascript"})):$t===Tt?Pt??(xt??Ot)+St:Ot+$t};if(bt)if(typeof Blob>"u")Rt.mainScriptUrlOrBlob=dt.join("/","ort-wasm-threaded.js");else{const $t=`var ortWasmThreaded=(function(){var _scriptDir;return ${Lt.toString()}})();`;Rt.mainScriptUrlOrBlob=new Blob([$t],{type:"text/javascript"})}Lt(Rt).then($t=>{rt=!1,it=!0,ct=$t,It()},$t=>{rt=!1,lt=!0,jt($t)})})),await Promise.race(At),vt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${gt}ms`)},_e.getInstance=()=>{if(it&&ct)return ct;throw new Error("WebAssembly is not initialized yet.")},_e.dispose=()=>{var pt;!it||rt||lt||(rt=!0,(pt=ct.PThread)===null||pt===void 0||pt.terminateAllThreads(),ct=void 0,rt=!1,it=!1,lt=!0)}},9710:(et,_e,tt)=>{tt.d(_e,{Z:()=>ot});var nt=tt(477),st=tt.n(nt);function ot(){return st()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:et=>{et.exports=function(_e,tt,nt,st){var ot=self||window;try{try{var at;try{at=new ot.Blob([_e])}catch{(at=new(ot.BlobBuilder||ot.WebKitBlobBuilder||ot.MozBlobBuilder||ot.MSBlobBuilder)).append(_e),at=at.getBlob()}var dt=ot.URL||ot.webkitURL,ft=dt.createObjectURL(at),ht=new ot[tt](ft,nt);return dt.revokeObjectURL(ft),ht}catch{return new ot[tt]("data:application/javascript,".concat(encodeURIComponent(_e)),nt)}}catch{if(!st)throw Error("Inline worker is not supported");return new ot[tt](st,nt)}}},4154:et=>{et.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:et=>{et.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(et,_e,tt)=>{tt.r(_e),tt.d(_e,{flatbuffers:()=>nt});var nt={};nt.Offset,nt.Table,nt.SIZEOF_SHORT=2,nt.SIZEOF_INT=4,nt.FILE_IDENTIFIER_LENGTH=4,nt.SIZE_PREFIX_LENGTH=4,nt.Encoding={UTF8_BYTES:1,UTF16_STRING:2},nt.int32=new Int32Array(2),nt.float32=new Float32Array(nt.int32.buffer),nt.float64=new Float64Array(nt.int32.buffer),nt.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,nt.Long=function(st,ot){this.low=0|st,this.high=0|ot},nt.Long.create=function(st,ot){return st==0&&ot==0?nt.Long.ZERO:new nt.Long(st,ot)},nt.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},nt.Long.prototype.equals=function(st){return this.low==st.low&&this.high==st.high},nt.Long.ZERO=new nt.Long(0,0),nt.Builder=function(st){if(st)ot=st;else var ot=1024;this.bb=nt.ByteBuffer.allocate(ot),this.space=ot,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},nt.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},nt.Builder.prototype.forceDefaults=function(st){this.force_defaults=st},nt.Builder.prototype.dataBuffer=function(){return this.bb},nt.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},nt.Builder.prototype.prep=function(st,ot){st>this.minalign&&(this.minalign=st);for(var at=1+~(this.bb.capacity()-this.space+ot)&st-1;this.space<at+st+ot;){var dt=this.bb.capacity();this.bb=nt.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-dt}this.pad(at)},nt.Builder.prototype.pad=function(st){for(var ot=0;ot<st;ot++)this.bb.writeInt8(--this.space,0)},nt.Builder.prototype.writeInt8=function(st){this.bb.writeInt8(this.space-=1,st)},nt.Builder.prototype.writeInt16=function(st){this.bb.writeInt16(this.space-=2,st)},nt.Builder.prototype.writeInt32=function(st){this.bb.writeInt32(this.space-=4,st)},nt.Builder.prototype.writeInt64=function(st){this.bb.writeInt64(this.space-=8,st)},nt.Builder.prototype.writeFloat32=function(st){this.bb.writeFloat32(this.space-=4,st)},nt.Builder.prototype.writeFloat64=function(st){this.bb.writeFloat64(this.space-=8,st)},nt.Builder.prototype.addInt8=function(st){this.prep(1,0),this.writeInt8(st)},nt.Builder.prototype.addInt16=function(st){this.prep(2,0),this.writeInt16(st)},nt.Builder.prototype.addInt32=function(st){this.prep(4,0),this.writeInt32(st)},nt.Builder.prototype.addInt64=function(st){this.prep(8,0),this.writeInt64(st)},nt.Builder.prototype.addFloat32=function(st){this.prep(4,0),this.writeFloat32(st)},nt.Builder.prototype.addFloat64=function(st){this.prep(8,0),this.writeFloat64(st)},nt.Builder.prototype.addFieldInt8=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addInt8(ot),this.slot(st))},nt.Builder.prototype.addFieldInt16=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addInt16(ot),this.slot(st))},nt.Builder.prototype.addFieldInt32=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addInt32(ot),this.slot(st))},nt.Builder.prototype.addFieldInt64=function(st,ot,at){!this.force_defaults&&ot.equals(at)||(this.addInt64(ot),this.slot(st))},nt.Builder.prototype.addFieldFloat32=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addFloat32(ot),this.slot(st))},nt.Builder.prototype.addFieldFloat64=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addFloat64(ot),this.slot(st))},nt.Builder.prototype.addFieldOffset=function(st,ot,at){(this.force_defaults||ot!=at)&&(this.addOffset(ot),this.slot(st))},nt.Builder.prototype.addFieldStruct=function(st,ot,at){ot!=at&&(this.nested(ot),this.slot(st))},nt.Builder.prototype.nested=function(st){if(st!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},nt.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},nt.Builder.prototype.slot=function(st){this.vtable[st]=this.offset()},nt.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},nt.Builder.growByteBuffer=function(st){var ot=st.capacity();if(3221225472&ot)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var at=ot<<1,dt=nt.ByteBuffer.allocate(at);return dt.setPosition(at-ot),dt.bytes().set(st.bytes(),at-ot),dt},nt.Builder.prototype.addOffset=function(st){this.prep(nt.SIZEOF_INT,0),this.writeInt32(this.offset()-st+nt.SIZEOF_INT)},nt.Builder.prototype.startObject=function(st){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=st;for(var ot=0;ot<st;ot++)this.vtable[ot]=0;this.isNested=!0,this.object_start=this.offset()},nt.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var st=this.offset(),ot=this.vtable_in_use-1;ot>=0&&this.vtable[ot]==0;ot--);for(var at=ot+1;ot>=0;ot--)this.addInt16(this.vtable[ot]!=0?st-this.vtable[ot]:0);this.addInt16(st-this.object_start);var dt=(at+2)*nt.SIZEOF_SHORT;this.addInt16(dt);var ft=0,ht=this.space;e:for(ot=0;ot<this.vtables.length;ot++){var ct=this.bb.capacity()-this.vtables[ot];if(dt==this.bb.readInt16(ct)){for(var it=nt.SIZEOF_SHORT;it<dt;it+=nt.SIZEOF_SHORT)if(this.bb.readInt16(ht+it)!=this.bb.readInt16(ct+it))continue e;ft=this.vtables[ot];break}}return ft?(this.space=this.bb.capacity()-st,this.bb.writeInt32(this.space,ft-st)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-st,this.offset()-st)),this.isNested=!1,st},nt.Builder.prototype.finish=function(st,ot,at){var dt=at?nt.SIZE_PREFIX_LENGTH:0;if(ot){var ft=ot;if(this.prep(this.minalign,nt.SIZEOF_INT+nt.FILE_IDENTIFIER_LENGTH+dt),ft.length!=nt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+nt.FILE_IDENTIFIER_LENGTH);for(var ht=nt.FILE_IDENTIFIER_LENGTH-1;ht>=0;ht--)this.writeInt8(ft.charCodeAt(ht))}this.prep(this.minalign,nt.SIZEOF_INT+dt),this.addOffset(st),dt&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},nt.Builder.prototype.finishSizePrefixed=function(st,ot){this.finish(st,ot,!0)},nt.Builder.prototype.requiredField=function(st,ot){var at=this.bb.capacity()-st,dt=at-this.bb.readInt32(at);if(this.bb.readInt16(dt+ot)==0)throw new Error("FlatBuffers: field "+ot+" must be set")},nt.Builder.prototype.startVector=function(st,ot,at){this.notNested(),this.vector_num_elems=ot,this.prep(nt.SIZEOF_INT,st*ot),this.prep(at,st*ot)},nt.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},nt.Builder.prototype.createString=function(st){if(st instanceof Uint8Array)var ot=st;else{ot=[];for(var at=0;at<st.length;){var dt,ft=st.charCodeAt(at++);(dt=ft<55296||ft>=56320?ft:(ft<<10)+st.charCodeAt(at++)+-56613888)<128?ot.push(dt):(dt<2048?ot.push(dt>>6&31|192):(dt<65536?ot.push(dt>>12&15|224):ot.push(dt>>18&7|240,dt>>12&63|128),ot.push(dt>>6&63|128)),ot.push(63&dt|128))}}this.addInt8(0),this.startVector(1,ot.length,1),this.bb.setPosition(this.space-=ot.length),at=0;for(var ht=this.space,ct=this.bb.bytes();at<ot.length;at++)ct[ht++]=ot[at];return this.endVector()},nt.Builder.prototype.createLong=function(st,ot){return nt.Long.create(st,ot)},nt.ByteBuffer=function(st){this.bytes_=st,this.position_=0},nt.ByteBuffer.allocate=function(st){return new nt.ByteBuffer(new Uint8Array(st))},nt.ByteBuffer.prototype.clear=function(){this.position_=0},nt.ByteBuffer.prototype.bytes=function(){return this.bytes_},nt.ByteBuffer.prototype.position=function(){return this.position_},nt.ByteBuffer.prototype.setPosition=function(st){this.position_=st},nt.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},nt.ByteBuffer.prototype.readInt8=function(st){return this.readUint8(st)<<24>>24},nt.ByteBuffer.prototype.readUint8=function(st){return this.bytes_[st]},nt.ByteBuffer.prototype.readInt16=function(st){return this.readUint16(st)<<16>>16},nt.ByteBuffer.prototype.readUint16=function(st){return this.bytes_[st]|this.bytes_[st+1]<<8},nt.ByteBuffer.prototype.readInt32=function(st){return this.bytes_[st]|this.bytes_[st+1]<<8|this.bytes_[st+2]<<16|this.bytes_[st+3]<<24},nt.ByteBuffer.prototype.readUint32=function(st){return this.readInt32(st)>>>0},nt.ByteBuffer.prototype.readInt64=function(st){return new nt.Long(this.readInt32(st),this.readInt32(st+4))},nt.ByteBuffer.prototype.readUint64=function(st){return new nt.Long(this.readUint32(st),this.readUint32(st+4))},nt.ByteBuffer.prototype.readFloat32=function(st){return nt.int32[0]=this.readInt32(st),nt.float32[0]},nt.ByteBuffer.prototype.readFloat64=function(st){return nt.int32[nt.isLittleEndian?0:1]=this.readInt32(st),nt.int32[nt.isLittleEndian?1:0]=this.readInt32(st+4),nt.float64[0]},nt.ByteBuffer.prototype.writeInt8=function(st,ot){this.bytes_[st]=ot},nt.ByteBuffer.prototype.writeUint8=function(st,ot){this.bytes_[st]=ot},nt.ByteBuffer.prototype.writeInt16=function(st,ot){this.bytes_[st]=ot,this.bytes_[st+1]=ot>>8},nt.ByteBuffer.prototype.writeUint16=function(st,ot){this.bytes_[st]=ot,this.bytes_[st+1]=ot>>8},nt.ByteBuffer.prototype.writeInt32=function(st,ot){this.bytes_[st]=ot,this.bytes_[st+1]=ot>>8,this.bytes_[st+2]=ot>>16,this.bytes_[st+3]=ot>>24},nt.ByteBuffer.prototype.writeUint32=function(st,ot){this.bytes_[st]=ot,this.bytes_[st+1]=ot>>8,this.bytes_[st+2]=ot>>16,this.bytes_[st+3]=ot>>24},nt.ByteBuffer.prototype.writeInt64=function(st,ot){this.writeInt32(st,ot.low),this.writeInt32(st+4,ot.high)},nt.ByteBuffer.prototype.writeUint64=function(st,ot){this.writeUint32(st,ot.low),this.writeUint32(st+4,ot.high)},nt.ByteBuffer.prototype.writeFloat32=function(st,ot){nt.float32[0]=ot,this.writeInt32(st,nt.int32[0])},nt.ByteBuffer.prototype.writeFloat64=function(st,ot){nt.float64[0]=ot,this.writeInt32(st,nt.int32[nt.isLittleEndian?0:1]),this.writeInt32(st+4,nt.int32[nt.isLittleEndian?1:0])},nt.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+nt.SIZEOF_INT+nt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var st="",ot=0;ot<nt.FILE_IDENTIFIER_LENGTH;ot++)st+=String.fromCharCode(this.readInt8(this.position_+nt.SIZEOF_INT+ot));return st},nt.ByteBuffer.prototype.__offset=function(st,ot){var at=st-this.readInt32(st);return ot<this.readInt16(at)?this.readInt16(at+ot):0},nt.ByteBuffer.prototype.__union=function(st,ot){return st.bb_pos=ot+this.readInt32(ot),st.bb=this,st},nt.ByteBuffer.prototype.__string=function(st,ot){st+=this.readInt32(st);var at=this.readInt32(st),dt="",ft=0;if(st+=nt.SIZEOF_INT,ot===nt.Encoding.UTF8_BYTES)return this.bytes_.subarray(st,st+at);for(;ft<at;){var ht,ct=this.readUint8(st+ft++);if(ct<192)ht=ct;else{var it=this.readUint8(st+ft++);if(ct<224)ht=(31&ct)<<6|63&it;else{var rt=this.readUint8(st+ft++);ht=ct<240?(15&ct)<<12|(63&it)<<6|63&rt:(7&ct)<<18|(63&it)<<12|(63&rt)<<6|63&this.readUint8(st+ft++)}}ht<65536?dt+=String.fromCharCode(ht):(ht-=65536,dt+=String.fromCharCode(55296+(ht>>10),56320+(1023&ht)))}return dt},nt.ByteBuffer.prototype.__indirect=function(st){return st+this.readInt32(st)},nt.ByteBuffer.prototype.__vector=function(st){return st+this.readInt32(st)+nt.SIZEOF_INT},nt.ByteBuffer.prototype.__vector_len=function(st){return this.readInt32(st+this.readInt32(st))},nt.ByteBuffer.prototype.__has_identifier=function(st){if(st.length!=nt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+nt.FILE_IDENTIFIER_LENGTH);for(var ot=0;ot<nt.FILE_IDENTIFIER_LENGTH;ot++)if(st.charCodeAt(ot)!=this.readInt8(this.position_+nt.SIZEOF_INT+ot))return!1;return!0},nt.ByteBuffer.prototype.createLong=function(st,ot){return nt.Long.create(st,ot)}}},__webpack_module_cache__={};function __webpack_require__(et){var _e=__webpack_module_cache__[et];if(_e!==void 0)return _e.exports;var tt=__webpack_module_cache__[et]={exports:{}};return __webpack_modules__[et].call(tt.exports,tt,tt.exports,__webpack_require__),tt.exports}__webpack_require__.n=et=>{var _e=et&&et.__esModule?()=>et.default:()=>et;return __webpack_require__.d(_e,{a:_e}),_e},__webpack_require__.d=(et,_e)=>{for(var tt in _e)__webpack_require__.o(_e,tt)&&!__webpack_require__.o(et,tt)&&Object.defineProperty(et,tt,{enumerable:!0,get:_e[tt]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(et,_e)=>Object.prototype.hasOwnProperty.call(et,_e),__webpack_require__.r=et=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(et,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min$1);var ortWeb_minExports=ortWeb_min$1.exports;const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var cs;typeof process<"u"&&((cs=process==null?void 0:process.release)==null?void 0:cs.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(et){return Object.keys(et).length===0}var define_process_env_default={};class FileResponse{constructor(_e){Qt(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=_e,this.headers=new Headers,this.exists=sharp.existsSync(_e),this.exists){this.status=200,this.statusText="OK";let tt=sharp.statSync(_e);this.headers.set("content-length",tt.size.toString()),this.updateContentType();let nt=this;this.body=new ReadableStream({start(st){nt.arrayBuffer().then(ot=>{st.enqueue(new Uint8Array(ot)),st.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const _e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[_e]??"application/octet-stream")}clone(){let _e=new FileResponse(this.filePath);return _e.exists=this.exists,_e.status=this.status,_e.statusText=this.statusText,_e.headers=new Headers(this.headers),_e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const _e=await sharp.promises.readFile(this.filePath);return new Blob([_e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(et,_e=null,tt=null){let nt;try{nt=new URL(et)}catch{return!1}return!(_e&&!_e.includes(nt.protocol)||tt&&!tt.includes(nt.hostname))}async function getFile(et){var _e;if(env$1.useFS&&!isValidUrl(et,["http:","https:","blob:"]))return new FileResponse(et);if(typeof process<"u"&&((_e=process==null?void 0:process.release)==null?void 0:_e.name)==="node"){const tt=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),nt=env$1.version,st=new Headers;if(st.set("User-Agent",`transformers.js/${nt}; is_ci/${tt};`),isValidUrl(et,["http:","https:"],["huggingface.co","hf.co"])){const at=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);at&&st.set("Authorization",`Bearer ${at}`)}return fetch(et,{headers:st})}else return fetch(et)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(et,_e,tt){if(!tt)return null;const nt=ERROR_MAPPING[et]??`Error (${et}) occurred while trying to load file`;throw Error(`${nt}: "${_e}".`)}class FileCache{constructor(_e){this.path=_e}async match(_e){let tt=sharp.join(this.path,_e),nt=new FileResponse(tt);if(nt.exists)return nt}async put(_e,tt){const nt=Buffer.from(await tt.arrayBuffer());let st=sharp.join(this.path,_e);try{await sharp.promises.mkdir(sharp.dirname(st),{recursive:!0}),await sharp.promises.writeFile(st,nt)}catch(ot){console.warn("An error occurred while writing the file to cache:",ot)}}}async function tryCache(et,..._e){for(let tt of _e)try{let nt=await et.match(tt);if(nt)return nt}catch{continue}}async function getModelFile(et,_e,tt=!0,nt={}){if(!env$1.allowLocalModels){if(nt.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!env$1.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}dispatchCallback(nt.progress_callback,{status:"initiate",name:et,file:_e});let st;if(!st&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{st=await caches.open("transformers-cache")}catch(mt){console.warn("An error occurred while opening the browser cache:",mt)}}if(!st&&env$1.useFSCache&&(st=new FileCache(nt.cache_dir??env$1.cacheDir)),!st&&env$1.useCustomCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");const ot=nt.revision??"main";let at=pathJoin(et,_e),dt=pathJoin(env$1.localModelPath,at),ft=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",et).replaceAll("{revision}",encodeURIComponent(ot)),_e),ht=ot==="main"?at:pathJoin(et,ot,_e),ct,it=st instanceof FileCache?ht:ft,rt=!1,lt;st&&(lt=await tryCache(st,dt,it));const ut=lt!==void 0;if(lt===void 0){if(env$1.allowLocalModels)if(isValidUrl(at,["http:","https:"])){if(nt.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${at}.`);if(!env$1.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${at}.`)}else try{lt=await getFile(dt),ct=dt}catch(yt){console.warn(`Unable to load from local path "${dt}": "${yt}"`)}if(lt===void 0||lt.status===404){if(nt.local_files_only||!env$1.allowRemoteModels){if(tt)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${dt}".`);return null}if(lt=await getFile(ft),lt.status!==200)return handleError(lt.status,ft,tt);ct=it}rt=st&&typeof Response<"u"&&lt instanceof Response&&lt.status===200}dispatchCallback(nt.progress_callback,{status:"download",name:et,file:_e});const pt={status:"progress",name:et,file:_e};let gt;return nt.progress_callback?ut&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(gt=new Uint8Array(await lt.arrayBuffer()),dispatchCallback(nt.progress_callback,{...pt,progress:100,loaded:gt.length,total:gt.length})):gt=await readResponse(lt,mt=>{dispatchCallback(nt.progress_callback,{...pt,...mt})}):gt=new Uint8Array(await lt.arrayBuffer()),rt&&ct&&await st.match(ct)===void 0&&await st.put(ct,new Response(gt,{headers:lt.headers})).catch(mt=>{console.warn(`Unable to add response to browser cache: ${mt}.`)}),dispatchCallback(nt.progress_callback,{status:"done",name:et,file:_e}),gt}async function getModelJSON(et,_e,tt=!0,nt={}){let st=await getModelFile(et,_e,tt,nt);if(st===null)return{};let at=new TextDecoder("utf-8").decode(st);return JSON.parse(at)}async function readResponse(et,_e){const tt=et.headers.get("Content-Length");tt===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let nt=parseInt(tt??"0"),st=new Uint8Array(nt),ot=0;const at=et.body.getReader();async function dt(){const{done:ft,value:ht}=await at.read();if(ft)return;let ct=ot+ht.length;if(ct>nt){nt=ct;let rt=new Uint8Array(nt);rt.set(st),st=rt}st.set(ht,ot),ot=ct;const it=ot/nt*100;return _e({progress:it,loaded:ot,total:nt}),dt()}return await dt(),st}function pathJoin(...et){return et=et.map((_e,tt)=>(tt&&(_e=_e.replace(new RegExp("^/"),"")),tt!==et.length-1&&(_e=_e.replace(new RegExp("/$"),"")),_e)),et.join("/")}function interpolate_data(et,[_e,tt,nt],[st,ot],at="bilinear",dt=!1){const ft=ot/nt,ht=st/tt,ct=new et.constructor(st*ot*_e),it=tt*nt,rt=st*ot;for(let lt=0;lt<st;++lt)for(let ut=0;ut<ot;++ut){const pt=lt*ot+ut,gt=(ut+.5)/ft-.5,mt=(lt+.5)/ht-.5;let yt=Math.floor(gt),bt=Math.floor(mt);const wt=Math.min(yt+1,nt-1),xt=Math.min(bt+1,tt-1);yt=Math.max(yt,0),bt=Math.max(bt,0);const Tt=gt-yt,St=mt-bt,Pt=(1-Tt)*(1-St),vt=Tt*(1-St),At=(1-Tt)*St,It=Tt*St,jt=bt*nt,Lt=xt*nt,Rt=jt+yt,$t=jt+wt,Ot=Lt+yt,Ft=Lt+wt;for(let Vt=0;Vt<_e;++Vt){const zt=Vt*it;ct[Vt*rt+pt]=Pt*et[zt+Rt]+vt*et[zt+$t]+At*et[zt+Ot]+It*et[zt+Ft]}}return ct}function permute_data(et,_e,tt){const nt=new Array(tt.length),st=new Array(tt.length);for(let dt=tt.length-1,ft=1;dt>=0;--dt)st[dt]=ft,nt[dt]=_e[tt[dt]],ft*=nt[dt];const ot=tt.map((dt,ft)=>st[tt.indexOf(ft)]),at=new et.constructor(et.length);for(let dt=0;dt<et.length;++dt){let ft=0;for(let ht=_e.length-1,ct=dt;ht>=0;--ht)ft+=ct%_e[ht]*ot[ht],ct=Math.floor(ct/_e[ht]);at[ft]=et[dt]}return[at,nt]}function softmax(et){const _e=max(et)[0],tt=et.map(ot=>Math.exp(ot-_e)),nt=tt.reduce((ot,at)=>ot+at,0);return tt.map(ot=>ot/nt)}function log_softmax(et){return softmax(et).map(nt=>Math.log(nt))}function getTopItems(et,_e=0){return et=Array.from(et).map((tt,nt)=>[nt,tt]).sort((tt,nt)=>nt[1]-tt[1]),_e!==null&&_e>0&&(et=et.slice(0,_e)),et}function min(et){if(et.length===0)throw Error("Array must not be empty");let _e=et[0],tt=0;for(let nt=1;nt<et.length;++nt)et[nt]<_e&&(_e=et[nt],tt=nt);return[_e,tt]}function max(et){if(et.length===0)throw Error("Array must not be empty");let _e=et[0],tt=0;for(let nt=1;nt<et.length;++nt)et[nt]>_e&&(_e=et[nt],tt=nt);return[Number(_e),tt]}function isPowerOfTwo(et){return et>0&&(et&et-1)===0}class P2FFT{constructor(_e){if(this.size=_e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=_e<<1,this.table=new Float64Array(this.size*2);for(let nt=0;nt<this.table.length;nt+=2){const st=Math.PI*nt/this.size;this.table[nt]=Math.cos(st),this.table[nt+1]=-Math.sin(st)}let tt=0;for(let nt=1;this.size>nt;nt<<=1)++tt;this._width=tt%2===0?tt-1:tt,this._bitrev=new Int32Array(1<<this._width);for(let nt=0;nt<this._bitrev.length;++nt){this._bitrev[nt]=0;for(let st=0;st<this._width;st+=2){const ot=this._width-st-2;this._bitrev[nt]|=(nt>>>st&3)<<ot}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(_e,tt){const nt=tt||new Array(_e.length>>>1);for(let st=0;st<_e.length;st+=2)nt[st>>>1]=_e[st];return nt}toComplexArray(_e,tt){const nt=tt||this.createComplexArray();for(let st=0;st<nt.length;st+=2)nt[st]=_e[st>>>1],nt[st+1]=0;return nt}transform(_e,tt){if(_e===tt)throw new Error("Input and output buffers must be different");this._transform4(_e,tt,1)}realTransform(_e,tt){if(_e===tt)throw new Error("Input and output buffers must be different");this._realTransform4(_e,tt,1)}inverseTransform(_e,tt){if(_e===tt)throw new Error("Input and output buffers must be different");this._transform4(_e,tt,-1);for(let nt=0;nt<_e.length;++nt)_e[nt]/=this.size}_transform4(_e,tt,nt){const st=this._csize;let at=1<<this._width,dt=st/at<<1,ft,ht;const ct=this._bitrev;if(dt===4)for(ft=0,ht=0;ft<st;ft+=dt,++ht){const rt=ct[ht];this._singleTransform2(tt,_e,ft,rt,at)}else for(ft=0,ht=0;ft<st;ft+=dt,++ht){const rt=ct[ht];this._singleTransform4(tt,_e,ft,rt,at,nt)}const it=this.table;for(at>>=2;at>=2;at>>=2){dt=st/at<<1;const rt=dt>>>2;for(ft=0;ft<st;ft+=dt){const lt=ft+rt-1;for(let ut=ft,pt=0;ut<lt;ut+=2,pt+=at){const gt=ut,mt=gt+rt,yt=mt+rt,bt=yt+rt,wt=_e[gt],xt=_e[gt+1],Tt=_e[mt],St=_e[mt+1],Pt=_e[yt],vt=_e[yt+1],At=_e[bt],It=_e[bt+1],jt=it[pt],Lt=nt*it[pt+1],Rt=Tt*jt-St*Lt,$t=Tt*Lt+St*jt,Ot=it[2*pt],Ft=nt*it[2*pt+1],Vt=Pt*Ot-vt*Ft,zt=Pt*Ft+vt*Ot,Xt=it[3*pt],Jt=nt*it[3*pt+1],nn=At*Xt-It*Jt,xn=At*Jt+It*Xt,dn=wt+Vt,on=xt+zt,hn=wt-Vt,fn=xt-zt,Cn=Rt+nn,Dn=$t+xn,Pn=nt*(Rt-nn),In=nt*($t-xn);_e[gt]=dn+Cn,_e[gt+1]=on+Dn,_e[mt]=hn+In,_e[mt+1]=fn-Pn,_e[yt]=dn-Cn,_e[yt+1]=on-Dn,_e[bt]=hn-In,_e[bt+1]=fn+Pn}}}}_singleTransform2(_e,tt,nt,st,ot){const at=_e[st],dt=_e[st+1],ft=_e[st+ot],ht=_e[st+ot+1];tt[nt]=at+ft,tt[nt+1]=dt+ht,tt[nt+2]=at-ft,tt[nt+3]=dt-ht}_singleTransform4(_e,tt,nt,st,ot,at){const dt=ot*2,ft=ot*3,ht=_e[st],ct=_e[st+1],it=_e[st+ot],rt=_e[st+ot+1],lt=_e[st+dt],ut=_e[st+dt+1],pt=_e[st+ft],gt=_e[st+ft+1],mt=ht+lt,yt=ct+ut,bt=ht-lt,wt=ct-ut,xt=it+pt,Tt=rt+gt,St=at*(it-pt),Pt=at*(rt-gt);tt[nt]=mt+xt,tt[nt+1]=yt+Tt,tt[nt+2]=bt+Pt,tt[nt+3]=wt-St,tt[nt+4]=mt-xt,tt[nt+5]=yt-Tt,tt[nt+6]=bt-Pt,tt[nt+7]=wt+St}_realTransform4(_e,tt,nt){const st=this._csize;let at=1<<this._width,dt=st/at<<1,ft,ht;const ct=this._bitrev;if(dt===4)for(ft=0,ht=0;ft<st;ft+=dt,++ht){const lt=ct[ht];this._singleRealTransform2(tt,_e,ft,lt>>>1,at>>>1)}else for(ft=0,ht=0;ft<st;ft+=dt,++ht){const lt=ct[ht];this._singleRealTransform4(tt,_e,ft,lt>>>1,at>>>1,nt)}const it=this.table;for(at>>=2;at>=2;at>>=2){dt=st/at<<1;const lt=dt>>>1,ut=lt>>>1,pt=ut>>>1;for(ft=0;ft<st;ft+=dt)for(let gt=0,mt=0;gt<=pt;gt+=2,mt+=at){const yt=ft+gt,bt=yt+ut,wt=bt+ut,xt=wt+ut,Tt=_e[yt],St=_e[yt+1],Pt=_e[bt],vt=_e[bt+1],At=_e[wt],It=_e[wt+1],jt=_e[xt],Lt=_e[xt+1],Rt=Tt,$t=St,Ot=it[mt],Ft=nt*it[mt+1],Vt=Pt*Ot-vt*Ft,zt=Pt*Ft+vt*Ot,Xt=it[2*mt],Jt=nt*it[2*mt+1],nn=At*Xt-It*Jt,xn=At*Jt+It*Xt,dn=it[3*mt],on=nt*it[3*mt+1],hn=jt*dn-Lt*on,fn=jt*on+Lt*dn,Cn=Rt+nn,Dn=$t+xn,Pn=Rt-nn,In=$t-xn,$n=Vt+hn,kn=zt+fn,En=nt*(Vt-hn),Bn=nt*(zt-fn);if(_e[yt]=Cn+$n,_e[yt+1]=Dn+kn,_e[bt]=Pn+Bn,_e[bt+1]=In-En,gt===0){_e[wt]=Cn-$n,_e[wt+1]=Dn-kn;continue}if(gt===pt)continue;const zn=ft+ut-gt,Vn=ft+lt-gt;_e[zn]=Pn-nt*Bn,_e[zn+1]=-In-nt*En,_e[Vn]=Cn-nt*$n,_e[Vn+1]=-Dn+nt*kn}}const rt=st>>>1;for(let lt=2;lt<rt;lt+=2)_e[st-lt]=_e[lt],_e[st-lt+1]=-_e[lt+1]}_singleRealTransform2(_e,tt,nt,st,ot){const at=_e[st],dt=_e[st+ot];tt[nt]=at+dt,tt[nt+1]=0,tt[nt+2]=at-dt,tt[nt+3]=0}_singleRealTransform4(_e,tt,nt,st,ot,at){const dt=ot*2,ft=ot*3,ht=_e[st],ct=_e[st+ot],it=_e[st+dt],rt=_e[st+ft],lt=ht+it,ut=ht-it,pt=ct+rt,gt=at*(ct-rt);tt[nt]=lt+pt,tt[nt+1]=0,tt[nt+2]=ut,tt[nt+3]=-gt,tt[nt+4]=lt-pt,tt[nt+5]=0,tt[nt+6]=ut,tt[nt+7]=gt}}class NP2FFT{constructor(_e){const tt=2*(_e-1),nt=2*(2*_e-1),st=2**Math.ceil(Math.log2(nt));this.bufferSize=st,this._a=tt;const ot=new Float64Array(nt),at=new Float64Array(st);this._chirpBuffer=new Float64Array(st),this._buffer1=new Float64Array(st),this._buffer2=new Float64Array(st),this._outBuffer1=new Float64Array(st),this._outBuffer2=new Float64Array(st);const dt=-2*Math.PI/_e,ft=Math.cos(dt),ht=Math.sin(dt);for(let ct=0;ct<nt>>1;++ct){const it=(ct+1-_e)**2/2,rt=Math.sqrt(ft**2+ht**2)**it,lt=it*Math.atan2(ht,ft),ut=2*ct;ot[ut]=rt*Math.cos(lt),ot[ut+1]=rt*Math.sin(lt),at[ut]=ot[ut],at[ut+1]=-ot[ut+1]}this._slicedChirpBuffer=ot.subarray(tt,nt),this._f=new P2FFT(st>>1),this._f.transform(this._chirpBuffer,at)}_transform(_e,tt,nt){const st=this._buffer1,ot=this._buffer2,at=this._outBuffer1,dt=this._outBuffer2,ft=this._chirpBuffer,ht=this._slicedChirpBuffer,ct=this._a;if(nt)for(let it=0;it<ht.length;it+=2){const rt=it+1,lt=it>>1,ut=tt[lt];st[it]=ut*ht[it],st[rt]=ut*ht[rt]}else for(let it=0;it<ht.length;it+=2){const rt=it+1;st[it]=tt[it]*ht[it]-tt[rt]*ht[rt],st[rt]=tt[it]*ht[rt]+tt[rt]*ht[it]}this._f.transform(at,st);for(let it=0;it<ft.length;it+=2){const rt=it+1;ot[it]=at[it]*ft[it]-at[rt]*ft[rt],ot[rt]=at[it]*ft[rt]+at[rt]*ft[it]}this._f.inverseTransform(dt,ot);for(let it=0;it<dt.length;it+=2){const rt=dt[it+ct],lt=dt[it+ct+1],ut=ht[it],pt=ht[it+1];_e[it]=rt*ut-lt*pt,_e[it+1]=rt*pt+lt*ut}}transform(_e,tt){this._transform(_e,tt,!1)}realTransform(_e,tt){this._transform(_e,tt,!0)}}class FFT{constructor(_e){this.fft_length=_e,this.isPowerOfTwo=isPowerOfTwo(_e),this.isPowerOfTwo?(this.fft=new P2FFT(_e),this.outputBufferSize=2*_e):(this.fft=new NP2FFT(_e),this.outputBufferSize=this.fft.bufferSize)}realTransform(_e,tt){this.fft.realTransform(_e,tt)}transform(_e,tt){this.fft.transform(_e,tt)}}function medianFilter(et,_e){if(_e%2===0||_e<=0)throw new Error("Window size must be a positive odd number");const tt=new et.constructor(et.length),nt=new et.constructor(_e),st=Math.floor(_e/2);for(let ot=0;ot<et.length;++ot){let at=0;for(let dt=-st;dt<=st;++dt){let ft=ot+dt;ft<0?ft=Math.abs(ft):ft>=et.length&&(ft=2*(et.length-1)-ft),nt[at++]=et[ft]}nt.sort(),tt[ot]=nt[st]}return tt}function round(et,_e){const tt=Math.pow(10,_e);return Math.round(et*tt)/tt}function bankers_round(et){const _e=Math.round(et);return Math.abs(et)%1===.5?_e%2===0?_e:_e-1:_e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(..._e){Qt(this,"dims");Qt(this,"type");Qt(this,"data");Qt(this,"size");return _e[0]instanceof ONNXTensor$1?Object.assign(this,_e[0]):Object.assign(this,new ONNXTensor$1(_e[0],_e[1],_e[2])),new Proxy(this,{get:(tt,nt)=>{if(typeof nt=="string"){let st=Number(nt);if(Number.isInteger(st))return tt._getitem(st)}return tt[nt]},set:(tt,nt,st)=>tt[nt]=st})}*[Symbol.iterator](){const[_e,...tt]=this.dims;if(tt.length>0){const nt=tt.reduce((st,ot)=>st*ot);for(let st=0;st<_e;++st)yield this._subarray(st,nt,tt)}else yield*this.data}_getitem(_e){const[tt,...nt]=this.dims;if(_e=safeIndex(_e,tt),nt.length>0){const st=nt.reduce((ot,at)=>ot*at);return this._subarray(_e,st,nt)}else return new Tensor(this.type,[this.data[_e]],nt)}indexOf(_e){for(let tt=0;tt<this.data.length;++tt)if(this.data[tt]==_e)return tt;return-1}_subarray(_e,tt,nt){const st=_e*tt,ot=(_e+1)*tt,at="subarray"in this.data?this.data.subarray(st,ot):this.data.slice(st,ot);return new Tensor(this.type,at,nt)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let _e=0;_e<this.data.length;++_e)this.data[_e]=1/(1+Math.exp(-this.data[_e]));return this}mul(_e){return this.clone().mul_(_e)}mul_(_e){for(let tt=0;tt<this.data.length;++tt)this.data[tt]*=_e;return this}add(_e){return this.clone().add_(_e)}add_(_e){for(let tt=0;tt<this.data.length;++tt)this.data[tt]+=_e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(..._e){let tt=[],nt=[];for(let ft=0;ft<this.dims.length;++ft){let ht=_e[ft];if(ht==null)nt.push([0,this.dims[ft]]),tt.push(this.dims[ft]);else if(typeof ht=="number")ht=safeIndex(ht,this.dims[ft],ft),nt.push([ht,ht+1]);else if(Array.isArray(ht)&&ht.length===2){if(ht[0]>ht[1])throw new Error(`Invalid slice: ${ht}`);let ct=[Math.max(ht[0],0),Math.min(ht[1],this.dims[ft])];nt.push(ct),tt.push(ct[1]-ct[0])}else throw new Error(`Invalid slice: ${ht}`)}let st=nt.map(([ft,ht])=>ht-ft),ot=st.reduce((ft,ht)=>ft*ht),at=new this.data.constructor(ot);const dt=this.stride();for(let ft=0;ft<ot;++ft){let ht=0;for(let ct=st.length-1,it=ft;ct>=0;--ct){const rt=st[ct];ht+=(it%rt+nt[ct][0])*dt[ct],it=Math.floor(it/rt)}at[ft]=this.data[ht]}return new Tensor(this.type,at,tt)}permute(..._e){return permute(this,_e)}transpose(..._e){return this.permute(..._e)}sum(_e=null,tt=!1){return this.norm(1,_e,tt)}norm(_e="fro",tt=null,nt=!1){if(_e==="fro")_e=2;else if(typeof _e=="string")throw Error(`Unsupported norm: ${_e}`);if(tt===null){let at=this.data.reduce((dt,ft)=>dt+ft**_e,0)**(1/_e);return new Tensor(this.type,[at],[])}tt=safeIndex(tt,this.dims.length);const st=this.dims.slice();st[tt]=1;const ot=new this.data.constructor(this.data.length/this.dims[tt]);for(let at=0;at<this.data.length;++at){let dt=0;for(let ft=this.dims.length-1,ht=at,ct=1;ft>=0;--ft){const it=this.dims[ft];if(ft!==tt){const rt=ht%it;dt+=rt*ct,ct*=st[ft]}ht=Math.floor(ht/it)}ot[dt]+=this.data[at]**_e}if(_e!==1)for(let at=0;at<ot.length;++at)ot[at]=ot[at]**(1/_e);return nt||st.splice(tt,1),new Tensor(this.type,ot,st)}normalize_(_e=2,tt=1){tt=safeIndex(tt,this.dims.length);const nt=this.norm(_e,tt,!0);for(let st=0;st<this.data.length;++st){let ot=0;for(let at=this.dims.length-1,dt=st,ft=1;at>=0;--at){const ht=this.dims[at];if(at!==tt){const ct=dt%ht;ot+=ct*ft,ft*=this.dims[at]}dt=Math.floor(dt/ht)}this.data[st]/=nt.data[ot]}return this}normalize(_e=2,tt=1){return this.clone().normalize_(_e,tt)}stride(){return dimsToStride(this.dims)}squeeze(_e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,_e))}squeeze_(_e=null){return this.dims=calc_squeeze_dims(this.dims,_e),this}unsqueeze(_e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,_e))}unsqueeze_(_e=null){return this.dims=calc_unsqueeze_dims(this.dims,_e),this}flatten_(_e=0,tt=-1){tt=(tt+this.dims.length)%this.dims.length;let nt=this.dims.slice(0,_e),st=this.dims.slice(_e,tt+1),ot=this.dims.slice(tt+1);return this.dims=[...nt,st.reduce((at,dt)=>at*dt,1),...ot],this}flatten(_e=0,tt=-1){return this.clone().flatten_(_e,tt)}view(..._e){let tt=-1;for(let nt=0;nt<_e.length;++nt)if(_e[nt]===-1){if(tt!==-1)throw new Error("Only one dimension can be inferred");tt=nt}if(tt!==-1){const nt=_e.reduce((st,ot,at)=>at!==tt?st*ot:st,1);_e[tt]=this.data.length/nt}return new Tensor(this.type,this.data,_e)}neg_(){for(let _e=0;_e<this.data.length;++_e)this.data[_e]=-this.data[_e];return this}neg(){return this.clone().neg_()}clamp_(_e,tt){for(let nt=0;nt<this.data.length;++nt)this.data[nt]=Math.min(Math.max(this.data[nt],_e),tt);return this}clamp(_e,tt){return this.clone().clamp_(_e,tt)}round_(){for(let _e=0;_e<this.data.length;++_e)this.data[_e]=Math.round(this.data[_e]);return this}round(){return this.clone().round_()}to(_e){if(this.type===_e)return this;if(!DataTypeMap.hasOwnProperty(_e))throw new Error(`Unsupported type: ${_e}`);return new Tensor(_e,DataTypeMap[_e].from(this.data),this.dims)}}function reshape(et,_e){const tt=et.length,nt=_e.reduce((ot,at)=>ot*at);if(tt!==nt)throw Error(`cannot reshape array of size ${tt} into shape (${_e})`);let st=et;for(let ot=_e.length-1;ot>=0;ot--)st=st.reduce((at,dt)=>{let ft=at[at.length-1];return ft.length<_e[ot]?ft.push(dt):at.push([dt]),at},[[]]);return st[0]}function permute(et,_e){const[tt,nt]=permute_data(et.data,et.dims,_e);return new Tensor(et.type,tt,nt)}function interpolate(et,[_e,tt],nt="bilinear",st=!1){const ot=et.dims.at(-3)??1,at=et.dims.at(-2),dt=et.dims.at(-1);let ft=interpolate_data(et.data,[ot,at,dt],[_e,tt],nt,st);return new Tensor(et.type,ft,[ot,_e,tt])}function mean_pooling(et,_e){let tt=[et.dims[0],et.dims[2]],nt=new et.data.constructor(tt[0]*tt[1]),[st,ot,at]=et.dims,dt=0;for(let ft=0;ft<st;++ft){let ht=ft*at*ot;for(let ct=0;ct<at;++ct){let it=0,rt=0,lt=ft*ot,ut=ht+ct;for(let gt=0;gt<ot;++gt){let mt=Number(_e.data[lt+gt]);rt+=mt,it+=et.data[ut+gt*at]*mt}let pt=it/rt;nt[dt++]=pt}}return new Tensor(et.type,nt,tt)}function calc_squeeze_dims(et,_e){return et=et.slice(),_e===null?et=et.filter(tt=>tt!==1):typeof _e=="number"?et[_e]===1&&et.splice(_e,1):Array.isArray(_e)&&(et=et.filter((tt,nt)=>tt!==1||!_e.includes(nt))),et}function calc_unsqueeze_dims(et,_e){return _e=safeIndex(_e,et.length+1),et=et.slice(),et.splice(_e,0,1),et}function safeIndex(et,_e,tt=null){if(et<-_e||et>=_e)throw new Error(`IndexError: index ${et} is out of bounds for dimension${tt===null?"":" "+tt} with size ${_e}`);return et<0&&(et=(et%_e+_e)%_e),et}function cat(et,_e=0){_e=safeIndex(_e,et[0].dims.length);const tt=et[0].dims.slice();tt[_e]=et.reduce((at,dt)=>at+dt.dims[_e],0);const nt=tt.reduce((at,dt)=>at*dt,1),st=new et[0].data.constructor(nt),ot=et[0].type;if(_e===0){let at=0;for(let dt of et)st.set(dt.data,at),at+=dt.data.length}else{let at=0;for(let dt=0;dt<et.length;++dt){let ft=et[dt];for(let ht=0;ht<ft.data.length;++ht){let ct=0;for(let it=ft.dims.length-1,rt=ht,lt=1;it>=0;--it){const ut=ft.dims[it];let pt=rt%ut;it===_e&&(pt+=at),ct+=pt*lt,lt*=tt[it],rt=Math.floor(rt/ut)}st[ct]=ft.data[ht]}at+=ft.dims[_e]}}return new Tensor(ot,st,tt)}function stack(et,_e=0){return cat(et.map(tt=>tt.unsqueeze(_e)),_e)}function std_mean(et,_e=null,tt=1,nt=!1){if(_e===null){const ht=et.data.reduce((lt,ut)=>lt+ut,0)/et.data.length,ct=Math.sqrt(et.data.reduce((lt,ut)=>lt+(ut-ht)**2,0)/(et.data.length-tt)),it=new Tensor(et.type,[ht],[]);return[new Tensor(et.type,[ct],[]),it]}_e=safeIndex(_e,et.dims.length);const st=mean(et,_e,nt),ot=et.dims.slice();ot[_e]=1;const at=new et.data.constructor(et.data.length/et.dims[_e]);for(let ft=0;ft<et.data.length;++ft){let ht=0;for(let ct=et.dims.length-1,it=ft,rt=1;ct>=0;--ct){const lt=et.dims[ct];if(ct!==_e){const ut=it%lt;ht+=ut*rt,rt*=ot[ct]}it=Math.floor(it/lt)}at[ht]+=(et.data[ft]-st.data[ht])**2}for(let ft=0;ft<at.length;++ft)at[ft]=Math.sqrt(at[ft]/(et.dims[_e]-tt));return nt||ot.splice(_e,1),[new Tensor(et.type,at,ot),st]}function mean(et,_e=null,tt=!1){if(_e===null){let ot=et.data.reduce((at,dt)=>at+dt,0);return new Tensor(et.type,[ot/et.data.length],[])}_e=safeIndex(_e,et.dims.length);const nt=et.dims.slice();nt[_e]=1;const st=new et.data.constructor(et.data.length/et.dims[_e]);for(let ot=0;ot<et.data.length;++ot){let at=0;for(let dt=et.dims.length-1,ft=ot,ht=1;dt>=0;--dt){const ct=et.dims[dt];if(dt!==_e){const it=ft%ct;at+=it*ht,ht*=nt[dt]}ft=Math.floor(ft/ct)}st[at]+=et.data[ot]}if(et.dims[_e]!==1)for(let ot=0;ot<st.length;++ot)st[ot]=st[ot]/et.dims[_e];return tt||nt.splice(_e,1),new Tensor(et.type,st,nt)}function dynamicTimeWarping(et){const[_e,tt]=et.dims,nt=[_e+1,tt+1],st=new Tensor("float32",new Float32Array(nt[0]*nt[1]).fill(1/0),nt),ot=new Tensor("float32",new Float32Array(nt[0]*nt[1]).fill(-1),nt);st[0].data[0]=0;for(let ct=1;ct<tt+1;++ct)for(let it=1;it<_e+1;++it){const rt=st[it-1][ct-1].item(),lt=st[it-1][ct].item(),ut=st[it][ct-1].item();let pt,gt;rt<lt&&rt<ut?(pt=rt,gt=0):lt<rt&&lt<ut?(pt=lt,gt=1):(pt=ut,gt=2),st[it].data[ct]=et[it-1][ct-1].item()+pt,ot[it].data[ct]=gt}let at=_e,dt=tt;ot.data.fill(2,0,nt[1]);for(let ct=0;ct<nt[0];++ct)ot[ct].data[0]=1;let ft=[],ht=[];for(;at>0||dt>0;)switch(ft.push(at-1),ht.push(dt-1),ot[at][dt].item()){case 0:--at,--dt;break;case 1:--at;break;case 2:--dt;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${at}, ${dt}]. Please file a bug report.`)}return ft.reverse(),ht.reverse(),[ft,ht]}function dimsToStride(et){const _e=new Array(et.length);for(let tt=et.length-1,nt=1;tt>=0;--tt)_e[tt]=nt,nt*=et[tt];return _e}function ones(et){const _e=et.reduce((tt,nt)=>tt*nt,1);return new Tensor("int64",new BigInt64Array(_e).fill(1n),et)}function ones_like(et){return ones(et.dims)}function quantize_embeddings(et,_e){if(et.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(et.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(_e))throw new Error("The precision must be either 'binary' or 'ubinary'");const tt=_e==="binary",nt=tt?"int8":"uint8",st=tt?Int8Array:Uint8Array,ot=et.data,at=new st(ot.length/8);for(let dt=0;dt<ot.length;++dt){const ft=ot[dt]>0?1:0,ht=Math.floor(dt/8),ct=dt%8;at[ht]|=ft<<7-ct,tt&&ct===0&&(at[ht]-=128)}return new Tensor(nt,at,[et.dims[0],et.dims[1]/8])}class PriorityQueue{constructor(_e=(tt,nt)=>tt>nt){this._heap=[],this._comparator=_e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(..._e){return this.extend(_e)}extend(_e){for(const tt of _e)this._heap.push(tt),this._siftUp();return this.size}pop(){const _e=this.peek(),tt=this.size-1;return tt>0&&this._swap(0,tt),this._heap.pop(),this._siftDown(),_e}replace(_e){const tt=this.peek();return this._heap[0]=_e,this._siftDown(),tt}_parent(_e){return(_e+1>>>1)-1}_left(_e){return(_e<<1)+1}_right(_e){return _e+1<<1}_greater(_e,tt){return this._comparator(this._heap[_e],this._heap[tt])}_swap(_e,tt){const nt=this._heap[_e];this._heap[_e]=this._heap[tt],this._heap[tt]=nt}_siftUp(){let _e=this.size-1;for(;_e>0&&this._greater(_e,this._parent(_e));)this._swap(_e,this._parent(_e)),_e=this._parent(_e)}_siftDown(){let _e=0;for(;this._left(_e)<this.size&&this._greater(this._left(_e),_e)||this._right(_e)<this.size&&this._greater(this._right(_e),_e);){const tt=this._right(_e)<this.size&&this._greater(this._right(_e),this._left(_e))?this._right(_e):this._left(_e);this._swap(_e,tt),_e=tt}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(_e){for(let tt of _e)this.push(tt)}push(_e){let tt=this.root;for(let nt of _e){let st=tt.children.get(nt);st===void 0&&(st=CharTrieNode.default(),tt.children.set(nt,st)),tt=st}tt.isLeaf=!0}*commonPrefixSearch(_e){let tt=this.root,nt="";for(let st=0;st<_e.length&&tt!==void 0;++st){const ot=_e[st];nt+=ot,tt=tt.children.get(ot),tt!==void 0&&tt.isLeaf&&(yield nt)}}}class CharTrieNode{constructor(_e,tt){this.isLeaf=_e,this.children=tt}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(_e,tt,nt){this.sentence=_e,this.len=_e.length,this.bosTokenId=tt,this.eosTokenId=nt,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const st=new TokenLatticeNode(this.bosTokenId,0,0,0,0),ot=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(st.clone()),this.nodes.push(ot.clone()),this.beginNodes[this.len].push(ot),this.endNodes[0].push(st)}insert(_e,tt,nt,st){const ot=this.nodes.length,at=new TokenLatticeNode(st,ot,_e,tt,nt);this.beginNodes[_e].push(at),this.endNodes[_e+tt].push(at),this.nodes.push(at)}viterbi(){const _e=this.len;let tt=0;for(;tt<=_e;){if(this.beginNodes[tt].length==0)return[];for(let dt of this.beginNodes[tt]){dt.prev=null;let ft=0,ht=null;for(let ct of this.endNodes[tt]){const it=ct.backtraceScore+dt.score;(ht===null||it>ft)&&(ht=ct.clone(),ft=it)}if(ht!==null)dt.prev=ht,dt.backtraceScore=ft;else return[]}++tt}const nt=[],ot=this.beginNodes[_e][0].prev;if(ot===null)return[];let at=ot.clone();for(;at.prev!==null;)nt.push(at.clone()),at=at.clone().prev.clone();return nt.reverse(),nt}piece(_e){return this.sentence.slice(_e.pos,_e.pos+_e.length)}tokens(){return this.viterbi().map(tt=>this.piece(tt))}tokenIds(){return this.viterbi().map(tt=>tt.tokenId)}}class TokenLatticeNode{constructor(_e,tt,nt,st,ot){this.tokenId=_e,this.nodeId=tt,this.pos=nt,this.length=st,this.score=ot,this.prev=null,this.backtraceScore=0}clone(){const _e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return _e.prev=this.prev,_e.backtraceScore=this.backtraceScore,_e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(et,_e){this.value=et,this.type=_e}};function isWord(et){return/\w/.test(et)}function isInteger(et){return/[0-9]/.test(et)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(et,_e={}){return et.endsWith(`
`)&&(et=et.slice(0,-1)),et=et.replace(/{#.*?#}/gs,"{##}"),_e.lstrip_blocks&&(et=et.replace(/^[ \t]*({[#%])/gm,"$1")),_e.trim_blocks&&(et=et.replace(/([#%]})\n/g,"$1")),et.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(et,_e={}){var at,dt,ft;const tt=[],nt=preprocess(et,_e);let st=0;const ot=ht=>{let ct="";for(;ht(nt[st]);){if(nt[st]==="\\"){if(++st,st>=nt.length)throw new SyntaxError("Unexpected end of input");const it=nt[st++],rt=ESCAPE_CHARACTERS.get(it);if(rt===void 0)throw new SyntaxError(`Unexpected escaped character: ${it}`);ct+=rt;continue}if(ct+=nt[st++],st>=nt.length)throw new SyntaxError("Unexpected end of input")}return ct};e:for(;st<nt.length;){const ht=(at=tt.at(-1))==null?void 0:at.type;if(ht===void 0||ht===TOKEN_TYPES.CloseStatement||ht===TOKEN_TYPES.CloseExpression){let it="";for(;st<nt.length&&!(nt[st]==="{"&&(nt[st+1]==="%"||nt[st+1]==="{"));)it+=nt[st++];if(it.length>0){tt.push(new Token(it,TOKEN_TYPES.Text));continue}}ot(it=>/\s/.test(it));const ct=nt[st];if(ct==="-"||ct==="+"){const it=(dt=tt.at(-1))==null?void 0:dt.type;if(it===TOKEN_TYPES.Text||it===void 0)throw new SyntaxError(`Unexpected character: ${ct}`);switch(it){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++st;const rt=ot(isInteger);tt.push(new Token(`${ct}${rt}`,rt.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[it,rt]of ORDERED_MAPPING_TABLE)if(nt.slice(st,st+it.length)===it){tt.push(new Token(it,rt)),st+=it.length;continue e}if(ct==="'"||ct==='"'){++st;const it=ot(rt=>rt!==ct);tt.push(new Token(it,TOKEN_TYPES.StringLiteral)),++st;continue}if(isInteger(ct)){const it=ot(isInteger);tt.push(new Token(it,TOKEN_TYPES.NumericLiteral));continue}if(isWord(ct)){const it=ot(isWord),rt=Object.hasOwn(KEYWORDS,it)?KEYWORDS[it]:TOKEN_TYPES.Identifier;rt===TOKEN_TYPES.In&&((ft=tt.at(-1))==null?void 0:ft.type)===TOKEN_TYPES.Not?(tt.pop(),tt.push(new Token("not in",TOKEN_TYPES.NotIn))):tt.push(new Token(it,rt));continue}throw new SyntaxError(`Unexpected character: ${ct}`)}return tt}var Statement=class{constructor(){Qt(this,"type","Statement")}},Program=class extends Statement{constructor(_e){super();Qt(this,"type","Program");this.body=_e}},If=class extends Statement{constructor(_e,tt,nt){super();Qt(this,"type","If");this.test=_e,this.body=tt,this.alternate=nt}},For=class extends Statement{constructor(_e,tt,nt){super();Qt(this,"type","For");this.loopvar=_e,this.iterable=tt,this.body=nt}},SetStatement=class extends Statement{constructor(_e,tt){super();Qt(this,"type","Set");this.assignee=_e,this.value=tt}},Expression=class extends Statement{constructor(){super(...arguments);Qt(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(_e,tt,nt){super();Qt(this,"type","MemberExpression");this.object=_e,this.property=tt,this.computed=nt}},CallExpression=class extends Expression{constructor(_e,tt){super();Qt(this,"type","CallExpression");this.callee=_e,this.args=tt}},Identifier=class extends Expression{constructor(_e){super();Qt(this,"type","Identifier");this.value=_e}},Literal=class extends Expression{constructor(_e){super();Qt(this,"type","Literal");this.value=_e}},NumericLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","BooleanLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);Qt(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(_e,tt,nt){super();Qt(this,"type","BinaryExpression");this.operator=_e,this.left=tt,this.right=nt}},FilterExpression=class extends Expression{constructor(_e,tt){super();Qt(this,"type","FilterExpression");this.operand=_e,this.filter=tt}},TestExpression=class extends Expression{constructor(_e,tt,nt){super();Qt(this,"type","TestExpression");this.operand=_e,this.negate=tt,this.test=nt}},UnaryExpression=class extends Expression{constructor(_e,tt){super();Qt(this,"type","UnaryExpression");this.operator=_e,this.argument=tt}},SliceExpression=class extends Expression{constructor(_e=void 0,tt=void 0,nt=void 0){super();Qt(this,"type","SliceExpression");this.start=_e,this.stop=tt,this.step=nt}},KeywordArgumentExpression=class extends Expression{constructor(_e,tt){super();Qt(this,"type","KeywordArgumentExpression");this.key=_e,this.value=tt}};function parse(et){const _e=new Program([]);let tt=0;function nt($t,Ot){const Ft=et[tt++];if(!Ft||Ft.type!==$t)throw new Error(`Parser Error: ${Ot}. ${Ft.type} !== ${$t}.`);return Ft}function st(){switch(et[tt].type){case TOKEN_TYPES.Text:return dt();case TOKEN_TYPES.OpenStatement:return ft();case TOKEN_TYPES.OpenExpression:return ht();default:throw new SyntaxError(`Unexpected token type: ${et[tt].type}`)}}function ot(...$t){return tt+$t.length<=et.length&&$t.some((Ot,Ft)=>Ot!==et[tt+Ft].type)}function at(...$t){return tt+$t.length<=et.length&&$t.every((Ot,Ft)=>Ot===et[tt+Ft].type)}function dt(){return new StringLiteral(nt(TOKEN_TYPES.Text,"Expected text token").value)}function ft(){nt(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let $t;switch(et[tt].type){case TOKEN_TYPES.Set:++tt,$t=ct(),nt(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++tt,$t=it(),nt(TOKEN_TYPES.OpenStatement,"Expected {% token"),nt(TOKEN_TYPES.EndIf,"Expected endif token"),nt(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++tt,$t=lt(),nt(TOKEN_TYPES.OpenStatement,"Expected {% token"),nt(TOKEN_TYPES.EndFor,"Expected endfor token"),nt(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${et[tt].type}`)}return $t}function ht(){nt(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const $t=ut();return nt(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),$t}function ct(){const $t=ut();if(at(TOKEN_TYPES.Equals)){++tt;const Ot=ct();return new SetStatement($t,Ot)}return $t}function it(){var Vt,zt,Xt,Jt,nn,xn,dn,on;const $t=ut();nt(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Ot=[],Ft=[];for(;!(((Vt=et[tt])==null?void 0:Vt.type)===TOKEN_TYPES.OpenStatement&&(((zt=et[tt+1])==null?void 0:zt.type)===TOKEN_TYPES.ElseIf||((Xt=et[tt+1])==null?void 0:Xt.type)===TOKEN_TYPES.Else||((Jt=et[tt+1])==null?void 0:Jt.type)===TOKEN_TYPES.EndIf));)Ot.push(st());if(((nn=et[tt])==null?void 0:nn.type)===TOKEN_TYPES.OpenStatement&&((xn=et[tt+1])==null?void 0:xn.type)!==TOKEN_TYPES.EndIf)if(++tt,at(TOKEN_TYPES.ElseIf))nt(TOKEN_TYPES.ElseIf,"Expected elseif token"),Ft.push(it());else for(nt(TOKEN_TYPES.Else,"Expected else token"),nt(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((dn=et[tt])==null?void 0:dn.type)===TOKEN_TYPES.OpenStatement&&((on=et[tt+1])==null?void 0:on.type)===TOKEN_TYPES.EndIf);)Ft.push(st());return new If($t,Ot,Ft)}function rt($t=!1){const Ot=$t?Rt:ut,Ft=[Ot()],Vt=at(TOKEN_TYPES.Comma);for(;Vt&&(++tt,Ft.push(Ot()),!!at(TOKEN_TYPES.Comma)););return Vt?new TupleLiteral(Ft):Ft[0]}function lt(){const $t=rt(!0);if(!($t instanceof Identifier||$t instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${$t.type} instead`);nt(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const Ot=ut();nt(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Ft=[];for(;ot(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)Ft.push(st());return new For($t,Ot,Ft)}function ut(){return pt()}function pt(){const $t=gt();if(at(TOKEN_TYPES.If)){++tt;const Ot=gt();nt(TOKEN_TYPES.Else,"Expected else token");const Ft=gt();return new If(Ot,[$t],[Ft])}return $t}function gt(){let $t=mt();for(;at(TOKEN_TYPES.Or);){const Ot=et[tt];++tt;const Ft=mt();$t=new BinaryExpression(Ot,$t,Ft)}return $t}function mt(){let $t=yt();for(;at(TOKEN_TYPES.And);){const Ot=et[tt];++tt;const Ft=yt();$t=new BinaryExpression(Ot,$t,Ft)}return $t}function yt(){let $t;for(;at(TOKEN_TYPES.Not);){const Ot=et[tt];++tt;const Ft=yt();$t=new UnaryExpression(Ot,Ft)}return $t??bt()}function bt(){let $t=wt();for(;at(TOKEN_TYPES.ComparisonBinaryOperator)||at(TOKEN_TYPES.In)||at(TOKEN_TYPES.NotIn);){const Ot=et[tt];++tt;const Ft=wt();$t=new BinaryExpression(Ot,$t,Ft)}return $t}function wt(){let $t=It();for(;at(TOKEN_TYPES.AdditiveBinaryOperator);){const Ot=et[tt];++tt;const Ft=It();$t=new BinaryExpression(Ot,$t,Ft)}return $t}function xt(){const $t=At();return at(TOKEN_TYPES.OpenParen)?Tt($t):$t}function Tt($t){let Ot=new CallExpression($t,St());return at(TOKEN_TYPES.OpenParen)&&(Ot=Tt(Ot)),Ot}function St(){nt(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const $t=Pt();return nt(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),$t}function Pt(){const $t=[];for(;!at(TOKEN_TYPES.CloseParen);){let Ot=ut();if(at(TOKEN_TYPES.Equals)){if(++tt,!(Ot instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const Ft=ut();Ot=new KeywordArgumentExpression(Ot,Ft)}$t.push(Ot),at(TOKEN_TYPES.Comma)&&++tt}return $t}function vt(){const $t=[];let Ot=!1;for(;!at(TOKEN_TYPES.CloseSquareBracket);)at(TOKEN_TYPES.Colon)?($t.push(void 0),++tt,Ot=!0):($t.push(ut()),at(TOKEN_TYPES.Colon)&&(++tt,Ot=!0));if($t.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ot){if($t.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...$t)}return $t[0]}function At(){let $t=Rt();for(;at(TOKEN_TYPES.Dot)||at(TOKEN_TYPES.OpenSquareBracket);){const Ot=et[tt];++tt;let Ft;const Vt=Ot.type!==TOKEN_TYPES.Dot;if(Vt)Ft=vt(),nt(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(Ft=Rt(),Ft.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");$t=new MemberExpression($t,Ft,Vt)}return $t}function It(){let $t=jt();for(;at(TOKEN_TYPES.MultiplicativeBinaryOperator);){const Ot=et[tt];++tt;const Ft=jt();$t=new BinaryExpression(Ot,$t,Ft)}return $t}function jt(){let $t=Lt();for(;at(TOKEN_TYPES.Is);){++tt;const Ot=at(TOKEN_TYPES.Not);Ot&&++tt;let Ft=Rt();if(Ft instanceof BooleanLiteral&&(Ft=new Identifier(Ft.value.toString())),!(Ft instanceof Identifier))throw new SyntaxError("Expected identifier for the test");$t=new TestExpression($t,Ot,Ft)}return $t}function Lt(){let $t=xt();for(;at(TOKEN_TYPES.Pipe);){++tt;let Ot=Rt();if(!(Ot instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");at(TOKEN_TYPES.OpenParen)&&(Ot=Tt(Ot)),$t=new FilterExpression($t,Ot)}return $t}function Rt(){const $t=et[tt];switch($t.type){case TOKEN_TYPES.NumericLiteral:return++tt,new NumericLiteral(Number($t.value));case TOKEN_TYPES.StringLiteral:return++tt,new StringLiteral($t.value);case TOKEN_TYPES.BooleanLiteral:return++tt,new BooleanLiteral($t.value==="true");case TOKEN_TYPES.Identifier:return++tt,new Identifier($t.value);case TOKEN_TYPES.OpenParen:{++tt;const Ot=rt();if(et[tt].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${et[tt].type} instead`);return++tt,Ot}case TOKEN_TYPES.OpenSquareBracket:{++tt;const Ot=[];for(;!at(TOKEN_TYPES.CloseSquareBracket);)Ot.push(ut()),at(TOKEN_TYPES.Comma)&&++tt;return++tt,new ArrayLiteral(Ot)}case TOKEN_TYPES.OpenCurlyBracket:{++tt;const Ot=new Map;for(;!at(TOKEN_TYPES.CloseCurlyBracket);){const Ft=ut();nt(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const Vt=ut();Ot.set(Ft,Vt),at(TOKEN_TYPES.Comma)&&++tt}return++tt,new ObjectLiteral(Ot)}default:throw new SyntaxError(`Unexpected token: ${$t.type}`)}}for(;tt<et.length;)_e.body.push(st());return _e}function range(et,_e,tt=1){_e===void 0&&(_e=et,et=0);const nt=[];for(let st=et;st<_e;st+=tt)nt.push(st);return nt}function slice(et,_e,tt,nt=1){const st=Math.sign(nt);st>=0?(_e=(_e??(_e=0))<0?Math.max(et.length+_e,0):Math.min(_e,et.length),tt=(tt??(tt=et.length))<0?Math.max(et.length+tt,0):Math.min(tt,et.length)):(_e=(_e??(_e=et.length-1))<0?Math.max(et.length+_e,-1):Math.min(_e,et.length-1),tt=(tt??(tt=-1))<-1?Math.max(et.length+tt,-1):Math.min(tt,et.length-1));const ot=[];for(let at=_e;st*at<st*tt;at+=nt)ot.push(et[at]);return ot}function titleCase(et){return et.replace(/\b\w/g,_e=>_e.toUpperCase())}var RuntimeValue=class{constructor(et=void 0){Qt(this,"type","RuntimeValue");Qt(this,"value");Qt(this,"builtins",new Map);this.value=et}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","StringValue");Qt(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","ObjectValue");Qt(this,"builtins",new Map([["get",new FunctionValue(([_e,tt])=>{if(!(_e instanceof StringValue))throw new Error(`Object key must be a string: got ${_e.type}`);return this.value.get(_e.value)??tt??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([_e,tt])=>new ArrayValue([new StringValue(_e),tt]))))]]))}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","ArrayValue");Qt(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);Qt(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);Qt(this,"type","UndefinedValue")}},Environment=class{constructor(et){Qt(this,"variables",new Map([["namespace",new FunctionValue(et=>{if(et.length===0)return new ObjectValue(new Map);if(et.length!==1||!(et[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return et[0]})]]));Qt(this,"tests",new Map([["boolean",et=>et.type==="BooleanValue"],["callable",et=>et instanceof FunctionValue],["odd",et=>{if(et.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${et.type}`);return et.value%2!==0}],["even",et=>{if(et.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${et.type}`);return et.value%2===0}],["false",et=>et.type==="BooleanValue"&&!et.value],["true",et=>et.type==="BooleanValue"&&et.value],["number",et=>et.type==="NumericValue"],["integer",et=>et.type==="NumericValue"&&Number.isInteger(et.value)],["iterable",et=>et instanceof ArrayValue||et instanceof StringValue],["lower",et=>{const _e=et.value;return et.type==="StringValue"&&_e===_e.toLowerCase()}],["upper",et=>{const _e=et.value;return et.type==="StringValue"&&_e===_e.toUpperCase()}],["none",et=>et.type==="NullValue"],["defined",et=>et.type!=="UndefinedValue"],["undefined",et=>et.type==="UndefinedValue"],["equalto",(et,_e)=>et.value===_e.value]]));this.parent=et}set(et,_e){return this.declareVariable(et,convertToRuntimeValues(_e))}declareVariable(et,_e){if(this.variables.has(et))throw new SyntaxError(`Variable already declared: ${et}`);return this.variables.set(et,_e),_e}setVariable(et,_e){return this.variables.set(et,_e),_e}resolve(et){if(this.variables.has(et))return this;if(this.parent)return this.parent.resolve(et);throw new Error(`Unknown variable: ${et}`)}lookupVariable(et){try{return this.resolve(et).variables.get(et)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{constructor(et){Qt(this,"global");this.global=et??new Environment}run(et){return this.evaluate(et,this.global)}evaluateBinaryExpression(et,_e){const tt=this.evaluate(et.left,_e);switch(et.operator.value){case"and":return tt.__bool__().value?this.evaluate(et.right,_e):tt;case"or":return tt.__bool__().value?tt:this.evaluate(et.right,_e)}const nt=this.evaluate(et.right,_e);switch(et.operator.value){case"==":return new BooleanValue(tt.value==nt.value);case"!=":return new BooleanValue(tt.value!=nt.value)}if(tt instanceof UndefinedValue||nt instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(tt instanceof NullValue||nt instanceof NullValue)throw new Error("Cannot perform operation on null values");if(tt instanceof NumericValue&&nt instanceof NumericValue)switch(et.operator.value){case"+":return new NumericValue(tt.value+nt.value);case"-":return new NumericValue(tt.value-nt.value);case"*":return new NumericValue(tt.value*nt.value);case"/":return new NumericValue(tt.value/nt.value);case"%":return new NumericValue(tt.value%nt.value);case"<":return new BooleanValue(tt.value<nt.value);case">":return new BooleanValue(tt.value>nt.value);case">=":return new BooleanValue(tt.value>=nt.value);case"<=":return new BooleanValue(tt.value<=nt.value)}else if(tt instanceof ArrayValue&&nt instanceof ArrayValue)switch(et.operator.value){case"+":return new ArrayValue(tt.value.concat(nt.value))}else if(nt instanceof ArrayValue){const st=nt.value.find(ot=>ot.value===tt.value)!==void 0;switch(et.operator.value){case"in":return new BooleanValue(st);case"not in":return new BooleanValue(!st)}}if(tt instanceof StringValue||nt instanceof StringValue)switch(et.operator.value){case"+":return new StringValue(tt.value.toString()+nt.value.toString())}if(tt instanceof StringValue&&nt instanceof StringValue)switch(et.operator.value){case"in":return new BooleanValue(nt.value.includes(tt.value));case"not in":return new BooleanValue(!nt.value.includes(tt.value))}if(tt instanceof StringValue&&nt instanceof ObjectValue)switch(et.operator.value){case"in":return new BooleanValue(nt.value.has(tt.value));case"not in":return new BooleanValue(!nt.value.has(tt.value))}throw new SyntaxError(`Unknown operator "${et.operator.value}" between ${tt.type} and ${nt.type}`)}evaluateFilterExpression(et,_e){const tt=this.evaluate(et.operand,_e);if(et.filter.type==="Identifier"){const nt=et.filter;if(tt instanceof ArrayValue)switch(nt.value){case"list":return tt;case"first":return tt.value[0];case"last":return tt.value[tt.value.length-1];case"length":return new NumericValue(tt.value.length);case"reverse":return new ArrayValue(tt.value.reverse());case"sort":return new ArrayValue(tt.value.sort((st,ot)=>{if(st.type!==ot.type)throw new Error(`Cannot compare different types: ${st.type} and ${ot.type}`);switch(st.type){case"NumericValue":return st.value-ot.value;case"StringValue":return st.value.localeCompare(ot.value);default:throw new Error(`Cannot compare type: ${st.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${nt.value}`)}else if(tt instanceof StringValue)switch(nt.value){case"length":return new NumericValue(tt.value.length);case"upper":return new StringValue(tt.value.toUpperCase());case"lower":return new StringValue(tt.value.toLowerCase());case"title":return new StringValue(titleCase(tt.value));case"capitalize":return new StringValue(tt.value.charAt(0).toUpperCase()+tt.value.slice(1));case"trim":return new StringValue(tt.value.trim());default:throw new Error(`Unknown StringValue filter: ${nt.value}`)}else if(tt instanceof NumericValue)switch(nt.value){case"abs":return new NumericValue(Math.abs(tt.value));default:throw new Error(`Unknown NumericValue filter: ${nt.value}`)}else if(tt instanceof ObjectValue)switch(nt.value){case"items":return new ArrayValue(Array.from(tt.value.entries()).map(([st,ot])=>new ArrayValue([new StringValue(st),ot])));case"length":return new NumericValue(tt.value.size);default:throw new Error(`Unknown ObjectValue filter: ${nt.value}`)}throw new Error(`Cannot apply filter "${nt.value}" to type: ${tt.type}`)}else if(et.filter.type==="CallExpression"){const nt=et.filter;if(nt.callee.type!=="Identifier")throw new Error(`Unknown filter: ${nt.callee.type}`);const st=nt.callee.value;if(tt instanceof ArrayValue){switch(st){case"selectattr":{if(tt.value.some(ct=>!(ct instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(nt.args.some(ct=>ct.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[ot,at,dt]=nt.args.map(ct=>this.evaluate(ct,_e));let ft;if(at){const ct=_e.tests.get(at.value);if(!ct)throw new Error(`Unknown test: ${at.value}`);ft=ct}else ft=(...ct)=>ct[0].__bool__().value;const ht=tt.value.filter(ct=>{const it=ct.value.get(ot.value);return it?ft(it,dt):!1});return new ArrayValue(ht)}}throw new Error(`Unknown ArrayValue filter: ${st}`)}else throw new Error(`Cannot apply filter "${st}" to type: ${tt.type}`)}throw new Error(`Unknown filter: ${et.filter.type}`)}evaluateTestExpression(et,_e){const tt=this.evaluate(et.operand,_e),nt=_e.tests.get(et.test.value);if(!nt)throw new Error(`Unknown test: ${et.test.value}`);const st=nt(tt);return new BooleanValue(et.negate?!st:st)}evaluateUnaryExpression(et,_e){const tt=this.evaluate(et.argument,_e);switch(et.operator.value){case"not":return new BooleanValue(!tt.value);default:throw new SyntaxError(`Unknown operator: ${et.operator.value}`)}}evalProgram(et,_e){return this.evaluateBlock(et.body,_e)}evaluateBlock(et,_e){let tt="";for(const nt of et){const st=this.evaluate(nt,_e);st.type!=="NullValue"&&st.type!=="UndefinedValue"&&(tt+=st.value)}return new StringValue(tt)}evaluateIdentifier(et,_e){return _e.lookupVariable(et.value)}evaluateCallExpression(et,_e){const tt=[],nt=new Map;for(const ot of et.args)if(ot.type==="KeywordArgumentExpression"){const at=ot;nt.set(at.key.value,this.evaluate(at.value,_e))}else tt.push(this.evaluate(ot,_e));nt.size>0&&tt.push(new ObjectValue(nt));const st=this.evaluate(et.callee,_e);if(st.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${st.type}`);return st.value(tt,_e)}evaluateSliceExpression(et,_e,tt){if(!(et instanceof ArrayValue||et instanceof StringValue))throw new Error("Slice object must be an array or string");const nt=this.evaluate(_e.start,tt),st=this.evaluate(_e.stop,tt),ot=this.evaluate(_e.step,tt);if(!(nt instanceof NumericValue||nt instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(st instanceof NumericValue||st instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(ot instanceof NumericValue||ot instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return et instanceof ArrayValue?new ArrayValue(slice(et.value,nt.value,st.value,ot.value)):new StringValue(slice(Array.from(et.value),nt.value,st.value,ot.value).join(""))}evaluateMemberExpression(et,_e){const tt=this.evaluate(et.object,_e);let nt;if(et.computed){if(et.property.type==="SliceExpression")return this.evaluateSliceExpression(tt,et.property,_e);nt=this.evaluate(et.property,_e)}else nt=new StringValue(et.property.value);let st;if(tt instanceof ObjectValue){if(!(nt instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${nt.type}`);st=tt.value.get(nt.value)??tt.builtins.get(nt.value)}else if(tt instanceof ArrayValue||tt instanceof StringValue)if(nt instanceof NumericValue)st=tt.value.at(nt.value),tt instanceof StringValue&&(st=new StringValue(tt.value.at(nt.value)));else if(nt instanceof StringValue)st=tt.builtins.get(nt.value);else throw new Error(`Cannot access property with non-string/non-number: got ${nt.type}`);else{if(!(nt instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${nt.type}`);st=tt.builtins.get(nt.value)}return st instanceof RuntimeValue?st:new UndefinedValue}evaluateSet(et,_e){const tt=this.evaluate(et.value,_e);if(et.assignee.type==="Identifier"){const nt=et.assignee.value;_e.setVariable(nt,tt)}else if(et.assignee.type==="MemberExpression"){const nt=et.assignee,st=this.evaluate(nt.object,_e);if(!(st instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(nt.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");st.value.set(nt.property.value,tt)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(et.assignee)}`);return new NullValue}evaluateIf(et,_e){const tt=this.evaluate(et.test,_e);return this.evaluateBlock(tt.__bool__().value?et.body:et.alternate,_e)}evaluateFor(et,_e){const tt=new Environment(_e),nt=this.evaluate(et.iterable,tt);if(!(nt instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${nt.type}`);let st="";for(let ot=0;ot<nt.value.length;++ot){const at=new Map([["index",new NumericValue(ot+1)],["index0",new NumericValue(ot)],["revindex",new NumericValue(nt.value.length-ot)],["revindex0",new NumericValue(nt.value.length-ot-1)],["first",new BooleanValue(ot===0)],["last",new BooleanValue(ot===nt.value.length-1)],["length",new NumericValue(nt.value.length)],["previtem",ot>0?nt.value[ot-1]:new UndefinedValue],["nextitem",ot<nt.value.length-1?nt.value[ot+1]:new UndefinedValue]]);tt.setVariable("loop",new ObjectValue(at));const dt=nt.value[ot];if(et.loopvar.type==="Identifier")tt.setVariable(et.loopvar.value,dt);else if(et.loopvar.type==="TupleLiteral"){const ht=et.loopvar;if(dt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${dt.type}`);const ct=dt;if(ht.value.length!==ct.value.length)throw new Error(`Too ${ht.value.length>ct.value.length?"few":"many"} items to unpack`);for(let it=0;it<ht.value.length;++it){if(ht.value[it].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${ht.value[it].type}`);tt.setVariable(ht.value[it].value,ct.value[it])}}const ft=this.evaluateBlock(et.body,tt);st+=ft.value}return new StringValue(st)}evaluate(et,_e){if(et===void 0)return new UndefinedValue;switch(et.type){case"Program":return this.evalProgram(et,_e);case"Set":return this.evaluateSet(et,_e);case"If":return this.evaluateIf(et,_e);case"For":return this.evaluateFor(et,_e);case"NumericLiteral":return new NumericValue(Number(et.value));case"StringLiteral":return new StringValue(et.value);case"BooleanLiteral":return new BooleanValue(et.value);case"ArrayLiteral":return new ArrayValue(et.value.map(tt=>this.evaluate(tt,_e)));case"TupleLiteral":return new TupleValue(et.value.map(tt=>this.evaluate(tt,_e)));case"ObjectLiteral":{const tt=new Map;for(const[nt,st]of et.value){const ot=this.evaluate(nt,_e);if(!(ot instanceof StringValue))throw new Error(`Object keys must be strings: got ${ot.type}`);tt.set(ot.value,this.evaluate(st,_e))}return new ObjectValue(tt)}case"Identifier":return this.evaluateIdentifier(et,_e);case"CallExpression":return this.evaluateCallExpression(et,_e);case"MemberExpression":return this.evaluateMemberExpression(et,_e);case"UnaryExpression":return this.evaluateUnaryExpression(et,_e);case"BinaryExpression":return this.evaluateBinaryExpression(et,_e);case"FilterExpression":return this.evaluateFilterExpression(et,_e);case"TestExpression":return this.evaluateTestExpression(et,_e);default:throw new SyntaxError(`Unknown node type: ${et.type}`)}}};function convertToRuntimeValues(et){switch(typeof et){case"number":return new NumericValue(et);case"string":return new StringValue(et);case"boolean":return new BooleanValue(et);case"object":return et===null?new NullValue:Array.isArray(et)?new ArrayValue(et.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(et).map(([_e,tt])=>[_e,convertToRuntimeValues(tt)])));case"function":return new FunctionValue((_e,tt)=>{const nt=et(..._e.map(st=>st.value))??null;return convertToRuntimeValues(nt)});default:throw new Error(`Cannot convert to runtime value: ${et}`)}}var Template=class{constructor(et){Qt(this,"parsed");const _e=tokenize(et,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(_e)}render(et){const _e=new Environment;_e.set("false",!1),_e.set("true",!0),_e.set("raise_exception",st=>{throw new Error(st)}),_e.set("range",range);for(const[st,ot]of Object.entries(et))_e.set(st,ot);return new Interpreter(_e).run(this.parsed).value}};async function loadTokenizer(et,_e){const tt=await Promise.all([getModelJSON(et,"tokenizer.json",!0,_e),getModelJSON(et,"tokenizer_config.json",!0,_e)]);return _e.legacy!==null&&(tt[1].legacy=_e.legacy),tt}function regexSplit(et,_e){const tt=[];let nt=0;for(const st of et.matchAll(_e)){const ot=st[0];nt<st.index&&tt.push(et.slice(nt,st.index)),ot.length>0&&tt.push(ot),nt=st.index+ot.length}return nt<et.length&&tt.push(et.slice(nt)),tt}function createPattern(et,_e=!0){if(et.Regex!==void 0){let tt=et.Regex.replace(/\\([#&~])/g,"$1");for(const[nt,st]of PROBLEMATIC_REGEX_MAP)tt=tt.replaceAll(nt,st);return new RegExp(tt,"gu")}else if(et.String!==void 0){const tt=escapeRegExp(et.String);return new RegExp(_e?tt:`(${tt})`,"gu")}else return console.warn("Unknown pattern type:",et),null}function objectToMap(et){return new Map(Object.entries(et))}function prepareTensorForDecode(et){const _e=et.dims;switch(_e.length){case 1:return et.tolist();case 2:if(_e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return et.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${_e.length}.`)}}function clean_up_tokenization(et){return et.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(et){return et.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(et){return remove_accents(et.toLowerCase())}function fuse(et,_e,tt){const nt=[];let st=0;for(;st<et.length;){if(nt.push(et[st]),(tt.get(et[st])??_e)!==_e){++st;continue}for(;st<et.length&&(tt.get(et[st])??_e)===_e;)++st}return nt}function whitespace_split(et){return et.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(_e){this.content=_e.content,this.id=_e.id,this.single_word=_e.single_word??!1,this.lstrip=_e.lstrip??!1,this.rstrip=_e.rstrip??!1,this.special=_e.special??!1,this.normalized=_e.normalized??null}}class TokenizerModel extends Callable{constructor(_e){super(),this.config=_e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(_e,...tt){switch(_e.type){case"WordPiece":return new WordPieceTokenizer(_e);case"Unigram":return new Unigram(_e,...tt);case"BPE":return new BPE(_e);default:if(_e.vocab)return new LegacyTokenizerModel(_e,...tt);throw new Error(`Unknown TokenizerModel type: ${_e.type}`)}}_call(_e){let tt=this.encode(_e);return this.fuse_unk&&(tt=fuse(tt,this.unk_token_id,this.tokens_to_ids)),tt}encode(_e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(_e){return _e.map(tt=>this.tokens_to_ids.get(tt)??this.unk_token_id)}convert_ids_to_tokens(_e){return _e.map(tt=>this.vocab[tt]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(_e){super(_e),this.tokens_to_ids=objectToMap(_e.vocab),this.unk_token_id=this.tokens_to_ids.get(_e.unk_token),this.unk_token=_e.unk_token,this.max_input_chars_per_word=_e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[tt,nt]of this.tokens_to_ids)this.vocab[nt]=tt}encode(_e){const tt=[];for(const nt of _e){const st=[...nt];if(st.length>this.max_input_chars_per_word){tt.push(this.unk_token);continue}let ot=!1,at=0;const dt=[];for(;at<st.length;){let ft=st.length,ht=null;for(;at<ft;){let ct=st.slice(at,ft).join("");if(at>0&&(ct=this.config.continuing_subword_prefix+ct),this.tokens_to_ids.has(ct)){ht=ct;break}--ft}if(ht===null){ot=!0;break}dt.push(ht),at=ft}ot?tt.push(this.unk_token):tt.push(...dt)}return tt}}class Unigram extends TokenizerModel{constructor(_e,tt){super(_e);const nt=_e.vocab.length;this.vocab=new Array(nt),this.scores=new Array(nt);for(let st=0;st<nt;++st){const ot=_e.vocab[st];this.vocab[st]=ot[0],this.scores[st]=ot[1]}this.unk_token_id=_e.unk_id,this.unk_token=this.vocab[_e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((st,ot)=>[st,ot])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=tt.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(_e){const tt=_e.sentence,nt=tt.length;let st=0;for(;st<nt;){let at=!1;for(let dt of this.trie.commonPrefixSearch(tt.slice(st))){const ft=this.tokens_to_ids.get(dt),ht=this.scores[ft],ct=dt.length;_e.insert(st,ct,ht,ft),!at&&ct===1&&(at=!0)}at||_e.insert(st,1,this.unkScore,this.unk_token_id),st+=1}}tokenize(_e){const tt=new TokenLattice(_e,this.bosTokenId,this.eosTokenId);return this.populateNodes(tt),tt.tokens()}encode(_e){const tt=[];for(const nt of _e){const st=this.tokenize(nt);tt.push(...st)}return tt}}const BYTES_TO_UNICODE=(()=>{const et=[...Array.from({length:94},(st,ot)=>ot+33),...Array.from({length:12},(st,ot)=>ot+161),...Array.from({length:82},(st,ot)=>ot+174)],_e=et.slice();let tt=0;for(let st=0;st<256;++st)et.includes(st)||(et.push(st),_e.push(256+tt),tt+=1);const nt=_e.map(st=>String.fromCharCode(st));return Object.fromEntries(et.map((st,ot)=>[st,nt[ot]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(_e){super(_e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(_e.vocab),this.unk_token_id=this.tokens_to_ids.get(_e.unk_token),this.unk_token=_e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[tt,nt]of this.tokens_to_ids)this.vocab[nt]=tt;this.bpe_ranks=new Map(_e.merges.map((tt,nt)=>[tt,nt])),this.merges=_e.merges.map(tt=>tt.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=_e.end_of_word_suffix,this.continuing_subword_suffix=_e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(_e){if(_e.length===0)return[];const tt=this.cache.get(_e);if(tt!==void 0)return tt;const nt=Array.from(_e);this.end_of_word_suffix&&(nt[nt.length-1]+=this.end_of_word_suffix);let st=[];if(nt.length>1){const ot=new PriorityQueue((ft,ht)=>ft.score<ht.score);let at={token:nt[0],bias:0,prev:null,next:null},dt=at;for(let ft=1;ft<nt.length;++ft){const ht={bias:ft/nt.length,token:nt[ft],prev:dt,next:null};dt.next=ht,this._add_node(ot,dt),dt=ht}for(;!ot.isEmpty();){const ft=ot.pop();if(ft.deleted||!ft.next||ft.next.deleted)continue;if(ft.deleted=!0,ft.next.deleted=!0,ft.prev){const ct={...ft.prev};ft.prev.deleted=!0,ft.prev=ct,ct.prev?ct.prev.next=ct:at=ct}const ht={token:ft.token+ft.next.token,bias:ft.bias,prev:ft.prev,next:ft.next.next};ht.prev?(ht.prev.next=ht,this._add_node(ot,ht.prev)):at=ht,ht.next&&(ht.next.prev=ht,this._add_node(ot,ht))}for(let ft=at;ft!==null;ft=ft.next)st.push(ft.token)}else st=nt;if(this.continuing_subword_suffix)for(let ot=0;ot<st.length-1;++ot)st[ot]+=this.continuing_subword_suffix;return this.cache.set(_e,st),st}_add_node(_e,tt){const nt=this.bpe_ranks.get(tt.token+this.BPE_SPLIT_TOKEN+tt.next.token);nt!==void 0&&(tt.score=nt+tt.bias,_e.push(tt))}encode(_e){const tt=[];for(const nt of _e){if(this.ignore_merges&&this.tokens_to_ids.has(nt)){tt.push(nt);continue}const st=this.bpe(nt);for(const ot of st)this.tokens_to_ids.has(ot)?tt.push(ot):this.byte_fallback?tt.push(...Array.from(this.text_encoder.encode(ot)).map(at=>`<0x${at.toString(16).toUpperCase().padStart(2,"0")}>`)):tt.push(this.unk_token)}return tt}}class LegacyTokenizerModel extends TokenizerModel{constructor(_e,tt){super(_e),this.tokens_to_ids=objectToMap(tt.target_lang?_e.vocab[tt.target_lang]:_e.vocab),this.bos_token=tt.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=tt.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=tt.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=tt.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[nt,st]of this.tokens_to_ids)this.vocab[st]=nt}encode(_e){return _e}}class Normalizer extends Callable{constructor(_e){super(),this.config=_e}static fromConfig(_e){if(_e===null)return null;switch(_e.type){case"BertNormalizer":return new BertNormalizer(_e);case"Precompiled":return new Precompiled(_e);case"Sequence":return new NormalizerSequence(_e);case"Replace":return new Replace(_e);case"NFC":return new NFC(_e);case"NFKC":return new NFKC(_e);case"NFKD":return new NFKD(_e);case"Strip":return new StripNormalizer(_e);case"StripAccents":return new StripAccents(_e);case"Lowercase":return new Lowercase(_e);case"Prepend":return new Prepend(_e);default:throw new Error(`Unknown Normalizer type: ${_e.type}`)}}normalize(_e){throw Error("normalize should be implemented in subclass.")}_call(_e){return this.normalize(_e)}}class Replace extends Normalizer{normalize(_e){const tt=createPattern(this.config.pattern);return tt===null?_e:_e.replaceAll(tt,this.config.content)}}class NFC extends Normalizer{normalize(_e){return _e=_e.normalize("NFC"),_e}}class NFKC extends Normalizer{normalize(_e){return _e=_e.normalize("NFKC"),_e}}class NFKD extends Normalizer{normalize(_e){return _e=_e.normalize("NFKD"),_e}}class StripNormalizer extends Normalizer{normalize(_e){return this.config.strip_left&&this.config.strip_right?_e=_e.trim():(this.config.strip_left&&(_e=_e.trimStart()),this.config.strip_right&&(_e=_e.trimEnd())),_e}}class StripAccents extends Normalizer{normalize(_e){return _e=remove_accents(_e),_e}}class Lowercase extends Normalizer{normalize(_e){return _e=_e.toLowerCase(),_e}}class Prepend extends Normalizer{normalize(_e){return _e=this.config.prepend+_e,_e}}class NormalizerSequence extends Normalizer{constructor(_e){super(_e),this.normalizers=_e.normalizers.map(tt=>Normalizer.fromConfig(tt))}normalize(_e){return this.normalizers.reduce((tt,nt)=>nt.normalize(tt),_e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(_e){const tt=[];for(let nt=0;nt<_e.length;++nt){const st=_e[nt],ot=st.charCodeAt(0);this._is_chinese_char(ot)?(tt.push(" "),tt.push(st),tt.push(" ")):tt.push(st)}return tt.join("")}_is_chinese_char(_e){return _e>=19968&&_e<=40959||_e>=13312&&_e<=19903||_e>=131072&&_e<=173791||_e>=173824&&_e<=177983||_e>=177984&&_e<=178207||_e>=178208&&_e<=183983||_e>=63744&&_e<=64255||_e>=194560&&_e<=195103}stripAccents(_e){return _e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(_e){switch(_e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(_e)}}_clean_text(_e){const tt=[];for(const nt of _e){const st=nt.charCodeAt(0);st===0||st===65533||this._is_control(nt)||(/^\s$/.test(nt)?tt.push(" "):tt.push(nt))}return tt.join("")}normalize(_e){return this.config.clean_text&&(_e=this._clean_text(_e)),this.config.handle_chinese_chars&&(_e=this._tokenize_chinese_chars(_e)),this.config.lowercase?(_e=_e.toLowerCase(),this.config.strip_accents!==!1&&(_e=this.stripAccents(_e))):this.config.strip_accents&&(_e=this.stripAccents(_e)),_e}}class PreTokenizer extends Callable{static fromConfig(_e){if(_e===null)return null;switch(_e.type){case"BertPreTokenizer":return new BertPreTokenizer(_e);case"Sequence":return new PreTokenizerSequence(_e);case"Whitespace":return new WhitespacePreTokenizer(_e);case"WhitespaceSplit":return new WhitespaceSplit(_e);case"Metaspace":return new MetaspacePreTokenizer(_e);case"ByteLevel":return new ByteLevelPreTokenizer(_e);case"Split":return new SplitPreTokenizer(_e);case"Punctuation":return new PunctuationPreTokenizer(_e);case"Digits":return new DigitsPreTokenizer(_e);case"Replace":return new ReplacePreTokenizer(_e);default:throw new Error(`Unknown PreTokenizer type: ${_e.type}`)}}pre_tokenize_text(_e,tt){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(_e,tt){return(Array.isArray(_e)?_e.map(nt=>this.pre_tokenize_text(nt,tt)):this.pre_tokenize_text(_e,tt)).flat()}_call(_e,tt){return this.pre_tokenize(_e,tt)}}class BertPreTokenizer extends PreTokenizer{constructor(_e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(_e,tt){return _e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(_e){super(),this.config=_e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(_e,tt){return this.add_prefix_space&&!_e.startsWith(" ")&&(_e=" "+_e),(this.use_regex?_e.match(this.pattern)||[]:[_e]).map(st=>Array.from(this.text_encoder.encode(st),ot=>this.byte_encoder[ot]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(_e){super(),this.config=_e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(_e,tt){return this.pattern===null?[]:this.config.invert?_e.match(this.pattern)||[]:regexSplit(_e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(_e){super(),this.config=_e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(_e,tt){return _e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(_e){super(),this.config=_e;const tt=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(tt,"gu")}pre_tokenize_text(_e,tt){return _e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(_e){super(),this.config=_e}static fromConfig(_e){if(_e===null)return null;switch(_e.type){case"TemplateProcessing":return new TemplateProcessing(_e);case"ByteLevel":return new ByteLevelPostProcessor(_e);case"RobertaProcessing":return new RobertaProcessing(_e);case"BertProcessing":return new BertProcessing(_e);case"Sequence":return new PostProcessorSequence(_e);default:throw new Error(`Unknown PostProcessor type: ${_e.type}`)}}post_process(_e,...tt){throw Error("post_process should be implemented in subclass.")}_call(_e,...tt){return this.post_process(_e,...tt)}}class BertProcessing extends PostProcessor{constructor(_e){super(_e),this.cls=_e.cls[0],this.sep=_e.sep[0]}post_process(_e,tt=null,{add_special_tokens:nt=!0}={}){nt&&(_e=mergeArrays([this.cls],_e,[this.sep]));let st=new Array(_e.length).fill(0);if(tt!==null){const ot=nt&&this instanceof RobertaProcessing?[this.sep]:[],at=nt?[this.sep]:[];_e=mergeArrays(_e,ot,tt,at),st=mergeArrays(st,new Array(tt.length+ot.length+at.length).fill(1))}return{tokens:_e,token_type_ids:st}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(_e){super(_e),this.single=_e.single,this.pair=_e.pair}post_process(_e,tt=null,{add_special_tokens:nt=!0}={}){const st=tt===null?this.single:this.pair;let ot=[],at=[];for(const dt of st)"SpecialToken"in dt?nt&&(ot.push(dt.SpecialToken.id),at.push(dt.SpecialToken.type_id)):"Sequence"in dt&&(dt.Sequence.id==="A"?(ot=mergeArrays(ot,_e),at=mergeArrays(at,new Array(_e.length).fill(dt.Sequence.type_id))):dt.Sequence.id==="B"&&(ot=mergeArrays(ot,tt),at=mergeArrays(at,new Array(tt.length).fill(dt.Sequence.type_id))));return{tokens:ot,token_type_ids:at}}}class ByteLevelPostProcessor extends PostProcessor{post_process(_e,tt=null){return tt&&(_e=mergeArrays(_e,tt)),{tokens:_e}}}class PostProcessorSequence extends PostProcessor{constructor(_e){super(_e),this.processors=_e.processors.map(tt=>PostProcessor.fromConfig(tt))}post_process(_e,tt=null,nt={}){let st;for(const ot of this.processors)if(ot instanceof ByteLevelPostProcessor)_e=ot.post_process(_e).tokens,tt&&(tt=ot.post_process(tt).tokens);else{const at=ot.post_process(_e,tt,nt);_e=at.tokens,st=at.token_type_ids}return{tokens:_e,token_type_ids:st}}}class Decoder extends Callable{constructor(_e){super(),this.config=_e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=_e.trim_offsets}static fromConfig(_e){if(_e===null)return null;switch(_e.type){case"WordPiece":return new WordPieceDecoder(_e);case"Metaspace":return new MetaspaceDecoder(_e);case"ByteLevel":return new ByteLevelDecoder(_e);case"Replace":return new ReplaceDecoder(_e);case"ByteFallback":return new ByteFallback(_e);case"Fuse":return new FuseDecoder(_e);case"Strip":return new StripDecoder(_e);case"Sequence":return new DecoderSequence(_e);case"CTC":return new CTCDecoder(_e);case"BPEDecoder":return new BPEDecoder(_e);default:throw new Error(`Unknown Decoder type: ${_e.type}`)}}_call(_e){return this.decode(_e)}decode(_e){return this.decode_chain(_e).join("")}decode_chain(_e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(_e){const tt=createPattern(this.config.pattern);return tt===null?_e:_e.map(nt=>nt.replaceAll(tt,this.config.content))}}class ByteFallback extends Decoder{constructor(_e){super(_e),this.text_decoder=new TextDecoder}decode_chain(_e){const tt=[];let nt=[];for(const st of _e){let ot=null;if(st.length===6&&st.startsWith("<0x")&&st.endsWith(">")){const at=parseInt(st.slice(3,5),16);isNaN(at)||(ot=at)}if(ot!==null)nt.push(ot);else{if(nt.length>0){const at=this.text_decoder.decode(Uint8Array.from(nt));tt.push(at),nt=[]}tt.push(st)}}if(nt.length>0){const st=this.text_decoder.decode(Uint8Array.from(nt));tt.push(st),nt=[]}return tt}}class FuseDecoder extends Decoder{decode_chain(_e){return[_e.join("")]}}class StripDecoder extends Decoder{constructor(_e){super(_e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(_e){return _e.map(tt=>{let nt=0;for(let ot=0;ot<this.start&&tt[ot]===this.content;++ot){nt=ot+1;continue}let st=tt.length;for(let ot=0;ot<this.stop;++ot){const at=tt.length-ot-1;if(tt[at]===this.content){st=at;continue}else break}return tt.slice(nt,st)})}}class WordPieceDecoder extends Decoder{constructor(_e){super(_e),this.cleanup=_e.cleanup}decode_chain(_e){return _e.map((tt,nt)=>(nt!==0&&(tt.startsWith(this.config.prefix)?tt=tt.replace(this.config.prefix,""):tt=" "+tt),this.cleanup&&(tt=clean_up_tokenization(tt)),tt))}}class ByteLevelDecoder extends Decoder{constructor(_e){super(_e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(_e){const tt=_e.join(""),nt=new Uint8Array([...tt].map(ot=>this.byte_decoder[ot]));return this.text_decoder.decode(nt)}decode_chain(_e){const tt=[];let nt=[];for(const st of _e)this.added_tokens.find(ot=>ot.content===st)!==void 0?(nt.length>0&&(tt.push(this.convert_tokens_to_string(nt)),nt=[]),tt.push(st)):nt.push(st);return nt.length>0&&tt.push(this.convert_tokens_to_string(nt)),tt}}class CTCDecoder extends Decoder{constructor(_e){super(_e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(_e){if(_e.length===0)return"";const tt=[_e[0]];for(let ot=1;ot<_e.length;++ot)_e[ot]!==tt.at(-1)&&tt.push(_e[ot]);let st=tt.filter(ot=>ot!==this.pad_token).join("");return this.cleanup&&(st=clean_up_tokenization(st).replaceAll(this.word_delimiter_token," ").trim()),st}decode_chain(_e){return[this.convert_tokens_to_string(_e)]}}class DecoderSequence extends Decoder{constructor(_e){super(_e),this.decoders=_e.decoders.map(tt=>Decoder.fromConfig(tt))}decode_chain(_e){return this.decoders.reduce((tt,nt)=>nt.decode_chain(tt),_e)}}class BPEDecoder extends Decoder{constructor(_e){super(_e),this.suffix=this.config.suffix}decode_chain(_e){return _e.map((tt,nt)=>tt.replaceAll(this.suffix,nt===_e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(_e){let tt="";for(let nt=1;nt<_e.length;nt+=2)tt+=_e[nt];return[tt]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(_e){super(),this.addPrefixSpace=_e.add_prefix_space,this.replacement=_e.replacement,this.strRep=_e.str_rep||this.replacement,this.prepend_scheme=_e.prepend_scheme??"always"}pre_tokenize_text(_e,{section_index:tt=void 0}={}){let nt=_e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!nt.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&tt===0)&&(nt=this.strRep+nt),[nt]}}class MetaspaceDecoder extends Decoder{constructor(_e){super(_e),this.addPrefixSpace=_e.add_prefix_space,this.replacement=_e.replacement}decode_chain(_e){const tt=[];for(let nt=0;nt<_e.length;++nt){let st=_e[nt].replaceAll(this.replacement," ");this.addPrefixSpace&&nt==0&&st.startsWith(" ")&&(st=st.substring(1)),tt.push(st)}return tt}}class Precompiled extends Normalizer{constructor(_e){super(_e),this.charsmap=_e.precompiled_charsmap}normalize(_e){return _e=_e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),_e=_e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),_e.includes("～")?_e=_e.split("～").map(nt=>nt.normalize("NFKC")).join("～"):_e=_e.normalize("NFKC"),_e}}class PreTokenizerSequence extends PreTokenizer{constructor(_e){super(),this.tokenizers=_e.pretokenizers.map(tt=>PreTokenizer.fromConfig(tt))}pre_tokenize_text(_e,tt){return this.tokenizers.reduce((nt,st)=>st.pre_tokenize(nt,tt),[_e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(_e){super()}pre_tokenize_text(_e,tt){return _e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(_e){super()}pre_tokenize_text(_e,tt){return whitespace_split(_e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(_e){super(),this.config=_e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(_e,tt){return this.pattern===null?[_e]:[_e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(et,_e,tt,nt){for(const st of Object.keys(et)){const ot=_e-et[st].length,at=tt(st),dt=new Array(ot).fill(at);et[st]=nt==="right"?mergeArrays(et[st],dt):mergeArrays(dt,et[st])}}function truncateHelper(et,_e){for(const tt of Object.keys(et))et[tt].length=_e}class PreTrainedTokenizer extends Callable{constructor(tt,nt){super();Qt(this,"return_token_type_ids",!1);Qt(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=nt,this.normalizer=Normalizer.fromConfig(tt.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(tt.pre_tokenizer),this.model=TokenizerModel.fromConfig(tt.model,nt),this.post_processor=PostProcessor.fromConfig(tt.post_processor),this.decoder=Decoder.fromConfig(tt.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const st of tt.added_tokens){const ot=new AddedToken(st);this.added_tokens.push(ot),this.model.tokens_to_ids.set(ot.content,ot.id),this.model.vocab[ot.id]=ot.content,ot.special&&(this.special_tokens.push(ot.content),this.all_special_ids.push(ot.id))}if(this.additional_special_tokens=nt.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(st=>`${st.lstrip?"\\s*":""}(${escapeRegExp(st.content)})${st.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=nt.model_max_length,this.remove_space=nt.remove_space,this.clean_up_tokenization_spaces=nt.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=nt.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=nt.chat_template??null,Array.isArray(this.chat_template)){const st=Object.create(null);for(const{name:ot,template:at}of this.chat_template){if(typeof ot!="string"||typeof at!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');st[ot]=at}this.chat_template=st}this._compiled_template_cache=new Map}getToken(...tt){for(const nt of tt){const st=this._tokenizer_config[nt];if(st)if(typeof st=="object"){if(st.__type==="AddedToken")return st.content;throw Error(`Unknown token: ${st}`)}else return st}return null}static async from_pretrained(tt,{progress_callback:nt=null,config:st=null,cache_dir:ot=null,local_files_only:at=!1,revision:dt="main",legacy:ft=null}={}){const ht=await loadTokenizer(tt,{progress_callback:nt,config:st,cache_dir:ot,local_files_only:at,revision:dt,legacy:ft});return new this(...ht)}_call(tt,{text_pair:nt=null,add_special_tokens:st=!0,padding:ot=!1,truncation:at=null,max_length:dt=null,return_tensor:ft=!0,return_token_type_ids:ht=null}={}){const ct=Array.isArray(tt);let it;if(ct){if(tt.length===0)throw Error("text array must be non-empty");if(nt!==null){if(Array.isArray(nt)){if(tt.length!==nt.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");it=tt.map((lt,ut)=>this._encode_plus(lt,nt[ut],{add_special_tokens:st,return_token_type_ids:ht}))}else it=tt.map(lt=>this._encode_plus(lt,null,{add_special_tokens:st,return_token_type_ids:ht}))}else{if(tt==null)throw Error("text may not be null or undefined");if(Array.isArray(nt))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");it=[this._encode_plus(tt,nt,{add_special_tokens:st,return_token_type_ids:ht})]}if(dt===null?ot==="max_length"?dt=this.model_max_length:dt=max(it.map(lt=>lt.input_ids.length))[0]:at||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),dt=Math.min(dt,this.model_max_length),ot||at)for(let lt=0;lt<it.length;++lt)it[lt].input_ids.length!==dt&&(it[lt].input_ids.length>dt?at&&truncateHelper(it[lt],dt):ot&&padHelper(it[lt],dt,ut=>ut==="input_ids"?this.pad_token_id:0,this.padding_side));const rt={};if(ft){if(!(ot&&at)&&it.some(ut=>{var pt;for(const gt of Object.keys(ut))if(ut[gt].length!==((pt=it[0][gt])==null?void 0:pt.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const lt=[it.length,it[0].input_ids.length];for(const ut of Object.keys(it[0]))rt[ut]=new Tensor("int64",BigInt64Array.from(it.flatMap(pt=>pt[ut]).map(BigInt)),lt)}else{for(const lt of Object.keys(it[0]))rt[lt]=it.map(ut=>ut[lt]);if(!ct)for(const lt of Object.keys(rt))rt[lt]=rt[lt][0]}return rt}_encode_text(tt){return tt===null?null:(this.added_tokens_regex?tt.split(this.added_tokens_regex).filter(ot=>ot):[tt]).map((ot,at)=>{if(this.added_tokens.find(ft=>ft.content===ot)!==void 0)return ot;{if(this.remove_space===!0&&(ot=ot.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ot=lowercase_and_remove_accent(ot)),this.normalizer!==null&&(ot=this.normalizer(ot)),ot.length===0)return[];const ft=this.pre_tokenizer!==null?this.pre_tokenizer(ot,{section_index:at}):[ot];return this.model(ft)}}).flat()}_encode_plus(tt,nt=null,{add_special_tokens:st=!0,return_token_type_ids:ot=null}={}){const at=this._encode_text(tt),dt=this._encode_text(nt),ft=this.post_processor?this.post_processor(at,dt,{add_special_tokens:st}):{tokens:mergeArrays(at??[],dt??[])},ht=this.model.convert_tokens_to_ids(ft.tokens),ct={input_ids:ht,attention_mask:new Array(ht.length).fill(1)};return(ot??this.return_token_type_ids)&&ft.token_type_ids&&(ct.token_type_ids=ft.token_type_ids),ct}encode(tt,nt=null,{add_special_tokens:st=!0,return_token_type_ids:ot=null}={}){const{input_ids:at}=this._encode_plus(tt,nt,{add_special_tokens:st,return_token_type_ids:ot});return at}batch_decode(tt,nt={}){return tt instanceof Tensor&&(tt=tt.tolist()),tt.map(st=>this.decode(st,nt))}decode(tt,nt={}){if(tt instanceof Tensor&&(tt=prepareTensorForDecode(tt)),!Array.isArray(tt)||tt.length===0||!isIntegralNumber(tt[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(tt,nt)}decode_single(tt,{skip_special_tokens:nt=!1,clean_up_tokenization_spaces:st=null}){let ot=this.model.convert_ids_to_tokens(tt);nt&&(ot=ot.filter(dt=>!this.special_tokens.includes(dt)));let at=this.decoder?this.decoder(ot):ot.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(at=at.replaceAll(this.decoder.end_of_word_suffix," "),nt&&(at=at.trim())),(st??this.clean_up_tokenization_spaces)&&(at=clean_up_tokenization(at)),at}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(tt,{chat_template:nt=null,add_generation_prompt:st=!1,tokenize:ot=!0,padding:at=!1,truncation:dt=!1,max_length:ft=null,return_tensor:ht=!0,tokenizer_kwargs:ct={},...it}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const pt=this.chat_template??this.default_chat_template;if(nt!==null&&Object.hasOwn(pt,nt))nt=pt[nt];else if(nt===null&&"default"in pt)nt=pt.default;else if(nt===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(pt).sort()}.`)}else nt??(nt=this.chat_template??this.default_chat_template);if(typeof nt!="string")throw Error(`chat_template must be a string, but got ${typeof nt}`);let rt=this._compiled_template_cache.get(nt);rt===void 0&&(rt=new Template(nt),this._compiled_template_cache.set(nt,rt));const lt=Object.create(null);for(const pt of SPECIAL_TOKEN_ATTRIBUTES){const gt=this.getToken(pt);gt&&(lt[pt]=gt)}const ut=rt.render({messages:tt,add_generation_prompt:st,...lt,...it});return ot?this._call(ut,{add_special_tokens:!1,padding:at,truncation:dt,max_length:ft,return_tensor:ht,...ct}).input_ids:ut}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(tt,nt){super(tt,nt);Qt(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(_e,tt){super(_e,tt),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(nt=>this.languageRegex.test(nt)),this.lang_to_token=nt=>nt}_build_translation_inputs(_e,tt,nt){return _build_translation_inputs(this,_e,tt,nt)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(_e,tt){var ot,at;const nt=".,!?…。，、।۔،",st=(at=(ot=_e.pre_tokenizer)==null?void 0:ot.pretokenizers[0])==null?void 0:at.pattern;st&&st.Regex===` ?[^(\\s|[${nt}])]+`&&(st.Regex=` ?[^\\s${nt}]+`),super(_e,tt)}}const SPIECE_UNDERLINE="▁";class LlamaTokenizer extends PreTrainedTokenizer{constructor(tt,nt){super(tt,nt);Qt(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);Qt(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=nt.use_default_system_prompt??!1,this.legacy=nt.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(tt){if(tt===null)return null;if(this.legacy||tt.length===0)return super._encode_text(tt);let nt=super._encode_text(SPIECE_UNDERLINE+tt.replaceAll(SPIECE_UNDERLINE," "));return nt.length>1&&nt[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(nt[1])&&(nt=nt.slice(1)),nt}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(et,_e,tt,nt){if(!("language_codes"in et)||!Array.isArray(et.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in et)||!(et.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in et)||typeof et.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const st=nt.src_lang,ot=nt.tgt_lang;if(!et.language_codes.includes(ot))throw new Error(`Target language code "${ot}" is not valid. Must be one of: {${et.language_codes.join(", ")}}`);if(st!==void 0){if(!et.language_codes.includes(st))throw new Error(`Source language code "${st}" is not valid. Must be one of: {${et.language_codes.join(", ")}}`);for(const at of et.post_processor.config.single)if("SpecialToken"in at&&et.languageRegex.test(at.SpecialToken.id)){at.SpecialToken.id=et.lang_to_token(st);break}}return nt.forced_bos_token_id=et.model.convert_tokens_to_ids([et.lang_to_token(ot)])[0],et._call(_e,tt)}class NllbTokenizer extends PreTrainedTokenizer{constructor(_e,tt){super(_e,tt),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(nt=>this.languageRegex.test(nt)),this.lang_to_token=nt=>nt}_build_translation_inputs(_e,tt,nt){return _build_translation_inputs(this,_e,tt,nt)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(_e,tt){super(_e,tt),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(nt=>this.languageRegex.test(nt)).map(nt=>nt.slice(2,-2)),this.lang_to_token=nt=>`__${nt}__`}_build_translation_inputs(_e,tt,nt){return _build_translation_inputs(this,_e,tt,nt)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([et,_e])=>[_e,et]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(tt,{return_timestamps:nt=!1,return_language:st=!1,time_precision:ot=null,force_full_sequences:at=!0}={}){if(ot===null)throw Error("Must specify time_precision");let dt=null;const ft=nt==="word";function ht(){return{language:dt,timestamp:[null,null],text:""}}const ct=[];let it=ht(),rt=0;const lt=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let ut=[],pt=[],gt=!1,mt=null;const yt=new Set(this.all_special_ids);for(const xt of tt){const Tt=xt.tokens,St=ft?xt.token_timestamps:null;let Pt=null,vt=lt;if("stride"in xt){const[jt,Lt,Rt]=xt.stride;if(rt-=Lt,mt=jt-Rt,Lt&&(vt=Lt/ot+lt),Rt)for(let $t=Tt.length-1;$t>=0;--$t){const Ot=Tt[$t];if(Ot>=lt){if(Pt!==null&&(Ot-lt)*ot<mt)break;Pt=Ot}}}let At=[],It=[];for(let jt=0;jt<Tt.length;++jt){const Lt=Tt[jt];if(yt.has(Lt)){const Rt=this.decode([Lt]),$t=WHISPER_LANGUAGE_MAPPING.get(Rt.slice(2,-2));if($t!==void 0){if(dt!==null&&$t!==dt&&!nt){ut.push(At);const Ot=this.findLongestCommonSequence(ut)[0],Ft=this.decode(Ot);it.text=Ft,ct.push(it),ut=[],At=[],it=ht()}dt=it.language=$t}}else if(Lt>=lt){const Rt=(Lt-lt)*ot+rt,$t=round(Rt,2);if(Pt!==null&&Lt>=Pt)gt=!0;else if(gt||ut.length>0&&Lt<vt)gt=!1;else if(it.timestamp[0]===null)it.timestamp[0]=$t;else if($t!==it.timestamp[0]){it.timestamp[1]=$t,ut.push(At),ft&&pt.push(It);const[Ot,Ft]=this.findLongestCommonSequence(ut,pt),Vt=this.decode(Ot);it.text=Vt,ft&&(it.words=this.collateWordTimestamps(Ot,Ft,dt)),ct.push(it),ut=[],At=[],pt=[],It=[],it=ht()}}else if(At.push(Lt),ft){let Rt=round(St[jt]+rt,2),$t;jt+1<St.length?$t=round(St[jt+1]+rt,2):$t=null,It.push([Rt,$t])}}if("stride"in xt){const[jt,Lt,Rt]=xt.stride;rt+=jt-Rt}At.length>0?(ut.push(At),ft&&pt.push(It)):ut.every(jt=>jt.length===0)&&(it=ht(),ut=[],At=[],pt=[],It=[])}if(ut.length>0){if(at&&nt)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[xt,Tt]=this.findLongestCommonSequence(ut,pt),St=this.decode(xt);it.text=St,ft&&(it.words=this.collateWordTimestamps(xt,Tt,dt)),ct.push(it)}let bt=Object.create(null);const wt=ct.map(xt=>xt.text).join("");if(nt||st){for(let xt=0;xt<ct.length;++xt){const Tt=ct[xt];nt||delete Tt.timestamp,st||delete Tt.language}if(ft){const xt=[];for(const Tt of ct)for(const St of Tt.words)xt.push(St);bt={chunks:xt}}else bt={chunks:ct}}return[wt,bt]}findLongestCommonSequence(tt,nt=null){let st=tt[0],ot=st.length,at=[];const dt=Array.isArray(nt)&&nt.length>0;let ft=dt?[]:null,ht=dt?nt[0]:null;for(let ct=1;ct<tt.length;++ct){const it=tt[ct];let rt=0,lt=[ot,ot,0,0];const ut=it.length;for(let xt=1;xt<ot+ut;++xt){const Tt=xt/1e4,St=Math.max(0,ot-xt),Pt=Math.min(ot,ot+ut-xt),vt=st.slice(St,Pt),At=Math.max(0,xt-ot),It=Math.min(ut,xt),jt=it.slice(At,It);if(vt.length!==jt.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const Lt=vt.filter(($t,Ot)=>$t===jt[Ot]).length,Rt=Lt/xt+Tt;Lt>1&&Rt>rt&&(rt=Rt,lt=[St,Pt,At,It])}const[pt,gt,mt,yt]=lt,bt=Math.floor((gt+pt)/2),wt=Math.floor((yt+mt)/2);at.push(...st.slice(0,bt)),st=it.slice(wt),ot=st.length,dt&&(ft.push(...ht.slice(0,bt)),ht=nt[ct].slice(wt))}return at.push(...st),dt?(ft.push(...ht),[at,ft]):[at,[]]}collateWordTimestamps(tt,nt,st){const[ot,at,dt]=this.combineTokensIntoWords(tt,st),ft=[];for(let ht=0;ht<ot.length;++ht){const ct=dt[ht];ft.push({text:ot[ht],timestamp:[nt[ct.at(0)][0],nt[ct.at(-1)][1]]})}return ft}combineTokensIntoWords(tt,nt,st=`"'“¡¿([{-`,ot=`"'.。,，!！?？:：”)]}、`){nt=nt??"english";let at,dt,ft;return["chinese","japanese","thai","lao","myanmar"].includes(nt)?[at,dt,ft]=this.splitTokensOnUnicode(tt):[at,dt,ft]=this.splitTokensOnSpaces(tt),this.mergePunctuations(at,dt,ft,st,ot)}decode(tt,nt){let st;return nt&&nt.decode_with_timestamps?(tt instanceof Tensor&&(tt=prepareTensorForDecode(tt)),st=this.decodeWithTimestamps(tt,nt)):st=super.decode(tt,nt),st}decodeWithTimestamps(tt,nt){const st=(nt==null?void 0:nt.time_precision)??.02,ot=Array.from(this.all_special_ids).at(-1)+1;let at=[[]];for(const dt of tt)if(dt>=ot){const ft=round((dt-ot)*st,2);at.push(`<|${ft}|>`),at.push([])}else at[at.length-1].push(dt);return at=at.map(dt=>typeof dt=="string"?dt:super.decode(dt,nt)),at.join("")}splitTokensOnUnicode(tt){const nt=this.decode(tt,{decode_with_timestamps:!0}),st="�",ot=[],at=[],dt=[];let ft=[],ht=[],ct=0;for(let it=0;it<tt.length;++it){const rt=tt[it];ft.push(rt),ht.push(it);const lt=this.decode(ft,{decode_with_timestamps:!0});(!lt.includes(st)||nt[ct+lt.indexOf(st)]===st)&&(ot.push(lt),at.push(ft),dt.push(ht),ft=[],ht=[],ct+=lt.length)}return[ot,at,dt]}splitTokensOnSpaces(tt){const[nt,st,ot]=this.splitTokensOnUnicode(tt),at=[],dt=[],ft=[],ht=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let ct=0;ct<nt.length;++ct){const it=nt[ct],rt=st[ct],lt=ot[ct],ut=rt[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),pt=it.startsWith(" "),gt=it.trim(),mt=ht.test(gt);if(ut||pt||mt||at.length===0)at.push(it),dt.push(rt),ft.push(lt);else{const yt=at.length-1;at[yt]+=it,dt[yt].push(...rt),ft[yt].push(...lt)}}return[at,dt,ft]}mergePunctuations(tt,nt,st,ot,at){const dt=structuredClone(tt),ft=structuredClone(nt),ht=structuredClone(st);let ct=dt.length-2,it=dt.length-1;for(;ct>=0;)dt[ct].startsWith(" ")&&ot.includes(dt[ct].trim())?(dt[it]=dt[ct]+dt[it],ft[it]=mergeArrays(ft[ct],ft[it]),ht[it]=mergeArrays(ht[ct],ht[it]),dt[ct]="",ft[ct]=[],ht[ct]=[]):it=ct,--ct;for(ct=0,it=1;it<dt.length;)!dt[ct].endsWith(" ")&&at.includes(dt[it])?(dt[ct]+=dt[it],ft[ct]=mergeArrays(ft[ct],ft[it]),ht[ct]=mergeArrays(ht[ct],ht[it]),dt[it]="",ft[it]=[],ht[it]=[]):ct=it,++it;return[dt.filter(rt=>rt),ft.filter(rt=>rt.length>0),ht.filter(rt=>rt.length>0)]}get_decoder_prompt_ids({language:tt=null,task:nt=null,no_timestamps:st=!0}={}){const ot=[];if(tt){tt=tt.toLowerCase();let at=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(tt);if(at===void 0)if(WHISPER_LANGUAGE_MAPPING.has(tt))at=tt;else{const ht=tt.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${tt}" is not supported. Must be one of: ${JSON.stringify(ht)}`)}const dt=this.model.tokens_to_ids.get(`<|${at}|>`);if(dt===void 0)throw new Error(`Unable to find language "${at}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);ot.push(dt)}else ot.push(null);if(nt){if(nt=nt.toLowerCase(),nt!=="transcribe"&&nt!=="translate")throw new Error(`Task "${nt}" is not supported. Must be one of: ["transcribe", "translate"]`);const at=this.model.tokens_to_ids.get(`<|${nt}|>`);if(at===void 0)throw new Error(`Unable to find task "${nt}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);ot.push(at)}else ot.push(null);if(st){const at=this.model.tokens_to_ids.get("<|notimestamps|>");if(at===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');ot.push(at)}return ot.map((at,dt)=>[dt+1,at]).filter(at=>at[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(_e,tt){super(_e,tt),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(nt=>this.languageRegex.test(nt)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(_e){if(_e===null)return null;const[tt,...nt]=_e.trim().split(this.languageRegex);if(nt.length===0)return super._encode_text(tt);if(nt.length===2){const[st,ot]=nt;return this.supported_language_codes.includes(st)||console.warn(`Unsupported language code "${st}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([st],super._encode_text(ot))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Qt(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(_e,tt){super(_e,tt),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(_e,{quantized:tt=!0,progress_callback:nt=null,config:st=null,cache_dir:ot=null,local_files_only:at=!1,revision:dt="main",legacy:ft=null}={}){var lt;const[ht,ct]=await loadTokenizer(_e,{quantized:tt,progress_callback:nt,config:st,cache_dir:ot,local_files_only:at,revision:dt,legacy:ft}),it=((lt=ct.tokenizer_class)==null?void 0:lt.replace(/Fast$/,""))??"PreTrainedTokenizer";let rt=this.TOKENIZER_CLASS_MAPPING[it];return rt||(console.warn(`Unknown tokenizer class "${it}", attempting to construct from base class.`),rt=PreTrainedTokenizer),new rt(ht,ct)}}Qt(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(et,_e){return await getModelJSON(et,"config.json",!0,_e)}class PretrainedConfig{constructor(_e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,_e)}static async from_pretrained(_e,{progress_callback:tt=null,config:nt=null,cache_dir:st=null,local_files_only:ot=!1,revision:at="main"}={}){let dt=nt??await loadConfig(_e,{progress_callback:tt,config:nt,cache_dir:st,local_files_only:ot,revision:at});return new this(dt)}}class AutoConfig{static async from_pretrained(..._e){return PretrainedConfig.from_pretrained(..._e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(_e){this.processors.push(_e)}extend(_e){this.processors.push(..._e)}_call(_e,tt){for(let nt of tt)this.processors.forEach(st=>st(_e,nt))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(_e,tt){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(_e){super(),this.force_token_map=Object.fromEntries(_e??[])}_call(_e,tt){let nt=this.force_token_map[_e.length];return exists(nt)&&(tt.data.fill(-1/0),tt.data[nt]=0),tt}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(_e){super(),this.bos_token_id=_e}_call(_e,tt){return _e.length===1&&(tt.data.fill(-1/0),tt.data[this.bos_token_id]=0),tt}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(_e,tt){super(),this.max_length=_e,this.forced_eos_token_id=tt}_call(_e,tt){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(_e,tt){super(),this.begin_suppress_tokens=_e,this.begin_index=tt}_call(_e,tt){if(_e.length===this.begin_index)for(let nt of this.begin_suppress_tokens)tt.data[nt]=-1/0;return tt}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(_e){super(),this.eos_token_id=_e.eos_token_id,this.no_timestamps_token_id=_e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(_e.forced_decoder_ids||[]).length+2,_e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=_e.max_initial_timestamp_index}_call(_e,tt){const nt=tt.data;if(nt[this.no_timestamps_token_id]=-1/0,_e.length===this.begin_index-1)return nt.fill(-1/0),nt[this.timestamp_begin]=0,tt;const st=_e.slice(this.begin_index),ot=st.length>=1&&st[st.length-1]>=this.timestamp_begin,at=st.length<2||st[st.length-2]>=this.timestamp_begin;if(ot&&(at?nt.subarray(this.timestamp_begin).fill(-1/0):nt.subarray(0,this.eos_token_id).fill(-1/0)),_e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const ct=this.timestamp_begin+this.max_initial_timestamp_index;nt.subarray(ct+1).fill(-1/0)}const dt=log_softmax(nt),ft=Math.log(dt.subarray(this.timestamp_begin).map(Math.exp).reduce((ct,it)=>ct+it)),ht=max(dt.subarray(0,this.timestamp_begin))[0];return ft>ht&&nt.subarray(0,this.timestamp_begin).fill(-1/0),tt}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(_e){super(),this.no_repeat_ngram_size=_e}getNgrams(_e){const tt=_e.length,nt=[];for(let ot=0;ot<tt+1-this.no_repeat_ngram_size;++ot){const at=[];for(let dt=0;dt<this.no_repeat_ngram_size;++dt)at.push(_e[ot+dt]);nt.push(at)}const st=new Map;for(const ot of nt){const at=ot.slice(0,ot.length-1),dt=JSON.stringify(at),ft=st.get(dt)??[];ft.push(ot[ot.length-1]),st.set(dt,ft)}return st}getGeneratedNgrams(_e,tt){const nt=tt.slice(tt.length+1-this.no_repeat_ngram_size,tt.length);return _e.get(JSON.stringify(nt))??[]}calcBannedNgramTokens(_e){const tt=[];if(_e.length+1<this.no_repeat_ngram_size)return tt;{const nt=this.getNgrams(_e);return this.getGeneratedNgrams(nt,_e)}}_call(_e,tt){const nt=this.calcBannedNgramTokens(_e);for(const st of nt)tt.data[st]=-1/0;return tt}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(_e){super(),this.penalty=_e}_call(_e,tt){for(const nt of _e)tt.data[nt]<0?tt.data[nt]*=this.penalty:tt.data[nt]/=this.penalty;return tt}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(_e,tt){super(),this.min_length=_e,this.eos_token_id=Array.isArray(tt)?tt:[tt]}_call(_e,tt){if(_e.length<this.min_length)for(const nt of this.eos_token_id)tt.data[nt]=-1/0;return tt}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(_e,tt,nt){super(),this.prompt_length_to_skip=_e,this.min_new_tokens=tt,this.eos_token_id=Array.isArray(nt)?nt:[nt]}_call(_e,tt){if(_e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const st of this.eos_token_id)tt.data[st]=-1/0;return tt}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(_e,tt){super(),this.bad_words_ids=_e,this.eos_token_id=Array.isArray(tt)?tt:[tt]}_call(_e,tt){for(const nt of this.bad_words_ids){let st=!0;for(let ot=1;ot<=nt.length-1&&nt.length<_e.length;++ot)if(nt.at(-ot-1)!==_e.at(-ot)){st=!1;break}st&&(tt.data[nt.at(-1)]=-1/0)}return tt}}const GenerationConfig=class{constructor(et={}){this.max_length=et.max_length??20,this.max_new_tokens=et.max_new_tokens??null,this.min_length=et.min_length??0,this.min_new_tokens=et.min_new_tokens??null,this.early_stopping=et.early_stopping??!1,this.max_time=et.max_time??null,this.do_sample=et.do_sample??!1,this.num_beams=et.num_beams??1,this.num_beam_groups=et.num_beam_groups??1,this.penalty_alpha=et.penalty_alpha??null,this.use_cache=et.use_cache??!0,this.temperature=et.temperature??1,this.top_k=et.top_k??50,this.top_p=et.top_p??1,this.typical_p=et.typical_p??1,this.epsilon_cutoff=et.epsilon_cutoff??0,this.eta_cutoff=et.eta_cutoff??0,this.diversity_penalty=et.diversity_penalty??0,this.repetition_penalty=et.repetition_penalty??1,this.encoder_repetition_penalty=et.encoder_repetition_penalty??1,this.length_penalty=et.length_penalty??1,this.no_repeat_ngram_size=et.no_repeat_ngram_size??0,this.bad_words_ids=et.bad_words_ids??null,this.force_words_ids=et.force_words_ids??null,this.renormalize_logits=et.renormalize_logits??!1,this.constraints=et.constraints??null,this.forced_bos_token_id=et.forced_bos_token_id??null,this.forced_eos_token_id=et.forced_eos_token_id??null,this.remove_invalid_values=et.remove_invalid_values??!1,this.exponential_decay_length_penalty=et.exponential_decay_length_penalty??null,this.suppress_tokens=et.suppress_tokens??null,this.begin_suppress_tokens=et.begin_suppress_tokens??null,this.forced_decoder_ids=et.forced_decoder_ids??null,this.num_return_sequences=et.num_return_sequences??1,this.output_attentions=et.output_attentions??!1,this.output_hidden_states=et.output_hidden_states??!1,this.output_scores=et.output_scores??!1,this.return_dict_in_generate=et.return_dict_in_generate??!1,this.pad_token_id=et.pad_token_id??null,this.bos_token_id=et.bos_token_id??null,this.eos_token_id=et.eos_token_id??null,this.encoder_no_repeat_ngram_size=et.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=et.decoder_start_token_id??null,this.generation_kwargs=et.generation_kwargs??{}}};class Sampler extends Callable{constructor(_e){super(),this.generation_config=_e}_call(_e,tt=-1){return this.sample(_e,tt)}sample(_e,tt){throw Error("sample should be implemented in subclasses.")}getLogits(_e,tt){let nt=_e.dims.at(-1),st=_e.data;if(tt===-1)st=st.slice(-nt);else{let ot=tt*nt;st=st.slice(ot,ot+nt)}return this.generation_config.temperature>0&&(st=st.map(ot=>ot/this.generation_config.temperature)),st}randomSelect(_e){let tt=_e.reduce((st,ot)=>st+ot,0),nt=Math.random()*tt;for(let st=0;st<_e.length;++st)if(nt-=_e[st],nt<=0)return st;return 0}static getSampler(_e){if(_e.do_sample)return new MultinomialSampler(_e);if(_e.num_beams>1)return new BeamSearchSampler(_e);if(_e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${_e.num_return_sequences}.`);return new GreedySampler(_e)}}class GreedySampler extends Sampler{sample(_e,tt=-1){let nt=this.getLogits(_e,tt);return[[max(nt)[1],0]]}}class MultinomialSampler extends Sampler{sample(_e,tt=-1){let nt=_e.dims.at(-1);this.generation_config.top_k>0&&(nt=Math.min(this.generation_config.top_k,nt));const st=this.getLogits(_e,tt),ot=getTopItems(st,nt),at=softmax(ot.map(dt=>dt[1]));return Array.from({length:this.generation_config.num_beams},()=>{const dt=this.randomSelect(at);return[ot[dt][0],Math.log(at[dt])]})}}class BeamSearchSampler extends Sampler{sample(_e,tt=-1){let nt=_e.dims.at(-1);this.generation_config.top_k>0&&(nt=Math.min(this.generation_config.top_k,nt));const st=this.getLogits(_e,tt),ot=getTopItems(st,nt),at=softmax(ot.map(dt=>dt[1]));return Array.from({length:this.generation_config.num_beams},(dt,ft)=>[ot[ft][0],Math.log(at[ft])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(et,_e,tt){let nt=`onnx/${_e}${tt.quantized?"_quantized":""}.onnx`,st=await getModelFile(et,nt,!0,tt);try{return await InferenceSession.create(st,{executionProviders})}catch(ot){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw ot;return console.warn(ot),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(st,{executionProviders:["wasm"]})}}function validateInputs(et,_e){const tt=Object.create(null),nt=[];for(const at of et.inputNames){const dt=_e[at];if(!(dt instanceof Tensor)){nt.push(at);continue}tt[at]=env.wasm.proxy?dt.clone():dt}if(nt.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${nt.join(", ")}.`);const st=Object.keys(_e).length,ot=et.inputNames.length;if(st>ot){let at=Object.keys(_e).filter(dt=>!et.inputNames.includes(dt));console.warn(`WARNING: Too many inputs were provided (${st} > ${ot}). The following inputs will be ignored: "${at.join(", ")}".`)}return tt}async function sessionRun(et,_e){const tt=validateInputs(et,_e);try{let nt=await et.run(tt);return nt=replaceTensors(nt),nt}catch(nt){throw console.error(`An error occurred during model execution: "${nt}".`),console.error("Inputs given to model:",tt),nt}}function replaceTensors(et){for(let _e in et)et[_e]instanceof ONNXTensor?et[_e]=new Tensor(et[_e]):typeof et[_e]=="object"&&replaceTensors(et[_e]);return et}function toI64Tensor(et){if(et instanceof Tensor)return et;if(et.length===0)throw Error("items must be non-empty");if(Array.isArray(et[0])){if(et.some(_e=>_e.length!==et[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(et.flat().map(_e=>BigInt(_e))),[et.length,et[0].length])}else return new Tensor("int64",BigInt64Array.from(et.map(_e=>BigInt(_e))),[1,et.length])}function prepareAttentionMask(et,_e){let tt=et.config.pad_token_id??null,nt=et.config.eos_token_id??null;isIntegralNumber(nt)&&(nt=[nt]);let st=_e.indexOf(tt)!==-1,ot=nt===null||!nt.includes(tt);if(st&&ot){let at=BigInt64Array.from(_e.data.map(dt=>dt!=tt));return new Tensor("int64",at,_e.dims)}else return ones_like(_e)}function preparePositionIds(et,_e,tt){if(!et.inputNames.includes("position_ids"))return;const nt=new BigInt64Array(_e.attention_mask.data.length);for(let st=0;st<_e.attention_mask.dims[0];++st){let ot=st*_e.attention_mask.dims[1],at=BigInt(0);for(let dt=0;dt<_e.attention_mask.dims[1];++dt){const ft=ot+dt;_e.attention_mask.data[ft]===0n?nt[ft]=BigInt(1):(nt[ft]=at,at+=_e.attention_mask.data[ft])}}_e.position_ids=new Tensor("int64",nt,_e.attention_mask.dims),tt&&(_e.position_ids=_e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(et){return new Tensor("bool",[et],[1])}async function seq2seqForward(et,_e){let{encoder_outputs:tt,past_key_values:nt}=_e;tt||(tt=(await encoderForward(et,_e)).last_hidden_state);let st={input_ids:_e.decoder_input_ids,encoder_hidden_states:tt};const ot=!!nt;et.decoder_merged_session.inputNames.includes("use_cache_branch")&&(st.use_cache_branch=boolTensor(ot)),et.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(st.encoder_attention_mask=_e.attention_mask),preparePositionIds(et.decoder_merged_session,st,ot),et.addPastKeyValues(st,nt);const at=await sessionRun(et.decoder_merged_session,st);let dt=at.logits;nt=et.getPastKeyValues(at,nt);const ft=et.getAttentions(at);return new Seq2SeqLMOutput({logits:dt,past_key_values:nt,encoder_outputs:tt,...ft})}function seq2seqStartBeams(et,_e,tt,nt){let st=[],ot=0;const at=et.requires_attention_mask??!0;let dt=tt.decoder_input_ids??tt.decoder_start_token_id??tt.bos_token_id??tt.eos_token_id;dt instanceof Tensor?dt=dt.tolist().flat():Array.isArray(dt)||(dt=[dt]);for(let ft of _e){ft.dims=[1,...ft.dims];let ht={inputs:ft,encoder_outputs:null,prev_model_outputs:null,output_token_ids:dt,done:!1,score:0,id:ot++};at&&(ht.attention_mask=prepareAttentionMask(et,ft)),st.push(ht)}return st}async function seq2seqRunBeam(et,_e){var at;const tt=et.main_input_name;let nt=_e.output_token_ids;_e.prev_model_outputs&&(nt=nt.slice(-1));let st={[tt]:_e.inputs,decoder_input_ids:toI64Tensor(nt),encoder_outputs:_e.encoder_outputs,past_key_values:(at=_e.prev_model_outputs)==null?void 0:at.past_key_values};_e.attention_mask&&(st.attention_mask=_e.attention_mask);let ot=await et.forward(st);return _e.prev_model_outputs=ot,_e.encoder_outputs=ot.encoder_outputs,ot}function seq2seqUpdatebeam(et,_e){et.output_token_ids=[...et.output_token_ids,_e]}async function encoderForward(et,_e){const tt=Object.create(null);for(const nt of et.session.inputNames)tt[nt]=_e[nt];return et.session.inputNames.includes("token_type_ids")&&!tt.token_type_ids&&(tt.token_type_ids=new Tensor("int64",new BigInt64Array(tt.input_ids.data.length),tt.input_ids.dims)),await sessionRun(et.session,tt)}async function decoderForward(et,_e){let{input_ids:tt,past_key_values:nt,attention_mask:st}=_e,ot={input_ids:tt,attention_mask:st??prepareAttentionMask(et,tt)};const at=!!nt;et.session.inputNames.includes("use_cache_branch")&&(ot.use_cache_branch=boolTensor(at)),preparePositionIds(et.session,ot,at),et.addPastKeyValues(ot,nt);let dt=await sessionRun(et.session,ot),ft=dt.logits;return nt=et.getPastKeyValues(dt,nt),{logits:ft,past_key_values:nt}}function decoderStartBeams(et,_e,tt,nt,st){let ot=[],at=0;for(let dt of _e){let ft=dt.tolist().map(Number);dt.dims=[1,...dt.dims];let ht;st?(ht=st[at],ht.dims=[1,...ht.dims]):ht=prepareAttentionMask(et,dt);let ct={input:dt,model_input_ids:dt,attention_mask:ht,prev_model_outputs:null,output_token_ids:ft,num_output_tokens:nt,done:!1,score:0,id:at++};ot.push(ct)}return ot}async function decoderRunBeam(et,_e){var ot;let tt=new BigInt64Array(_e.output_token_ids.length).fill(1n),nt={input_ids:_e.model_input_ids,attention_mask:new Tensor("int64",tt,[1,tt.length]),past_key_values:(ot=_e.prev_model_outputs)==null?void 0:ot.past_key_values},st=await et.forward(nt);return _e.prev_model_outputs=st,st}function decoderUpdatebeam(et,_e){et.output_token_ids=[...et.output_token_ids,_e],et.model_input_ids=new Tensor("int64",[BigInt(_e)],[1,1])}class PreTrainedModel extends Callable{constructor(tt,nt){super();Qt(this,"main_input_name","input_ids");this.config=tt,this.session=nt;const st=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),ot=MODEL_TYPE_MAPPING.get(st);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,ot===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):ot===MODEL_TYPES.Seq2Seq||ot===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):ot===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const tt=[];for(let nt of Object.keys(this)){const st=this[nt];st instanceof InferenceSession&&tt.push(st.handler.dispose())}return await Promise.all(tt)}static async from_pretrained(tt,{quantized:nt=!0,progress_callback:st=null,config:ot=null,cache_dir:at=null,local_files_only:dt=!1,revision:ft="main",model_file_name:ht=null}={}){let ct={quantized:nt,progress_callback:st,config:ot,cache_dir:at,local_files_only:dt,revision:ft,model_file_name:ht};const it=MODEL_CLASS_TO_NAME_MAPPING.get(this),rt=MODEL_TYPE_MAPPING.get(it);let lt;return rt===MODEL_TYPES.DecoderOnly?lt=await Promise.all([AutoConfig.from_pretrained(tt,ct),constructSession(tt,ct.model_file_name??"decoder_model_merged",ct),getModelJSON(tt,"generation_config.json",!1,ct)]):rt===MODEL_TYPES.Seq2Seq||rt===MODEL_TYPES.Vision2Seq?lt=await Promise.all([AutoConfig.from_pretrained(tt,ct),constructSession(tt,"encoder_model",ct),constructSession(tt,"decoder_model_merged",ct),getModelJSON(tt,"generation_config.json",!1,ct)]):rt===MODEL_TYPES.MaskGeneration?lt=await Promise.all([AutoConfig.from_pretrained(tt,ct),constructSession(tt,"vision_encoder",ct),constructSession(tt,"prompt_encoder_mask_decoder",ct)]):rt===MODEL_TYPES.EncoderDecoder?lt=await Promise.all([AutoConfig.from_pretrained(tt,ct),constructSession(tt,"encoder_model",ct),constructSession(tt,"decoder_model_merged",ct)]):(rt!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${it??(ot==null?void 0:ot.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),lt=await Promise.all([AutoConfig.from_pretrained(tt,ct),constructSession(tt,ct.model_file_name??"model",ct)])),new this(...lt)}async _call(tt){return await this.forward(tt)}async forward(tt){return await this._forward(this,tt)}_get_logits_processor(tt,nt,st=null){const ot=new LogitsProcessorList;if(tt.repetition_penalty!==null&&tt.repetition_penalty!==1&&ot.push(new RepetitionPenaltyLogitsProcessor(tt.repetition_penalty)),tt.no_repeat_ngram_size!==null&&tt.no_repeat_ngram_size>0&&ot.push(new NoRepeatNGramLogitsProcessor(tt.no_repeat_ngram_size)),tt.bad_words_ids!==null&&ot.push(new NoBadWordsLogitsProcessor(tt.bad_words_ids,tt.eos_token_id)),tt.min_length!==null&&tt.eos_token_id!==null&&tt.min_length>0&&ot.push(new MinLengthLogitsProcessor(tt.min_length,tt.eos_token_id)),tt.min_new_tokens!==null&&tt.eos_token_id!==null&&tt.min_new_tokens>0&&ot.push(new MinNewTokensLengthLogitsProcessor(nt,tt.min_new_tokens,tt.eos_token_id)),tt.forced_bos_token_id!==null&&ot.push(new ForcedBOSTokenLogitsProcessor(tt.forced_bos_token_id)),tt.forced_eos_token_id!==null&&ot.push(new ForcedEOSTokenLogitsProcessor(tt.max_length,tt.forced_eos_token_id)),tt.begin_suppress_tokens!==null){let at=nt>1||tt.forced_bos_token_id===null?nt:nt+1;tt.forced_decoder_ids!==null&&(at+=tt.forced_decoder_ids[tt.forced_decoder_ids.length-1][0]),ot.push(new SuppressTokensAtBeginLogitsProcessor(tt.begin_suppress_tokens,at))}return tt.forced_decoder_ids!==null&&ot.push(new ForceTokensLogitsProcessor(tt.forced_decoder_ids)),st!==null&&ot.extend(st),ot}_get_generation_config(tt){let nt=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(nt,this.generation_config),tt!==null&&Object.assign(nt,tt),nt}async generate(tt,nt=null,st=null,{inputs_attention_mask:ot=null}={}){if(!this.can_generate){let mt=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const yt=this.config.model_type,bt=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(yt)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(yt)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(yt)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(yt);throw bt&&(mt+=` Please use the following class instead: '${bt[0]}'`),Error(mt)}if(!(tt instanceof Tensor)&&!isTypedArray(tt)&&!Array.isArray(tt))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${tt.constructor.name}".`);let at;if(this.config.is_encoder_decoder)at=0;else if(at=tt instanceof Tensor?tt.dims.at(-1):tt.length,at===0)throw Error("Must supply a non-empty array of input token ids.");nt=this._get_generation_config(nt),st=st??new LogitsProcessorList,st=this._get_logits_processor(nt,at,st);let dt=nt.eos_token_id;dt!==null&&!Array.isArray(dt)&&(dt=[dt]);let ft=1;const ht=ft+(nt.max_new_tokens??1/0),ct=Number.isInteger(nt.max_length)&&(nt.max_new_tokens??null)===null;let it=Sampler.getSampler(nt),rt=this.getStartBeams(tt,nt,ft,ot);for(;rt.some(gt=>!gt.done)&&ft<ht;){let gt=[];for(let mt of rt){if(mt.done){gt.push(mt);continue}if(ct&&mt.output_token_ids.length>=nt.max_length){mt.done=!0,gt.push(mt);continue}let yt=await this.runBeam(mt);nt.output_attentions&&this.addAttentionsToBeam(mt,yt),nt.output_scores;let bt=yt.logits.slice(null,-1,null);st(mt.output_token_ids,bt);let wt=it(bt);for(let[xt,Tt]of wt){let St={...mt};this.updateBeam(St,xt),St.score+=Tt,dt&&dt.includes(xt)&&(St.done=!0),gt.push(St)}}++ft,gt=this.groupBeams(gt).map(mt=>mt.sort((yt,bt)=>bt.score-yt.score).slice(0,nt.num_beams)),rt=gt.flat(),nt.callback_function&&nt.callback_function(rt)}const lt=this.groupBeams(rt),ut=gt=>lt.map(mt=>nt.num_return_sequences>1?mt.slice(0,nt.num_return_sequences).map(yt=>yt[gt]):[mt[0][gt]]).flat(),pt=ut("output_token_ids");if(nt.return_dict_in_generate){const gt=ut("decoder_attentions"),mt=ut("cross_attentions");return{sequences:pt,decoder_attentions:gt,cross_attentions:mt}}else return pt}addAttentionsToBeam(tt,nt){if(this.config.is_encoder_decoder){if(!nt.cross_attentions||nt.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");tt.cross_attentions||(tt.cross_attentions=[]),tt.cross_attentions.push(nt.cross_attentions)}if(!nt.decoder_attentions||nt.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");tt.decoder_attentions||(tt.decoder_attentions=[]),tt.decoder_attentions.push(nt.decoder_attentions)}groupBeams(tt){const nt=Object.create(null);for(const st of tt)nt[st.id]===void 0?nt[st.id]=[st]:nt[st.id].push(st);return Object.values(nt)}getPastKeyValues(tt,nt){const st=Object.create(null);for(const ot in tt)if(ot.startsWith("present")){let at=ot.replace("present","past_key_values");nt&&ot.includes("encoder")?st[at]=nt[at]:st[at]=tt[ot]}return st}getAttentions(tt){const nt=Object.create(null);for(const st of["cross_attentions","decoder_attentions"]){const ot=[];for(const at in tt)if(at.startsWith(st)){const dt=at.split(".").pop();ot[dt]=tt[at]}nt[st]=ot}return nt}addPastKeyValues(tt,nt){if(nt)Object.assign(tt,nt);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let ot=[1,this.num_encoder_heads,0,this.encoder_dim_kv],at=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let dt=0;dt<this.num_decoder_layers;++dt)tt[`past_key_values.${dt}.encoder.key`]=new Tensor("float32",[],ot),tt[`past_key_values.${dt}.encoder.value`]=new Tensor("float32",[],ot),tt[`past_key_values.${dt}.decoder.key`]=new Tensor("float32",[],at),tt[`past_key_values.${dt}.decoder.value`]=new Tensor("float32",[],at)}else if(this.config.model_type==="falcon"){let ot=[1*this.num_heads,0,this.dim_kv];for(let at=0;at<this.num_layers;++at)tt[`past_key_values.${at}.key`]=new Tensor("float32",[],ot),tt[`past_key_values.${at}.value`]=new Tensor("float32",[],ot)}else if(this.config.multi_query){let ot=[1*this.num_heads,0,2*this.dim_kv];for(let at=0;at<this.num_layers;++at)tt[`past_key_values.${at}.key_value`]=new Tensor("float32",[],ot)}else if(this.config.model_type==="bloom"){let ot=[1*this.num_heads,this.dim_kv,0],at=[1*this.num_heads,0,this.dim_kv];for(let dt=0;dt<this.num_layers;++dt)tt[`past_key_values.${dt}.key`]=new Tensor("float32",[],ot),tt[`past_key_values.${dt}.value`]=new Tensor("float32",[],at)}else{let ot=[1,this.num_heads,0,this.dim_kv];for(let at=0;at<this.num_layers;++at)tt[`past_key_values.${at}.key`]=new Tensor("float32",[],ot),tt[`past_key_values.${at}.value`]=new Tensor("float32",[],ot)}}getStartBeams(tt,nt,st,ot){return this._getStartBeams(this,tt,nt,st,ot)}async runBeam(tt){return await this._runBeam(this,tt)}updateBeam(tt,nt){return this._updateBeam(tt,nt)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(_e){return new MaskedLMOutput(await super._call(_e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(_e){return new QuestionAnsweringModelOutput(await super._call(_e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(tt,nt,st,ot){super(tt,nt);Qt(this,"requires_attention_mask",!1);Qt(this,"main_input_name","input_features");this.decoder_merged_session=st,this.generation_config=ot,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(tt,nt=null,st=null){if(nt=this._get_generation_config(nt),nt.return_timestamps??(nt.return_timestamps=!1),nt.return_timestamps&&(st=[new WhisperTimeStampLogitsProcessor(nt)]),nt.return_token_timestamps&&(nt.output_attentions=!0,nt.return_dict_in_generate=!0,nt.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!nt.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const ot=await super.generate(tt,nt,st);return nt.return_token_timestamps&&nt.alignment_heads&&(ot.token_timestamps=this._extract_token_timestamps(ot,nt.alignment_heads,nt.num_frames)),ot}_extract_token_timestamps(tt,nt,st=null,ot=.02){if(!tt.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let at=this.config.median_filter_width;at===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),at=7);const dt=tt.cross_attentions.map(ct=>{let it=Array.from({length:this.config.decoder_layers},(mt,yt)=>cat(ct.map(bt=>bt[yt]),2)),rt=stack(nt.map(([mt,yt])=>st?it[mt].slice(null,yt,null,[0,st]):it[mt].slice(null,yt)));rt=rt.transpose(1,0,2,3);let[lt,ut]=std_mean(rt,-2,0,!0),pt=rt.clone();for(let mt=0;mt<pt.dims[0];++mt){let yt=pt[mt];for(let bt=0;bt<yt.dims[0];++bt){let wt=yt[bt];const xt=lt[mt][bt][0],Tt=ut[mt][bt][0];for(let St=0;St<wt.dims[0];++St){let Pt=wt[St];for(let vt=0;vt<Pt.data.length;++vt)Pt.data[vt]=(Pt.data[vt]-Tt.data[vt])/xt.data[vt];Pt.data.set(medianFilter(Pt.data,at))}}}return mean(pt,1)}),ft=[tt.sequences.length,tt.sequences[0].length],ht=new Tensor("float32",new Float32Array(ft[0]*ft[1]),ft);for(let ct=0;ct<ft[0];++ct){const it=dt[ct].neg().squeeze_(0);let[rt,lt]=dynamicTimeWarping(it),ut=Array.from({length:rt.length-1},(mt,yt)=>rt[yt+1]-rt[yt]),pt=mergeArrays([1],ut).map(mt=>!!mt),gt=[];for(let mt=0;mt<pt.length;++mt)pt[mt]&&gt.push(lt[mt]*ot);ht[ct].data.set(gt,1)}return ht}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(tt,nt,st,ot){super(tt,nt);Qt(this,"main_input_name","pixel_values");this.decoder_merged_session=st,this.generation_config=ot;const at=this.config.encoder,dt=this.config.decoder,ft=at.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(ft)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(ft))||console.warn(`Model type for encoder '${ft}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const ct=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(dt.model_type);if(!ct)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const it=ct[1],rt=new it(dt,st,ot);this.add_encoder_pkv="num_decoder_layers"in rt,this.add_encoder_pkv?(this.num_decoder_layers=rt.num_decoder_layers,this.num_decoder_heads=rt.num_decoder_heads,this.decoder_dim_kv=rt.decoder_dim_kv,this.num_encoder_layers=rt.num_encoder_layers,this.num_encoder_heads=rt.num_encoder_heads,this.encoder_dim_kv=rt.encoder_dim_kv):(this.num_layers=rt.num_layers,this.num_heads=rt.num_heads,this.dim_kv=rt.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="text_model"),super.from_pretrained(_e,tt)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="vision_model"),super.from_pretrained(_e,tt)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="text_model"),super.from_pretrained(_e,tt)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="vision_model"),super.from_pretrained(_e,tt)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(_e){return new ImageMattingOutput(await super._call(_e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(_e){return new DetrObjectDetectionOutput(await super._call(_e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(_e){return new DetrSegmentationOutput(await super._call(_e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:_e,pred_boxes:tt}){super(),this.logits=_e,this.pred_boxes=tt}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:_e,pred_boxes:tt,pred_masks:nt}){super(),this.logits=_e,this.pred_boxes=tt,this.pred_masks=nt}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(_e){return new TableTransformerObjectDetectionOutput(await super._call(_e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(_e){return new YolosObjectDetectionOutput(await super._call(_e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:_e,pred_boxes:tt}){super(),this.logits=_e,this.pred_boxes=tt}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.prompt_encoder_mask_decoder=nt}async get_image_embeddings({pixel_values:_e}){return await encoderForward(this,{pixel_values:_e})}async forward(_e){if((!_e.image_embeddings||!_e.image_positional_embeddings)&&(_e={..._e,...await this.get_image_embeddings(_e)}),!_e.input_labels){const tt=_e.input_points.dims.slice(0,-1),nt=tt.reduce((st,ot)=>st*ot,1);_e.input_labels=new Tensor("int64",new BigInt64Array(nt).fill(1n),tt)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:_e.input_points,input_labels:_e.input_labels,image_embeddings:_e.image_embeddings,image_positional_embeddings:_e.image_positional_embeddings})}async _call(_e){return new SamImageSegmentationOutput(await super._call(_e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:_e,pred_masks:tt}){super(),this.iou_scores=_e,this.pred_masks=tt}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(_e){return new CausalLMOutput(await super._call(_e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(_e){return new XVectorOutput(await super._call(_e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(_e){return new TokenClassifierOutput(await super._call(_e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(_e,tt,nt,st){super(_e,tt),this.decoder_merged_session=nt,this.generation_config=st,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(_e,tt,{threshold:nt=.5,minlenratio:st=0,maxlenratio:ot=20,vocoder:at=null}={}){const dt={input_ids:_e},{encoder_outputs:ft,encoder_attention_mask:ht}=await encoderForward(this,dt),ct=ft.dims[1]/this.config.reduction_factor,it=Math.floor(ct*ot),rt=Math.floor(ct*st),lt=this.config.num_mel_bins;let ut=[],pt=null,gt=null,mt=0;for(;;){++mt;const wt=boolTensor(!!gt);let xt;gt?xt=gt.output_sequence_out:xt=new Tensor("float32",new Float32Array(lt),[1,1,lt]);let Tt={use_cache_branch:wt,output_sequence:xt,encoder_attention_mask:ht,speaker_embeddings:tt,encoder_hidden_states:ft};this.addPastKeyValues(Tt,pt),gt=await sessionRun(this.decoder_merged_session,Tt),pt=this.getPastKeyValues(gt,pt);const{prob:St,spectrum:Pt}=gt;if(ut.push(Pt),mt>=rt&&(Array.from(St.data).filter(vt=>vt>=nt).length>0||mt>=it))break}const yt=cat(ut),{waveform:bt}=await sessionRun(at.session,{spectrogram:yt});return{spectrogram:yt,waveform:bt}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Qt(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="text_model"),super.from_pretrained(_e,tt)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(_e,tt={}){return tt.model_file_name??(tt.model_file_name="audio_model"),super.from_pretrained(_e,tt)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(_e){return new VitsModelOutput(await super._call(_e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(_e,tt,nt){super(_e,tt),this.generation_config=nt,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(_e){return new SequenceClassifierOutput(await super._call(_e))}}class PretrainedMixin{static async from_pretrained(_e,{quantized:tt=!0,progress_callback:nt=null,config:st=null,cache_dir:ot=null,local_files_only:at=!1,revision:dt="main",model_file_name:ft=null}={}){let ht={quantized:tt,progress_callback:nt,config:st,cache_dir:ot,local_files_only:at,revision:dt,model_file_name:ft};if(st=await AutoConfig.from_pretrained(_e,ht),ht.config||(ht.config=st),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let ct of this.MODEL_CLASS_MAPPINGS){const it=ct.get(st.model_type);if(it)return await it[1].from_pretrained(_e,ht)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${st.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(_e,ht);throw Error(`Unsupported model type: ${st.model_type}`)}}Qt(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Qt(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[et,_e]of MODEL_CLASS_TYPE_MAPPING)for(const[tt,nt]of et.values())MODEL_TYPE_MAPPING.set(tt,_e),MODEL_CLASS_TO_NAME_MAPPING.set(nt,tt),MODEL_NAME_TO_CLASS_MAPPING.set(tt,nt);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[et,_e,tt]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(et,tt),MODEL_CLASS_TO_NAME_MAPPING.set(_e,et),MODEL_NAME_TO_CLASS_MAPPING.set(et,_e);class AutoModel extends PretrainedMixin{}Qt(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(_e=>_e[0])),Qt(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}Qt(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}Qt(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}Qt(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}Qt(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}Qt(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}Qt(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}Qt(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}Qt(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}Qt(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}Qt(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}Qt(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}Qt(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}Qt(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}Qt(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}Qt(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}Qt(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}Qt(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}Qt(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}Qt(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}Qt(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}Qt(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:_e,past_key_values:tt,encoder_outputs:nt,decoder_attentions:st=null,cross_attentions:ot=null}){super(),this.logits=_e,this.past_key_values=tt,this.encoder_outputs=nt,this.decoder_attentions=st,this.cross_attentions=ot}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:_e}){super(),this.logits=_e}}class XVectorOutput extends ModelOutput{constructor({logits:_e,embeddings:tt}){super(),this.logits=_e,this.embeddings=tt}}class TokenClassifierOutput extends ModelOutput{constructor({logits:_e}){super(),this.logits=_e}}class MaskedLMOutput extends ModelOutput{constructor({logits:_e}){super(),this.logits=_e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:_e,end_logits:tt}){super(),this.start_logits=_e,this.end_logits=tt}}class CausalLMOutput extends ModelOutput{constructor({logits:_e}){super(),this.logits=_e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:_e}){super(),this.alphas=_e}}class VitsModelOutput extends ModelOutput{constructor({waveform:_e,spectrogram:tt}){super(),this.waveform=_e,this.spectrogram=tt}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(et,_e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(et,_e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async et=>{const tt=(await et.metadata()).channels;let{data:nt,info:st}=await et.rotate().raw().toBuffer({resolveWithObject:!0});const ot=new RawImage(new Uint8ClampedArray(nt),st.width,st.height,st.channels);return tt!==void 0&&tt!==st.channels&&ot.convert(tt),ot};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(_e,tt,nt,st){this.data=_e,this.width=tt,this.height=nt,this.channels=st}get size(){return[this.width,this.height]}static async read(_e){if(_e instanceof RawImage)return _e;if(typeof _e=="string"||_e instanceof URL)return await this.fromURL(_e);throw new Error(`Unsupported input type: ${typeof _e}`)}static async fromURL(_e){let tt=await getFile(_e);if(tt.status!==200)throw new Error(`Unable to read image from "${_e}" (${tt.status} ${tt.statusText})`);let nt=await tt.blob();return this.fromBlob(nt)}static async fromBlob(_e){if(BROWSER_ENV){let tt=await loadImageFunction(_e);const nt=createCanvasFunction(tt.width,tt.height).getContext("2d");return nt.drawImage(tt,0,0),new this(nt.getImageData(0,0,tt.width,tt.height).data,tt.width,tt.height,4)}else{let tt=sharp(await _e.arrayBuffer());return await loadImageFunction(tt)}}static fromTensor(_e,tt="CHW"){if(_e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${_e.dims.length} dimensions.`);if(tt==="CHW")_e=_e.transpose(1,2,0);else if(tt!=="HWC")throw new Error(`Unsupported channel format: ${tt}`);if(!(_e.data instanceof Uint8ClampedArray||_e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${_e.type}`);switch(_e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(_e.data,_e.dims[1],_e.dims[0],_e.dims[2]);default:throw new Error(`Unsupported number of channels: ${_e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let _e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let tt=0,nt=0;tt<this.data.length;tt+=this.channels){const st=this.data[tt],ot=this.data[tt+1],at=this.data[tt+2];_e[nt++]=Math.round(.2989*st+.587*ot+.114*at)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(_e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let _e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let tt=0,nt=0;tt<this.data.length;++tt)_e[nt++]=this.data[tt],_e[nt++]=this.data[tt],_e[nt++]=this.data[tt];break;case 4:for(let tt=0,nt=0;tt<this.data.length;tt+=4)_e[nt++]=this.data[tt],_e[nt++]=this.data[tt+1],_e[nt++]=this.data[tt+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(_e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let _e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let tt=0,nt=0;tt<this.data.length;++tt)_e[nt++]=this.data[tt],_e[nt++]=this.data[tt],_e[nt++]=this.data[tt],_e[nt++]=255;break;case 3:for(let tt=0,nt=0;tt<this.data.length;tt+=3)_e[nt++]=this.data[tt],_e[nt++]=this.data[tt+1],_e[nt++]=this.data[tt+2],_e[nt++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(_e,this.width,this.height,4)}async resize(_e,tt,{resample:nt=2}={}){let st=RESAMPLING_MAPPING[nt]??nt;if(BROWSER_ENV){let ot=this.channels,at=this.toCanvas();const dt=createCanvasFunction(_e,tt).getContext("2d");return dt.drawImage(at,0,0,_e,tt),new RawImage(dt.getImageData(0,0,_e,tt).data,_e,tt,4).convert(ot)}else{let ot=this.toSharp();switch(st){case"box":case"hamming":(st==="box"||st==="hamming")&&(console.warn(`Resampling method ${st} is not yet supported. Using bilinear instead.`),st="bilinear");case"nearest":case"bilinear":case"bicubic":ot=ot.affine([_e/this.width,0,0,tt/this.height],{interpolator:st});break;case"lanczos":ot=ot.resize({width:_e,height:tt,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${st} is not supported.`)}return await loadImageFunction(ot)}}async pad([_e,tt,nt,st]){if(_e=Math.max(_e,0),tt=Math.max(tt,0),nt=Math.max(nt,0),st=Math.max(st,0),_e===0&&tt===0&&nt===0&&st===0)return this;if(BROWSER_ENV){let ot=this.channels,at=this.toCanvas(),dt=this.width+_e+tt,ft=this.height+nt+st;const ht=createCanvasFunction(dt,ft).getContext("2d");return ht.drawImage(at,0,0,this.width,this.height,_e,nt,dt,ft),new RawImage(ht.getImageData(0,0,dt,ft).data,dt,ft,4).convert(ot)}else{let ot=this.toSharp().extend({left:_e,right:tt,top:nt,bottom:st});return await loadImageFunction(ot)}}async crop([_e,tt,nt,st]){if(_e=Math.max(_e,0),tt=Math.max(tt,0),nt=Math.min(nt,this.width-1),st=Math.min(st,this.height-1),_e===0&&tt===0&&nt===this.width-1&&st===this.height-1)return this;const ot=nt-_e+1,at=st-tt+1;if(BROWSER_ENV){const dt=this.channels,ft=this.toCanvas(),ht=createCanvasFunction(ot,at).getContext("2d");return ht.drawImage(ft,_e,tt,ot,at,0,0,ot,at),new RawImage(ht.getImageData(0,0,ot,at).data,ot,at,4).convert(dt)}else{const dt=this.toSharp().extract({left:_e,top:tt,width:ot,height:at});return await loadImageFunction(dt)}}async center_crop(_e,tt){if(this.width===_e&&this.height===tt)return this;let nt=(this.width-_e)/2,st=(this.height-tt)/2;if(BROWSER_ENV){let ot=this.channels,at=this.toCanvas();const dt=createCanvasFunction(_e,tt).getContext("2d");let ft=0,ht=0,ct=0,it=0;return nt>=0?ft=nt:ct=-nt,st>=0?ht=st:it=-st,dt.drawImage(at,ft,ht,_e,tt,ct,it,_e,tt),new RawImage(dt.getImageData(0,0,_e,tt).data,_e,tt,4).convert(ot)}else{let ot=this.toSharp();if(nt>=0&&st>=0)ot=ot.extract({left:Math.floor(nt),top:Math.floor(st),width:_e,height:tt});else if(nt<=0&&st<=0){let at=Math.floor(-st),dt=Math.floor(-nt);ot=ot.extend({top:at,left:dt,right:_e-this.width-dt,bottom:tt-this.height-at})}else{let at=[0,0],dt=0;st<0?(at[0]=Math.floor(-st),at[1]=tt-this.height-at[0]):dt=Math.floor(st);let ft=[0,0],ht=0;nt<0?(ft[0]=Math.floor(-nt),ft[1]=_e-this.width-ft[0]):ht=Math.floor(nt),ot=ot.extend({top:at[0],bottom:at[1],left:ft[0],right:ft[1]}).extract({left:ht,top:dt,width:_e,height:tt})}return await loadImageFunction(ot)}}async toBlob(_e="image/png",tt=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:_e,quality:tt})}toTensor(_e="CHW"){let tt=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(_e!=="HWC")if(_e==="CHW")tt=tt.permute(2,0,1);else throw new Error(`Unsupported channel format: ${_e}`);return tt}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let _e=this.clone().rgba(),tt=createCanvasFunction(_e.width,_e.height),nt=new ImageDataClass(_e.data,_e.width,_e.height);return tt.getContext("2d").putImageData(nt,0,0),tt}_update(_e,tt,nt,st=null){return this.data=_e,this.width=tt,this.height=nt,st!==null&&(this.channels=st),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(_e){if(this.channels===_e)return this;switch(_e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(_e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const tt=_e.split(".").pop().toLowerCase(),nt=CONTENT_TYPE_MAP.get(tt)??"image/png",st=await this.toBlob(nt),ot=URL.createObjectURL(st),at=document.createElement("a");at.href=ot,at.download=_e,at.click(),at.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(_e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(et,_e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const tt=await(await getFile(et)).arrayBuffer(),nt=new AudioContext({sampleRate:_e});typeof _e>"u"&&console.warn(`No sampling rate provided, using default of ${nt.sampleRate}Hz.`);const st=await nt.decodeAudioData(tt);let ot;if(st.numberOfChannels===2){const at=Math.sqrt(2),dt=st.getChannelData(0),ft=st.getChannelData(1);ot=new Float32Array(dt.length);for(let ht=0;ht<st.length;++ht)ot[ht]=at*(dt[ht]+ft[ht])/2}else ot=st.getChannelData(0);return ot}function hanning(et){if(et<1)return new Float64Array;if(et===1)return new Float64Array([1]);const _e=et-1,tt=Math.PI/_e,nt=new Float64Array(et);for(let st=0;st<et;++st){const ot=2*st-_e;nt[st]=.5+.5*Math.cos(tt*ot)}return nt}const HERTZ_TO_MEL_MAPPING={htk:et=>2595*Math.log10(1+et/700),kaldi:et=>1127*Math.log(1+et/700),slaney:(et,_e=1e3,tt=15,nt=27/Math.log(6.4))=>et>=_e?tt+Math.log(et/_e)*nt:3*et/200};function hertz_to_mel(et,_e="htk"){const tt=HERTZ_TO_MEL_MAPPING[_e];if(!tt)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof et=="number"?tt(et):et.map(nt=>tt(nt))}const MEL_TO_HERTZ_MAPPING={htk:et=>700*(10**(et/2595)-1),kaldi:et=>700*(Math.exp(et/1127)-1),slaney:(et,_e=1e3,tt=15,nt=Math.log(6.4)/27)=>et>=tt?_e*Math.exp(nt*(et-tt)):200*et/3};function mel_to_hertz(et,_e="htk"){const tt=MEL_TO_HERTZ_MAPPING[_e];if(!tt)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof et=="number"?tt(et):et.map(nt=>tt(nt))}function _create_triangular_filter_bank(et,_e){const tt=Float64Array.from({length:_e.length-1},(at,dt)=>_e[dt+1]-_e[dt]),nt=Array.from({length:et.length},()=>new Array(_e.length));for(let at=0;at<et.length;++at){const dt=nt[at];for(let ft=0;ft<_e.length;++ft)dt[ft]=_e[ft]-et[at]}const st=_e.length-2,ot=Array.from({length:st},()=>new Array(et.length));for(let at=0;at<et.length;++at){const dt=nt[at];for(let ft=0;ft<st;++ft){const ht=-dt[ft]/tt[ft],ct=dt[ft+2]/tt[ft+1];ot[ft][at]=Math.max(0,Math.min(ht,ct))}}return ot}function linspace(et,_e,tt){const nt=(_e-et)/(tt-1);return Float64Array.from({length:tt},(st,ot)=>et+nt*ot)}function mel_filter_bank(et,_e,tt,nt,st,ot=null,at="htk",dt=!1){if(ot!==null&&ot!=="slaney")throw new Error('norm must be one of null or "slaney"');const ft=hertz_to_mel(tt,at),ht=hertz_to_mel(nt,at),ct=linspace(ft,ht,_e+2);let it=mel_to_hertz(ct,at),rt;if(dt){const ut=st/(et*2);rt=hertz_to_mel(Float64Array.from({length:et},(pt,gt)=>gt*ut),at),it=ct}else rt=linspace(0,Math.floor(st/2),et);const lt=_create_triangular_filter_bank(rt,it);if(ot!==null&&ot==="slaney")for(let ut=0;ut<_e;++ut){const pt=lt[ut],gt=2/(it[ut+2]-it[ut]);for(let mt=0;mt<et;++mt)pt[mt]*=gt}return lt}function padReflect(et,_e,tt){const nt=new et.constructor(et.length+_e+tt),st=et.length-1;for(let ot=0;ot<et.length;++ot)nt[_e+ot]=et[ot];for(let ot=1;ot<=_e;++ot)nt[_e-ot]=et[calculateReflectOffset(ot,st)];for(let ot=1;ot<=tt;++ot)nt[st+_e+ot]=et[calculateReflectOffset(st-ot,st)];return nt}function _db_conversion_helper(et,_e,tt,nt,st){if(tt<=0)throw new Error("reference must be greater than zero");if(nt<=0)throw new Error("min_value must be greater than zero");tt=Math.max(nt,tt);const ot=Math.log10(tt);for(let at=0;at<et.length;++at)et[at]=_e*Math.log10(Math.max(nt,et[at])-ot);if(st!==null){if(st<=0)throw new Error("db_range must be greater than zero");const at=max(et)[0]-st;for(let dt=0;dt<et.length;++dt)et[dt]=Math.max(et[dt],at)}return et}function amplitude_to_db(et,_e=1,tt=1e-5,nt=null){return _db_conversion_helper(et,20,_e,tt,nt)}function power_to_db(et,_e=1,tt=1e-10,nt=null){return _db_conversion_helper(et,10,_e,tt,nt)}function spectrogram(et,_e,tt,nt,{fft_length:st=null,power:ot=1,center:at=!0,pad_mode:dt="reflect",onesided:ft=!0,preemphasis:ht=null,mel_filters:ct=null,mel_floor:it=1e-10,log_mel:rt=null,reference:lt=1,min_value:ut=1e-10,db_range:pt=null,remove_dc_offset:gt=null,max_num_frames:mt=null,do_pad:yt=!0,transpose:bt=!1}={}){const wt=_e.length;if(st===null&&(st=tt),tt>st)throw Error(`frame_length (${tt}) may not be larger than fft_length (${st})`);if(wt!==tt)throw new Error(`Length of the window (${wt}) must equal frame_length (${tt})`);if(nt<=0)throw new Error("hop_length must be greater than zero");if(ot===null&&ct!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(at){if(dt!=="reflect")throw new Error(`pad_mode="${dt}" not implemented yet.`);const Ot=Math.floor((st-1)/2)+1;et=padReflect(et,Ot,Ot)}const xt=Math.floor(1+Math.floor((et.length-tt)/nt)),Tt=ft?Math.floor(st/2)+1:st;let St=xt,Pt=xt;mt!==null&&(mt>xt?yt&&(Pt=mt):Pt=St=mt);const vt=new FFT(st),At=new Float64Array(st),It=new Float64Array(vt.outputBufferSize),jt=new Array(St);for(let Ot=0;Ot<St;++Ot){const Ft=Ot*nt;for(let zt=0;zt<tt;++zt)At[zt]=et[Ft+zt];if(gt){let zt=0;for(let Jt=0;Jt<tt;++Jt)zt+=At[Jt];const Xt=zt/tt;for(let Jt=0;Jt<tt;++Jt)At[Jt]-=Xt}if(ht!==null){for(let zt=tt-1;zt>=1;--zt)At[zt]-=ht*At[zt-1];At[0]*=1-ht}for(let zt=0;zt<_e.length;++zt)At[zt]*=_e[zt];vt.realTransform(It,At);const Vt=new Array(Tt);for(let zt=0;zt<Vt.length;++zt){const Xt=zt<<1;Vt[zt]=It[Xt]**2+It[Xt+1]**2}jt[Ot]=Vt}if(ot!==null&&ot!==2){const Ot=2/ot;for(let Ft=0;Ft<jt.length;++Ft){const Vt=jt[Ft];for(let zt=0;zt<Vt.length;++zt)Vt[zt]**=Ot}}const Lt=ct.length,Rt=new Float32Array(Lt*Pt),$t=bt?[Pt,Lt]:[Lt,Pt];for(let Ot=0;Ot<Lt;++Ot){const Ft=ct[Ot];for(let Vt=0;Vt<St;++Vt){const zt=jt[Vt];let Xt=0;for(let Jt=0;Jt<Tt;++Jt)Xt+=Ft[Jt]*zt[Jt];Rt[bt?Vt*Lt+Ot:Ot*St+Vt]=Math.max(it,Xt)}}if(ot!==null&&rt!==null){const Ot=Math.min(Rt.length,St*Lt);switch(rt){case"log":for(let Ft=0;Ft<Ot;++Ft)Rt[Ft]=Math.log(Rt[Ft]);break;case"log10":for(let Ft=0;Ft<Ot;++Ft)Rt[Ft]=Math.log10(Rt[Ft]);break;case"dB":if(ot===1)amplitude_to_db(Rt,lt,ut,pt);else if(ot===2)power_to_db(Rt,lt,ut,pt);else throw new Error(`Cannot use log_mel option '${rt}' with power ${ot}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${rt}'`)}}return{data:Rt,dims:$t}}function window_function(et,_e,{periodic:tt=!0,frame_length:nt=null,center:st=!0}={}){const ot=tt?et+1:et;let at;switch(_e){case"boxcar":at=new Float64Array(ot).fill(1);break;case"hann":case"hann_window":at=hanning(ot);break;case"povey":at=hanning(ot).map(dt=>Math.pow(dt,.85));break;default:throw new Error(`Unknown window type ${_e}.`)}if(tt&&(at=at.subarray(0,et)),nt===null)return at;if(et>nt)throw new Error(`Length of the window (${et}) may not be larger than frame_length (${nt})`);return at}function center_to_corners_format([et,_e,tt,nt]){return[et-tt/2,_e-nt/2,et+tt/2,_e+nt/2]}function post_process_object_detection(et,_e=.5,tt=null,nt=!1){const st=et.logits,ot=et.pred_boxes,[at,dt,ft]=st.dims;if(tt!==null&&tt.length!==at)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let ht=[];for(let ct=0;ct<at;++ct){let it=tt!==null?tt[ct]:null,rt={boxes:[],classes:[],scores:[]},lt=st[ct],ut=ot[ct];for(let pt=0;pt<dt;++pt){let gt=lt[pt],mt=[],yt;if(nt){yt=gt.sigmoid().data;for(let bt=0;bt<yt.length;++bt)yt[bt]>_e&&mt.push(bt)}else{let bt=max(gt.data)[1];if(bt===ft-1)continue;mt.push(bt),yt=softmax(gt.data)}for(const bt of mt){let wt=ut[pt].data;wt=center_to_corners_format(wt),it!==null&&(wt=wt.map((xt,Tt)=>xt*it[(Tt+1)%2])),rt.boxes.push(wt),rt.classes.push(bt),rt.scores.push(yt[bt])}}ht.push(rt)}return ht}function validate_audio_inputs(et,_e){var tt;if(!(et instanceof Float32Array||et instanceof Float64Array))throw new Error(`${_e} expects input to be a Float32Array or a Float64Array, but got ${((tt=et==null?void 0:et.constructor)==null?void 0:tt.name)??typeof et} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(et,_e,tt=0,nt=null){const st=et/_e;let ot=bankers_round(st)*_e;return nt!==null&&ot>nt&&(ot=Math.floor(st)*_e),ot<tt&&(ot=Math.ceil(st)*_e),ot}function enforce_size_divisibility([et,_e],tt){return[Math.max(Math.floor(et/tt),1)*tt,Math.max(Math.floor(_e/tt),1)*tt]}class FeatureExtractor extends Callable{constructor(_e){super(),this.config=_e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(_e){super(_e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(_e,tt,nt=2){const st=_e.height,ot=_e.width,at=tt.height,dt=tt.width;let ft=Math.min(st,at),ht=Math.min(ot,dt);return ft===st&&ht===ot?_e:(st>ot?ht=Math.floor(ot*ft/st):ot>st&&(ft=Math.floor(st*ht/ot)),await _e.resize(ht,ft,{resample:nt}))}async crop_margin(_e,tt=200){const nt=_e.clone().grayscale(),st=min(nt.data)[0],at=max(nt.data)[0]-st;if(at===0)return _e;const dt=tt/255;let ft=nt.width,ht=nt.height,ct=0,it=0;for(let rt=0;rt<nt.height;++rt){const lt=rt*nt.width;for(let ut=0;ut<nt.width;++ut)(nt.data[lt+ut]-st)/at<dt&&(ft=Math.min(ft,ut),ht=Math.min(ht,rt),ct=Math.max(ct,ut),it=Math.max(it,rt))}return _e=await _e.crop([ft,ht,ct,it]),_e}pad_image(_e,tt,nt,{mode:st="constant",center:ot=!1,constant_values:at=0}={}){const[dt,ft,ht]=tt;let ct,it;if(typeof nt=="number"?(ct=nt,it=nt):(ct=nt.width,it=nt.height),ct!==ft||it!==dt){const rt=new Float32Array(ct*it*ht);if(Array.isArray(at))for(let pt=0;pt<rt.length;++pt)rt[pt]=at[pt%ht];else at!==0&&rt.fill(at);const[lt,ut]=ot?[Math.floor((ct-ft)/2),Math.floor((it-dt)/2)]:[0,0];for(let pt=0;pt<dt;++pt){const gt=(pt+ut)*ct,mt=pt*ft;for(let yt=0;yt<ft;++yt){const bt=(gt+yt+lt)*ht,wt=(mt+yt)*ht;for(let xt=0;xt<ht;++xt)rt[bt+xt]=_e[wt+xt]}}if(st==="symmetric"){if(ot)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const pt=dt-1,gt=ft-1;for(let mt=0;mt<it;++mt){const yt=mt*ct,bt=calculateReflectOffset(mt,pt)*ft;for(let wt=0;wt<ct;++wt){if(mt<dt&&wt<ft)continue;const xt=(yt+wt)*ht,Tt=(bt+calculateReflectOffset(wt,gt))*ht;for(let St=0;St<ht;++St)rt[xt+St]=_e[Tt+St]}}}_e=rt,tt=[it,ct,ht]}return[_e,tt]}rescale(_e){for(let tt=0;tt<_e.length;++tt)_e[tt]=this.rescale_factor*_e[tt]}get_resize_output_image_size(_e,tt){const[nt,st]=_e.size;let ot,at;if(this.do_thumbnail){const{height:dt,width:ft}=tt;ot=Math.min(dt,ft)}else Number.isInteger(tt)?(ot=tt,at=this.config.max_size??ot):tt!==void 0&&(ot=tt.shortest_edge,at=tt.longest_edge);if(ot!==void 0||at!==void 0){const dt=ot===void 0?1:Math.max(ot/nt,ot/st),ft=nt*dt,ht=st*dt,ct=at===void 0?1:Math.min(at/ft,at/ht);let it=Math.floor(Number((ft*ct).toFixed(2))),rt=Math.floor(Number((ht*ct).toFixed(2)));return this.size_divisibility!==void 0&&([it,rt]=enforce_size_divisibility([it,rt],this.size_divisibility)),[it,rt]}else if(tt!==void 0&&tt.width!==void 0&&tt.height!==void 0){let dt=tt.width,ft=tt.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let ht=ft/st,ct=dt/nt;Math.abs(1-ct)<Math.abs(1-ht)?ht=ct:ct=ht,ft=constraint_to_multiple_of(ht*st,this.config.ensure_multiple_of),dt=constraint_to_multiple_of(ct*nt,this.config.ensure_multiple_of)}return[dt,ft]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([nt,st],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(tt)}`)}}async resize(_e){const[tt,nt]=this.get_resize_output_image_size(_e,this.size);return await _e.resize(tt,nt,{resample:this.resample})}async preprocess(_e,{do_normalize:tt=null,do_pad:nt=null,do_convert_rgb:st=null,do_convert_grayscale:ot=null,do_flip_channel_order:at=null}={}){this.do_crop_margin&&(_e=await this.crop_margin(_e));const[dt,ft]=_e.size;if(st??this.do_convert_rgb?_e=_e.rgb():ot&&(_e=_e.grayscale()),this.do_resize&&(_e=await this.resize(_e)),this.do_thumbnail&&(_e=await this.thumbnail(_e,this.size,this.resample)),this.do_center_crop){let lt,ut;Number.isInteger(this.crop_size)?(lt=this.crop_size,ut=this.crop_size):(lt=this.crop_size.width,ut=this.crop_size.height),_e=await _e.center_crop(lt,ut)}const ht=[_e.height,_e.width];let ct=Float32Array.from(_e.data),it=[_e.height,_e.width,_e.channels];if(this.do_rescale&&this.rescale(ct),tt??this.do_normalize){let lt=this.image_mean;Array.isArray(this.image_mean)||(lt=new Array(_e.channels).fill(lt));let ut=this.image_std;if(Array.isArray(this.image_std)||(ut=new Array(_e.channels).fill(lt)),lt.length!==_e.channels||ut.length!==_e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${lt.length}) and \`image_std\` (${ut.length}) must match the number of channels in the image (${_e.channels}).`);for(let pt=0;pt<ct.length;pt+=_e.channels)for(let gt=0;gt<_e.channels;++gt)ct[pt+gt]=(ct[pt+gt]-lt[gt])/ut[gt]}if(nt??this.do_pad){if(this.pad_size)[ct,it]=this.pad_image(ct,[_e.height,_e.width,_e.channels],this.pad_size);else if(this.size_divisibility){const[lt,ut]=enforce_size_divisibility([it[1],it[0]],this.size_divisibility);[ct,it]=this.pad_image(ct,it,{width:lt,height:ut})}}if(at??this.do_flip_channel_order){if(it[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let lt=0;lt<ct.length;lt+=3){const ut=ct[lt];ct[lt]=ct[lt+2],ct[lt+2]=ut}}const rt=new Tensor("float32",ct,it).permute(2,0,1);return{original_size:[ft,dt],reshaped_input_size:ht,pixel_values:rt}}async _call(_e,...tt){Array.isArray(_e)||(_e=[_e]);const nt=await Promise.all(_e.map(ot=>this.preprocess(ot)));return{pixel_values:stack(nt.map(ot=>ot.pixel_values),0),original_sizes:nt.map(ot=>ot.original_size),reshaped_input_sizes:nt.map(ot=>ot.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(_e,tt=null){const nt=_e.logits,st=nt.dims[0];if(tt!==null&&tt.length!==st)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const ot=[];for(let at=0;at<st;++at){const dt=tt!==null?tt[at]:null;let ft=nt[at];dt!==null&&(ft=interpolate(ft,dt,"bilinear",!1));const[ht,ct]=dt??ft.dims.slice(-2),it=new Tensor("int32",new Int32Array(ht*ct),[ht,ct]),rt=ft[0].data;for(let gt=1;gt<ft.dims[0];++gt){const mt=ft[gt].data;for(let yt=0;yt<mt.length;++yt)mt[yt]>rt[yt]&&(rt[yt]=mt[yt],it.data[yt]=gt)}const lt=new Array(ft.dims[0]),ut=it.data;for(let gt=0;gt<ut.length;++gt){const mt=ut[gt];lt[mt]=mt}const pt=lt.filter(gt=>gt!==void 0);ot.push({segmentation:it,labels:pt})}return ot}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(_e){super(_e),this.crop_pct=this.config.crop_pct??224/256}async resize(_e){var nt;const tt=(nt=this.size)==null?void 0:nt.shortest_edge;if(tt===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(tt<384){const st=Math.floor(tt/this.crop_pct),[ot,at]=this.get_resize_output_image_size(_e,{shortest_edge:st});_e=await _e.resize(ot,at,{resample:this.resample}),_e=await _e.center_crop(tt,tt)}else _e=await _e.resize(tt,tt,{resample:this.resample});return _e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(_e){super(_e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(tt=>tt*tt))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(..._e){return post_process_object_detection(..._e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(_e,tt,nt,st={}){const[ot,at,dt]=tt;let ft=this.image_mean;Array.isArray(this.image_mean)||(ft=new Array(dt).fill(ft));let ht=this.image_std;Array.isArray(ht)||(ht=new Array(dt).fill(ft));const ct=ft.map((it,rt)=>-it/ht[rt]);return super.pad_image(_e,tt,nt,{center:!0,constant_values:ct,...st})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(_e){const tt=await super._call(_e),nt=[tt.pixel_values.dims[0],64,64],st=new Tensor("int64",new BigInt64Array(nt.reduce((ot,at)=>ot*at)).fill(1n),nt);return{...tt,pixel_mask:st}}post_process_object_detection(..._e){return post_process_object_detection(..._e)}remove_low_and_no_objects(_e,tt,nt,st){let ot=[],at=[],dt=[];for(let ft=0;ft<_e.dims[0];++ft){let ht=_e[ft],ct=tt[ft],it=max(ht.data)[1];if(it===st)continue;let lt=softmax(ht.data)[it];lt>nt&&(ot.push(ct),at.push(lt),dt.push(it))}return[ot,at,dt]}check_segment_validity(_e,tt,nt,st=.5,ot=.8){let at=[],dt=0,ft=0;for(let ct=0;ct<_e.length;++ct)_e[ct]===nt&&(at.push(ct),++dt),tt[nt].data[ct]>=st&&++ft;let ht=dt>0&&ft>0;return ht&&(ht=dt/ft>ot),[ht,at]}compute_segments(_e,tt,nt,st,ot,at=null,dt=null){let[ft,ht]=dt??_e[0].dims,ct=new Tensor("int32",new Int32Array(ft*ht),[ft,ht]),it=[];if(dt!==null)for(let pt=0;pt<_e.length;++pt)_e[pt]=interpolate(_e[pt],dt,"bilinear",!1);let rt=new Int32Array(_e[0].data.length),lt=new Float32Array(_e[0].data.length);for(let pt=0;pt<_e.length;++pt){let gt=tt[pt];for(let mt=0;mt<_e[pt].data.length;++mt)_e[pt].data[mt]*=gt,_e[pt].data[mt]>lt[mt]&&(rt[mt]=pt,lt[mt]=_e[pt].data[mt])}let ut=0;for(let pt=0;pt<nt.length;++pt){let gt=nt[pt],[mt,yt]=this.check_segment_validity(rt,_e,pt,st,ot);if(mt){++ut;for(let bt of yt)ct.data[bt]=ut;it.push({id:ut,label_id:gt,score:tt[pt]})}}return[ct,it]}post_process_panoptic_segmentation(_e,tt=.5,nt=.5,st=.8,ot=null,at=null){ot===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),ot=new Set);const dt=_e.logits,ht=_e.pred_masks.sigmoid();let[ct,it,rt]=dt.dims;if(rt-=1,at!==null&&at.length!==ct)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let lt=[];for(let ut=0;ut<ct;++ut){let pt=at!==null?at[ut]:null,gt=dt[ut],mt=ht[ut],[yt,bt,wt]=this.remove_low_and_no_objects(gt,mt,tt,rt);if(wt.length===0){let[St,Pt]=pt??mt.dims.slice(-2),vt=new Tensor("int32",new Int32Array(St*Pt).fill(-1),[St,Pt]);lt.push({segmentation:vt,segments_info:[]});continue}let[xt,Tt]=this.compute_segments(yt,bt,wt,nt,st,ot,pt);lt.push({segmentation:xt,segments_info:Tt})}return lt}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(..._e){return post_process_object_detection(..._e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(_e,tt,nt){_e=structuredClone(_e);let st=calculateDimensions(_e);if(st.length===3)st=[1,...st],_e=[_e];else if(st.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let ot=0;ot<_e.length;++ot){let at=tt[ot],dt=nt[ot],ft=[dt[0]/at[0],dt[1]/at[1]];for(let ht=0;ht<_e[ot].length;++ht)for(let ct=0;ct<_e[ot][ht].length;++ct)for(let it=0;it<_e[ot][ht][ct].length;++it)_e[ot][ht][ct][it]*=ft[it]}return new Tensor("float32",Float32Array.from(_e.flat(1/0)),st)}add_input_labels(_e,tt){let nt=calculateDimensions(_e);if(nt.length===2)nt=[1,...nt],_e=[_e];else if(nt.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(nt.some((st,ot)=>st!==tt.dims[ot]))throw Error(`The first ${nt.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",_e.flat(1/0).map(BigInt),nt)}async _call(_e,tt=null,nt=null){const st=await super._call(_e);if(tt&&(st.input_points=this.reshape_input_points(tt,st.original_sizes,st.reshaped_input_sizes)),nt){if(!st.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");st.input_labels=this.add_input_labels(nt,st.input_points)}return st}post_process_masks(_e,tt,nt,{mask_threshold:st=0,binarize:ot=!0,pad_size:at=null}={}){const dt=[];at=at??this.pad_size;const ft=[at.height,at.width];for(let ht=0;ht<tt.length;++ht){const ct=tt[ht],it=nt[ht],rt=_e[ht],lt=[];for(let ut=0;ut<rt.dims[0];++ut){const pt=rt[ut];let gt=interpolate(pt,ft,"bilinear",!1);if(gt=gt.slice(null,[0,it[0]],[0,it[1]]),gt=interpolate(gt,ct,"bilinear",!1),ot){const mt=new Uint8Array(gt.data.length);for(let yt=0;yt<gt.data.length;++yt)gt.data[yt]>st&&(mt[yt]=1);gt=new Tensor("bool",mt,gt.dims)}lt.push(gt)}dt.push(stack(lt))}return dt}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(_e,tt,nt,st={}){const[ot,at,dt]=tt;return super.pad_image(_e,tt,{width:at+(nt-at%nt)%nt,height:ot+(nt-ot%nt)%nt},{mode:"symmetric",center:!1,constant_values:-1,...st})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(_e,tt){Array.isArray(_e)||(_e=[_e]),Array.isArray(tt)||(tt=[tt]);const nt=await Promise.all(_e.map(at=>this.preprocess(at))),st=await Promise.all(tt.map(at=>this.preprocess(at,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(nt.map((at,dt)=>cat([at.pixel_values,st[dt].pixel_values],0)),0),original_sizes:nt.map(at=>at.original_size),reshaped_input_sizes:nt.map(at=>at.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(_e){var tt;super(_e),(tt=this.config).mel_filters??(tt.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(_e){const{data:tt,dims:nt}=spectrogram(_e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),st=max(tt)[0];for(let ot=0;ot<tt.length;++ot)tt[ot]=(Math.max(tt[ot],st-8)+4)/4;return{data:tt,dims:nt}}async _call(_e){validate_audio_inputs(_e,"WhisperFeatureExtractor");let tt;_e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),tt=_e.slice(0,this.config.n_samples)):(tt=new Float32Array(this.config.n_samples),tt.set(_e));const{data:nt,dims:st}=this._extract_fbank_features(tt);return{input_features:new Tensor("float32",nt,[1,...st])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(_e){const nt=_e.reduce((ot,at)=>ot+at,0)/_e.length,st=_e.reduce((ot,at)=>ot+(at-nt)**2,0)/_e.length;return _e.map(ot=>(ot-nt)/Math.sqrt(st+1e-7))}async _call(_e){validate_audio_inputs(_e,"Wav2Vec2FeatureExtractor"),_e instanceof Float64Array&&(_e=new Float32Array(_e));let tt=_e;this.config.do_normalize&&(tt=this._zero_mean_unit_var_norm(tt));const nt=[1,tt.length];return{input_values:new Tensor("float32",tt,nt),attention_mask:new Tensor("int64",new BigInt64Array(tt.length).fill(1n),nt)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(_e){super(_e);const tt=this.config.sampling_rate,nt=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(tt/2),tt,null,"kaldi",!0);for(let st=0;st<nt.length;++st)nt[st].push(0);this.mel_filters=nt,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(_e,tt){return _e=_e.map(nt=>nt*32768),spectrogram(_e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:tt,transpose:!0})}async _call(_e,{padding:tt=!0,pad_to_multiple_of:nt=2,do_normalize_per_mel_bins:st=!0,return_attention_mask:ot=!0}={}){validate_audio_inputs(_e,"SeamlessM4TFeatureExtractor");let at=this._extract_fbank_features(_e,this.config.max_length);if(st){const[ut,pt]=at.dims;for(let gt=0;gt<pt;++gt){let mt=0;for(let xt=0;xt<ut;++xt)mt+=at.data[xt*pt+gt];const yt=mt/ut;let bt=0;for(let xt=0;xt<ut;++xt)bt+=(at.data[xt*pt+gt]-yt)**2;bt/=ut-1;const wt=Math.sqrt(bt+1e-7);for(let xt=0;xt<ut;++xt){const Tt=xt*pt+gt;at.data[Tt]=(at.data[Tt]-yt)/wt}}}let dt;if(tt){const[ut,pt]=at.dims,gt=ut%nt;if(gt>0){const mt=new Float32Array(pt*(ut+gt));mt.set(at.data),mt.fill(this.config.padding_value,at.data.length);const yt=ut+gt;at={data:mt,dims:[yt,pt]},ot&&(dt=new Tensor("int64",new BigInt64Array(yt),[1,yt]),dt.data.fill(1n,0,ut))}}const[ft,ht]=at.dims,ct=this.config.stride;if(ft%ct!==0)throw new Error(`The number of frames (${ft}) must be a multiple of the stride (${ct}).`);const rt=new Tensor("float32",at.data,at.dims).view(1,Math.floor(ft/ct),ht*ct),lt={input_features:rt};if(ot){const ut=rt.dims[1],pt=new Tensor("int64",new BigInt64Array(ut),[1,ut]);if(dt)for(let gt=1,mt=0;gt<ft;gt+=ct,++mt)pt.data[mt]=dt.data[gt];else pt.data.fill(1n);lt.attention_mask=pt}return lt}}class ASTFeatureExtractor extends FeatureExtractor{constructor(_e){super(_e);const tt=this.config.sampling_rate,nt=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(tt/2),tt,null,"kaldi",!0);for(let st=0;st<nt.length;++st)nt[st].push(0);this.mel_filters=nt,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(_e,tt){return spectrogram(_e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:tt,transpose:!0})}async _call(_e){validate_audio_inputs(_e,"ASTFeatureExtractor");const tt=this._extract_fbank_features(_e,this.config.max_length);if(this.config.do_normalize){const nt=this.std*2;for(let st=0;st<tt.data.length;++st)tt.data[st]=(tt.data[st]-this.mean)/nt}return{input_values:new Tensor("float32",tt.data,[1,...tt.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(_e){super(_e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(_e,tt,nt,st){let ot,at=!1;const dt=_e.length-tt;if(dt>0)if(nt==="rand_trunc"){at=!0;const ft=Math.floor(Math.random()*(dt+1));_e=_e.subarray(ft,ft+tt),ot=this._extract_fbank_features(_e,this.mel_filters_slaney,this.config.nb_max_samples),ot.dims=[1,...ot.dims]}else throw new Error(`Truncation strategy "${nt}" not implemented`);else{if(dt<0){let ft=new Float64Array(tt);if(ft.set(_e),st==="repeat")for(let ht=_e.length;ht<tt;ht+=_e.length)ft.set(_e.subarray(0,Math.min(_e.length,tt-ht)),ht);else if(st==="repeatpad")for(let ht=_e.length;ht<-dt;ht+=_e.length)ft.set(_e,ht);_e=ft}if(nt==="fusion")throw new Error(`Truncation strategy "${nt}" not implemented`);ot=this._extract_fbank_features(_e,this.mel_filters_slaney,this.config.nb_max_samples),ot.dims=[1,...ot.dims]}return{...ot,longer:at}}_extract_fbank_features(_e,tt,nt=null){return spectrogram(_e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:tt,log_mel:"dB",max_num_frames:nt,do_pad:!1,transpose:!0})}async _call(_e,{max_length:tt=null}={}){validate_audio_inputs(_e,"ClapFeatureExtractor");const nt=this._get_input_mel(_e,tt??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",nt.data,[1,...nt.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(_e){super(),this.feature_extractor=_e}async _call(_e,...tt){return await this.feature_extractor(_e,...tt)}}class SamProcessor extends Processor{async _call(..._e){return await this.feature_extractor(..._e)}post_process_masks(..._e){return this.feature_extractor.post_process_masks(..._e)}reshape_input_points(..._e){return this.feature_extractor.reshape_input_points(..._e)}}class WhisperProcessor extends Processor{async _call(_e){return await this.feature_extractor(_e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(_e){return await this.feature_extractor(_e)}}class SpeechT5Processor extends Processor{async _call(_e){return await this.feature_extractor(_e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(_e,{progress_callback:tt=null,config:nt=null,cache_dir:st=null,local_files_only:ot=!1,revision:at="main"}={}){let dt=nt??await getModelJSON(_e,"preprocessor_config.json",!0,{progress_callback:tt,config:nt,cache_dir:st,local_files_only:ot,revision:at}),ft=dt.feature_extractor_type??dt.image_processor_type,ht=this.FEATURE_EXTRACTOR_CLASS_MAPPING[ft];if(!ht)if(dt.size!==void 0)console.warn(`Feature extractor type "${ft}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),ht=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${ft}`);let ct=this.PROCESSOR_CLASS_MAPPING[dt.processor_class]??Processor,it=new ht(dt);return new ct(it)}}Qt(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),Qt(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(et){return Array.isArray(et)||(et=[et]),await Promise.all(et.map(_e=>RawImage.read(_e)))}async function prepareAudios(et,_e){return Array.isArray(et)||(et=[et]),await Promise.all(et.map(tt=>typeof tt=="string"||tt instanceof URL?read_audio(tt,_e):tt instanceof Float64Array?new Float32Array(tt):tt))}function get_bounding_box(et,_e){_e&&(et=et.map(at=>at|0));const[tt,nt,st,ot]=et;return{xmin:tt,ymin:nt,xmax:st,ymax:ot}}class Pipeline extends Callable{constructor({task:_e,model:tt,tokenizer:nt=null,processor:st=null}){super(),this.task=_e,this.model=tt,this.tokenizer=nt,this.processor=st}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{topk:tt=1}={}){const nt=this.tokenizer(_e,{padding:!0,truncation:!0}),st=await this.model(nt),ot=this.model.config.problem_type==="multi_label_classification"?ft=>ft.sigmoid().data:ft=>softmax(ft.data),at=this.model.config.id2label,dt=[];for(const ft of st.logits){const ht=ot(ft),it=getTopItems(ht,tt).map(rt=>({label:at[rt[0]],score:rt[1]}));tt===1?dt.push(...it):dt.push(it)}return Array.isArray(_e)||tt===1?dt:dt[0]}}class TokenClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{ignore_labels:tt=["O"]}={}){const nt=Array.isArray(_e),st=this.tokenizer(nt?_e:[_e],{padding:!0,truncation:!0}),at=(await this.model(st)).logits,dt=this.model.config.id2label,ft=[];for(let ht=0;ht<at.dims[0];++ht){const ct=st.input_ids[ht],it=at[ht],rt=[];for(let lt=0;lt<it.dims[0];++lt){const ut=it[lt],pt=max(ut.data)[1],gt=dt?dt[pt]:`LABEL_${pt}`;if(tt.includes(gt))continue;const mt=this.tokenizer.decode([ct[lt].item()],{skip_special_tokens:!0});if(mt==="")continue;const yt=softmax(ut.data);rt.push({entity:gt,score:yt[pt],index:lt,word:mt,start:null,end:null})}ft.push(rt)}return nt?ft:ft[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt,{topk:nt=1}={}){const st=this.tokenizer(_e,{text_pair:tt,padding:!0,truncation:!0}),ot=await this.model(st),at=[];for(let dt=0;dt<ot.start_logits.dims[0];++dt){const ft=st.input_ids[dt],ht=ft.indexOf(this.tokenizer.sep_token_id),ct=Array.from(softmax(ot.start_logits[dt].data)).map((lt,ut)=>[lt,ut]).filter(lt=>lt[1]>ht),it=Array.from(softmax(ot.end_logits[dt].data)).map((lt,ut)=>[lt,ut]).filter(lt=>lt[1]>ht),rt=product(ct,it).filter(lt=>lt[0][1]<=lt[1][1]).map(lt=>[lt[0][1],lt[1][1],lt[0][0]*lt[1][0]]).sort((lt,ut)=>ut[2]-lt[2]);for(let lt=0;lt<Math.min(rt.length,nt);++lt){const[ut,pt,gt]=rt[lt],mt=[...ft].slice(ut,pt+1),yt=this.tokenizer.decode(mt,{skip_special_tokens:!0});at.push({answer:yt,score:gt})}}return nt===1?at[0]:at}}class FillMaskPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{topk:tt=5}={}){const nt=this.tokenizer(_e,{padding:!0,truncation:!0}),st=await this.model(nt),ot=[];for(let at=0;at<nt.input_ids.dims[0];++at){const dt=nt.input_ids[at],ft=dt.indexOf(this.tokenizer.mask_token_id);if(ft===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const ct=st.logits[at][ft],it=getTopItems(softmax(ct.data),tt);ot.push(it.map(rt=>{const lt=[...dt];return lt[ft]=rt[0],{score:rt[1],token:rt[0],token_str:this.tokenizer.model.vocab[rt[0]],sequence:this.tokenizer.decode(lt,{skip_special_tokens:!0})}}))}return Array.isArray(_e)?ot:ot[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(tt){super(tt);Qt(this,"_key","generated_text")}async _call(tt,nt={}){Array.isArray(tt)||(tt=[tt]),this.model.config.prefix&&(tt=tt.map(ht=>this.model.config.prefix+ht));const st=this.model.config.task_specific_params;st&&st[this.task]&&st[this.task].prefix&&(tt=tt.map(ht=>st[this.task].prefix+ht));const ot=this.tokenizer,at={padding:!0,truncation:!0};let dt;this instanceof TranslationPipeline&&"_build_translation_inputs"in ot?dt=ot._build_translation_inputs(tt,at,nt).input_ids:dt=ot(tt,at).input_ids;const ft=await this.model.generate(dt,nt);return ot.batch_decode(ft,{skip_special_tokens:!0}).map(ht=>({[this._key]:ht}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(tt){super(tt);Qt(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(tt){super(tt);Qt(this,"_key","translation_text")}}function isChat(et){return Array.isArray(et)&&et.every(_e=>"role"in _e&&"content"in _e)}class TextGenerationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt={}){let nt=!1,st=!1,ot;if(typeof _e=="string")ot=_e=[_e];else if(Array.isArray(_e)&&_e.every(ut=>typeof ut=="string"))nt=!0,ot=_e;else{if(isChat(_e))_e=[_e];else if(Array.isArray(_e)&&_e.every(isChat))nt=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");st=!0,ot=_e.map(ut=>this.tokenizer.apply_chat_template(ut,{tokenize:!1,add_generation_prompt:!0}))}const at=tt.add_special_tokens??!1,dt=st?!1:tt.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:ft,attention_mask:ht}=this.tokenizer(ot,{add_special_tokens:at,padding:!0,truncation:!0}),ct=await this.model.generate(ft,tt,null,{inputs_attention_mask:ht});let it=this.tokenizer.batch_decode(ct,{skip_special_tokens:!0}),rt;!dt&&ft.dims.at(-1)>0&&(rt=this.tokenizer.batch_decode(ft,{skip_special_tokens:!0}).map(ut=>ut.length));const lt=Array.from({length:_e.length},ut=>[]);for(let ut=0;ut<it.length;++ut){const pt=Math.floor(ut/ct.length*_e.length);rt&&(it[ut]=it[ut].slice(rt[pt])),lt[pt].push({generated_text:st?[..._e[pt],{role:"assistant",content:it[ut]}]:it[ut]})}return!nt&&lt.length===1?lt[0]:lt}}class ZeroShotClassificationPipeline extends Pipeline{constructor(_e){super(_e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([tt,nt])=>[tt.toLowerCase(),nt])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(_e,tt,{hypothesis_template:nt="This example is {}.",multi_label:st=!1}={}){const ot=Array.isArray(_e);ot||(_e=[_e]),Array.isArray(tt)||(tt=[tt]);const at=tt.map(ht=>nt.replace("{}",ht)),dt=st||tt.length===1,ft=[];for(const ht of _e){const ct=[];for(const lt of at){const ut=this.tokenizer(ht,{text_pair:lt,padding:!0,truncation:!0}),pt=await this.model(ut);dt?ct.push([pt.logits.data[this.contradiction_id],pt.logits.data[this.entailment_id]]):ct.push(pt.logits.data[this.entailment_id])}const rt=(dt?ct.map(lt=>softmax(lt)[1]):softmax(ct)).map((lt,ut)=>[lt,ut]).sort((lt,ut)=>ut[0]-lt[0]);ft.push({sequence:ht,labels:rt.map(lt=>tt[lt[1]]),scores:rt.map(lt=>lt[0])})}return ot?ft:ft[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{pooling:tt="none",normalize:nt=!1,quantize:st=!1,precision:ot="binary"}={}){const at=this.tokenizer(_e,{padding:!0,truncation:!0}),dt=await this.model(at);let ft=dt.last_hidden_state??dt.logits??dt.token_embeddings;if(tt!=="none")if(tt==="mean")ft=mean_pooling(ft,at.attention_mask);else if(tt==="cls")ft=ft.slice(null,0);else throw Error(`Pooling method '${tt}' not supported.`);return nt&&(ft=ft.normalize(2,-1)),st&&(ft=quantize_embeddings(ft,ot)),ft}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{pool:tt=null}={}){const nt=await prepareImages(_e),{pixel_values:st}=await this.processor(nt),ot=await this.model({pixel_values:st});let at;if(tt){if(!("pooler_output"in ot))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");at=ot.pooler_output}else at=ot.last_hidden_state??ot.logits??ot.image_embeds;return at}}class AudioClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{topk:tt=null}={}){const nt=!Array.isArray(_e),st=this.processor.feature_extractor.config.sampling_rate,ot=await prepareAudios(_e,st),at=this.model.config.id2label,dt=[];for(const ft of ot){const ht=await this.processor(ft),it=(await this.model(ht)).logits[0],lt=getTopItems(softmax(it.data),tt).map(ut=>({label:at[ut[0]],score:ut[1]}));tt===1?dt.push(...lt):dt.push(lt)}return!nt||tt===1?dt:dt[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt,{hypothesis_template:nt="This is a sound of {}."}={}){const st=!Array.isArray(_e);st&&(_e=[_e]);const ot=tt.map(ct=>nt.replace("{}",ct)),at=this.tokenizer(ot,{padding:!0,truncation:!0}),dt=this.processor.feature_extractor.config.sampling_rate,ft=await prepareAudios(_e,dt),ht=[];for(const ct of ft){const it=await this.processor(ct),rt=await this.model({...at,...it}),lt=softmax(rt.logits_per_audio.data);ht.push([...lt].map((ut,pt)=>({score:ut,label:tt[pt]})))}return st?ht[0]:ht}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(_e,tt);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(_e,tt);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(_e,tt={}){tt.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),tt.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const nt=!Array.isArray(_e);nt&&(_e=[_e]);const st=this.processor.feature_extractor.config.sampling_rate,ot=await prepareAudios(_e,st),at=[];for(const dt of ot){const ft=await this.processor(dt),ct=(await this.model(ft)).logits[0],it=[];for(const lt of ct)it.push(max(lt.data)[1]);const rt=this.tokenizer.decode(it);at.push({text:rt})}return nt?at[0]:at}async _call_whisper(_e,tt={}){const nt=tt.return_timestamps??!1,st=tt.chunk_length_s??0,ot=tt.chunk_callback??null,at=tt.force_full_sequences??!1;let dt=tt.stride_length_s??null;nt==="word"&&(tt.return_token_timestamps=!0);const ft=pop(tt,"language",null),ht=pop(tt,"task",null);if(ft||ht||nt){if(tt.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const gt=this.tokenizer.get_decoder_prompt_ids({language:ft,task:ht,no_timestamps:!nt});gt.length>0&&(tt.forced_decoder_ids=gt)}const ct=!Array.isArray(_e);ct&&(_e=[_e]);const it=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,rt=this.processor.feature_extractor.config.hop_length,lt=this.processor.feature_extractor.config.sampling_rate,ut=await prepareAudios(_e,lt),pt=[];for(const gt of ut){let mt=[];if(st>0){if(dt===null)dt=st/6;else if(st<=dt)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const wt=lt*st,xt=lt*dt,Tt=wt-2*xt;let St=0;for(;St<gt.length;){const Pt=gt.subarray(St,St+wt),vt=await this.processor(Pt),At=St===0,It=St+Tt>=gt.length;mt.push({stride:[Pt.length,At?0:xt,It?0:xt],input_features:vt.input_features,is_last:It}),St+=Tt}}else mt=[{stride:[gt.length,0,0],input_features:(await this.processor(gt)).input_features,is_last:!0}];for(const wt of mt){tt.num_frames=Math.floor(wt.stride[0]/rt);const xt=await this.model.generate(wt.input_features,tt);nt==="word"?(wt.tokens=xt.sequences[0],wt.token_timestamps=xt.token_timestamps.tolist()[0].map(Tt=>round(Tt,2))):wt.tokens=xt[0],wt.stride=wt.stride.map(Tt=>Tt/lt),ot!==null&&ot(wt)}const[yt,bt]=this.tokenizer._decode_asr(mt,{time_precision:it,return_timestamps:nt,force_full_sequences:at});pt.push({text:yt,...bt})}return ct?pt[0]:pt}}class ImageToTextPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt={}){const nt=Array.isArray(_e),st=await prepareImages(_e),{pixel_values:ot}=await this.processor(st),at=[];for(const dt of ot){dt.dims=[1,...dt.dims];const ft=await this.model.generate(dt,tt),ht=this.tokenizer.batch_decode(ft,{skip_special_tokens:!0}).map(ct=>({generated_text:ct.trim()}));at.push(ht)}return nt?at:at[0]}}class ImageClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{topk:tt=1}={}){const nt=Array.isArray(_e),st=await prepareImages(_e),{pixel_values:ot}=await this.processor(st),at=await this.model({pixel_values:ot}),dt=this.model.config.id2label,ft=[];for(const ht of at.logits){const it=getTopItems(softmax(ht.data),tt).map(rt=>({label:dt[rt[0]],score:rt[1]}));tt===1?ft.push(...it):ft.push(it)}return nt||tt===1?ft:ft[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(_e){super(_e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(_e,{threshold:tt=.5,mask_threshold:nt=.5,overlap_mask_area_threshold:st=.8,label_ids_to_fuse:ot=null,target_sizes:at=null,subtask:dt=null}={}){if(Array.isArray(_e)&&_e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const ht=await prepareImages(_e),ct=ht.map(mt=>[mt.height,mt.width]),{pixel_values:it,pixel_mask:rt}=await this.processor(ht),lt=await this.model({pixel_values:it,pixel_mask:rt});let ut=null;if(dt!==null)ut=this.subtasks_mapping[dt];else for(let[mt,yt]of Object.entries(this.subtasks_mapping))if(yt in this.processor.feature_extractor){ut=this.processor.feature_extractor[yt].bind(this.processor.feature_extractor),dt=mt;break}const pt=this.model.config.id2label,gt=[];if(dt==="panoptic"||dt==="instance"){const mt=ut(lt,tt,nt,st,ot,at??ct)[0],yt=mt.segmentation;for(const bt of mt.segments_info){const wt=new Uint8ClampedArray(yt.data.length);for(let Tt=0;Tt<yt.data.length;++Tt)yt.data[Tt]===bt.id&&(wt[Tt]=255);const xt=new RawImage(wt,yt.dims[1],yt.dims[0],1);gt.push({score:bt.score,label:pt[bt.label_id],mask:xt})}}else if(dt==="semantic"){const{segmentation:mt,labels:yt}=ut(lt,at??ct)[0];for(const bt of yt){const wt=new Uint8ClampedArray(mt.data.length);for(let Tt=0;Tt<mt.data.length;++Tt)mt.data[Tt]===bt&&(wt[Tt]=255);const xt=new RawImage(wt,mt.dims[1],mt.dims[0],1);gt.push({score:null,label:pt[bt],mask:xt})}}else throw Error(`Subtask ${dt} not supported.`);return gt}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt,{hypothesis_template:nt="This is a photo of {}"}={}){const st=Array.isArray(_e),ot=await prepareImages(_e),at=tt.map(rt=>nt.replace("{}",rt)),dt=this.tokenizer(at,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:ft}=await this.processor(ot),ht=await this.model({...dt,pixel_values:ft}),ct=this.model.config.model_type==="siglip"?rt=>rt.sigmoid().data:rt=>softmax(rt.data),it=[];for(const rt of ht.logits_per_image){const ut=[...ct(rt)].map((pt,gt)=>({score:pt,label:tt[gt]}));ut.sort((pt,gt)=>gt.score-pt.score),it.push(ut)}return st?it:it[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,{threshold:tt=.9,percentage:nt=!1}={}){const st=Array.isArray(_e);if(st&&_e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const ot=await prepareImages(_e),at=nt?null:ot.map(lt=>[lt.height,lt.width]),{pixel_values:dt,pixel_mask:ft}=await this.processor(ot),ht=await this.model({pixel_values:dt,pixel_mask:ft}),ct=this.processor.feature_extractor.post_process_object_detection(ht,tt,at),it=this.model.config.id2label,rt=ct.map(lt=>lt.boxes.map((ut,pt)=>({score:lt.scores[pt],label:it[lt.classes[pt]],box:get_bounding_box(ut,!nt)})));return st?rt:rt[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt,{threshold:nt=.1,topk:st=null,percentage:ot=!1}={}){const at=Array.isArray(_e),dt=await prepareImages(_e),ft=this.tokenizer(tt,{padding:!0,truncation:!0}),ht=await this.processor(dt),ct=[];for(let it=0;it<dt.length;++it){const rt=dt[it],lt=ot?null:[[rt.height,rt.width]],ut=ht.pixel_values[it].unsqueeze_(0),pt=await this.model({...ft,pixel_values:ut}),gt=this.processor.feature_extractor.post_process_object_detection(pt,nt,lt,!0)[0];let mt=gt.boxes.map((yt,bt)=>({score:gt.scores[bt],label:tt[gt.classes[bt]],box:get_bounding_box(yt,!ot)})).sort((yt,bt)=>bt.score-yt.score);st!==null&&(mt=mt.slice(0,st)),ct.push(mt)}return at?ct:ct[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e,tt,nt={}){const st=(await prepareImages(_e))[0],{pixel_values:ot}=await this.processor(st),at=`<s_docvqa><s_question>${tt}</s_question><s_answer>`,dt=this.tokenizer(at,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,ft=await this.model.generate(ot,{...nt,decoder_input_ids:dt,max_length:this.model.config.decoder.max_position_embeddings}),ct=this.tokenizer.batch_decode(ft)[0].match(/<s_answer>(.*?)<\/s_answer>/);let it=null;return ct&&ct.length>=2&&(it=ct[1].trim()),[{answer:it}]}}class TextToAudioPipeline extends Pipeline{constructor(tt){super(tt);Qt(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=tt.vocoder??null}async _call(tt,{speaker_embeddings:nt=null}={}){return this.processor?this._call_text_to_spectrogram(tt,{speaker_embeddings:nt}):this._call_text_to_waveform(tt)}async _call_text_to_waveform(tt){const nt=this.tokenizer(tt,{padding:!0,truncation:!0}),{waveform:st}=await this.model(nt),ot=this.model.config.sampling_rate;return{audio:st.data,sampling_rate:ot}}async _call_text_to_spectrogram(tt,{speaker_embeddings:nt}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof nt=="string"||nt instanceof URL)&&(nt=new Float32Array(await(await fetch(nt)).arrayBuffer())),nt instanceof Float32Array)nt=new Tensor("float32",nt,[1,nt.length]);else if(!(nt instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:st}=this.tokenizer(tt,{padding:!0,truncation:!0}),{waveform:ot}=await this.model.generate_speech(st,nt,{vocoder:this.vocoder}),at=this.processor.feature_extractor.config.sampling_rate;return{audio:ot.data,sampling_rate:at}}}class ImageToImagePipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e){const tt=await prepareImages(_e),nt=await this.processor(tt),st=await this.model(nt),ot=[];for(const at of st.reconstruction){const dt=at.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");ot.push(RawImage.fromTensor(dt))}return ot.length>1?ot:ot[0]}}class DepthEstimationPipeline extends Pipeline{constructor(_e){super(_e)}async _call(_e){const tt=await prepareImages(_e),nt=await this.processor(tt),{predicted_depth:st}=await this.model(nt),ot=[];for(let at=0;at<tt.length;++at){const dt=interpolate(st[at],tt[at].size.reverse(),"bilinear",!1),ft=dt.mul_(255/max(dt.data)[0]).to("uint8");ot.push({predicted_depth:st[at],depth:RawImage.fromTensor(ft)})}return ot.length>1?ot:ot[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(et,_e=null,{quantized:tt=!0,progress_callback:nt=null,config:st=null,cache_dir:ot=null,local_files_only:at=!1,revision:dt="main",model_file_name:ft=null}={}){et=TASK_ALIASES[et]??et;const ht=SUPPORTED_TASKS[et.split("_",1)[0]];if(!ht)throw Error(`Unsupported pipeline: ${et}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);_e||(_e=ht.default.model,console.log(`No model specified. Using default model: "${_e}".`));const ct={quantized:tt,progress_callback:nt,config:st,cache_dir:ot,local_files_only:at,revision:dt,model_file_name:ft},it=new Map([["tokenizer",ht.tokenizer],["model",ht.model],["processor",ht.processor]]),rt=await loadItems(it,_e,ct);rt.task=et,dispatchCallback(nt,{status:"ready",task:et,model:_e});const lt=ht.pipeline;return new lt(rt)}async function loadItems(et,_e,tt){const nt=Object.create(null),st=[];for(let[ot,at]of et.entries()){if(!at)continue;let dt;Array.isArray(at)?dt=new Promise(async(ft,ht)=>{let ct;for(let it of at){if(it===null){ft(null);return}try{ft(await it.from_pretrained(_e,tt));return}catch(rt){ct=rt}}ht(ct)}):dt=at.from_pretrained(_e,tt),nt[ot]=dt,st.push(dt)}await Promise.all(st);for(let[ot,at]of Object.entries(nt))nt[ot]=await at;return nt}env$1.allowRemoteModels=!0;env$1.allowLocalModels=!0;class VectorStore{constructor(){this.documents=[],this.embedder=null,this.isInitialized=!1,this.termFrequencies=new Map,this.documentFrequency=new Map,this.documentLengths=new Map,this.averageDocumentLength=0,this.totalDocuments=0,this.k1=1.5,this.b=.75}static getInstance(){return VectorStore.instance||(VectorStore.instance=new VectorStore),VectorStore.instance}async initialize(){if(!this.isInitialized)try{this.embedder=await pipeline("feature-extraction","Xenova/all-MiniLM-L6-v2"),await this.loadContent(),this.buildBM25Index(),this.isInitialized=!0}catch(_e){console.error("Failed to initialize vector store:",_e),await this.loadContent(),this.buildBM25Index(),this.isInitialized=!0}}async loadContent(){this.documents=[];const _e=[{path:"/content/about.md",type:"about",priority:10},{path:"/content/research_details.md",type:"research",priority:9},{path:"/content/publications_detailed.md",type:"publications",priority:8},{path:"/content/skills_expertise.md",type:"skills",priority:7},{path:"/content/experience_detailed.md",type:"experience",priority:8},{path:"/content/statistics.md",type:"statistics",priority:9}];for(const tt of _e)try{const nt=await fetch(tt.path);if(nt.ok){const st=await nt.text();await this.processMarkdownContent(st,tt.type,tt.priority,tt.path)}}catch(nt){console.warn(`Failed to load ${tt.path}:`,nt)}this.addStructuredContent(),this.totalDocuments=this.documents.length}async processMarkdownContent(_e,tt,nt,st){const ot=this.splitIntoSections(_e);for(const at of ot)if(at.content.trim().length>50){const dt={id:`${st}-${Date.now()}-${Math.random()}`,content:at.content,metadata:{source:st,section:at.title,type:tt,priority:nt}};if(this.embedder)try{const ft=await this.generateEmbedding(at.content);dt.embedding=ft}catch(ft){console.warn("Failed to generate embedding for section:",ft)}this.documents.push(dt)}}splitIntoSections(_e){const tt=[],nt=_e.split(`
`);let st={title:"",content:""};for(const ot of nt)ot.startsWith("#")?(st.content.trim()&&tt.push({...st}),st={title:ot.replace(/^#+\s*/,""),content:ot+`
`}):st.content+=ot+`
`;return st.content.trim()&&tt.push(st),tt}async generateEmbedding(_e){if(!this.embedder)throw new Error("Embedder not initialized");const tt=await this.embedder(_e,{pooling:"mean",normalize:!0});return Array.from(tt.data)}addStructuredContent(){const _e=[{section:"Personal Information",content:"Raktim Mondol is a PhD candidate in Computer Science & Engineering at UNSW Sydney. He is a researcher, data scientist, bioinformatician, biostatistician, LLM engineer, and father. His research focuses on deep learning-based prognosis and explainability for breast cancer.",type:"about",priority:10},{section:"Contact Information",content:"Raktim Mondol is located at the School of Computer Science and Engineering, Building K17, UNSW Sydney, NSW 2052. Contact: r.mondol@unsw.edu.au, Phone: +61 412 936 237.",type:"about",priority:10},{section:"Professional Summary",content:"Raktim is an experienced data scientist and programmer with deep expertise in artificial intelligence, generative AI (GenAI) techniques and large language models (LLMs), bioinformatics, computer vision, and high-performance computing. His research and professional background is centered on analyzing large-scale image and biomedical datasets, developing novel deep learning models, and conducting advanced statistical analyses.",type:"about",priority:10}],tt=[{section:"PhD Education",content:`Raktim Mondol is pursuing a PhD in Computer Science & Engineering at UNSW Sydney (2021-2025 Expected). His thesis is on "Deep Learning Based Prognosis and Explainability for Breast Cancer". He completed his MS by Research in Computer Science & Bioinformatics at RMIT University (2017-2019) with High Distinction. His master's thesis was "Deep learning in classifying cancer subtypes, extracting relevant genes and identifying novel mutations".`,type:"education",priority:9}],nt=[{section:"Current Position",content:"Raktim Mondol has been working as a Casual Academic at UNSW since July 2021, conducting laboratory and tutorial classes for Computer Vision, Neural Networks and Deep Learning, and Artificial Intelligence courses.",type:"experience",priority:8},{section:"Teaching Assistant Role",content:"Previously, he was a Teaching Assistant at RMIT University (July 2017 - Oct 2019), conducting laboratory classes for Electronics, Software Engineering Design, Engineering Computing, and Introduction to Embedded Systems.",type:"experience",priority:8},{section:"Lecturer Position",content:"He worked as a full-time Lecturer at World University of Bangladesh (Sep 2013 - Dec 2016), teaching Electrical Circuit I & II, Engineering Materials, Electronics I & II, Digital Logic Design, and supervising student projects and thesis.",type:"experience",priority:8}],st=[{section:"Programming Languages",content:"Raktim is proficient in Python, R, SQL, and LaTeX programming languages.",type:"skills",priority:7},{section:"Deep Learning Frameworks",content:"He has expertise in TensorFlow and PyTorch deep learning frameworks.",type:"skills",priority:7},{section:"Cloud Computing",content:"Raktim has experience with distributed and cloud computing platforms including AWS, GCP, and GALAXY.",type:"skills",priority:7},{section:"LLM and Generative AI",content:"He has expertise in Hugging Face Transformers, LoRA/QLoRA (PEFT), LangChain, OpenAI API/Gemini Pro, GPTQ/GGUF, Prompt Engineering, Agent Development Kit, and RAG Pipelines.",type:"skills",priority:7},{section:"Vector Search and Retrieval",content:"Raktim is skilled in FAISS, BM25/Elasticsearch, ChromaDB/Weaviate, and Milvus for vector search and retrieval systems.",type:"skills",priority:7}],ot=[{section:"LLM Research",content:"Raktim's research focuses on Large Language Models (LLMs) including training, fine-tuning, and evaluating LLMs using parameter-efficient techniques like LoRA and QLoRA, with applications in retrieval-augmented generation, summarisation, and multi-hop reasoning.",type:"research",priority:9},{section:"Agentic AI Research",content:"He works on Agentic AI & Multi-Agent Systems, designing autonomous, tool-using agents for reasoning, planning, and collaboration using frameworks like the Agent Development Kit.",type:"research",priority:9},{section:"RAG Research",content:"His expertise includes Retrieval-Augmented Generation (RAG), building hybrid search and generation pipelines integrating semantic and keyword-based retrieval.",type:"research",priority:9}],at=[{section:"BioFusionNet Publication",content:'"BioFusionNet: Deep Learning-Based Survival Risk Stratification in ER+ Breast Cancer Through Multifeature and Multimodal Data Fusion" published in IEEE Journal of Biomedical and Health Informatics (2024).',type:"publications",priority:8},{section:"hist2RNA Publication",content:'"hist2RNA: An Efficient Deep Learning Architecture to Predict Gene Expression from Breast Cancer Histopathology Images" published in Cancers journal (2023).',type:"publications",priority:8},{section:"AFExNet Publication",content:'"AFExNet: An Adversarial Autoencoder for Differentiating Breast Cancer Sub-types and Extracting Biologically Relevant Genes" published in IEEE/ACM Transactions on Computational Biology and Bioinformatics (2021).',type:"publications",priority:8}],dt=[{section:"Statistical Expertise Overview",content:"Raktim Mondol demonstrates exceptional proficiency in advanced statistical methods and machine learning techniques, with particular expertise in biomedical data analysis, survival modeling, and multimodal data fusion. His research contributions span multiple domains of statistical application, showcasing both theoretical innovation and practical implementation excellence.",type:"statistics",priority:9},{section:"Survival Analysis & Biostatistics",content:"Raktim has developed sophisticated expertise in survival analysis, particularly through his implementation of weighted Cox proportional hazards models with custom loss functions specifically designed for imbalanced survival data. His BioFusionNet work achieved a mean concordance index of 0.77 and time-dependent area under the curve of 0.84, demonstrating superior predictive performance with hazard ratios showing statistical significance (HR: 2.99, 95% CI: 1.88-4.78, p < 0.005).",type:"statistics",priority:9},{section:"Advanced Machine Learning Statistics",content:"His deep learning expertise includes three major architectural innovations: AFExNet (adversarial autoencoder for genomic data), BioFusionNet (multimodal fusion framework), and hist2RNA (gene expression prediction). These demonstrate advanced statistical validation methodologies including comprehensive evaluation across multiple algorithms, cross-validation frameworks, and external validation on independent datasets.",type:"statistics",priority:9},{section:"Classification & Regression Methodologies",content:"Raktim employs comprehensive evaluation methodology across multiple algorithms including Support Vector Machines, Random Forest, XGBoost, Gradient Boosting, and Neural Networks. His regression analysis expertise encompasses multivariate regression modeling, Cox proportional hazards regression with custom implementations, and multinomial logistic regression for multi-class classification problems.",type:"statistics",priority:9}],ft=[],ht=[..._e,...tt,...nt,...st,...ot,...at,...dt,...ft];for(const ct of ht){const it={id:`structured-${Date.now()}-${Math.random()}`,content:ct.content,metadata:{source:"structured-content",section:ct.section,type:ct.type,priority:ct.priority}};this.documents.push(it)}}buildBM25Index(){this.termFrequencies.clear(),this.documentFrequency.clear(),this.documentLengths.clear();let _e=0;for(const tt of this.documents){const nt=this.tokenize(tt.content),st=new Map,ot=new Set;for(const at of nt)st.set(at,(st.get(at)||0)+1),ot.add(at);this.documentLengths.set(tt.id,nt.length),this.termFrequencies.set(tt.id,st),_e+=nt.length;for(const at of ot)this.documentFrequency.set(at,(this.documentFrequency.get(at)||0)+1)}this.averageDocumentLength=_e/this.totalDocuments}tokenize(_e){return _e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(tt=>tt.length>2).filter(tt=>!this.isStopWord(tt))}isStopWord(_e){return new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","from","up","out","down","off","over","under","again","further","then","once"]).has(_e)}calculateBM25Score(_e,tt){var ht;const nt=((ht=this.termFrequencies.get(tt))==null?void 0:ht.get(_e))||0;if(nt===0)return 0;const st=this.documentLengths.get(tt)||0,ot=this.documentFrequency.get(_e)||1,at=Math.log((this.totalDocuments-ot+.5)/(ot+.5)),dt=nt*(this.k1+1),ft=nt+this.k1*(1-this.b+this.b*(st/this.averageDocumentLength));return at*(dt/ft)}async search(_e,tt=5){this.isInitialized||await this.initialize();try{const nt=await this.vectorSearch(_e,tt),st=await this.bm25Search(_e,tt);return this.combineResults(nt,st,tt)}catch(nt){console.error("Error in hybrid search:",nt);try{return await this.bm25Search(_e,tt)}catch(st){return console.error("BM25 search also failed:",st),[]}}}async vectorSearch(_e,tt){if(!this.embedder)return[];try{const nt=await this.generateEmbedding(_e),st=[];for(const ot of this.documents)if(ot.embedding){const at=this.cosineSimilarity(nt,ot.embedding);st.push({document:ot,score:at,searchType:"vector"})}return st.sort((ot,at)=>{const dt=at.score-ot.score;return Math.abs(dt)<.05?at.document.metadata.priority-ot.document.metadata.priority:dt}),st.slice(0,tt)}catch(nt){return console.error("Vector search failed:",nt),[]}}async bm25Search(_e,tt){const nt=this.tokenize(_e),st=[];for(const ot of this.documents){let at=0;for(const dt of nt)at+=this.calculateBM25Score(dt,ot.id);if(at>0){const dt=1+ot.metadata.priority/50,ft=at*dt;st.push({document:ot,score:ft,searchType:"bm25"})}}return st.sort((ot,at)=>at.score-ot.score),st.slice(0,tt)}combineResults(_e,tt,nt){const st=new Map,ot=Array.isArray(_e)?_e:[],at=Array.isArray(tt)?tt:[],dt=ot.length>0?Math.max(...ot.map(ct=>ct.score)):1,ft=at.length>0?Math.max(...at.map(ct=>ct.score)):1;for(const ct of ot){const rt=ct.score/dt*.6;st.set(ct.document.id,{...ct,score:rt,searchType:"vector"})}for(const ct of at){const rt=ct.score/ft*.8,lt=st.get(ct.document.id);if(lt){const ut=(lt.score+rt)/2;lt.score=ut,lt.searchType="hybrid"}else st.set(ct.document.id,{...ct,score:rt,searchType:"bm25"})}const ht=Array.from(st.values());return ht.sort((ct,it)=>{const rt=ct.document.metadata.priority/200,lt=it.document.metadata.priority/200,ut=ct.score+rt;return it.score+lt-ut}),ht.slice(0,nt)}cosineSimilarity(_e,tt){if(_e.length!==tt.length)return 0;let nt=0,st=0,ot=0;for(let at=0;at<_e.length;at++)nt+=_e[at]*tt[at],st+=_e[at]*_e[at],ot+=tt[at]*tt[at];return st===0||ot===0?0:nt/(Math.sqrt(st)*Math.sqrt(ot))}getDocumentCount(){return this.documents.length}getDocumentsByType(_e){return this.documents.filter(tt=>tt.metadata.type===_e)}getDocumentTypeDistribution(){const _e={};for(const tt of this.documents){const nt=tt.metadata.type;_e[nt]=(_e[nt]||0)+1}return _e}getSearchStats(){const _e=this.documents.filter(nt=>nt.embedding).length,tt=[];return this.embedder&&_e>0&&tt.push("Vector Search"),this.documentFrequency.size>0&&tt.push("BM25 Search"),tt.length===2&&tt.push("Hybrid Search"),{totalDocuments:this.documents.length,uniqueTerms:this.documentFrequency.size,hasEmbeddings:_e,searchCapabilities:tt,averageDocLength:Math.round(this.averageDocumentLength),bm25Parameters:{k1:this.k1,b:this.b}}}}class RAGService{constructor(){this.openai=null,this.apiKey=null,this.vectorStore=VectorStore.getInstance(),this.apiKey=this.getApiKey(),this.apiKey&&(this.openai=new OpenAI({baseURL:"https://api.deepseek.com",apiKey:this.apiKey,dangerouslyAllowBrowser:!0}),this.initializeVectorStore())}async initializeVectorStore(){try{await this.vectorStore.initialize()}catch(_e){console.error("Failed to initialize vector store:",_e)}}getApiKey(){return null}hasApiKey(){return!!this.apiKey}async retrieveRelevantContent(_e){try{return await this.vectorStore.search(_e,10)}catch(tt){return console.error("Error in hybrid content retrieval:",tt),[]}}buildContext(_e){return _e.length===0?"No specific information found. Please provide general information about Raktim Mondol based on your knowledge.":_e.slice(0,8).map((ot,at)=>{const dt=ot.document,ft=dt.metadata.section?`[${dt.metadata.section}]`:`[${dt.metadata.type}]`,ht=ot.searchType==="hybrid"?"(Vector+BM25)":ot.searchType==="vector"?"(Semantic)":"(BM25)";return`${ft} ${ht}
${dt.content.trim()}`}).join(`

---

`)}stripMarkdown(_e){return _e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/^#{1,6}\s+/gm,"").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/^\s*[-*+]\s+/gm,"- ").replace(/^\s*\d+\.\s+/gm,"").replace(/\n{3,}/g,`

`).trim()}async generateResponse(_e,tt=[]){var nt,st;if(!this.apiKey||!this.openai)return"The chatbot is currently unavailable. Please ensure the VITE_DEEPSEEK_API_KEY environment variable is properly configured in your Netlify deployment settings.";try{const ot=await this.retrieveRelevantContent(_e),dt=[{role:"system",content:`You are RAGtim Bot, a knowledgeable assistant that answers questions about Raktim Mondol using advanced hybrid search technology that combines semantic vector search with BM25 ranking for comprehensive and accurate information retrieval.

CRITICAL FORMATTING INSTRUCTIONS - ABSOLUTELY NO MARKDOWN:
- NEVER use any markdown formatting in your responses under any circumstances
- Do NOT use asterisks (*), hashtags (#), backticks (\`), underscores (_), or any other markdown syntax
- Do NOT use **bold**, *italic*, __underline__, or any other markdown formatting
- Write in plain English text only using simple punctuation like periods, commas, and colons
- For emphasis, use capital letters or repeat words naturally (e.g., "VERY important" or "really really good")
- When listing items, use simple dashes (-) or numbers (1, 2, 3) followed by a space
- Write as if you're speaking naturally in a conversation
- Do NOT format titles, headings, or any text with special characters
- Keep all text as plain, readable sentences without any special formatting
- Even if previous messages in the conversation used markdown, you must NEVER use markdown
- This rule applies to ALL responses, including follow-up questions and continued conversations

RESPONSE GUIDELINES:
- Always answer based on the provided context about Raktim Mondol
- Be conversational, friendly, and professional
- Provide detailed and informative responses when relevant information is available
- If asked about something not in the context, politely say you don't have that specific information
- You can refer to Raktim in first person (as "I") or third person, whichever feels more natural
- If someone asks general questions like "hello" or "how are you", respond as Raktim's representative
- When discussing technical topics, provide appropriate level of detail
- Include specific examples, achievements, or details when available in the context
- Synthesize information from multiple sources when relevant
- Use natural language flow without any special formatting whatsoever

SEARCH TECHNOLOGY:
The context below was retrieved using advanced hybrid search combining:
1. Vector Search: Semantic understanding using transformer embeddings for conceptual similarity
2. BM25 Search: Advanced keyword ranking with term frequency and document length normalization
3. Priority Weighting: Content importance based on document metadata and relevance scores

This dual approach ensures you receive the most relevant and comprehensive information about Raktim Mondol, capturing both semantic meaning and exact keyword matches.

CONTEXT ABOUT RAKTIM MONDOL:
${this.buildContext(ot)}

Remember to be helpful and provide comprehensive answers based on the rich context provided above, but always respond in plain text without any markdown formatting whatsoever, regardless of how previous messages were formatted.`}];tt.slice(-6).forEach(it=>{const rt=it.role==="assistant"?this.stripMarkdown(it.content):it.content;dt.push({role:it.role,content:rt})}),dt.push({role:"user",content:_e});const ct=((st=(nt=(await this.openai.chat.completions.create({messages:dt,model:"deepseek-chat",max_tokens:1e3,temperature:.7,top_p:.9})).choices[0])==null?void 0:nt.message)==null?void 0:st.content)||"I apologize, but I couldn't generate a response. Please try again.";return this.stripMarkdown(ct)}catch(ot){if(console.error("Error generating response:",ot),ot instanceof Error){if(ot.message.includes("API key")||ot.message.includes("401")||ot.message.includes("Authentication"))return"The API key appears to be invalid or missing. Please contact the site administrator to configure the VITE_DEEPSEEK_API_KEY environment variable in Netlify.";if(ot.message.includes("network")||ot.message.includes("fetch"))return"Network error occurred. Please check your internet connection and try again."}return"I apologize, but I'm experiencing technical difficulties. Please try again later."}}async getKnowledgeBaseStats(){await this.vectorStore.initialize();const _e=this.vectorStore.getSearchStats(),tt=this.vectorStore.getDocumentCount(),nt=this.vectorStore.getDocumentTypeDistribution();return{totalDocuments:tt,documentsByType:nt,isVectorSearchEnabled:_e.searchCapabilities.includes("Vector Search"),searchCapabilities:_e.searchCapabilities,uniqueTerms:_e.uniqueTerms,hasEmbeddings:_e.hasEmbeddings,averageDocLength:_e.averageDocLength,bm25Parameters:_e.bm25Parameters}}}function RAGtimBot(){var St,Pt;const[et,_e]=reactExports.useState(!1),[tt,nt]=reactExports.useState([]),[st,ot]=reactExports.useState(""),[at,dt]=reactExports.useState(!1),[ft]=reactExports.useState(()=>new RAGService),[ht,ct]=reactExports.useState(!1),[it,rt]=reactExports.useState(null),lt=reactExports.useRef(null),ut=reactExports.useRef(null);reactExports.useEffect(()=>{if(ft.hasApiKey()){const vt={id:Date.now().toString(),role:"assistant",content:"Hello! I'm RAGtim Bot, your enhanced AI assistant powered by advanced hybrid search technology. I combine semantic vector search with BM25 ranking to provide comprehensive and accurate answers about Raktim Mondol. I can provide detailed information about his education, research, publications, skills, experience, and more. What would you like to know?",timestamp:new Date};nt([vt])}else{const vt={id:Date.now().toString(),role:"assistant",content:"⚠️ The chatbot is currently unavailable. The API key needs to be configured in the Netlify environment variables. Please contact the site administrator.",timestamp:new Date};nt([vt])}},[ft]),reactExports.useEffect(()=>{pt()},[tt]),reactExports.useEffect(()=>{et&&ut.current&&ut.current.focus()},[et]);const pt=()=>{var vt;(vt=lt.current)==null||vt.scrollIntoView({behavior:"smooth"})},gt=async()=>{try{const vt=await ft.getKnowledgeBaseStats();rt(vt)}catch(vt){console.error("Failed to load knowledge base stats:",vt)}},mt=async()=>{if(!st.trim())return;if(!ft.hasApiKey()){_t.error("The chatbot is currently unavailable. Please contact the site administrator.");return}const vt={id:Date.now().toString(),role:"user",content:st.trim(),timestamp:new Date};nt(At=>[...At,vt]),ot(""),dt(!0);try{const At=await ft.generateResponse(vt.content,tt),It={id:(Date.now()+1).toString(),role:"assistant",content:At,timestamp:new Date};nt(jt=>[...jt,It])}catch(At){console.error("Error sending message:",At),_t.error("Failed to send message. Please try again.");const It={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I encountered an error while processing your request. Please try again.",timestamp:new Date};nt(jt=>[...jt,It])}finally{dt(!1)}},yt=vt=>{vt.key==="Enter"&&!vt.shiftKey&&(vt.preventDefault(),mt())},bt=()=>{nt([]),_t.success("Chat cleared!")},wt=async()=>{!ht&&!it&&await gt(),ct(!ht)},xt=vt=>vt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Tt=ft.hasApiKey();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:!et&&jsxRuntimeExports.jsxs("button",{onClick:()=>_e(!0),className:`${Tt?"bg-[#94c973] hover:bg-[#7fb95e]":"bg-red-500 hover:bg-red-600"} text-white rounded-2xl p-4 shadow-lg transition-all duration-300 hover:scale-110 group relative`,"aria-label":"Open RAGtim Bot",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6"}),jsxRuntimeExports.jsx("div",{className:`absolute -top-2 -left-3 text-xl z-10 ${Tt?"":"opacity-75"}`,style:{animation:Tt?"bounce 1s infinite, flash 2s infinite":"none"},children:Tt?jsxRuntimeExports.jsx("span",{children:"🔥"}):jsxRuntimeExports.jsx("span",{className:"text-red-300 text-lg",children:"⚠️"})})]})}),et&&jsxRuntimeExports.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white dark:bg-gray-900 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 z-50 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 ${Tt?"bg-[#94c973]":"bg-red-500"} text-white rounded-t-lg`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold flex items-center",children:["RAGtim Bot",Tt?jsxRuntimeExports.jsx(Shield,{className:"h-3 w-3 ml-1\\",title:"Hybrid Search Enabled"}):jsxRuntimeExports.jsx(AlertCircle,{className:"h-3 w-3 ml-1\\",title:"Configuration needed"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-90",children:Tt?"Hybrid Search: Semantic + Keyword":"Configuration needed"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[Tt&&jsxRuntimeExports.jsx("button",{onClick:wt,className:"p-1 hover:bg-white/20 rounded transition-colors text-xs px-2 py-1",title:"Knowledge base stats",children:jsxRuntimeExports.jsx(BarChart3,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx("button",{onClick:bt,className:"p-1 hover:bg-white/20 rounded transition-colors text-xs px-2 py-1",title:"Clear chat",children:"Clear"}),jsxRuntimeExports.jsx("button",{onClick:()=>_e(!1),className:"p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Close chat",children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})})]})]}),ht&&it&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 mr-1"}),"Hybrid Search System"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:["Documents: ",it.totalDocuments]}),jsxRuntimeExports.jsxs("div",{children:["Unique Terms: ",it.uniqueTerms]}),jsxRuntimeExports.jsxs("div",{children:["Embeddings: ",it.hasEmbeddings]}),jsxRuntimeExports.jsxs("div",{children:["Avg Doc Length: ",it.averageDocLength," words"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["BM25: k1=",(St=it.bm25Parameters)==null?void 0:St.k1,", b=",(Pt=it.bm25Parameters)==null?void 0:Pt.b]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:it.searchCapabilities.map(vt=>jsxRuntimeExports.jsx("span",{className:"bg-[#94c973]/20 text-[#94c973] px-2 py-1 rounded text-xs",children:vt},vt))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[tt.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:Tt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Advanced hybrid RAG system ready! Ask me anything about Raktim Mondol."}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-2 opacity-70",children:"Powered by Vector + BM25 search for precise answers."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertCircle,{className:"h-12 w-12 mx-auto mb-4 opacity-50 text-red-500"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"The chatbot is currently unavailable."}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-2 opacity-70",children:"API key needs to be configured in Netlify environment variables."})]})}),tt.map(vt=>jsxRuntimeExports.jsx("div",{className:`flex ${vt.role==="user"?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[85%] p-3 rounded-lg ${vt.role==="user"?"bg-[#94c973] text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white"}`,children:[jsxRuntimeExports.jsx("p",{className:"text-sm whitespace-pre-wrap",children:vt.content}),jsxRuntimeExports.jsx("p",{className:`text-xs mt-1 opacity-70 ${vt.role==="user"?"text-white/70":"text-gray-500 dark:text-gray-400"}`,children:xt(vt.timestamp)})]})},vt.id)),at&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),jsxRuntimeExports.jsx("div",{ref:lt})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{ref:ut,type:"text",value:st,onChange:vt=>ot(vt.target.value),onKeyPress:yt,placeholder:Tt?"Ask about Raktim's research, skills, experience...":"Chatbot unavailable",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#94c973] focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",disabled:at||!Tt}),jsxRuntimeExports.jsx("button",{onClick:mt,disabled:at||!st.trim()||!Tt,className:"px-3 py-2 bg-[#94c973] text-white rounded-lg hover:bg-[#7fb95e] disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Send message",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]}),jsxRuntimeExports.jsx("style",{jsx:!0,children:`
        @keyframes flash {
          0%, 50% { opacity: 1; }
          25%, 75% { opacity: 0.3; }
        }
      `})]})}function App(){return jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(AudioProvider,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200",children:[jsxRuntimeExports.jsx(ScrollProgress,{}),jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"pt-16",children:[jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsx(Education,{}),jsxRuntimeExports.jsx(Experience,{}),jsxRuntimeExports.jsx(Skills,{}),jsxRuntimeExports.jsx(Research,{}),jsxRuntimeExports.jsx(Publications,{}),jsxRuntimeExports.jsx(Awards,{}),jsxRuntimeExports.jsx(Contact,{})]}),jsxRuntimeExports.jsx(RAGtimBot,{})]})})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
